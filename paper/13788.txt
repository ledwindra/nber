NBER WORKING PAPER SERIES

ON BEST-RESPONSE BIDDING IN GSP AUCTIONS
Matthew Cary
Aparna Das
Benjamin Edelman
Ioannis Giotis
Kurtis Heimerl
Anna R. Karlin
Claire Mathieu
Michael Schwarz
Working Paper 13788
http://www.nber.org/papers/w13788

NATIONAL BUREAU OF ECONOMIC RESEARCH
1050 Massachusetts Avenue
Cambridge, MA 02138
February 2008

We thank Michael Ostrovsky, David Parkes, Al Roth, and Sergei Severinov. The views expressed
herein are those of the author(s) and do not necessarily reflect the views of the National Bureau of
Economic Research.
NBER working papers are circulated for discussion and comment purposes. They have not been peerreviewed or been subject to the review by the NBER Board of Directors that accompanies official
NBER publications.
© 2008 by Matthew Cary, Aparna Das, Benjamin Edelman, Ioannis Giotis, Kurtis Heimerl, Anna
R. Karlin, Claire Mathieu, and Michael Schwarz. All rights reserved. Short sections of text, not to
exceed two paragraphs, may be quoted without explicit permission provided that full credit, including
© notice, is given to the source.

On Best-Response Bidding in GSP Auctions
Matthew Cary , Aparna Das, Benjamin Edelman , Ioannis Giotis , Kurtis Heimerl , Anna R.
Karlin , Claire Mathieu , and Michael Schwarz
NBER Working Paper No. 13788
February 2008
JEL No. C15,D44,L86,M37
ABSTRACT
How should players bid in keyword auctions such as those used by Google, Yahoo! and MSN? We
model ad auctions as a dynamic game of incomplete information, so we can study the convergence
and robustness properties of various strategies. In particular, we consider best-response bidding strategies
for a repeated auction on a single keyword, where in each round, each player chooses some optimal
bid for the next round, assuming that the other players merely repeat their previous bids. We focus
on a strategy we call Balanced Bidding (bb). If all players use the bb strategy, we show that bids converge
to a bid vector that obtains in a complete information static model proposed by Edelman, Ostrovsky
and Schwarz (2007). We prove that convergence occurs with probability 1, and we compute the expected
time until convergence.

Matthew Cary
University of Washington
Seattle, WA 98195
cary@cs.washington.edu
Aparna Das
Brown University
Computer Science Department
Box 1910
Providence, RI 02912
aparna@cs.brown.edu
Benjamin Edelman
Harvard Business School
Baker Library 445
Soldiers Field
Boston, Massachusetts 02163
bedelman@fas.harvard.edu
Ioannis Giotis
University of Washington
Department of Computer Science
and Engineering
Seattle, WA 98195
giotis@cs.washington.edu

Kurtis Heimerl
University of Washington
Department of Computer Science
and Engineering
Seattle, WA 98195
heimerl@cs.washington.edu
Anna R. Karlin
University of Washington
Department of Computer Science
and Engineering
Box 352350
Seattle, WA 98195
karlin@cs.washington.edu
Claire Mathieu
Brown University
Computer Science Department
Box 1910
Providence, RI 02912
claire@cs.brown.edu
Michael Schwarz
Yahoo Research
1950 University Avenue
and NBER
mschwarz@yahoo-inc.com

On Best-Response Bidding in GSP Auctions
Matthew Cary1 , Aparna Das2 , Benjamin Edelman3 ,
Ioannis Giotis1 , Kurtis Heimerl1 , Anna R. Karlin1 ,
Claire Mathieu2 , and Michael Schwarz4 ∗
January 25, 2008

Abstract
How should players bid in keyword auctions such as those used by
Google, Yahoo! and MSN? We model ad auctions as a dynamic game of
incomplete information, so we can study the convergence and robustness
properties of various strategies. In particular, we consider best-response
bidding strategies for a repeated auction on a single keyword, where in
each round, each player chooses some optimal bid for the next round,
assuming that the other players merely repeat their previous bids. We
focus on a strategy we call Balanced Bidding (bb). If all players use the
bb strategy, we show that bids converge to a bid vector that obtains in
a complete information static model proposed by Edelman et al. [4]. We
prove that convergence occurs with probability 1, and we compute the
expected time until convergence.

Keywords: Keyword auctions, bidding strategies, convergence
JEL classification: C72, D44

1

Introduction

Pay-per-click search engine advertising is an appealing approach to matching
ads to users, and it is a major source of revenue for leading search engines
such as Google and Yahoo!. Search engines typically show two sets of results
in response to a user’s search: the links the search engine has deemed relevant
to the search (“organic results”), along with paid advertisements known as
sponsored links. From the advertiser’s perspective, this approach offers a great
benefit: each advertiser can precisely target its ads based on each user’s search
terms. For example, if a travel agent “buys” the search term “Tahiti”, then a
user searching for the word “Tahiti” might be shown a link to that travel agent’s
∗ We

thank Michael Ostrovsky, David Parkes, Al Roth, and Sergei Severinov.

Author Affiliations: 1 - University of Washington, 2 - Brown University, 3 - Harvard Business
School, 4 - Yahoo! Research

1

web site, featuring plane tickets to Tahiti. The advertiser pays the search engine
for each click on the advertiser’s ad.
Keyword auctions determine which ads get assigned to which keywords and
how much each advertiser pays. Advertisers choose which keywords to target
and how much to bid. For each keyword of interest, an advertiser submits a
bid stating the maximum amount the advertiser is willing to pay for a click.
When a user searches for that keyword, an instantaneous auction determines
which advertisers (among those currently bidding on that keyword) will receive
advertising slots and how much each advertiser will pay for a click.
In principle, keyword engines could allocate ad slots using a multi-unit auction that causes truthful bidding, i.e. the Vickrey-Clarke-Groves (“VCG”) mechanism [14, 2, 6]. Under VCG, it would be in the best interest of each participating advertiser to bid its true valuation. But in practice, no search engine uses
the VCG mechanism. Rather, the most widely used keyword auction mechanism is the non-truthful Generalized Second Price (“GSP”) auction described
in Section 2.
Because the GSP mechanism is not truthful, participating advertisers are
forced to undertake the complicated task of choosing a bidding strategy. Asdemir [1] and Edelman et al. [3] observe that standard sponsored search mechanisms can produce instability and bidding wars. Bidding strategies are particularly complex because typical search pages have room for multiple sponsored
links. The position of a given sponsored link affects the chance that the link will
be clicked, so the various advertising slots differ in their desirability to advertisers. Advertisers’ utilities are therefore a discontinuous function of their bids.
The complex bidding environment causes many advertisers to hire campaign
optimization specialists to manage their bidding, often at significant cost.
Advertisers may submit updated bids whenever they like. Although these
updates are often made using software robots [8], there are practical limits to
how frequently an advertiser can update his bid. For example, there is a random
delay between an advertiser’s submission of an updated bid and the time that
the updated bid is accepted by the system for use in subsequent auctions for a
given keyword. For modeling purposes, we assume that exactly one randomly
chosen advertiser gets to update his bid in each period, and that he knows the
current bids of all other advertisers when he updates his bid.

1.1

Our Contribution

In this paper, we explore a natural class of best-response bidding strategies an
advertiser (or his software robot) might use in a repeated keyword auction for
a given search term. When an advertiser gets an opportunity to revise his bid,
a natural myopic strategy is to play a best response to the current bids of other
players.
The myopic best-response strategy masks substantial flexibility. Suppose
that, given the last-period bids of the other bidders, some advertiser A prefers
advertisement slot s at price ps because s offers the advertiser higher profit than
other slots. (Other slots would either provide fewer clicks or require a higher
2

payment per click.) Suppose further that the price of the (next-higher clickthrough rate) slot s−1 is ps−1 . The GSP mechanism allows a range of bid values
that will result in the same outcome from A’s perspective. (Namely, any bid
between ps and ps−1 will still get A the same slot s.) What specific bid should
A choose? We focus on a particular choice in this range, Balanced Bidding (bb).
Under bb, the advertiser chooses his next bid b so as to be indifferent between
successfully winning the targeted slot s at price ps , or winning the slightly more
desirable slot s − 1 at price b. The dynamic system in which all players bid
according to bb has a unique fixed point at a Nash equilibrium strategy profile
B* of the static game. At this point, advertisers’ payments to the search engine
are identical to payments under the VCG mechanism. (See Proposition 1.)
Our main result is that if a randomly chosen player updates his bid each
round (according to the bb strategy), then bb bidding converges to the Nash
bid vector B* with probability 1. (See Theorem 2.) We also estimate the average
time required for convergence.
The Nash equilibria of the sponsored search static game have been understood for some time [4, 13, 9]. But it was not previously known whether there
existed a natural bidding strategy in a dynamic game that would lead to these
Nash equilibria. Our results show how players in a dynamic Bayesian game
can use a best-response strategy to get to the equilibria of the static game of
complete information.
By estimating convergence time of bb we combine the economics literature’s
analysis of bidding strategies with the attention to convergence time more common in computer science.

1.2

Relation to the Literature

Sponsored search is an intrinsically dynamic game where bidders can change
their bids and learn about others’ values from the history of bid changes. However, the literature has largely modeled this game as a static game. In this
context, [4] and [13] independently arrived at the same equilibrium characterization of the ad auction. According to their characterization, equilibrium bids
are given by the recursive formula in Equation (1). Recent papers [4, 13, 9]
assume that a static model of complete information captures the essence of the
dynamic environment of ad auctions. But [13] does not offer a mechanism by
which the dynamic game converges to the proposed equilibrium of the static
game, and [4] offers a generalized English auction that captures the dynamic
nature of the game with a highly stylized ascending clock design. These papers
do not not explain how the equilibria of the complete information static game
might be reached in a truly dynamic incomplete information setting.
In general, characterizing equilibria of dynamic games of incomplete information is difficult or intractable. Dynamic games of incomplete information
are therefore routinely modeled as simple static games. For instance, studies
of price competition in airlines [10] and gasoline pricing [7] are often based on
static models even though these environments are clearly not static. Little is
known about when the equilibria of static models are useful approximations of
3

the equilibria of a dynamic game of incomplete information. This paper shows
that in the case of ad auctions, there is a myopic best-response strategy for
players of the dynamic game that converges to an equilibrium B* of the static
model.
The literature most closely related to this paper is that on best response
dynamics. Best response dynamics studies the type of strategies that we consider, in which each agent plays a best response to what it encountered in the
previous round (or rounds). It is well know that in wide classes of games, best
response dynamics converge to a Nash Equilibrium of a one-shot game. For
example, [12] shows that in “potential games,” if agents play best responses to
actions observed in the previous round, then the process converges to a Nash
Equilibrium. However, the GSP auction is not a potential game.
Our work builds on the “weakly acyclic” notion introduced by [15] in a
study of the evolution of conventions. We show that GSP is “weakly acyclic”,
as defined by [15], i.e., that for any starting set of player bids, there is an
ordering of the players, such that letting those players in that order play a best
response leads to the desired Nash equilibrium. This result is a key component
of our proof of convergence.

2

Model and Definitions

The following model captures the essential features of sponsored search auctions.
A keyword auction is defined by:
 A set of k slots with click-through rates θ1 > . . . > θk , where θi is the
probability that the user clicks on the advertisement in slot i.
 A set of n players (advertisers) participating in the auction, each with a
private valuation vi for a click, v1 > . . . > vn .
 With knowledge of the mechanism and of their own private valuations,
each player submits a bid to the auction. We denote player i’s bid by bi .
 The mechanism:

– computes an allocation π of the k slots to k different players: πs is
the identity of the player that is allocated slot s.
– charges a price ps to the player πs for each click on his advertisement.
 If player i is allocated slot s at price ps , player i’s expected utility is
θs (vi − ps ).

The generalized second price auction is the most common mechanism in use,
including at both Google and Yahoo!.
Definition 1 The generalized second price mechanism (GSP) for keyword auctions uses the following allocation and payment rules:
4

 Players are allocated slots in decreasing order of bids.1
 For each slot s, the payment ps of player πs is bπs+1 .
Players who do not win a slot make no payment and gain no utility.
When modeled as static game of complete information, GSP has a continuum of Nash equilibria that are well understood. See [4, 13, 9]. One of these
equilibria results in player payments identical to those that would be made if
the mechanism being employed was VCG. This equilibrium is also attractive as
it is the cheapest envy-free equilibrium from the advertisers’ point of view. In
that equilibrium, bids follow a recursive formula:

for i = 1,
 > b2
θi
vi − θi−1 (vi − bi+1 ) for 2 ≤ i ≤ k,
(1)
bi =

vi
for k < i ≤ n.
The highest-value bidder’s bid, b1 , is unidentified because any bid b1 > b2 will
suffice to obtain the highest position.
We call this Nash equilibrium of GSP the VCG equilibrium of GSP, and we
refer to this vector of bids as the equilibrium of the static game B*.2
We consider a repeated keyword auction with a fixed set of n players and k
slots. The participants in the repeated auction have the opportunity to update
their bids between successive rounds. How should players bid? Naturally, a
player’s ultimate objective is to maximize his own expected utility over multiple
rounds of the auction. However, it is difficult for one player to make predictions
about the future bids – information necessary to choose an optimal bidding
strategy. With limited information, a natural approach is to assume that the
immediate past is the best predictor of the future. This leads to a bidding
scheme where a player assumes that others’ bids will remain fixed in the next
round. Under this assumption, the rational choice for a player j is to bid so as
to win a slot s that maximizes his utility uj = θs (vj − ps ). This approach offers
the following definition.
Definition 2 Best-Response Bidding Strategies
A best-response bidding strategy for a player j is to choose a bid for the
next round of a repeated keyword auction round so as to maximize his utility uj ,
assuming the next-round bids of all other players b−j will remain fixed at their
values in the previous round.
1 At modern search engines, there is also a “relevance” or per-advertiser click-through
rate ri associated with each advertiser i, and bidders are actually ranked (assigned slots) in
decreasing order of ranking score, where the ranking score of bidder i is bi ri . For notational
simplicity, we assume ri = 1 for all i. [4] shows that our results extend to the case of arbitrary
ri values.
2 There are multiple Nash equilibria in the static game. However, [13] suggests that the
equilibrium given by this formula is the most plausible, and [4] proposes a model where this
equilibrium is a unique outcome.

5

Given b−j , denote by ps (j) the payment player j would make if he bids so
as to win slot s. Let s∗ be the slot the best-response bidder j will target. Then
if player j is a best-responder, he will bid b0 ∈ (ps∗ (j), ps∗ −1 (j)). Notice that
b0 is not fully specified: b0 is a range rather than a single point. Definition 2
therefore defines a class of strategies that are distinguished by the choice of b0
within the allowed range.
What bid should player j choose within the b0 range? Suppose j chooses a
bid towards the high end of the range, thus forcing a higher price for slot s∗ − 1.
Then the player above may retaliate by slightly underbidding j – effectively
swapping places with j. If j is better off after such a retaliation, j will want
to force the higher player out, and the bid cannot have been an equilibrium.
Thus, if bids converge to a rest point, an advertiser in a given position should
not want to exchange positions with the next-higher advertiser. Conversely, if j
chooses a bid towards the low end of the range, the player below may respond
by outbidding j, pushing j lower. Balancing these two concerns leads to the
following bidding strategy.
Definition 3 Balanced Bidding
The Balanced bidding strategy ( bb) is the strategy for a player j that, given
b−j ,

 targets the slot s∗j which maximizes his utility, that is,
s∗j = argmaxs {θs (vj − ps (j))}.

 chooses his bid b0 for the next round so as to satisfy the following equation:


θs∗j vj − ps∗j (j) = θs∗j −1 vj − b0 .
If s∗j is the top slot, we (arbitrarily) choose b0 = (vj + p1 (j))/2. We can thus
deal with all slots uniformly by defining θ0 = 2θ1 .
The intuition behind the bb strategy is that the player bids high enough to
force the prices paid by his competitors to rise. But the player does not want
prices to rise so high that if one of his competitors were to just undercut him,
he would regret receiving a higher slot at a price just below his own bid of b0 .
The following Proposition summarizes the results derived in [4]. This Proposition shows the interesting properties of bb.
Proposition 1 If all players follow the bb strategy in an auction with all distinct θ’s, then the system has a unique fixed point. At this fixed point, the revenue of the auctioneer (and the payment of each player) is equal to that of the
VCG equilibrium. The equilibrium bids b∗j at the fixed point satisfy the following
equations:

for j = 1,
 2b2
γj b∗j+1 + (1 − γj )vj for 2 ≤ j ≤ k,
b∗j =
(2)

vj
for k < j ≤ n,
where γj = θj /θj−1 .
6

3

Convergence Properties of the BB Strategy

Our main result shows that when all players use the bb strategy, their payoffs
converge to the payoffs they would receive in a dominant strategy equilibrium
of the VCG mechanism.
Consider the update model in which, in each round, exactly one randomly
chosen player updates his bid according to the bb strategy. We call this update
model asynchronous bidding. Under asynchronous bidding, we show that the
system converges to its fixed point. See Section 3.2.
In order to prove convergence in the asynchronous case, we must first prove
convergence in the synchronous case. This building block is established in the
following section.

3.1

The Restricted Balanced Bidding Strategy and
Convergence in the Synchronous Case

Synchronous bidding is the update model in which all players see all prior-period
bids, and all bidders simultaneously submit new bids for the next round. To
prove convergence in this synchronous case, we examine a variant of the bb
strategy that limits players’ selection of slots. In particular, the Restricted
Balanced Bidding strategy is defined as follows:
Definition 4 The Restricted Balanced Bidding ( rbb) bidding strategy is the
strategy for a player j that, given b−j

 targets the slot s∗j which maximizes his utility among the slots with no
higher click-through rate than his current slot sj , that is,
s∗j = argmax{θs (vj − ps (j)) : s ≥ sj }.

 chooses his bid b0 for the next round so as to satisfy the following equation:


θs∗j vj − ps∗j (j) = θs∗j −1 vj − b0 .
As in bb, we define θ0 = 2θ1 to make sure the strategy is well-defined for
the first slot.
Important features of the rbb strategy are that (a) it has the same unique
fixed point as bb, and (b) it provides a bidding strategy that provably converges
in both the synchronous and asynchronous settings, as shown below.
The rbb restriction is crucial to the guarantee of convergence in the synchronous model. In the Appendix, we show that with three or more slots and
with updates occurring synchronously, the bb strategy need not converge.
Our main rbb result is a guarantee of convergence in the synchronous case.

7

Theorem 1 In the synchronous model the rbb strategy always converges to its
fixed point. The number of steps until convergence is bounded by
 

v1
log(1 − γ ∗ )
θ1
+
log
O 2k
+
log
,
∗
∗
(1/γ )
(1/γ )
log γ ∗
min1≤i≤k (vi − vi+1 )
θk
where γ ∗ = maxi

θi
θi−1 .

Holding click-through rates θi fixed, this simplifies to


2k · v1
O
.
min1≤i≤k (vi − vi+1 )

Proof. We first bound the number of steps until convergence of the price
of slot k and the set of players who will not be allocated slots. As above, we
define γi = θi /θi−1 .
Lemma 1 Player p prefers to target slot j rather than slot j − 1 if and only if
(1 − γj )vp + γj pj < pj−1 .
Proof. From the definitions in the preceding sections, player p prefers slot
j over slot j − 1 if and only if:
θj (vp − pj ) > θj−1 (vp − pj−1 )
θj vp − θj pj > θj−1 vp − θj−1 pj−1
vp − γj vp + γj pj < pj−1
(1 − γj )vp + γj pj < pj−1

Lemma 2 At every round t such that t > t1 = 2+logγ ∗ ((1−γ ∗ )(vk −vk+1 )/vk+1 ),
where γ ∗ = maxi>0 θi /θi−1 , we have:
bi > vk+1
bi = v i

if i ≤ k,
if i ≥ k + 1.

Proof. Let b denote the (k + 1)st highest bid. By definition, b can never
be more than vk+1 . Suppose for some round that b is less than vk+1 . Take any
player i in {1, 2, . . . , k+1}. In the next round, i will either bid his value or target
some slot j ∈ {1, . . . k} and bid b0i = (1 − γj )vi + γj pj ≥ (1 − γ ∗ )vk+1 + γ ∗ b ≥
b + (1 − γ ∗ )(vk+1 − b). In either case,
(vk+1 − b0i ) ≤ γ ∗ (vk+1 − b).
Initially vk+1 − b ≤ vk+1 . How many rounds does it take before vk+1 − b <
(1 − γ ∗ )(vk − vk+1 )? At most r ≤ logγ ∗ ((1 − γ ∗ )(vk − vk+1 )/vk+1 ). In round
r + 1, bidders i ∈ {1, . . . k} will each bid either vi > vk+1 or bid at least
b0i = (1 − γj )vi + γj pj ≥ (1 − γ ∗ )vk + γ ∗ b
≥ b + (1 − γ ∗ )(vk − b) > b + (1 − γ ∗ )(vk − vk+1 )
> vk+1 .
8

In either case, their bids are above vk+1 . In round r + 2, player k + 1 will then
bid vk+1 while players 1, 2, . . . , k continue to bid above vk+1 ; the other players
don’t get a slot, so they bid their value, and this concludes the proof.
We now need to prove that the allocation of the k slots to the top k players
converges to a fixed point. At any time, for any i ∈ [1, k], consider the players
allocated slots [i + 1, k]. They are called stable if their bids and prices satisfy
Equation (2), that is, the allocation is in order of decreasing values, and if π(j)
is the player currently allocated slot j, then the last bids of those players satisfy
bπ(j) = γj bπ(j+1) + (1 − γj )vπ(j) ,
for every j ∈ [i + 1, k]. If the players allocated all slots [1, k] form a stable set,
then we have reached the fixed point of the rbb strategy.
Assume that the current setting is not (yet) a fixed point of the rbb strategy.
Let A be the maximum stable set, with associated i ≥ 2, and let B be the set of
players in slots [1, i]. Let bmin denote the minimum bid from players of B. We
define a partial order over sets of players. We say that A0  A if either A ⊂ A0
and A 6= A0 , or if the player of minimum value in the symmetric difference of A
and A0 belongs to A0 .3 This will be our measure of progress. In the next round,
observe that, following the rbb strategy, players in A still bid in the same way
as before. Let b0min be the new minimum bid from players of B, and p be the
player of B whose bid is b0min . There are three cases to consider.
1. p bids below pi . Let j ∈ [i + 1, k] be the slot which was targeted by
p. Because p targeted slot j, p prefers slot j to slot j − 1, and so, by
Lemma 1, the bid of p is less than pj−1 . By the definition of rbb the bid
is (1 − γj )vp + γj pj > pj , which falls in the interval (pj−1 , pj ), so p will
indeed be allocated slot j.
Recall that π(j) ∈ A denotes the player who was in slot j in the previous
round.
Since set A is stable, the definition of rbb requires
pj−1 = (1 − γj )vπ(j) + γj pj . This is greater than the bid of p, so it follows
that vπ(j) > vp . Moreover, since p prefers slot j to slot j + 1, again by
Lemma 1, we must have (1−γj+1 )vp +γj+1 pj+1 > pj = (1−γj+1 )vπ(j+1) +
γj+1 pj+1 , and so vp > vπ(j+1) . Thus A0 = {p0 ∈ A : vp0 < vp } ∪ {p} is a
stable set, and A0  A.
2. p targeted slot i. Then p is allocated slot i, A0 = A ∪ {p} is a stable set,
and A0  A.
3. p targeted some slot j ≤ i − 1. Then A is still a stable set, and bmin = pi−1
has increased: b0min = (1 − γj )vp + γj pj ≥ bmin + (1 − γ ∗ )(vp − bmin ).
We now define a new variable x. We will prove that Case 3 can only happen
a bounded number x of times (where x depends on the θj ’s and the vj ’s but not
on the bids) before Case 1 or 2 must occur.
3 This

corresponds to a lexicographic ordering of the stable sets.

9

Definition 5 Let x = log1/γ ∗ ((v1 − vk+1 )/ε) with ε as defined in Lemma 3.
Thus, the maximum stable set must change at least once every x rounds. When
the maximum stable set changes, it is replaced by a set which is larger in the
 ordering. This implies that the system converges to a fixed point and that
the number of rounds until convergence is bounded by 2k (x + 1), hence the
Theorem. First, a useful technical lemma.
Lemma 3 Let ε = (1/2)θk (1 − γ ∗ ) minq6=q0 |vq − vq0 |/θ1 . If pi−1 > vp − ε and
vp > pi , then player p prefers slot i to any slot j < i.
Proof. From player p’s viewpoint, the utility of slot i is θi (vp − pi ), the
utility of slot j < i is θj (vp − pj ) < θj (vp − pi−1 ), and the ratio is
θj
θ1
θj (vp − pi−1 )
≤ε
≤ε
.
θi (vp − pi )
θi (vp − pi )
θk (vp − pi )
Now,
vp − pi = vp − ((1 − γi+1 )vπ(i+1) + γi+1 pi+1 )
= (1 − γi+1 )(vp − vπ(i+1) ) + γi+1 (vp − pi+1 ),
which is at least (1 − γ ∗ ) minq6=q0 |vq − vq0 |. Plugging this into the previous
expression proves the Lemma.
We now return to proving that Case 3 happens for at most x consecutive
rounds. Assume that Case 3 happens for x consecutive rounds. Let pmin be the
(t)
player in B whose value is minimum, and let vmin be its value. Let bmin be the
minimum bid of players in B after t rounds, 0 ≤ t ≤ x. If p ∈ B is the player
defining the minimum bid in round t + 1, we have:
(t+1)

(t)

(t)

bmin ≥ (1 − γ ∗ )vp + γ ∗ bmin ≥ (1 − γ ∗ )vmin + γ ∗ bmin .
(x)

(0)

(x)

After x rounds, we get bmin ≥ vmin − (γ ∗ )x (vmin − bmin ), hence bmin ≥ vmin −
(x)
(γ ∗ )x (vi − vk+1 ). Plugging in the value of x yields bmin ≥ vmin − ε. From
Lemma 3, we know that pmin prefers slot i to any slot j < i. In the next round
pmin targets slot i and has to be the minimum bidder from B, so we leave Case
3 and enter Case 2. Thus there are at most x occurrences of Case 3 between
any two occurrences of Case 1 or Case 2, and the Theorem is proved.

3.2

Convergence of the BB Strategy in the Asynchronous
Case

We now turn to our main result, convergence of the bb strategy in the asynchronous case – where each round gives a single random bidder the opportunity
to update his bid according to bb.

10

Theorem 2 In the asynchronous model where players bid in random order, the
system converges to its fixed point with probability 1. Convergence occurs in
O (t1 (n log k) + n log n + k t2 ) steps on average. Here t1 is defined as in Lemma
2, t2 = 2k (1 + x), and x is as defined in Definition 5.
Proof. At time t, a player p is activated if p is the player who updates
his bid (while others repeat their previous bids). To prove convergence in the
asynchronous case, we revisit each step of the proof of Theorem 1 (showing
convergence in the synchronous case). To bound convergence time, we analyze
the expected number of asynchronous activations required to achieve each step
of the synchronous proof, given that the active player is selected uniformly in
each asynchronous round.
Stage one. Following Theorem 1, we must first assure that bi > vk+1
for i ≤ k, and bi = vi for i ≥ k + 1. Lemma 2 showed this step could be
obtained in t1 rounds in the synchronous setting. To use Lemma 2 in the
asynchronous case, we must activate each of the top k + 1 players once per
t1 rounds. Because the active player is picked uniformly out of n players, in
expectation O(n log(k)) activations are required per round to ensure that all top
k players update their bids. Thus, after an average of O(t1 n log(k)) activations,
the top k + 1 players will all be bidding as required to complete stage one.
Now each losing player must be activated once so that each losing player bids
its value. To ensure that all the n − (k + 1) losing players are activated at
least once will require an additional O(n log(n − k)) activations. Thus in total
the expected number of activations to complete stage one in the asynchronous
setting is O(t1 n log(k) + n log(n)).
Stage two. Continuing in the structure of Theorem 1, we must assure that
the top k players are sorted correctly. Progress entails increasingly better stable
sets (where “better” is defined by the lexicographic ordering of Theorem 1).
After stage one, no losing player can afford a slot, so we can ignore all losing
players. If a losing player is activated, he bids his value which must be less than
bk (because he is a losing player). Thus the bids from losing players will not
interfere with the convergence of the top k players. However, losing players can
still consume activations. We therefore later add a budget of steps to cover the
expected number of player activations required for losing players.
We now define a sequence T of activations of the top k bidders to complete
stage two. The sequence T will be partitioned into phases, corresponding to
stable sets (defined in the proof of Theorem 1). Let A be the current stable set,
[i + 1, k] be the slots occupied by the players of A, and B be the set of players
occupying slots [1, i]. Let pmin be the player in B whose value is minimum.
Consider the three cases enumerated in the proof of Theorem 1. The occurrence
of Case 1 or Case 2 always results in a new stable set. For each stable set, Case
3 can occur at most x times, after which a bid from pmin is guaranteed to result
in a new stable set.
To achieve these results in the asynchronous case, we repeatedly activate the
player in slot i until either Case 1 or Case 2 occurs. If neither case occurs after
x activations, then we activate player pmin . At this point a new stable set is
11

formed, the current phase ends, and we move on to the sequence of activations
required by the next stable set. This completes the definition of sequence T . As
there are 2k stable sets and each stable set requires at most x + 1 activations,
the length T is bounded by t2 = 2k (x + 1).
How long will it take to activate players in the order given by sequence T ?
With k players, the probability of activating the correct player is at least 1/k per
step. (Recall that we excluded losers.) Thus the correct sequence of activations
will occur after about k t2 steps.
Finally, we add a set of steps for losing players. We expect (1−k/n)k t2 losing
player activations to occur prior to convergence. The second stage therefore
requires expected total activations of k t2 + (1 − k/n)k t2 = O(k t2 ).
Summation. Adding the expected steps required in stage one to those from
stage two, convergence is reached on average in O(t1 (n log k) + n log n + k t2 )
steps. In any event, convergence occurs with probability 1 after a finite time.
(See [11].) This proves convergence, and the Theorem is complete.
Our bound on the convergence time of bb appears to be quite loose and is
a worse case bound. Consider convergence speed if the number of positions, k,
and the click-through rates, θi , are held constant as the number of bidders, n,
increases. Substituting t1 and x into Theorem 2 and simplifying, the expected
number of rounds until convergence is in the order of

2k / log(1/γ ∗ )
vk
v1 θ1
n log k log1/γ ∗
+
(vk − vk+1 )(1 − γ ∗ )
min1≤i≤k (vi − vi+1 )(1 − γ ∗ )θk
θi
. Notice that n appears only at the start of the expression.
where γ ∗ = maxi θi−1
So the convergence time is linear in the number of bidders, n.

We have run simulations to study the speed of convergence in practice. We
have observed that convergence is significantly faster than Theorem 2 indicates
– no more than a polynomial in n, the number of bidders.
Figure 1 shows convergence speed as more bidders join the auction and as
more slots are added (both occurring at the same rate). The speed of convergence, measured in number of bids per bidder, appears to increase slowly in the
number of bidders.
Figure 2 shows convergence behavior in one set of simulations. In this simulation, ten bidders asynchronously updated their bids in random order, all using
the bb strategy. After 329 updates, all bids had reached the B* equilibrium.
This outcome is typical of our simulated bidding outcomes.

4

Conclusions

Keyword auctions have become a critical source of revenue for companies such
as Google and Yahoo!, among others. This new form of advertising has provided a new way for advertisers to reach customers. But advertisers also face
the complex task of optimizing bids to increase their exposure while avoiding
unnecessary costs.
12

75
Bids 55
Per
Bidder 35

15
5

10

15

20

25

Number of Bidders

Figure 1: Convergence Speed as a Function of Number of Bidders

Figure 2: Simulated Convergence Profile of BB
Our analysis considers a natural class of bidding strategies inspired by equilibrium analysis and the notion of envy-freeness introduced in [4]. These bidding strategies attempt to increase advertiser utility under limited assumptions
about other players’ behavior. We have shown that if all players follow the bb
strategy, bids are certain to converge to a Nash equilibrium of the static game.
We have further determined the expected time until convergence. Finally, we
have noted the desirable properties this equilibrium offers to advertisers – including envy-freeness, lowest cost to advertisers (among all Nash equilibria of
the static game of complete information), and feasible implementation based on
information available to advertisers.

13

Acknowledgements
This research was supported in part by NSF grant CCF-0635147, a Yahoo Research Alliance gift to Anna Karlin, and the Division of Research and Faculty
Development at Harvard Business School.

14

References
[1] K. Asdemir, Bidding patterns in search engine auctions, in: Second Workshop on Sponsored Search Auctions, ACM Electronic Commerce, 2006.
[2] E. H. Clarke, Multipart pricing of public goods, Public Choice 11 (1971)
17–33.
[3] B. Edelman, M. Ostrovsky, Strategic bidder behavior in sponsored search
auctions, Decision Support Systems (2007) 192–198.
[4] B. Edelman, M. Ostrovsky, M. Schwarz, Internet advertising and the generalized second price auction: Selling billions of dollars worth of keywords,
American Economic Review (2007) 242–259.
[5] J. Feng, H. K. Bhargava, P. D.M., Implementing sponsored search in web
search engines: Computational evaluation of alternative mechanisms., INFORMS Journal on ComputingForthcoming.
[6] T. Groves, Incentives in teams, Econometrica 41 (1973) 617–631.
[7] J. Houde, Entry and exit in a price regulated industry: Gasoline retailing
in quebec, working paper (2007).
[8] B. Kitts, B. Leblanc, Optimal bidding on keyword auctions, Electronic
Markets (2004) 186–201.
[9] S. Lahaie, An analysis of alternative slot auction designs for sponsored
search, in: EC ’06: Proceedings of the 7th ACM conference on Electronic
commerce, ACM Press, New York, NY, USA, 2006.
[10] R. McAfee, V. te Velde, Dynamic pricing in the airline industry, to appear in Production and Operations Management, Special Issue on Revenue
Management and Dynamic Pricing (2007).
[11] M. Mitzenmacher, E. Upfal, Probability and Computing: Randomized Algorithms and Probabilistic Analysis, Cambridge University Press, 2005.
[12] D. Monderer, L. Shapley, Potential games, Games and Economic Behavior
14(1) (1996) 124–143.
[13] H. Varian, Position auctions, International Journal of Industrial Organization.
[14] W. Vickrey, Counterspeculation, auctions and competitive sealed tenders,
Journal of Finance (1961) 8–37.
[15] H. Young, The evolution of conventions, Econometrica 61(1) (1993) 57–84.

15

Appendix: Convergence Properties of the
Synchronous BB Strategy
The body of the paper analyzes bidding sequences that are restricted synchronously, or asynchronously in random order. But what if bidders bid synchronously without restriction, or bid asynchronously in a predetermined order?
In general, synchronous bidding and predetermined bid order can produce cycling.4
The following theorem characterizes outcomes in synchronous environments
and in environments where bidding order is predetermined.
Theorem 3 Consider a repeated keyword auction where all players are using
the bb strategy starting with arbitrary initial bids. We have:
1. A 2-slot auction system always converges to its fixed point in both the synchronous and asynchronous models. The number of rounds until convergence in the synchronous model is O(log((v2 −v3 )/v3 )), where the constant
depends on the click-through rates θ1 and θ2 .
2. There exists a 3-slot auction system and set of initial bids which does not
converge in the synchronous model.
3. There exists a 3-slot auction system, a set of initial bids, and an order
in which the players update which does not converge in the asynchronous
model with a predetermined order of updates.
Proof of Part 1:
Lemma 4 At every round t such that t > t1 = 2 + logγ ∗ ((1 − γ ∗ )(v2 − v3 )/v3 ),
where γ ∗ = max{θ1 /θ0 , θ2 /θ1 }, we have:
b1 , b2
b3

>
=

v3 ,
v3 .

Proof. Let b denote the third highest bid. By the second round, b can never
be more than v3 . Suppose for some round that b is less than v3 . Take a player i
in {1, 2, 3}. In the next round, i will bid his value or target some slot j ∈ {1, 2}
and bid b0i = (1 − γj )vi + γj pj ≥ (1 − γ ∗ )v3 + γ ∗ b = b + (1 − γ ∗ )(v3 − b). In
either case,
(v3 − b0i ) ≤ γ ∗ (v3 − b).
Initially v3 − b ≤ v3 . It takes at at most r = logγ ∗ ((1 − γ ∗ )(v2 − v3 )/v3 ) before
v3 − b < (1 − γ ∗ )(v2 − v3 ). (Recall that γ ∗ < 1 as the θi ’s are decreasing.)
4 Consider

a simultaneous-move “battle of the sexes” game.

16

In round r + 1, bidders i ∈ {1, 2} will each bid either vi > v3 or target a slot
j ∈ {1, 2} and bid
b0i = (1 − γj )vi + γj pj ≥ (1 − γ ∗ )v2 + γ ∗ b
= b + (1 − γ ∗ )(v2 − b) > b + (1 − γ ∗ )(v2 − v3 )
> v3 ,
hence in either case their bids are both above v3 . In round r + 2, player 3 will
then bid v3 while players 1 and 2 keep on bidding above v3 ; this concludes the
proof of the lemma.
Once the conditions of Lemma 4 hold, the price of slot 2 is fixed at p2 = v3 .
Let T2 = b∗2 = (1 − θ2 /θ1 )v2 + (θ2 /θ1 )p2 and T1 = (1 − θ2 /θ1 )v1 + (θ2 /θ1 )p2 .
If the last bids of players 1 and 2 were b1 and b2 then, in the next round, their
bids are:

T1
if b2 > T1 ,
b01 =
(v1 + b2 )/2 otherwise.

T2
if b1 > T2 ,
b02 =
(v2 + b1 )/2 otherwise.
Let bmin = min(b1 , b2 ) be the minimum of the two bids.
Lemma 5 After at most t2 rounds, we have bmin ≥ T2 , where
t2 ≤ t1 + 2

θ1 − θ2
.
θ2

Proof. Assume that at time t > t1 , we have bmin < T2 . Then it is easy to
check that at the next round we have b0min ≥ (v2 + bmin )/2. This implies
b0min − bmin ≥

v2 − T2
θ2 v 2 − p 2
v2 − bmin
≥
=
= δ.
2
2
θ1
2

Since at time t1 we have bmin ≥ v3 , we will reach b0min ≥ T2 after an additional
number of rounds bounded by (T2 − v3 )/δ.
Finally, since at round t2 we have bmin ≥ T2 , at time t2 + 1 we will have
b02 = T2 < T1 , and therefore at time t2 + 2 we will have b002 = T2 = b∗2 and
b001 = (v1 + T2 )/2 = b∗1 ; we have reached equilibrium. This proves Part 1 of the
Theorem in the synchronous model.
Proof of Part 2: If there are more than two slots, convergence is not
guaranteed even when all players follow the bb strategy. Consider the following
counterexample.
Let there be three slots with θ1 = 1, θ2 = 2/3, θ3 = 1/3 and four players
with values 161, 160, 159 and 100. Let the initial bids of 130.5, 130, 129.5 and
100, respectively. Then the bidding evolves as shown below. Notice that the
bids cycle but do not converge.
17

Bidder
ID Value
A
161
B
160
C
159
D
100

1
130.5
130
129.5
100

Round
2
145.5
145.25
144.75
100

3
130.5
130
129.5
100

Consider the dynamics of this counterexample. Bidder D has the lowest
value and is inactive; at any of the prices listed, he cannot receive a slot because
the prices are all above his utility. Meanwhile, bidders A, B, and C cyclically
compete for the available slots. It the first round, A, B, and C all target the
lowest slot. Bidder A bids low enough that, in the next round, all three choose
to target the first slot. Seeing these high bids, the anticipated price for the
top slot is too high when compared with the low price anticipated for the last
slot. Thus for the third round, bidders A, B, and C again target the last slot –
yielding the same bids as in the first round. Round four will match round two,
and the cycle will continue forever.
In this example the click-through rates follow a simple geometric sequence,
similar to those observed in practice [5]. Note that in this example the bids are
well-behaved, in the sense that the bids are in the same order as the players’
values. Hence such regularity is not sufficient for convergence. Finally, even
though we used our convention of θ0 = 2, a similar example can be constructed
where the players are cycling while targeting intermediate slots. This concludes
the proof of part 2.
Proof of Part 3: Consider the following three slot example with θ1 = 1,
θ2 = 0.1 and θ3 = 0.09. Let the top three bidders place bids in predetermined
order given by their lexicographic ordering (left-most column). Notice the cycling that results: bids in round 7 exactly match those from round 1, and the
cycle will continue forever.
Bidder
ID Value
A
102
B
101
C
100
D
10

1
19.2
19.1
59.6
10

2
80.8
19.1
59.6
10

3
80.8
90.9
59.6
10

18

Round
4
5
80.8
19.2
90.9
90.9
95.45 95.45
10
10

6
19.2
19.1
95.45
10

7
19.2
19.1
59.6
10

