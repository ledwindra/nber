NBER WORKING PAPER SERIES

COMPETING FOR ORDER FLOW IN OTC MARKETS
Benjamin Lester
Guillaume Rocheteau
Pierre-Olivier Weill
Working Paper 20608
http://www.nber.org/papers/w20608

NATIONAL BUREAU OF ECONOMIC RESEARCH
1050 Massachusetts Avenue
Cambridge, MA 02138
October 2014

Pierre Mabille and Semih Uslu provided expert research assistance. Weâ€™d like to thank the participants
of the JMCB-SNB-Uni Bern 2013 Conference on Financial Frictions and Julien Hugonnier for comments
that greatly improved the paper. The views expressed in this paper do not necessarily reflect those
of the Federal Reserve Bank of Philadelphia, the Federal Reserve System, or the National Bureau of
Economic Research.
NBER working papers are circulated for discussion and comment purposes. They have not been peerreviewed or been subject to the review by the NBER Board of Directors that accompanies official
NBER publications.
Â© 2014 by Benjamin Lester, Guillaume Rocheteau, and Pierre-Olivier Weill. All rights reserved. Short
sections of text, not to exceed two paragraphs, may be quoted without explicit permission provided
that full credit, including Â© notice, is given to the source.

Competing for Order Flow in OTC Markets
Benjamin Lester, Guillaume Rocheteau, and Pierre-Olivier Weill
NBER Working Paper No. 20608
October 2014
JEL No. D53,D83,G1,G12
ABSTRACT
We develop a model of a two-sided asset market in which trades are intermediated by dealers and
are bilateral. Dealers compete to attract order flow by posting the terms at which they execute tradesâ€”
which can include prices, quantities, and execution speedâ€”and investors direct their orders toward
dealers that offer the most attractive terms. We characterize the equilibrium in a general setting, and
illustrate how the model can account for several important trading patterns in over-the-counter markets
which do not emerge from existing models. We then study two special cases which allow us to highlight
the differences between these existing models, which assume investors engage in random search for
dealers and then use ex post bargaining to determine prices, and our model, which utilizes the concept
of competitive search in which dealers post terms of trade. Finally, we calibrate our model, illustrate
that it generates reasonable quantitative outcomes, and use it to study how trading frictions affect the
per-unit trading costs that investors pay in equilibrium.

Benjamin Lester
Research Department
Federal Reserve Bank of Philadelphia
10 Independence Mall
Philadelphia, PA 19106
Benjamin.Lester@phil.frb.org
Guillaume Rocheteau
Department of Economics
University of California at Irvine
3151 Social Science Plaza
Irvine, California 9269
grochete@uci.edu

Pierre-Olivier Weill
Department of Economics
University of California, Los Angeles
Bunche Hall 8283
Los Angeles, CA 90095
and NBER
poweill@econ.ucla.edu

1

Introduction

Many assets are traded in over-the-counter (OTC) markets, including government, municipal, and
corporate bonds, asset-backed securities, various types of derivatives, and currencies, to name a
few. These markets have not only been growing in size, but also in economic importance: for
example, the market for repurchase agreements has become crucial for the provision of liquidity,
while the markets for credit default swaps and foreign exchange swaps have become essential for
insuring firms and financial intermediaries against various types of shocks. Most often, trade in
these markets is intermediated by dealers who maintain a two-sided market, simultaneously buying
and selling securities on behalf of individual investors.
A recent literature, building off of the framework in Duffie, GaÌ‚rleanu, and Pedersen (2005,
henceforth DGP), has developed theoretical models that capture important features of intermediated OTC markets, and has used these models to gain a better understanding of the factors that
determine bid and ask prices, allocations, the speed of trade, and overall trading volume. These
models formalize intermediated OTC markets as highly decentralized trading venues in which investors contact dealers at a constant (exogenously specified) rate, at which time they are able to
trade at a price determined by ex post bargaining.
While this formalization has generated a number of insights, it is at odds with two important
features of real world OTC markets. First, dealers often post and commit to bid and ask prices,
which are readily available to investors.1 Second, these prices appear to play an important role
in determining the speed at which different investors trade. More specifically, empirical evidence
suggests that investors face a clear trade-off between the terms of trade that they are quoted and
the speed at which their trade will be executed: as Boehmer (2005) writes, â€œhigh execution costs
are systematically associated with fast execution speed, and low costs are associated with slow
execution speed. This relationship holds both across markets and across order sizes.â€2 Hence,
even though empirical evidence suggests that search frictions are an important element of OTC
markets, it remains a challenge to formalize these frictions in a way that (i) incorporates the role of
1

As Duffie (2012, pg. 4) writes, â€œIn some dealer-based OTC markets, especially those with active brokers, a
selection of recently quoted or negotiated prices is revealed to a wide range of market participants. (...) In OTC
markets for U.S. corporate and municipal bonds, regulators have mandated post-trade price transparency through the
publication of an almost complete record of transactions shortly after they occur. (...) In OTC derivatives markets,
such as the market for credit default swaps, clients of dealers can request â€˜dealer runs,â€™ which are essentially lists
of dealersâ€™ prospective bid and offer prices on a menu of potential trades. Dealers risk a loss of reputation if they
frequently decline the opportunity to trade near these indicative prices when contacted soon after providing quotes for
a dealer run.â€
2
Similarly, Battalio, Hatch, and Jennings (2003) find that orders obtain better trade prices on the NYSE but faster
executions at Trimark Securities, a Nasdaq dealer. Boehmer, Jennings, and Li (2007) establish that brokersâ€™ routing
decisions take into account the disclosure of quality execution across trading centers: markets with low trading costs
and fast fills were able to attract more orders.

2

prices in directing order flow; and (ii) generates the observed relationships between the prices that
dealers post, the types of investors who choose those prices, and the speed at which these investors
trade. In this paper, we construct and analyze a model of OTC markets to accomplish these goals.
Our framework adopts many of the basic building blocks from the literature that has evolved
from DGP, and specifically the generalization by Lagos and Rocheteau (2009, henceforth LR):
investors with endogenously determined asset positions periodically receive idiosyncratic shocks
that affect their private valuations, at which time they attempt to re-balance their portfolios by
trading with dealers in a frictional market. The major point of departure is the way we model these
frictions: in contrast to the existing literature, we assume that dealers post contracts that are readily
observable to all investors, but search frictions remain because each dealer is limited in his capacity
to process multiple orders at once. This equilibrium concept is based on the model of â€œcompetitive
search,â€ first introduced by Moen (1997) in the context of the labor market, but here generalized
to a two-sided market where dealers have an active role in executing the trades of both buyers and
sellers on a frictionless inter-dealer market.
To be more precise, we assume that there is a large mass of competitive dealers posting contracts that specify a quantity that they will buy or sell on the inter-dealer market, along with a fee for
doing so (or, equivalently, a bid-ask spread). Investors, who are heterogeneous with respect to both
their asset positions and their private valuations for the asset, observe these contracts and direct
their order flow to the contract of their choosing. However, dealers are capacity constrainedâ€”
they cannot execute orders instantaneously, but rather orders are processed slowly, at a rate that is
decreasing in the ratio of orders per dealer for this particular contract.
This formulation of asset market frictions offers several advantages. First, the process of price
formation in the model more closely resembles the protocol in many OTC markets: dealers post
prices, and investors send orders to these dealers with the expectation that their orders will be filled
at the posted price. Second, the model is able to account for several empirical findings that do not
emerge from existing models; for example, investors face the trade-off between the bid-ask spread
and execution speed discussed above and, for some specifications, these bid-ask spreads decrease
with the size of the trade, which is consistent with evidence from certain OTC markets. Third,
the model generates new normative implications as well; for example, in a simple extension of the
benchmark model, we show that welfare is unambiguously increasing in the fraction of investors
who can observe posted contracts and direct their search, thus highlighting a margin through which
transparency in financial markets can improve allocations. Finally, the competitive search setting
offers a number of technical advantages, too: it avoids several inefficiencies that arise from the
Nash bargaining protocol, such as the well-known hold-up problem (see, e.g., Hosios (1990)); it
can easily accommodate the introduction of private information (see, e.g., Guerrieri et al. (2010));
3

and it also offers a more tractable environment for the analysis of aggregate shocks (see, e.g.,
Menzio and Shi (2011)). Hence, we believe the model provides a useful benchmark for future
modifications and extensions.
The structure of the paper is as follows. We begin with the most general environment, where
investors are free to hold any (positive) asset position, and they periodically receive idiosyncratic
shocks to their private valuations that are drawn from an arbitrary distribution with finite support.
We provide a full characterization of steady-state equilibria, establish existence, and flesh out a
number of properties of equilibrium prices, allocations, and trading speeds. We show that dealers
design contracts to respond to investorsâ€™ trading needs, and investors subsequently sort themselves
across posted contracts according to their private valuations and current asset holdings. In particular, the investors whose preferences are most severely misaligned with their asset holdings choose
to trade with dealers who offer fast execution times but high trading fees.
Then, in order to gain additional insights and to compare our model more squarely with the
existing literature, we analyze two special cases in detail. First, we consider an environment in
which agents have one of two private valuations and their asset holdings lie in the set {0, 1}, as
in DGP. These restrictions make each investorâ€™s choice of asset holdings trivial and allow us to
focus on the asset prices, trading fees, and execution times that prevail in the unique equilibrium.
We show that the equilibrium can be solved in closed form when search frictions are small, as in
Vayanos and Weill (2008) and Weill (2008), which allows for a large set of comparative statics.
Interestingly, we establish that the relationship between intermediation fees and the sellersâ€™ share
of the surplus (or implicit bargaining power) is hump-shaped, whereas bid-ask spreads in DGP
are increasing in the dealersâ€™ exogenous bargaining power. We also show that the price discount,
which indicates the rate at which the asset price falls relative to the Walrasian benchmark due to
search frictions, is non-monotonic with the dealersâ€™ bargaining power.
For the second special case, we return to the general model with asset holdings in R+ and an
arbitrary number of preference shocks, but we adopt a Leontief specification for the expected execution time; that is, we assume there is strict complementarity between the measure of dealers and
the measure of orders to be executed. This trading technology generates average execution delays
that are constant across active submarkets, allowing us to focus on the implications of our equilibrium concept for investorsâ€™ endogenous asset holdings. We characterize the equilibrium when
the dealersâ€™ entry cost is small, which serves two purposes. First, the analysis is tractable in this
region of the parameter space, and hence we can study how asset demand, bid-ask spreads, and
trading volume respond to changes in the economic environment. Second, the equilibrium asset
holdings and the inter-dealer prices are the same as in LR when, in their model, the exogenous bargaining power of dealers is equal to zero. Therefore, this class of equilibria is amenable to a direct
4

comparison with the existing literature. Our analysis reveals that the predictions of the competitive
search model differ markedly from the earlier literature in one dimension: the relationship between
trading costs and trade sizes. In earlier models with random matching and ex post bargaining, such
as that of LR, the trading cost per unit traded increases with the size of the trade. In contrast, under
competitive search, per-unit trading costs decrease with trade sizes.3 This prediction of our model
is in line with the evidence documented by Schultz (2001), Edwards, Harris, and Piwowar (2007),
Green, Hollifield, and SchuÌˆrhoff (2007), and Hollifield, Neklyudov, and Spatt (2012) for over-thecounter markets. Therefore, the structure of the market helps explain the empirical relationship
between trading costs and trade sizes.4
Finally, in Section 5, we develop a numerical example within the context of our general model.
The purpose is two-fold. First, this exercise illustrates that our model can generate quantitative outcomes of reasonable magnitude, in term of trade size, execution speed, and trading cost. Second,
we use this calibrated model to perform comparative statics exercises. In particular, we study how
the trading technology, which determines the time it takes for dealers to execute orders, affect the
average per-unit trading cost that investors pay, as well as the elasticity of this per-unit trading cost
to trade size, in the cross section. This analysis suggests that cross-sectional data on transaction
costs could be informative about some important features of the trading technology.
Related literature. Our paper is part of a long tradition in the market micro-structure literature,
starting at least with Ho and Stoll (1983), studying competition between dealers who serve outside customers. The description of the asset market that involves search and pairwise meetings
between dealers and investors, where dealers have access to a competitive inter-dealer market, is
based on DGP and LR. Other papers in this literature include Weill (2007), Gavazza (2011), and
Lagos, Rocheteau, and Weill (2011), to name a few. There are also other search-theoretic models
of financial intermediation with price-posting. Spulber (1996) describes an environment with competing price-setting dealers. However, in contrast to our analysis, the contract posted by dealers
(bid and ask prices) can be observed only after a time-consuming search.5 For a more thorough
literature review of the search-theoretic approach to over-the-counter markets, see Rocheteau and
Weill (2011).
Search-and-matching models offer a natural platform to study the interactions of investors trading at different speed. Some papers in the literature study asset pricing when speed differences are
3

The reason is that dealers reap a constant fraction of the surplus in LR, and the surplus is convex in trade size. In
our competitive search model with Leontief technology, by contrast, the price-setting mechanism implies that investors
pay a fixed trading cost to trade any quantity.
4
See Zhang (2012) for a different explanation in a model with ex post bargaining under asymmetric information.
5
Hall and Rust (2003) extend Spulber (1996) by introducing a second type of middlemen called market makers.
Each market maker posts publicly observable prices while posted prices of middlemen are not observable.

5

exogenously given, e.g., FeldhuÌˆtter (2012) and Neklyudov (2012). Others are explicit about the
trade-off between execution speed and trading costs. An early contribution is the sequential search
model of block trading by Burdett and Oâ€™Hara (1987). More recent work includes the models
of Melin (2012) and Praz (2012), in which investors can trade simultaneously in a Walrasian and
an OTC market, or that of Pagnotta and Philippon (2011), in which investors can choose between
competing trading platforms that offer different execution speeds. We study the choice of execution
speed using a different approach, based on the the notion of competitive search, initially developed
by Moen (1997). Mortensen and Wright (2002) and Sattinger (2003) interpret this equilibrium
notion as one where competing brokers or market makers set up markets and charge entry fees to
participants. However, in contrast to our model, the brokers in these models do not contribute to
the matching of orders on both sides of the market and do not intermediate trades. Weill (2007,
Appendix IV) offers some preliminary analysis of a competitive search equilibrium without free
entry of dealers; instead, he assumes that the matching technology is concave in the measure of
investors and does not depend on the measure of dealers. Rocheteau and Weill (2011, p. 272)
apply competitive search to a simple model of an over-the-counter market where trades are not
intermediated by dealers and asset holdings are restricted to {0, 1}.
Competitive search has also been recently applied to asset markets by Guerrieri and Shimer
(2012, 2013) and Chang (2012) in order to study the impact of asymmetric information (about
both common and private values) on liquidity in OTC markets. To do so, these authors build
on Guerrieri et al. (2010) and consider â€œone-sidedâ€ competitive search models with {0, 1} asset
holdings, in which buyers post contracts to attract privately informed sellers; also see Inderst and
MuÌˆller (2002), who study a market with durable goods under adverse selection and competitive
search. While we deal only with asymmetric information about private values (see, also, Faig
and Jerez, 2006), we explicitly characterize an equilibrium in a two-sided market, where prices
are posted by dealers who simultaneously buy and sell assets from investors, and we are able to
remove asset-holding restrictions.6 Finally, competitive search has been applied to markets for real
assets, such as housing, by Albrecht et al. (2013), Diaz and Jerez (2013), Lester et al. (2013), and
Stacey (2012). These models do not have dealers making two-sided markets.
6

Watanabe (2013) also utilizes a model of competitive search to analyze the role of middlemen in asset markets.
In his model, middlemen are assumed to have a greater capacity to store inventory than ordinary sellers. In contrast to
our assumption of a two-sided asset market, he assumes that middlemen can acquire these inventoriesâ€”that is, they
can purchase assets from sellersâ€”in a frictionless market, before posting prices and selling to buyers in a market with
search frictions.

6

2

Environment

Time is continuous and goes on forever. The economy is populated with two types of infinitelylived agents: a unit measure of investors and a large measure of dealers. Both types of agents
discount the future at rate r > 0. There is one long-lived asset in fixed supply A âˆˆ R+ . There is
also a perishable good, the numeÌraire, which is produced and consumed by all agents.
Preferences. The instantaneous utility function of an investor is ui (a)+c, where a âˆˆ R+ denotes
the investorâ€™s asset holdings, c âˆˆ R denotes the net consumption of the numeÌraire good (with c < 0
if the investor produces more than he consumes), and i âˆˆ {1, ..., I} â‰¡ I indexes an investorâ€™s
type, where 1 < I < âˆ.7 We assume that ui (a) is continuously differentiable, with u0i (a) > 0,
u00i (a) < 0, u0i (0) = âˆ and u0i (âˆ) = 0 for all i âˆˆ I. We also assume that u0i (a) < u0i+1 (a) for
all a > 0 and i < I âˆ’ 1, so that investors with higher i have higher demand for the asset. This
condition holds, for example, for the multiplicative specification in LR where ui (a) â‰¡ Îµi v(a) for
Îµ1 < Îµ2 . . . < ÎµI .
An investorâ€™s preferences change over time according to a Poisson process with arrival rate Î´.
Conditional on receiving a preference shock, an investor of type i draws a new type j âˆˆ I with
P
probability Ï€ij , where jâˆˆI Ï€ij = 1 for all i âˆˆ I. These type-switching processes are assumed
to be independent across investors. Unlike investors, dealers receive no utility flow from holding
an asset, nor can they hold asset inventories.8 Their instantaneous utility is simply c, the net
consumption of the numeÌraire good.
Trade. All trades are bilateral and are intermediated by dealers, i.e., they involve one dealer and
one investor. Dealers have continuous access to a competitive inter-dealer market in which they
can trade on behalf of investors.9 In order to attract orders from investors, dealers post (and commit
7

The specification for the utility function is borrowed from DGP, where a âˆˆ {0, 1}, and LR where a âˆˆ R+ . In
the case of a real asset, such as houses or physical capital, then ui (a) is a standard utility or production function.
In the case of a financial asset, ui is a reduced-form utility function that captures the various reasons why investors
may want to hold different quantities of the asset, such as differences in liquidity or hedging needs. The quasi-linear
specification, which is common to both monetary and labor search models, is adopted for tractability. Alternatively,
Duffie, GaÌ‚rleanu, and Pedersen (2007), Vayanos and Weill (2008), and GaÌ‚rleanu (2009) adopt CARA preferences.
One could also generalize preferences along the lines suggested by Wong (2013) in the context of a monetary search
model.
8
The assumption that dealers cannot hold assets is without loss of generality when analyzing steady-state equilibria,
as we do in this paper. See Weill (2007) and Lagos, Rocheteau, and Weill (2011) for dynamic equilibria where dealers
hold positions.
9
It should be emphasized that our dealers are different from the market-makers in Moen (1997) and Mortensen and
Wright (2002). In particular, the market-makers in these papers are passive third parties who announce prices in each
submarket; sellers then make an entry decision, buyers search, and the two parties trade directly. In our model, marketmakers play a more active role: they decide whether to enter the market, then trade with buyers and sellers, and finally

7

to) a publicly observable contract Ïƒ = (q, Ï†) specifying that the dealer will trade a quantity q at
the prevailing inter-dealer market price p in exchange for an intermediation fee Ï†.10 If q > 0, the
dealer buys the specified amount and delivers it to the investor. If q < 0, the dealer acquires the
asset from the investor and immediately resells it on the inter-dealer market. There is free entry
into the dealer market: dealers can choose to enter by posting a contract at a flow cost Î³ > 0,
which captures the ongoing costs of advertising their services to investors, maintaining access to
the inter-dealer market, and so on.11
On the other side of the market, investors observe the contracts that have been posted and send
their order to one of these contracts. Dealers, however, cannot process these orders instantly. In
reality, there are a variety of factors that can delay either the process by which dealers receive orders, or the process by which they execute them on the inter-dealer market. These factors include:
technological constraints on the ability of computers or communication lines to process orders;
institutional constraints on a dealerâ€™s ability to execute, clear, settle, and confirm that orders have
been off-loaded in the inter-dealer market; cognitive constraints on a dealerâ€™s ability to pay attention to multiple orders at once; and potentially even delays caused by information asymmetries,
such as the requirement that a dealer verifies the quality or value of collateral that has been posted.
In this paper, we do not take a precise stand on the reason why dealers take time to process an
order. Instead, we assume that orders are executed according to some abstract order-processing
technology, at a rate that is decreasing in the ratio of orders per dealer for this particular contract.12
Formally, suppose that there is a measure d of dealers posting a particular contract, and a
settle these trades on the inter-dealer market. It is in this sense that we generalize the competitive search framework to
a â€œtwo-sided market.â€ The assumption that the inter-dealer market is frictionless, which was first introduced by DGP, is
a simplification that allows us to focus on the interaction between investors and dealers. In reality, inter-dealer markets
may also be frictional; these additional frictions could be modeled, though the analysis would be more cumbersome.
10
Alternatively, one could let dealers post a menu, Ï†(q), that specifies the intermediation fee as a function of the
quantity of assets traded. Anticipating that a submarket will open for each type of investor, it is without loss in
generality that we restrict Ïƒ to a flat fee contract. For an elaboration on this point in the context of a monetary search
model, see Appendix B in Lagos and Rocheteau (2004). Also, an alternative interpretation of the model is one with
large representative dealer firms composed of a continuum of individual dealers who can be allocated to different
submarkets. In this case the relevant schedule is a list of triples, (q, Ï†, Î¸).
11
Our free-entry of dealers is similar to the one in Lagos and Rocheteau (2009). Similar free-entry conditions have
been used routinely in labor search models (Pissarides, 2000), in monetary search models (Rocheteau and Wright,
2005), and in search models with middlemen (Rubinstein and Wolinsky, 1987; Shevchenko, 2004). Following Moen
(1997), free-entry conditions are also typically assumed in competitive search environments as the entry cost pins
down the value of agents on one side of the market, but one could also consider a competitive search environment with
fixed populations.
12
Of course, depending on the precise origin of these frictions, the ratio of orders to dealers might not be sufficient
statistic for execution delays. For example, if the relevant constraints lie in a dealerâ€™s ability to trade each share on the
inter-dealer market, then the expected delay could potentially depend on the size of the orderâ€”i.e., larger orders could
take longer to fillâ€”and hence the distribution of quantities that a dealer is asked to fill could be relevant. We leave
these types of extensions, and other modifications to the matching function, for future work.

8

measure o of orders for this contract. We assume that, at each instant, the flow of orders processed
and executed by dealers is equal to m(d, o), a function which has constant returns-to-scale, is
strictly increasing, strictly concave and twice continuously differentiable with respect to its two
arguments, and satisfies Inada conditions.13 Assuming further that each order is equally likely to
be executed at any point in time, the time it takes to execute any particular order for this contract is
an exponentially distributed random variable with parameter Î±(Î¸) â‰¡ m(d, o)/o = m(Î¸, 1), where
Î¸ â‰¡ d/o.14 Symmetrically, a dealer who has posted this contract executes it at an exponentially
distributed time with intensity Î±(Î¸)/Î¸. These assumptions on m(d, o) imply that Î±(Â·) is continuous,
strictly increasing, strictly concave, and satisfies Î±(0) = 0, Î±(âˆ) = âˆ, and Î±(âˆ)/âˆ = 0.
Moreover, the strict concavity of Î±(Â·) implies that Î±(Î¸)/Î¸ is strictly decreasing in Î¸. Finally, if an
investorâ€™s idiosyncratic valuation changes before a standing order is executed, we assume that he
can cancel the unfilled order at no cost and redirect a new order toward a different contract.

3

Equilibrium

In this section we define and derive conditions for a steady-state equilibrium. These conditions
describe (i) the optimal entry and posting behavior of dealers, taking as given the order flow they
receive from posting any contract and the inter-dealer price; (ii) the optimal order submission
strategy of investors, taking as given prices and the set of contracts that are available to them;
and (iii) the market tightness in each active submarket that is consistent with both a stationary
distribution across investor types and market clearing.

3.1

Definition

Let Î£ denote the set of all possible contracts and Î£? the set of contracts offered in equilibrium.
We assume that an investor can always choose not to send any order, so that 0 = (0, 0) âˆˆ Î£? . We
define a submarket as a contract, Ïƒ âˆˆ Î£, a set of dealers posting this contract, and a set of investors
sending an order for this contract. The dealer-to-investor ratio, or market tightness, prevailing in a
submarket for contract Ïƒ âˆˆ Î£ is denoted by Î˜(Ïƒ). The function Î˜(Ïƒ) is defined for all possible
contracts, not only those offered in equilibrium. The set of all possible investorsâ€™ types, (i, a), is
13

Whether or not the order execution technology has constant returns to scale remains an open question in the
context of asset markets. Unfortunately, in contrast to the labor marketâ€”where reliable data exists for the number of
unemployed workers, the number of vacancies, and the number of matches that form in a particular labor marketâ€”the
analogous data for financial markets is elusive.
14
Burdett et al. (2001) formally illustrate how capacity constraints can generate a function Î±(Î¸) with the properties we assume. This formulation of meeting frictions is also consistent with the â€œtelephone lineâ€ Poisson queueing
processes described in Stevens (2007) and Sattinger (2010).

9

N â‰¡ I Ã—A. For simplicity we let A = R+ but our formulation and proofs remain identical if there
are asset-holding restrictions. We denote the support of the equilibrium stationary distribution of
investorsâ€™ types by N ? âŠ† N .
Dealers.

The profits of a dealer who posts a contract Ïƒ âˆˆ Î£ are denoted by Î (Ïƒ) and solve:
rÎ (Ïƒ) = âˆ’Î³ +

Î± [Î˜ (Ïƒ)]
Ï†.
Î˜ (Ïƒ)

The first term on the right side is the flow cost of posting a contract, while the second term is
the expected fee received by a dealer, i.e., the Poisson rate at which a dealer receives the order,
Î± [Î˜(Ïƒ)] /Î˜(Ïƒ), times the fee paid by the investor upon execution of the order, Ï†. Therefore, the
zero-profit condition of dealers can be written
Î (Ïƒ) â‰¤ 0, with equality if Ïƒ âˆˆ Î£? and Ïƒ 6= 0.

(1)

The expected profits of a dealer are zero in any active submarket, Ïƒ âˆˆ Î£? , and they are non-positive
in inactive submarkets, Ïƒ âˆˆ Î£\Î£? , since otherwise posting a contract in that submarket would be
profitable.
Investors. Let Vi (a, Ïƒ, Î¸) denote the expected lifetime payoff of an investor of type (i, a) âˆˆ N ?
who sends an order for contract Ïƒ = (q, Ï†) given market tightness Î¸:
ui (a) + Î´
Vi (a, Ïƒ, Î¸) =

X

Ï€ij Vj? (a) + Î±(Î¸) [Vi? (a + q) âˆ’ pq âˆ’ Ï†]

jâˆˆI

r + Î´ + Î±(Î¸)

.

(2)

The first term in the numerator is the investorâ€™s utility flow; the second term is the investorâ€™s
expected continuation payoff, conditional on switching types, which occurs with Poisson intensity
Î´; and the third term is the continuation payoff when his order is executed, which occurs with
Poisson intensity Î±(Î¸). The denominator is the effective discount rate. This investorâ€™s maximum
attainable utility, which we denote by Vi? (a), is defined as
Vi? (a) = sup Vi [a, Ïƒ, Î˜(Ïƒ)] .
ÏƒâˆˆÎ£?

Market tightness.

We adopt the convention that Î˜(0) = 0. For Ïƒ 6= 0, we assume that:

Î˜(Ïƒ) = inf {Î¸ â‰¥ 0 : Vi (a, Ïƒ, Î¸) > Vi? (a) for some (i, a) âˆˆ N ? } ,
10

(3)

and Î˜(Ïƒ) = âˆ if this set is empty. This definition captures the idea that, if a dealer posts a
contract Ïƒ, then the investors who value it most will direct their order flow to this contract until
they are indifferent between this contract and their best alternative. Put differently, if the market
tightness for contract Ïƒ were greater than Î˜(Ïƒ), then there would be a positive measure of investors
who would benefit strictly from this contract. Orders sent by these investors would further reduce
tightness until it is equal to Î˜(Ïƒ).15
Market clearing and the distribution of investorsâ€™ states. Let ni (da) denote the steady-state
measure of investors over the set of types, N . The measure ni (da) must satisfy the following two
identities:
XZ
ni (da) = 1
(4)
A

iâˆˆI

XZ
iâˆˆI

ani (da) = A.

(5)

A

Equation (4) imposes that the measures of investors add up to one. Equation (5) ensures that
investors hold the entire asset supply and that the inter-dealer market clears.
The order submission strategy of an investor of type (i, a) can be represented by a probability
measure, Î¶(dÏƒ | i, a), over some support
Î£?i (a) âŠ† arg max? Vi [a, Ïƒ, Î˜(Ïƒ)] .
ÏƒâˆˆÎ£

Then, in a steady-state equilibrium, ni (da) must satisfy
Î´

X

Z Z

Î¶(dÏƒ | i, a0 )Î±[Î˜(Ïƒ)]I{a0 +q=a}

nj (da)Ï€ji +
A

jâˆˆI

Î£?i (a0 )

Z
Î¶(dÏƒ | i, a)Î±[Î˜(Ïƒ)].

= Î´ni (da) + ni (da)

(6)

Î£?i (a)

The left side of (6) represents the inflow of investors, while the right side represents the outflow.
On both sides the first term represents the flow due to type switching, and the second term is the
flow due to trade.
Definition 1. A steady-state competitive search equilibrium is a list composed of an inter-dealer
15

Note that we are taking the infimum over all Î¸ that create a strict utility improvement. This is important because
otherwise Î˜(Ïƒ) = 0 for all Ïƒ: those investors who have no gains from trade, Vi? (a) = Vi (a, 0, 0), would flow into the
submarket in the expectation that they wonâ€™t be able to trade anyway, and thus Î¸ = 0.

11

market price, p, a set of open submarkets, Î£? , a market tightness function, Î˜(Ïƒ), a collection of
value functions, Vi? (a), an order submission strategy Î¶(dÏƒ | i, a) with support Î£?i (a), and a measure
on the set of investorsâ€™ types, ni (da), with support N ? âŠ† A Ã— I, satisfying (1)-(6).

3.2

Characterization

As is typically true in competitive search models, there is a dual formulation of the problem according to which an investorâ€™s expected utility is maximized with respect to trade size, q, intermediation
fee, Ï†, and market tightness, Î¸, subject to dealersâ€™ zero-profit condition, [Î±(Î¸)/Î¸]Ï† = Î³. This dual
problem can be represented conveniently by the following flow Bellman equation:
rVi? (a, p) = ui (a) + Î´

X



Ï€ij Vj? (a, p) âˆ’ Vi? (a, p)

jâˆˆI



?
?
+ max Î±(Î¸) [Vi (a + q, p) âˆ’ pq âˆ’ Ï† âˆ’ Vi (a, p)]
qâ‰¥âˆ’a,Î¸,Ï†

subject to

Î±(Î¸)
Ï† = Î³.
Î¸

If a utility-maximizing contract, (q, Ï†, Î¸), was not offered in a candidate equilibrium, a dealer
would have a profitable deviation by offering the same contract with a slightly higher fee, thereby
attracting the type of investors for whom this contract is optimal. Substituting Ï† = Î¸Î³/Î±(Î¸) from
the dealer zero-profit condition into the Bellman equation, we obtain the following characterization
for investorsâ€™ value functions.
Proposition 1. In any equilibrium, for all (i, a) âˆˆ N ? , investorsâ€™ value functions solve
Vi? (a, p)

=

max
(qâ‰¥âˆ’a,Î¸)âˆˆQÃ—R+

ui (a) + Î´

P

jâˆˆI

Ï€ij Vj? (a, p) + Î±(Î¸) [Vi? (a + q, p) âˆ’ pq] âˆ’ Î³Î¸
. (7)
r + Î´ + Î±(Î¸)

Moreover, there exists a unique collection {Vi? (a, p)}iâˆˆI , defined over S = I Ã— A Ã— (0, âˆ), that
satisfy (7). Each Vi? (a, p) is continuous in (a, p) and strictly increasing in a.
The proposition offers an alternative representation of the Bellman equations, which is useful
for at least two reasons. First, it allows us to solve for investorsâ€™ values at each point in the support
of the distribution of investorsâ€™ types, N ? , without having to characterize Î£? , the set of contracts
offered in equilibrium. Second, it shows that our model is observationally equivalent to one in
which investors directly choose their order-execution intensity, Âµ â‰¡ Î±(Î¸), but have to incur a
convex cost Î³Î±âˆ’1 (Âµ). Put differently, the outcome of competition and free entry is that dealers

12

act â€œas ifâ€ they knew investorsâ€™ private utility type and were making an optimal search intensity
decision on their behalf.16
Next, we proceed to establish the existence of an equilibrium. First, note from the right side
of (7) that investorsâ€™ post-trade asset holdings belong to arg maxa0 {Vi (a0 , p) âˆ’ pa0 }, so they are
independent of a, the investorâ€™s current asset holdings.17 For simplicity, let us assume for now that
this program has a unique maximizer, which we denote by ai .18 We look for a stationary equilibrium in which the support of the distribution of types is I Ã— {a1 , . . . , aI }. This is intuitive since,
at his first opportunity to trade, an investor chooses asset holdings in the support {a1 , . . . , aI }, and
then continues to keep his holdings in this support forever after. Let Î¸i (aj ) be the maximizer of
the Bellman equation, (7), when the investorâ€™s type is (i, aj ). The inflow-outflow equations for the
steady-state distribution, ni (aj ), are
0 = Î´

X

0 = Î´

X

nk (aj )Ï€ki âˆ’ Î´ni (aj ) âˆ’ Î±[Î¸i (aj )]ni (aj ), if i 6= j;

(8)

X

(9)

kâˆˆI

nk (ai )Ï€ki âˆ’ Î´ni (aj ) +

kâˆˆI

kâˆˆI

1 =

X

Î±[Î¸i (ak )]ni (ak ), if i = j;

ni (aj ).

(10)

(i,j)âˆˆâˆˆI 2

Since finite-state Markov chains have at least one ergodic distribution, it follows that this system of
equations has at least one solution (see Lemma 4 in the Appendix). Given any solution, we define
P
the aggregate demand as D(p) = i,j ni (aj )aj , and we look for a market-clearing price, i.e. some
p âˆˆ R+ such that A âˆˆ D(p).
Proposition 2. A stationary equilibrium exists.
The first part of the proof uses the Intermediate Value Theorem to establish that there exists
a market-clearing price. Having found a candidate market-clearing price, the second part of the
proof constructs the remaining equilibrium objects in such a way that all conditions of Definition
1 are satisfied. The construction goes as follows. We first obtain the equilibrium price by solving
A âˆˆ D(p). We then obtain investorsâ€™ optimal asset holdings, {ai }iâˆˆI , the market tightness in each
16

Note, however, that the present competitive search model is not equivalent to a random search model with endogenous search intensities and bargaining. Indeed, under ex post bargaining, the choice of search intensities generates
externalities that are not internalized by the pricing mechanism. In contrast, the outcome of a model with endogenous
search intensities but competitive price posting would typically be constrained efficient. For a model with endogenous
search intensities under ex post bargaining and competitive price posting, see Lagos and Rocheteau (2007).
17
As in LR this property of the equilibrium follows from the quasi-linear specification for investorsâ€™ utility function.
If zero is an optimal market tightness in (7), then optimal asset holdings can take any value on the real line, so they
donâ€™t depend on a either.
18
Our proof in the appendix deals with the general case in which there may be multiple maximizers.

13

submarket, {Î¸i (aj )}(i,j)âˆˆI 2 , and the distribution of types, {ni (aj )}. From these conditions, along
with the free-entry condition, (1), we obtain trade sizes and intermediation fees:
qi (aj ) = ai âˆ’ aj
Î¸i (aj )
Ï†i (aj ) = Î³
.
Î±[Î¸i (aj )]

(11)
(12)

The order submission strategy of an investor in state (i, aj ) is to direct his order flow toward the
submarket Ïƒi (aj ).19 The set Î£? is then composed of all Ïƒi (aj ). The value functions are defined as
the solutions to the Bellman equations:
Vi? (a) = max 2 Vi [a, Ïƒk (a` ), Î¸k (a` )] .
k,` âˆˆ I

By construction, for (i, aj ) âˆˆ N ? , Vi? (aj ) coincides with the solution of our auxiliary Bellman
equation (7) evaluated at (i, aj ). Finally, we let the market tightness associated with any contract
Ïƒ 6= 0 be defined as in equation (3).
To conclude this section we recapitulate some key properties of the competitive search equilibrium of an OTC market. First, from the free-entry condition of dealers, in any active submarket
Î± (Î¸)
Ï† = Î³.
Î¸
From the dual formulation of a competitive search equilibrium, this condition implies that investors
face a trade-off between the cost at which they can readjust their asset holdings, Ï†, and the order
execution time, 1/Î±(Î¸).20 As suggested by Boehmer (2005) and others, this trade-off is relevant in
practice across trading venues. Second, from the first-order condition of the dual problem and the
free-entry condition of dealers,
Î³Î¸i (aj )
Î¸i (aj )Î±0 [Î¸i (aj )] ?
[Vi (ai , p) âˆ’ p(ai âˆ’ aj ) âˆ’ Vi? (aj , p)] =
= Ï†i (aj ).
Î±[Î¸i (aj )]
Î±[Î¸i (aj )]
The dealerâ€™s fee is a fraction Î¸Î±0 (Î¸) /Î± (Î¸) of the match surplus, where this fraction is equal to the
19

Note that the equilibrium price equates aggregate demand and supply, but does not explicitly equate â€œbuyâ€ and
â€œsellâ€ order flows in the inter-dealer market. As we show in Appendix A.3, this latter condition is actually implied by
the steady-state conditions (8) and (9).
20
If Î± was a function of the size of the trade, q, then the model would predict a more general trade-off between
Ï†, q, and Î¸. Such an extension of the matching technology in asset markets is left for future research. Pagnotta and
Philippon (2011) also consider a model based on LR where investors face a trade-off between entry fees and speed. In
their model, market-makers set up platforms where investors can access a competitive asset market at a given Poisson
rate in exchange for a fee. In contrast to our model, individual trades are not intermediated and the extent of market
segmentation is restricted.

14

elasticity of the matching function. This corresponds to the Hosios (1990) condition for efficiency
in markets with search frictions. Relative to models with ex post bargaining, such as those of DGP
and LR, where dealersâ€™ bargaining power is exogenous, here the dealersâ€™ share of the match surplus is endogenous and equal to the contribution of dealers to the matching process. This means
that the externalities associated with dealersâ€™ entry decisions are internalized through the pricing
mechanism. An additional consequence of the competitive search formulation is that investors are
not subject to a holdup problem when choosing asset holdings; in particular, for a given Î¸, competition between dealers makes it â€œas ifâ€ investors have an un-intermediated access to the market.
So, in terms of policy implications, our model suggests that more transparent OTC markets, in the
sense of contracts being publicly announced and search being directed, have better welfare properties than opaque markets with purely random search and ex-post bargaining. We come back to this
point in greater detail in the next section. Third, the number of active submarkets will reflect the
endogenous heterogeneity across investors since, according to the dual formulation, each investor
opens a submarket that is optimal given his state (i, aj ) with j 6= i. Hence, our model offers a
rationalization for a high degree of market segmentation.21

4

Liquidity and prices in two special cases

In the remainder of the paper we focus on two special cases: (i) The case where asset holdings are
restricted to A = {0, 1} and the set of investorsâ€™ private valuations is I = {`, h}, but the matching
function is general; and (ii) the case where asset holdings are unrestricted in A = R+ and the set
of private valuations is I âŠ‚ N, but the matching function is Leontief. The first case will allow us to
focus on order flows, speeds of execution, and trading costs across markets, taking as given asset
positions. The second case will generate an endogenous distribution of asset holdings, allowing us
to focus on relationship between trade size and trading cost.

4.1

Order flows, speeds of execution, and trading costs

In this section we consider a setting with restricted asset holdings, A = {0, 1}, and two utility
types, I = {`, h}, with respective utility flows for the asset, u` < uh .22 Without loss of generality,
we assume that Ï€`,h = Ï€h and Ï€h,` = Ï€` . First, we will provide a characterization of equilibrium
21

Pagnotta and Philippon (2011) argue that â€œa major feature of the new trading landscape is fragmentation,â€ where
market fragmentation corresponds to the phenomenon according to which securities are now traded in multiple markets
with different characteristics in terms of quality of execution and trading costs.
22
In order to extend our existence proof to the case with restricted asset holdings, we make two additional assumptions on the finite grid A âŠ‚ R+ . First, to ensure that investors can hold all the asset supply, we assume that
max A > A. Second, to keep prices bounded we assume that u1 (min A) is bounded away from âˆ’âˆ.

15

objects and show existence and uniqueness. Then, we derive analytical comparative statics for the
limit economy with small search frictions. Finally, for large frictions, we offer comparative statics
by way of a numerical example.
Bellman equations. Let âˆ†Vi â‰¡ Vi (1) âˆ’ Vi (0) denote the reservation value of an investor of type
i âˆˆ {`, h}, i.e., the expected utility of owning the asset minus the expected utility of being without
the asset. From Proposition 1, âˆ†Vh solves the following flow Bellman equation:
râˆ†Vh = uh + Î´Ï€` (âˆ†V` âˆ’ âˆ†Vh ) + max {Î±(Î¸) (p âˆ’ âˆ†Vh ) âˆ’ Î³Î¸}
Î¸â‰¥0

âˆ’ max {Î±(Î¸) (âˆ†Vh âˆ’ p) âˆ’ Î³Î¸} .
Î¸â‰¥0

(13)

The right side of (13) decomposes the flow reservation value into four terms. The first term, uh ,
is the flow value of owning the asset. The second term captures the fact that, with intensity Î´Ï€` ,
a high-valuation investor switches to a low type, in which case his reservation value drops from
âˆ†Vh to âˆ†V` . The third and fourth terms are, respectively, the flow values of searching to sell and
buy. The flow value of searching to sell enters the Bellman equation with a positive sign because
this option is available to the investor only if he already owns the asset. Therefore, it raises the net
utility of owning an asset. By contrast, the flow value of searching to buy enters with a negative
sign because this option is only available to investors who do not own the asset.
Similarly, the Bellman equation for âˆ†V` is
râˆ†V` = u` + Î´Ï€h (âˆ†Vh âˆ’ âˆ†V` ) + max {Î±(Î¸) (p âˆ’ âˆ†V` ) âˆ’ Î³Î¸}
Î¸â‰¥0

âˆ’ max {Î±(Î¸) (âˆ†V` âˆ’ p) âˆ’ Î³Î¸} .
Î¸â‰¥0

(14)

Lemma 1. In any equilibrium âˆ†Vh > âˆ†V` and p âˆˆ (âˆ†V` , âˆ†Vh ).
The first result of Lemma 1 states that high-valuation investors have strictly higher reservation values than low-valuation investors, which follows from the assumption that their utility flow
from holding the asset is strictly larger. The second result states that the equilibrium price must
lie between the reservation value of high and low types, since otherwise the market would not
clear. A consequence of these two results is that, in equilibrium, low-valuation investors have
strict incentives to sell and high-valuation investors have strict incentives to buy.
The properties reported in Lemma 1 also hold in DGP, except for one key difference. In DGP,
the inter-dealer market price is, generically, at a corner, p âˆˆ {âˆ†V` , âˆ†Vh }. This result arises because
buyers and sellers contact dealers at the same rate, so that p must adjust to make investors on the
long side of the market indifferent between trading and not. If Ï€h > A, then buyers are on the
16

long side and p = âˆ†Vh . Conversely, if Ï€h < A, then sellers are on the long side and p = âˆ†V` .
Such prices, {âˆ†V` , âˆ†Vh }, cannot be the basis of an equilibrium under competition for order flows:
indeed, if investors on one side of the market were indifferent between trading or not at the interdealer price, i.e., p = âˆ†Vi for some i âˆˆ {`, h}, then these investors would not be willing to pay
any intermediation fee and dealers would have no incentives to make a market for such investors.
Therefore, under competitive search the price has to lie strictly between âˆ†V` and âˆ†Vh , so that
dealers can break even with both types and the market can clear.23
With this result in mind, we define Sh â‰¡ âˆ†Vh âˆ’ p as the total surplus generated by a purchase,
i.e., the difference between the reservation value of a buyer, âˆ†Vh , and the reservation value of
a dealer, p. The intermediation fee is set so as to share the total surplus between the buyer, who
receives Sh âˆ’Ï†h , and the dealer, who receives Ï†h . Symmetrically, let S` â‰¡ pâˆ’âˆ†V` denote the total
surplus generated by a sale. The purchase and sale surpluses solve the following pair of Bellman
equations:
rSh = uh âˆ’ rp âˆ’ Î´Ï€` (Sh + S` ) âˆ’ max {Î±(Î¸)Sh âˆ’ Î³Î¸}

(15)

rS` = rp âˆ’ u` âˆ’ Î´Ï€h (Sh + S` ) âˆ’ max {Î±(Î¸)S` âˆ’ Î³Î¸} .

(16)

Î¸

Î¸

To solve this system of equations for a given p, we define:
Î“(S) = (r + Î´)S + max {Î±(Î¸)S âˆ’ Î³Î¸} .
Î¸

The function Î“(S) is twice continuously differentiable, strictly increasing, strictly convex, and
satisfies Î“(0) = 0 and Î“(âˆ) = 0. Using this function, the system (15)-(16) can be written
Î“(Sh ) + Î“(S` ) = uh âˆ’ u`
Î“(Sh ) = uh âˆ’ rp + (1 âˆ’ Î´Ï€` )Sh âˆ’ Î´Ï€` S` .

(17)
(18)

Equations (17) and (18) implicitly define two strictly decreasing, strictly concave, and continuously differentiable functions Sh = F (S` ) and Sh = G(S` ), respectively. The slopes of these
functions are
r + Î´ + Î±(Î¸` )
Î´Ï€`
< G0 (S` ) = âˆ’
,
F 0 (S` ) = âˆ’
r + Î´ + Î±(Î¸h )
r + Î´Ï€` + Î±(Î¸h )
23

A related result occurs in the model of Gavazza (2011). There is a continuous distribution of private valuations
of the asset across investors, and participation in the market is costly. As a result, there are two thresholds for private
valuations: one above which agents participate as buyers and one below which they participate as sellers. Participation
requires that agents get a positive surplus from a trade. So if trades were intermediated by dealers, as in DGP, the
inter-dealer market price would satisfy the same condition as in our model.

17

Sh

Sh = Sl
-1

G (uh - ul )

F (Sl )

G (S l ; p)

G-1 (uh - ul )

Sl

Figure 1: The determination of S` and Sh given p.
where Î¸` and Î¸h are the maximizers of the programs defining Î“(S` ) and Î“(Sh ), i.e.,
Î±0 (Î¸i )Si = Î³ for i âˆˆ {`, h}.

(19)

The ranking of these derivatives implies that if a solution to F (S` ) = G(S` ) exists, then it must be
unique. It also implies that F (S` ) crosses G(S` ) from above at any intersection, as illustrated in
Figure 1. Using these results, we now address the issue of existence.
Lemma 2. There exist p` < ph such that the system (15)-(16) has a strictly positive solution,
[S` (p), Sh (p)], if and only if p âˆˆ (p` , ph ). This solution is unique. Moreover, S` (p) is strictly
increasing in p, Sh (p) is strictly decreasing in p, and S` (p` ) = Sh (ph ) = 0.
According to Lemma 2, for a solution to exist the price must be neither too high nor too low,
so that both buy orders and sell orders generate strictly positive surpluses. Moreover, the surplus
from selling the asset is increasing in the price p âˆˆ (p` , ph ) while the surplus from buying the asset
is decreasing in p. Recall, from (19), that there is less entry of dealers on a given side of the market
if the corresponding trading surplus is lower. Thus, Î¸h decreases with p while Î¸` increases with p.

18

Market clearing. We now solve for the distribution of investors across types and ensure that
the asset market clears. First, since p âˆˆ (âˆ†V` , âˆ†Vh ) from Lemma 1, the equilibrium buy- and
sell-order flows must be equal:
Î±(Î¸h )nh (0) = Î±(Î¸` )n` (1).
(20)
The left side is the buy-order flow originating from (h, 0)-type investorsâ€”investors with a high
valuation for the asset but who do not own itâ€”and the right side is the sell-order flow originating
from (`, 1)-type investorsâ€”investors who own the asset but have a low valuation for it. We derive
the measure of buyers, nh (0), from the following steady-state condition:
Î´Ï€h n` (0) = Î´Ï€` nh (0) + Î±(Î¸h )nh (0).

(21)

The left side is the inflow coming from (`, 0)-investors who change type. The first and second terms
on the right side are the outflows of type (h, 0)-investors who switch to low type with intensity Î´Ï€`
or who trade with intensity Î±(Î¸h ), respectively. Similarly, the steady-state equation for the measure
of (`, 0)-type investors is
Î´Ï€` nh (0) + Î±(Î¸` )n` (1) = Î´Ï€h n` (0),
which, from (20), can be rewritten
Î´Ï€` nh (0) + Î±(Î¸h )nh (0) = Î´Ï€h n` (0).

(22)

Equations (21)-(22) can be interpreted as defining the ergodic distribution of a two-state Markov
chain, for which (h, 0)-type investors transition to type (`, 0) at Poisson rate Î´Ï€` + Î±(Î¸h ), and
(`, 0)-type investors transition to type (h, 0) at Poisson rate Î´Ï€h . Together with the market-clearing
condition, nh (0) + n` (0) = 1 âˆ’ A, these steady-state conditions imply that
nh (0) = (1 âˆ’ A)

Î´Ï€h
.
Î´ + Î±(Î¸h )

(23)

By symmetry,
n` (1) = A

Î´Ï€`
.
Î´ + Î±(Î¸` )

(24)

Thus, the equality of order flows, (20), can be rewritten as
(1 âˆ’ A)

Î´Ï€` Î±(Î¸` )
Î´Ï€h Î±(Î¸h )
=A
.
Î´ + Î±(Î¸h )
Î´ + Î±(Î¸` )

19

(25)

Recall from Lemma 2 that Î¸h decreases with p while Î¸` increases with p. Therefore, one easily
sees that the left side of (25) is strictly decreasing and equal to zero at p = ph , while the right
side is strictly increasing and equal to zero at p = p` . Consequently, there exists a unique price
p âˆˆ (p` , ph ) equating buy- and sell-order flows. Combining these observations with Lemma 1 we
obtain the following result.
Proposition 3. There exists a unique competitive search equilibrium.
The remaining equilibrium objects can be found using the same steps as in Section 3.2. In
particular, the trading fees are
Î¸h Î±0 (Î¸h )
Sh
Î±(Î¸h )
Î¸` Î±0 (Î¸` )
S` .
=
Î±(Î¸` )

Ï†h =
Ï†`

One recognizes here the Hosios (1990) condition for efficiency in economies with search frictions.
The trading fee that a dealer charges for a buy-order, Ï†h , is equal to the dealerâ€™s contribution to the
sale surplus, as defined by the elasticity of the matching function. This elasticity determines the
share of the trade surplus that a dealer appropriates, and hence it measures the implicit bargaining
power of dealers when they trade. Note that, unless the matching function has constant elasticity
(such as in the Cobb-Douglas matching function) or unless Î¸` = Î¸h , the implicit bargaining power
of dealers will differ depending on whether they trade with buyers or sellers. This asymmetry arises
because intermediation on both sides of the market implies that there are two separate matching
processes: one between dealers and buyers, and one between dealers and sellers. As a result the
Hosios condition must apply separately to each one of them.
Comparative statics near the Walrasian limit. In order to derive analytical comparative statics,
it is useful to study the limiting equilibrium as search frictions vanish. To do this, we first assume
that investors contact dealers at intensity Î»Î±(Î¸), and then we drive the search efficiency parameter,
Î», to +âˆ. We focus on the case Ï€h > A, so that high-valuation investors are on the long side
of the market (a similar analysis applies to Ï€h < A). In this case, there are more high-valuation
agents than assets. Hence, in the frictionless benchmark, the price adjusts so that high-valuation
investors are indifferent between buying or not, and the price and allocations are
p? =

uh
,
r

n?h (0) = Ï€h âˆ’ A,

20

and

n?` (1) = 0.

The intermediation fees are implicitly equal to zero. Our main proposition characterizes equilibrium objects near this Walrasian limit.
Proposition 4. Let the matching technology be Î»Î±(Î¸) and assume that Ï€h > A. As Î» â†’ âˆ, the
price, intermediation fees, and the measures of buyers and sellers admit the following first-order
approximation:
p =
Ï†h =
Ï†` =
nh (0) =
n` (1) =

 
1
Î´Ï€` s?`
+o
p âˆ’
Î»r
Î»
 
1
o
Î»
 
? 0 ?
1
Î¸` Î± (Î¸` ) s?`
+o
?
Î±(Î¸` ) Î»
Î»
 
AÎ´Ï€`
1
?
nh (0) +
+o
?
Î»Î±(Î¸` )
Î»
 
1
AÎ´Ï€`
+o
n?` (1) +
,
?
Î»Î±(Î¸` )
Î»
?

(26)
(27)
(28)
(29)
(30)

where o(1/Î») is such that limÎ»â†’âˆ Î»o(1/Î») = 0, while s?` = limÎ»â†’âˆ Î»S` and Î¸`? = limÎ»â†’âˆ Î¸`
jointly solve maxÎ¸ {Î±(Î¸)s?` âˆ’ Î³Î¸} = uh âˆ’u` . The market tightness for buyers satisfies limÎ»â†’âˆ Î¸h =
0, and the purchase surplus satisfies limÎ»â†’âˆ Î»Sh = 0.
As Î» â†’ âˆ, the different components of the competitive search equilibrium converge toward
their Walrasian counterparts. Sellers, who are on the short side of the market, trade almost instantly: market tightness converges to some strictly positive limit, Î¸`? , so that the average execution
time, 1/Î»Î±(Î¸` ), converges to zero. Buyers, who are on the long side, trade with a non-zero asymptotic execution time. This sharp asymmetry in execution times is necessary to keep the buy- and
sell-order flows balanced in the limit.
Proposition 4 allows for analytical comparative statics of various equilibrium objects of interest. For example, an increase in the gains from trade, uh âˆ’ u` , causes the asymptotic sale surplus,
s?` , to increase. As a result, the asymptotic price discount, lim Î»(p? âˆ’ p)/p? , increases because
buyers expect that they will lose more utility upon switching to a low type. The increase in the
sale surplus represents a profit opportunity for dealers. By free entry, the supply of intermediation
services, Î¸`? , increases, which implies that investors can trade faster. As a result, the asymptotic
measures of buyers and sellers, nh (0) and n` (1), decrease. By the same token, when Î¸`? increases,
intermediaries receive fewer trading opportunities on average, so the zero-profit condition requires
that intermediation fees, Ï†?` = lim Î»Ï†` , go up.
An increase in the flow entry cost of dealers, Î³, makes dealers more reluctant to post contracts
21

and hence the asymptotic tightness, Î¸`? , decreases. As a result, the measures of buyers and sellers
increase, the asymptotic sale surplus s?` increases, and so does the price discount. If the elasticity
of the matching function is constantâ€”e.g., the Cobb-Douglas caseâ€”intermediation fees increase.
In response to an increase in the intensity of switching to the low valuation, Î´Ï€` , buyers anticipate that they may switch type soon after purchasing the asset. This lowers their willingness
to pay for the asset, so the inter-dealer price decreases. Moreover, when investors switch to the
low valuation more quickly after purchasing the asset, the asymptotic measure of sellers, n` (1),
increases.24
Next, we consider the relationship between the price discount and the elasticity of the matching
function. For this we focus on the special case of a Cobb-Douglas matching function.
Corollary 1. Suppose Î±(Î¸) = Î¸Î· . Then,
Î¸`?

Î· âˆ†u
=
1âˆ’Î· Î³

and

s?`

 Î· 
1âˆ’Î·
Î³
uh âˆ’ u`
=
.
Î·
1âˆ’Î·

Thus, the asymptotic market tightness for sellers, Î¸`? , is an increasing function of Î· and the asymptotic sellerâ€™s surplus, s?` , is a hump-shaped function of Î·. As a consequence, the sellerâ€™s asymptotic
trading fee and the asymptotic price discount are both hump-shaped functions of the matching
elasticity, Î·.
To gain intuition for the effect of the elasticity, Î·, note that the equation defining s?` can be
written as
u` + max {âˆ’Î³Î¸ + Î±(Î¸)s} = uh = rp? .
Î¸

This equation is an asymptotic indifference condition. It states that the asymptotic sale surplus, s?` ,
must adjust so that a seller with a trading opportunity is indifferent between continuing search (on
the left side) and selling his asset (on the right side).
One sees that, when Î· â†’ 0, then Î±(Î¸) = Î¸Î· converges to 1 if Î¸ > 0 and to zero if Î¸ = 0. That
is, an arbitrarily small market tightness, Î¸, is sufficient to attain the maximum search intensity of
1. It is thus intuitive that, in equilibrium, market tightness is approximately zero and dealers incur
almost no contract posting cost, Î±(Î¸) is approximately one, and the sale surplus is approximately
equal to uh âˆ’ u` .
When Î· â†’ 1, then the search technology becomes approximately linear. The sellerâ€™s surplus
must then converge to the search cost Î³: if it were larger, the utility of continuing search would be
24

One may have the impression that Proposition 4 implies the counterintuitive result that nh (0) increases with Ï€` .
This, in fact, is not the case because Ï€` also enters the leading term in the expansion: n?h (0) = Ï€h âˆ’ A = 1 âˆ’ Ï€` âˆ’ A.
This leading term dictates that an increase in Ï€` decreases nh (0), as intuition suggests.

22

unbounded, and if it were smaller it would be zero. Note that, to keep the utility of continuing to
search strictly positive, the market tightness must go to infinity.
We can now discuss comparative statics with respect to Î·. By the envelope condition, the
derivative of the utility of continuing to search with respect to Î· is equal to s?` log(Î¸`? ) (Î¸`? )Î· , which
is negative for small Î¸`? and positive for large Î¸`? . Graphically, an increase in elasticity â€œrotatesâ€ the
search technology around the point (1, 1). It makes it less efficient for small Î¸ and more efficient
for large Î¸.
Now assume that Î· is small. Then in equilibrium Î¸ is small, implying that an increase in Î·
will reduce search efficiency and, by the indifference condition, increase the sale surplus, s?` . Vice
versa, when Î· is large, then in equilibrium Î¸ is very large, implying that an increase in elasticity, Î·,
will increase search efficiency and hence reduce the sale surplus, s?` .
Welfare. Finally, we show that the unique competitive search equilibrium of our economy is
also constrained efficient, i.e., it maximizes societyâ€™s welfare given the trading frictions arising
from the matching technology. We define social welfare as the discounted sum of the utility flows
of all investors net of dealersâ€™ entry costs,
Z
W=

+âˆ

eâˆ’rt {nh,t (1)uh + n`,t (1)u` âˆ’ Î¸h,t nh,t (0)Î³ âˆ’ Î¸`,t n`,t (1)Î³} dt,

(31)

0

where we are using the fact that a social planner would not find it optimal to assign (costly) dealers
to trade with h-valuation investors who hold assets (since an asset has no better use than in the
hands of a h-type investor) or `-valuation investors who do not hold any asset (since an asset has
no worse use than in the hands of an `-type investor). Intermediation fees do not enter W since
they are pure transfers from investors to dealers that cancel out. The planner maximizes W with
respect to time path for the state variables, ni,t (a), and controls, Î¸i,t , subject to the laws of motion
for these state variables and to the balanced order flow condition,
Î±(Î¸h,t )nh,t (0) = Î±(Î¸`,t )n`,t (1).

(32)

If (32) were not satisfied then the planner could reduce the measure of dealers on the long side
P
of the market, thereby saving some entry costs. We omit the condition (i,a) ni,t (a) = 1 as it is
automatically satisfied by the laws of motion for ni,t (a) given (32) and the initial condition.
Proposition 5. The competitive search equilibrium is constrained efficient.
We establish this proposition in the appendix, where we set up the Hamiltonian corresponding
to this optimal control problem and check that its first-order conditions coincide with the conditions
23

for a competitive search equilibrium. In particular, the co-state variable associated with ni,t (a),
which represents the marginal social value of an investor of type i with holding a, coincides with
Vi,t (a), the private value of such an investor. The Lagrange multiplier associated with the balanced
order-flow condition coincides with the equilibrium price, p(t).
The proposition generalizes the welfare theorem for competitive search economies first derived
by Moen (1997) to a two-sided OTC market augmented with a competitive interdealer market. In
order to appreciate the significance of the previous proposition, consider the same economy with
random search and ex-post bargaining, as in DGP or LR. Let Î½ âˆˆ [0, 1] denote the dealerâ€™s bargaining power in the Nash bargaining to determine intermediation fees. Comparing the equilibrium
conditions with the first-order conditions of the plannerâ€™s problem (all shown in the appendix) we
obtain:
Corollary 2. The equilibrium of an OTC market with random search and ex-post bargaining is
constraint efficient if and only if
Î±0 (Î¸` )Î¸`
Î±0 (Î¸h )Î¸h
=
=Î½
Î±(Î¸h )
Î±(Î¸` )

(33)

Constrained efficiency in the opaque economy requires that dealersâ€™ bargaining power is equal
to their contribution to the matching process as measured by the elasticity of the matching function.
This is the generalization of the Hosios (1990) condition for efficiency in a two-sided random
search market. Weill (2007) derived a related result in an economy without free entry but in which
dealers can hold inventories. The Corollary thus establishes that, unless the matching function has
a constant elasticity (as in the Cobb-Douglas matching function) or the two sides of the market have
the same endogenous tightnesses, the Hosios condition (33) will not hold for a single bargaining
power of dealers. So generically, the outcome of the opaque market will be socially inefficient.
Finally, consider an economy that is segmented into two distinct markets: a transparent market
with a measure Ï‡ of investors who can observe contracts posted by dealers and direct their search
accordingly, and an opaque market composed of a measure 1 âˆ’ Ï‡ of investors who search for
dealers at random (as in Lester (2011)). In contrast to investors who are assigned to a particular
market, dealers are free to enter the transparent market or the opaque market. We call Ï‡ the degree
of transparency of the overall economy. From the results above we have the following corollary.
Corollary 3. The optimal degree of transparency is Ï‡ = 1.
Our economy highlights an important welfare-enhancing role of transparency: since investors
essentially choose their trading speed, those investors with the largest gains from trade obtain
fast execution, and those who have less to gain from trade ultimately execute their orders more
24

slowly. This result provides support for recent regulatory changes (such as the TRACE system)
that promote transparency in OTC markets.

4.2

Asset holdings, market fragmentation, and trading costs

In the previous section, we restricted investorsâ€™ asset holdings in order to focus on their choice of
trading speeds and the corresponding trading costs. In this section we adopt a special matching
technology, which implies that market tightness and average execution speeds are equal across active submarkets, and we focus on the equilibrium distribution of asset holdings and the relationship
between trade size and trading costs.
More specifically, we adopt the same environment as the one described in Section 2 but we
suppose that Î±(Î¸) = Âµ min{1, Î¸}, with Âµ > 0, so that there is a strict complementarity between
the number of dealers and the number of orders processed. One interpretation of this technological
assumption is that, if Î¸ > 1, each order must be matched to an individual dealer, and the average
time for a dealer to process an order is 1/Âµ. If Î¸ < 1, there are not enough dealers to handle all of
the orders. In this case, orders are randomly assigned to dealers, so that each order is matched to
a dealer with probability Î¸.25 For simplicity, we also assume that Ï€i,j â‰¡ Ï€j for all i, j âˆˆ I 2 , with
P
jâˆˆI Ï€j = 1, so that preference shocks are i.i.d. across investors.
Active submarkets. When an investor of type i with asset holdings a contacts a dealer and
chooses a new portfolio a0 , the utility gain is
Î›i (a0 , a) = Vi? (a0 ) âˆ’ Vi? (a) âˆ’ p(a0 âˆ’ a),
less any fee charged by the dealer. Therefore, as in the benchmark model, an investor of type i
with asset holdings a chooses a submarket that solves
max
{Âµ min{1, Î¸} [Î›i (a0 , a) âˆ’ Ï†]}
0
Î¸,a ,Ï†

subject to the free-entry condition of dealers


1
Âµ min 1,
Î¸


Ï† â‰¤ Î³, with equality if Î¸ > 0.

25
It should be noted that this matching technology does not satisfy the assumptions imposed earlier: it is not
everywhere strictly increasing and continuously differentiable, and Î±0 (0) = Âµ < âˆ. In Appendix A.11, we verify that
the properties of equilibrium reported in Section 3 remain true under this specification.

25

Substituting the constraint into the objective, the optimal choice of Î¸ for a type i investor with asset
holdings a is
ï£±
ï£´
<
ï£² 0
0
Î¸i (a) =
Î›i (a , a) = Î³/Âµ.
(34)
[0, 1] if max
a0
ï£´
ï£³
1
>
In words, given the prevailing asset price p, an investor of type i with asset holdings a will rebalance his portfolio in equilibrium if the (maximized) gain from doing so exceeds the expected cost
incurred by a dealer to process the transaction, which is simply the flow cost Î³ multiplied by the
average time to execute the order 1/Âµ. Note that dealersâ€™ entry generates no congestion on other
dealersâ€”their matching rate is Âµâ€”as long as Î¸ â‰¤ 1. As a result, active submarkets will typically
have Î¸i (a) = 1. In each of these active submarkets, a contract is posted with a fee,
Ï†i = Ï† â‰¡

Î³
,
Âµ

(35)

which ensures that dealers earn zero profits, along with a quantity qi (a) = a0i âˆ’ a, where
ai = arg max
Î›i (a0 , a).
0

(36)

a â‰¥0

Taken together, the results above imply that the Bellman equation for an investor of type i with
asset holdings a can be rewritten as
rVi? (a)

= ui (a) + Î´

X

Ï€k [Vk? (a)

âˆ’

Vi? (a)]

k



Î³
0
.
+ Âµ max 0, max
Î›i (a , a) âˆ’
a0
Âµ


From the viewpoint of an investor, it is as if trading opportunities arrive at rate Âµ, and they can
choose whether or not to trade at a cost Ï† = Î³/Âµ. In this sense, our model is formally equivalent to
a model of trade with fixed adjustment costs, as in Lo et al. (2004), though the costs of rebalancing
oneâ€™s portfolio arise endogenously in our model.
As in most models with adjustment costs, the equilibrium in our environment could involve
â€œinaction regions,â€ where an investor of type i who holds aj for j 6= i chooses not to submit a trade
order because the fee required to compensate a dealer for executing this order exceeds the expected
gains to the investor. In what follows, we will focus on equilibria in which investors who hold their
optimal portfolio always rebalance their asset holdings after receiving a preference shock. As we
establish below, this allows us to sidestep the calculation of value functions for all a âˆˆ R+ , and
instead characterize equilibrium asset holdings using a simple variational argument.

26

Optimal asset holdings. Before characterizing the asset demand functions in our candidate equilibrium, we sketch the logic of our approach (formal proofs are in Appendix A.11). Let Ni âŠ‚ R+
denote the inaction region for an investor of type i, i.e., the set of values of a such that an investor
of type i with asset holdings in this set would choose not to trade. Given Î³/Âµ sufficiently small,
T
we can establish that iâˆˆI Ni = âˆ…, so that an investor of type i with a âˆˆ Ni will surely trade
if he receives a preference shock j 6= i. Given this behavior, there exists a unique ai âˆˆ Ni that
maximizes the payoffs of a type i investor.
To characterize these optimal asset holdings, note that ai is a solution to (36), for each i âˆˆ I,
where
rVi? (a) = ui (a) + Î´

X

Ï€k [Vk? (a) âˆ’ Vi? (a)]

(37)

k

if a âˆˆ Ni and
rVi? (a)

= ui (a) + Î´

X

Ï€k [Vk? (a)

âˆ’

k

Vi? (a)]



Î³
+ Âµ max
Î›i (a , a) âˆ’
0
a
Âµ
0


(38)

otherwise. One can manipulate (37) and (38) to see that, for all a in the inaction region Ni , the net
benefit to a type i investor from acquiring portfolio a, Vi (a)âˆ’pa, is a positive affine transformation
of
P
(r + Âµ) [ui (a) âˆ’ rpai ] + Î´ Ï€k [uk (a) âˆ’ rpa]
.
(39)
(r + Âµ) (r + Î´) âˆ’ Î´ÂµÏ€j
Since any optimal asset holding must belong to the inaction region Ni , it follows that ai must
satisfy the first-order condition for Vi (a) âˆ’ pa to be maximized:
P
(r + Âµ) u0i (ai ) + Î´ Ï€k u0k (ai )
= rp.
r+Âµ+Î´

(40)

Note that this equation uniquely determines the optimal asset holding for an investor of type i,
ai . Studying the left side of (40), we see that the demand of an investor of type i depends on his
current marginal utility and his expected future marginal utility, weighted by the parameters r, Âµ,
and Î´. In particular, an investor places more weight on his current value of marginal utility when
he is impatient, when orders are executed quickly, and when he expects to stay in his current state
for a long time.26
26

The asset demand functions characterized in (40) are closely related to the asset demand functions derived in LR,
where investors must bargain with dealers over the quantity to be traded and the corresponding intermediation fee. In
particular, our asset demand functions correspond to those of LR when dealers have zero bargaining power. Interestingly, LR show that investorsâ€™ portfolio decisions are socially inefficient whenever dealers have positive bargaining

27

P
Moreover, if u0i (ai ) > k Ï€k u0k (ai ), then âˆ‚ai /âˆ‚Âµ > 0; that is, the investorâ€™s demand for the
asset increases as trading frictions are reduced. Intuitively, when an investorâ€™s current marginal
utility is relatively high, an increase in trading speed will cause him to take a larger position now
since it will be easier for him to unwind this position in the event of an adverse preference shock.
P
Conversely, if u0i (ai ) < k Ï€k u0k (ai ), i.e., if the investorâ€™s marginal utility in the current state is
below average, then âˆ‚ai /âˆ‚Âµ < 0. More generally, as in LR, faster trading causes investors to take
more extreme positions, while slower trading gives agents incentives to choose a more moderate
portfolio that will not be too far from the optimal after any preference shock. Finally, as Âµ goes to
infinity, the optimal portfolio tends to the value of ai that solves u0i (ai ) = rp, which is the portfolio
choice that would prevail in a competitive market where all trades can be executed instantaneously.
The steady-state distribution and market-clearing conditions. Given the results above, asset
holdings in the candidate equilibrium can be described by a list {ai }Ii=1 . Letting nij denote the
measure of agents of type i with asset holdings aj , the steady-state distribution must satisfy
Î´Ï€i

X

nkj âˆ’ Î´nij âˆ’ Âµnij = 0, for i 6= j

(41)

kâˆˆI

Î´Ï€i

X

nki + Âµ

X

nik âˆ’ Î´nii = 0, for i = j

(42)

k6=i

kâˆˆI

X

nij = 1.

(43)

(i,j)âˆˆI 2

The first term in equation (41) represents the inflow of agents into state ij, with i 6= j, which only
occurs because of type-switching. The second two terms in equation (41) represent the outflow
from state ij, which occurs because of both type-switching (the second term) and trade (the third
term). Equation (42) is the steady-state condition for investors holding the optimal portfolio. In
this case, inflow can occur either when investors successfully rebalance their portfolio or when
they (luckily) receive a preference shock that corresponds to their current asset holdings. Outflow,
of course, occurs because of type-switching.
P
P
Solving, we find that j nij = j nji = Ï€i , so that
Î´Ï€i Ï€j
, for j 6= i,
Âµ+Î´
Î´Ï€i2 + ÂµÏ€i
=
for j 6= i.
Âµ+Î´

nij =

(44)

nii

(45)

power. Hence, the competitive search mechanism studied in this paper corrects the inefficiencies that arise from an
environment with random search and bargaining; intuitively, competition between dealers for order flow ensures that
investors receive exactly their marginal gain from readjusting their portfolio.

28

Note that the distribution of probabilities across states is symmetric, nij = nji . Also, âˆ‚nij /âˆ‚Âµ < 0
and âˆ‚nij /âˆ‚Î´ > 0 if j 6= i, while âˆ‚nii /âˆ‚Âµ > 0 and âˆ‚nii /âˆ‚Î´ < 0: the measure of investors who
are matched to their desired portfolio increases with the speed of execution and decreases with the
arrival rate of preference shocks.
Turning now to the determination of the asset price in the competitive inter-dealer market, we
P
P
note that market clearing requires i,j nij ai = A. Using the fact that j nij = Ï€i , this condition
reduces to
X
Ï€i ai = A.
(46)
i

Equilibrium and comparative statics. An equilibrium such that Î¸i (aj ) = 1 for all i 6= j can
thus be defined as a list {ai }, {nij }, Ï†, and p that satisfy (35), (40), and (44)-(46). The individual
portfolio choices (aj ) in (40) depend on p, the equilibrium price in the inter-dealer market. The
distribution of investors over portfolios and preference types is given by (44) and (45). Given these
individual demands, the market-clearing condition (46) determines a unique price. Finally, the
choice of Î¸i (aj ) described in (35) is optimal provided that Î³/Âµ is sufficiently small.
Using these equilibrium conditions, we can explore the modelâ€™s implications for prices, trading
activity, and allocations. For example, although we have disentangled the asset price from the
intermediation fee, one can still compute the effective price that an investor pays (or receives) per
unit of the asset he buys (or sells). Investors with asset position ai who trade quantity aj âˆ’ ai
through a dealer, pay (or receive, if aj âˆ’ ai is negative)
pÌ‚ij = p +

Ï†
aj âˆ’ ai

per unit of the asset. The difference between the prices at which investors buy and sell is sometimes
treated as a measure of market liquidity. Notice that if aj âˆ’ ai > 0, then
pÌ‚ij âˆ’ pÌ‚ji =

2Î³
2Ï†
=
> 0.
aj âˆ’ ai
Âµ (aj âˆ’ ai )

(47)

So for this typical â€œround tripâ€ transaction, investors trade at a higher effective price when they
buy than when they sell. One can notice from (47) that the effective spread decreases with the size
of the order, which is in accordance with the evidence documented by Schultz (2001) and Edwards
et al. (2007) for over-the-counter markets.27
27

Similarly, Green, Hollifield, and SchuÌˆrhoff (2007) document that dealers earn lower average markups on larger
trades in the market for municipal bonds. By estimating a bargaining model they find that dealerâ€™s bargaining power
is substantial and it decreases in trade size.

29

A decrease in Î³, the operating costs for dealers, also causes a decrease in the bid-ask spread.
The effects of a change in Âµ are less obvious. On the one hand, an increase in Âµ has a direct effect
in reducing Ï† = Î³/Âµ. On the other hand, a change in Âµ also affects equilibrium asset holdings
and hence the quantity traded, aj âˆ’ ai . However, since the distribution of asset holdings spreads
out as Âµ increases, the quantity of assets traded in many individual trades tends to increase (see
Lagos and Rocheteau (2009)); in the case of I = 2, for example, it can be checked that |a2 âˆ’ a1 |
increases with Âµ, so the bid-ask spread unambiguously decreases with Âµ.
The model also has implications for trading volume, which is defined as follows. The flow of
investors who can readjust their portfolios per unit of time is Âµ. A fraction nij of these investors
readjust their portfolio from ai to aj so that the quantity they trade is |aj âˆ’ ai |. Thus, the total
volume of trade is
ÂµX
V=
nij |aj âˆ’ ai | .
(48)
2 i,j
An increase in Âµ has three distinct effects on trade volume. First, the measure of investors in any
individual state (i, j) âˆˆ I 2 who can readjust their portfolios increases, which tends to increase trade
P
volume. Second, the proportion 1 âˆ’ i nii of agents who are mismatched to their portfolioâ€”and
hence the fraction of agents who wish to tradeâ€”decreases, which tends to reduce trade volume.
Finally, as discussed above, the distribution of asset holdings spreads out, which tends to increase
the quantity of assets traded in many individual trades, and hence increase volume. Given (44) and
(48), it is easy to check that the first two effects combined lead to an increase in V. Therefore,
when the third effect is also positive the total volume of trade unambiguously increases with Âµ.
We can also study some limiting cases. First, as Âµ â†’ âˆ, so that trades are executed instantaneously, we see from (35) that intermediation fees go to 0. Moreover, from (40), the individual
demand for the asset converges to the Walrasian demand, u0j (aj ) = rp, and from (44)-(45) all investors hold their desired portfolios. The same is true as Î´ â†’ 0, since type never changes. Finally,
as Î³ â†’ 0, the intermediation fee Ï† â†’ 0. However, a decrease in Î³ will only have an effect on asset
prices and allocations if it causes a change in the set of active submarkets; if the initial value of Î³
was sufficiently small, so that Î¸i (aj ) = 1 for all i 6= j, then a decrease in Î³ has no effect on the
allocation of assets across agents or on asset prices.

5

A numerical example

In this final section, we return to the general environment described in Section 2 and develop a
numerical example to show that our model generates quantitative outcomes of reasonable magnitude, in terms of trade size, execution speed, and trading costs. We then use this example to offer
30

Table 1: Parameter values
Parameter
Asset supply
Cost of posting contract
Contact intensity
Elasticity of matching function
Discount rate
Type switching intensity
Elasticity of utility function
Number of utility types
Transition probabilities
Utility types

A
Î³
Î»
Î·
r
Î´
Ïƒ
I
Ï€i
Îµi

Value
1
1
85 per year
0.7
0.05 per year
0.7 pear year
4.75
30
1/I
âˆ’1
eâˆ’10+12.3Î¦ [0.05+0.90(iâˆ’1)/I]

In the last line of the table, Î¦âˆ’1 (q) is the inverse cumulative function of a standard
normal distribution. According to the formula, the grid of {Ï‰i }iâˆˆ{1,...,I} is made up
of 30 percentiles, equally spaced between 0.05 and 0.95, of a log normal distribution
with mean Âµ = âˆ’10 and standard deviation Ïƒ = 12.3.

some numerical comparative statics. We assume that preference shocks are multiplicative with an
iso-elastic utility function, ui (a) = Îµi v(a) with v(a) = a1âˆ’Ïƒ /(1 âˆ’ Ïƒ), and the matching function
is Cobb Douglas, Î±(Î¸) = Î»Î¸Î· . The baseline values, shown in Table 1, are chosen as follows.
First, as is common, we set the discount rate to 5% per year. Second, given that our preference
specification is homogenous, we normalize the asset supply to A = 1.28 Third, with Cobb Douglas
matching, since the unit used to measure market tightness is meaningless in our model, we can
normalize the contract posting cost to 1 (see Shimer, 2005, for a similar argument in his calibration
of the Mortensenâ€“Pissarides model).
The contact intensity, Î», is chosen to generate reasonable trading intensities, measured as follows. In a stationary equilibrium, the aggregate quantity of assets waiting to be either purchased
P
or sold at any point in time is equal to ij ni (aj )|ai âˆ’ aj |. The probability that a randomly chosen
unit waiting to be traded belongs to the order of agent (i, j) is:
ni (aj )|ai âˆ’ aj |
.
k,` nk (a` )|ak âˆ’ a` |

Ïˆi (aj ) = P

P
Thus, the trading intensity of a randomly chosen unit is Î»Ì„ = i,j Ïˆi (aj )Î»Î¸i (aj )Î· . In our numerical
example, the contact intensity, Î» = 85, implies that the average trading intensity is Î»Ì„ = 286, i.e., it
takes on average 0.87 days to trade one unit of asset.
We pick the rest of the parameters based on empirical targets from the municipal bond market.
28

Up to an appropriate scaling of the contract posting cost, the only effect of scaling A up and down is to scale down
all relevant equilibrium objects by the same constant. Namely, if {p, ai , Î¸i } is an equilibrium when the asset supply is
A and the contract posting cost is Î³, then, for any Î» > 0, {Î»âˆ’Ïƒ p, Î»ai , Î¸i } is an equilibrium when the asset supply is
Î»A and the contract posting post is Î³Î»1âˆ’Ïƒ .

31

In our numerical example, the type switching intensity, Î´ = 0.7, generates a turnover of about
46% per year, which is in the ballpark of the 56% turnover measured by Green et al. (2007) for
seasoned bonds over the 2000-2004 time period. We adopt a parsimonious parameterization for
the distribution of utility types in order to obtain a rough match of the distribution of relative trade
sizes, as proxied by the distribution of relative sale sizes from customers to dealers reported by the
Fact Book of the Municipal Securities Rulemaking Board (2008). Figure 2 shows the theoretical
distribution generated by the model and compares it to its empirical counterpart.
Figure 2: Empirical vs. theoretical CDFs of (normalized) trade sizes.
cumulative distribution of normalized trade sizes
1

0.5

empirical
theoretical
0

0

0.5

1

Normalized Size
Notes: the red line plots the empirical distribution of normalized trade sizes reported by the Fact Book
of the Municipal Securities Rulemaking Board (2008). The blue line is the corresponding distribution
of relative trade sizes generated by our calibrated model.

Finally, to set the elasticity of the matching function, Î·, and the elasticity of the utility function,
Ïƒ, we consider two empirical targets on transaction costs. The first empirical target is the average
transaction cost per unit traded, which was between 50bp and 100bp during the 2000-2004 period
according to the markup data reported by Green et al. (2007). The average unit transaction cost
that an econometrician would measure in a stationary equilibrium of our model is
X

Ïi (aj )

ij

Ï†i (aj )
,
|aj âˆ’ ai |

where
Ïi (aj ) = P

ni (aj )Î»Î¸i (aj )1âˆ’Î·
1âˆ’Î·
k,` nk (a` )Î»Î¸k (a` )

is the probability that a randomly chosen trade originates from an investor of utility type i with
asset holdings aj . In our numerical example, the average unit transaction cost is 38bp, smaller but
comparable to the markups measured in the data. The other empirical target we consider is the
32

relationship between transaction cost and trade size. According to the regressions of Harris and
Piwowar (2004), multiplying the trade size by 10 divides the unit transaction cost by 2, corresponding to an elasticity of about âˆ’ log(2)/ log(10) = âˆ’0.3. In a stationary equilibrium of our model,
this elasticity can be measured by calculating the theoretical coefficient of a univariate regression
of log unit transaction cost on log trade size:
h 

i
Ï† (a )
cov log |aji âˆ’aj i | , log(|aj âˆ’ ai |)
var [log(|aj âˆ’ ai |)]

,

where the covariances and variances are calculated based on the probabilities Ïi (aj ). In our numerical example, this elasticity turns out to be âˆ’0.29.
Figure 3: Impact of Î» and Î· on: (i) average unit fee and (ii) elasticity of unit fee to trade size.
Elasticity

Average (bp)
âˆ’0.2

60

Average (bp)
60

Elasticity
0.2

0

50

50
âˆ’0.25

âˆ’0.2

40

40
âˆ’0.4

30

60

80

Î»

100

âˆ’0.3

60

80

100 30
0.4

Î»

0.6

Î·

0.8

âˆ’0.6
0.4

0.6

0.8

Î·

We conclude this section with comparative statics of transaction costs with respect to two
parameters: the trading intensity, Î», and the elasticity of the matching function, Î·. From the
left, the first plot in Figure 3 shows that increasing the contact intensity, Î», reduces the equilibrium
level of transaction costs, which is consistent with the theoretical result we derived earlier in the
model with fixed trade size. The second panel reveals that trading intensity also has an impact
on the elasticity of transaction costs to trade size: as Î» increases, transaction costs respond more
strongly to changes in trade size. The third panel of the figure shows that increasing the elasticity
of the matching function, Î·, tends to increase unit trading fees. This is in line with the observation
that, in a competitive search equilibrium, Î· represents the share of the surplus that is appropriated
by dealers. It is natural, then, that a larger Î· is associated with larger transaction costs. The
fourth and last panel shows that there is a sharp negative relationship between the elasticity of
the matching function, Î·, and the elasticity of transaction costs to trade size. Together with the
theoretical analysis above, this finding suggests that the empirical relationship between unit fee
and trade size can be useful to infer properties of the matching function.
33

6

Conclusion

We have developed a model of a two-sided asset market where trades are intermediated by dealers
and involve a time-consuming matching process. In contrast to the description of OTC markets
in much of the existing literature, we assume that dealers post terms of trade in order to attract
order flow, and investors observe these terms of trade and direct their orders to the dealer who
promises the maximum expected payoff. This formulation is a good description of many OTC
markets, where prices, trading costs (e.g., bid-ask spreads), and execution times are either readily
observable or they are made public shortly after trades occur, which enables dealers to achieve
commitment through reputation.
We characterize the equilibrium in a general setting, and illustrate how the model can account
for several important trading patterns in over-the-counter markets which do not emerge from existing models. We then study two special cases which allow us to highlight the differences between
our model and the existing literature. Finally, we calibrate our model, illustrate that it generates
reasonable quantitative outcomes, and use it to study how trading frictions affect the per-unit trading costs that investors pay in equilibrium.

34

References
James Albrecht, Pieter Gautier, and Susan Vroman. Directed search in the housing market. Working Paper, Georgetown University, 2013.
Robert Battalio, Brian Hatch, and Robert Jennings. All else equal? A multidimensional analysis
of retail, market order execution quality. Journal of Financial Markets, 6(2):143â€“162, 2003.
Ekehart Boehmer, Robert Jennings, and Wei Li. Public disclosure and private decisions: Equity
market execution quality and order routing. Review of Financial Studies, 20:315â€“358, 2007.
Ekkehart Boehmer. Dimensions of execution quality: Recent evidence for u.s. equity markets.
Journal of Financial Economics, 78(3):553â€“582, 2005.
Kenneth Burdett and Maureen Oâ€™Hara. Building blocks: An introduction to block trading. Journal
of Banking and Finance, 11(2):193 â€“ 212, 1987.
Kenneth Burdett, Shouyong Shi, and Randall Wright. Pricing and matching with frictions. Journal
of Political Economy, 109(5):1060â€“1085, 2001.
Briana Chang. Adverse selection and liquidity distortion in decentralized markets. Working Paper,
University of Wisconsin, Madison, 2012.
Antonia Diaz and BeleÌn Jerez. House prices, sales, and time on the market: A search-theoretic
framework. Working Paper, Universidad de Carlos III, 2013.
Darrell Duffie. Dark Markets: Asset Pricing and Information Transmission in Over-the-Counter
Markets. Princeton University Press, 2012.
Darrell Duffie, Nicolae GaÌ‚rleanu, and Lasse H. Pedersen. Over-the-Counter Markets. Econometrica, 73(6):1815â€“1847, 2005.
Amy K. Edwards, Lawrence E. Harris, and Michael S. Piwowar. Corporate bond market transaction costs and transparency. Journal of Finance, 62(3):1421â€“1451, 2007.
Miquel Faig and BeleÌn Jerez. Inflation, prices, and information in competitive search. The BE
Journal of Macroeconomics (Advances), 2006.
Peter FeldhuÌˆtter. The same bond at different prices: Identifying search frictions and selling pressures. Review of Financial Studies, 25:1155â€“1206, 2012.
Alessandro Gavazza. Leasing and secondary markets: Theory and evidence from commercial
aircraft. Journal of Political Economy, 119(2):325â€“377, 2011.
Richard C. Green, Burton Hollifield, and Norman SchuÌˆrhoff. Financial intermediation and the
costs of trading in an opaque market. Review of Financial Studies, 20:275â€“314, 2007.
Veronica Guerrieri and Robert Shimer. Dynamic adverse selection: A theory of illiquidity, fire
sales, and flight to quality. Working Paper, University of Chicago, 2012.
35

Veronica Guerrieri and Robert Shimer. Markets with multidimensional private information. Working Paper, University of Chicago, 2013.
Veronica Guerrieri, Robert Shimer, and Randall Wright. Adverse selection in competitive search
equilibrium. Econometrica, 78(6):1823â€“1862, 2010.
George Hall and John Rust. Middlemen versus market makers: A theory of competitive exchange.
Journal of Political Economy, 111(2):353â€“403, 2003.
Lawrence E. Harris and Michael S. Piwowar. Secondary trading costs in the municipal bond
market. 2004.
Thomas S. Y. Ho and Hans R. Stoll. The dynamics of dealer markets under competition. Journal
of Finance, 38(4):1053â€“1074, 1983.
Burton Hollifield, Artem Neklyudov, and Chester Spatt. Bid-ask spreads and the pricing of securitizations: 144a vs. Technical report, registered securitizations. Working Paper, Carnegie Mellon
University, 2012.
Arthur J. Hosios. On the efficiency of matching and related models of search and unemployment.
The Review of Economic Studies, 57(2):279â€“298, 1990.
Roman Inderst and Holger M. MuÌˆller. Competitive search markets for durable goods. Economic
Theory, 19(3):599â€“622, 2002.
Ricardo Lagos and Guillaume Rocheteau. Inflation, output, and welfare. Federal Reserve Bank of
Cleveland, working paper 04-07, 2004.
Ricardo Lagos and Guillaume Rocheteau. Search in asset markets: Market structure, liquidity, and
welfare. American Economic Review, 97(2):198â€“202, 2007.
Ricardo Lagos and Guillaume Rocheteau. Liquidity in asset markets with search frictions. Econometrica, 77:403â€“426, 2009.
Ricardo Lagos, Guillaume Rocheteau, and Pierre-Olivier Weill. Crises and liquidity in over-thecounter markets. Journal of Economic Theory, 146(6):2169â€“2205, 2011.
Benjamin Lester. Information and prices with capacity constraints. The American Economic
Review, 101(4):1591â€“1600, 2011.
Benjamin Lester, Ludo Visschers, and Ronald Wolthoff. Competing with asking prices. Federal
Reserve Bank of Philadelphia working paper series, 2013.
Andrew W Lo, Harry Mamaysky, and Jiang Wang. Asset prices and trading volume under fixed
transactions costs. Journal of Political Economy, 112(5), 2004.
Lionel Melin. Multi-speed markets. Working paper, University of Chicago, 2012.
Guido Menzio and Shouyong Shi. Efficient search on the job and the business cycle. Journal of
Political Economy, 119(3):468â€“510, 2011.
36

Espen Moen. Competitive search equilibrium. Journal of Political Economy, 105:385â€“411, 1997.
Dale T. Mortensen and Randall Wright. Competitive pricing and efficiency in search equilibrium.
International Economic Review, 43(1):1â€“20, 2002.
Municipal Securities Rulemaking Board. Fact Book. 2008.
Artem Neklyudov. Bid-ask spreads and the over-the-counter interdealer markets: Core and peripheral dealers. Working Paper HEC Lausanne, 2012.
Emiliano Pagnotta and Thomas Philippon. Competing on speed. Working Paper, NYU Stern
School of Business, 2011.
Christopher A Pissarides. Equilibrium unemployment theory. MIT Press Books, 1, 2000.
Remy Praz. Equilibrium asset pricing and portfolio choice in the presence of both liquid and
illiquid markets. Working paper, EPFL, 2012.
Guillaume Rocheteau and Pierre-Olivier Weill. Liquidity in frictional asset markets. Journal of
Money, Credit and Banking, 43(7):261â€“282, 2011.
Guillaume Rocheteau and Randall Wright. Money in search equilibrium, in competitive equilibrium, and in competitive search equilibrium. Econometrica, 73(1):175â€“202, 2005.
Ariel Rubinstein and Asher Wolinsky. Middlemen. The Quarterly Journal of Economics, pages
581â€“594, 1987.
M Sattinger. Queueing and searching. Technical report, Mimeo, 2010.
Michael Sattinger. A search version of the Roy model. Working paper, SUNY Albany, 2003.
Paul Schultz. Corporate bond trading costs: A peak behind the curtain. Journal of Finance, 56(2):
pp. 677â€“698, 2001.
Andrei Shevchenko. Middlemen*. International Economic Review, 45(1):1â€“24, 2004.
Robert Shimer. The cyclical behavior of equilibrium unemployment and vacancies. American
Economic Review, 95:25â€“49, 2005.
Daniel F. Spulber. Market making by price-setting firms. The Review of Economic Studies, 63(4):
559â€“580, 1996.
Derek G. Stacey. Information, commitment, and separation in illiquid housing markets. Working
paper, Queenâ€™s Economics Department, 2012.
Margaret Stevens. New microfoundations for the aggregate matching function. International
Economic Review, pages 847â€“868, 2007.
Nancy L. Stokey and Robert E. Lucas. Recursive Methods in Economic Dynamics. Harvard
University Press, 1989.
37

Dimitri Vayanos and Pierre-Olivier Weill. A Search-Based Theory of the On-the-Run Phenomenon. Journal of Finance, 63(3):1361â€“1398, 2008.
Makoto Watanabe. Middlemen: A directed search equilibrium approach. Working Paper, VU
University Amsterdam, Tinbergen Institute, 2013.
Pierre-Olivier Weill. Leaning against the wind. The Review of Economic Studies, 74(4):1329â€“
1354, 2007.
Pierre-Olivier Weill. Liquidity premia in dynamic bargaining markets. Journal of Economic Theory, 140:66â€“96, 2008.
Shengxing Zhang. Liquidity missallocation in an over-the-counter market. Working Paper, NYU,
2012.

38

A

Proof

A.1

Proof of Proposition 1

We start by noting that Vi (a, Ïƒ, Î¸) can be written
Vi (a, Ïƒ, Î¸) = Vi (a, 0, 0) +

Î±(Î¸)
[V ? (a + q) âˆ’ pq âˆ’ Ï† âˆ’ Vi (a, 0, 0)] ,
r + Î´ + Î±(Î¸) i

(49)

where
Vi (a, 0, 0) =

ui (a) + Î´

PI

?
j=1 Ï€ij Vj (a)

r+Î´

.

Equation (49) shows that the value of submitting an order for contract Ïƒ when the market tightness is Î¸ is
the sum of two terms: the first term is the no-trade utility, Vi (a, 0, 0), and the second term is proportional to
the trading surplus, Vi (a + q) âˆ’ pq âˆ’ Ï† âˆ’ Vi (a, 0, 0). The constant of proportionality,

Î±(Î¸)
r+Î´+Î±(Î¸)

â‰¤ 1, captures

the time discounting of trading delays associated with tightness Î¸. The next result is then immediate.
Lemma 3. In any equilibrium, Vi? (a) â‰¥ Vi (a, 0, 0). Moreover the function Î¸ 7â†’ Vi (a, Ïƒ, Î¸) has the following properties:
1. If Vi? (a + q) âˆ’ pq âˆ’ Ï† â‰¤ Vi (a, 0, 0), then Vi (a, Ïƒ, Î¸) is decreasing in Î¸.
2. If Vi? (a + q) âˆ’ pq âˆ’ Ï† > Vi (a, 0, 0), then Vi (a, Ïƒ, Î¸) is strictly increasing in Î¸.
The first part of the lemma is clear: since investors can always choose 0, their maximum attainable
utility must be at least equal to Vi (a, 0, 0). The second part of the lemma simply asserts that, if there are
strict gains from trading Ïƒ, Vi? (a + q) âˆ’ pq âˆ’ Ï† > Vi (a, 0, 0), then investors have a strict preference for
higher tightness, because it leads to smaller trading delays. Otherwise, they prefer not to send orders for Ïƒ.
Now turning to the proof of Proposition 1, we first show that the right-hand side of (7) is an upper bound
for Vi? (a). Indeed, for Ïƒ = 0, Vi (a, 0, 0) is equal to the right-hand side of (7) evaluated at Î¸ = 0. For
Ïƒ âˆˆ Î£? but different from 0, the dealerâ€™s zero-profit condition writes Î± [Î˜(Ïƒ)] Ï† = Î³Î˜(Ïƒ). Thus:
Vi (a, Ïƒ, Î˜(Ïƒ)) =

ui (a) + Î´

P

jâˆˆI

Ï€ij Vj? (a) + Î±[Î˜(Ïƒ)] [Vi? (a + q) âˆ’ pq] âˆ’ Î³Î˜(Ïƒ)
r + Î´ + Î±[Î˜(Ïƒ)]

,

which is clearly less than the right-hand side of (7). Thus, taking the sup over all Ïƒ âˆˆ Î£? , we find Vi? (a) is
less than the right-hand side of (7).
Toward a contradiction, suppose that Vi? (a) is strictly less than the right-hand side of (7). Then, there

39

must be some (Î¸Ì‚, qÌ‚) such that
Vi? (a) <
â‡â‡’

Vi? (a) <

ui (a)+Î´

ui (a)+Î´

P

jâˆˆI

Ï€ij Vj? (a)+Î±(Î¸Ì‚)[Vi? (a+qÌ‚)âˆ’pqÌ‚ ]âˆ’Î³ Î¸Ì‚
r+Î´+Î±(Î¸Ì‚)

?
?
?
jâˆˆI Ï€ij Vj (a)+Î±(Î¸Ì‚)[Vi (a+qÌ‚)âˆ’pqÌ‚âˆ’Vi (a)]âˆ’Î³ Î¸Ì‚
.
r+Î´

P

(50)

Note, using the lower bound Vi (a, Ïƒ, Î¸) â‰¥ Vi (a, 0, 0) in inequality (50), that Î¸Ì‚ > 0. Consider, then, the
contract ÏƒÌ‚ = (qÌ‚, Ï†Ì‚), where Ï†Ì‚ =

Î³ Î¸Ì‚
Î±(Î¸Ì‚)

+ Îµ, for some Îµ small enough so that Vi (a, ÏƒÌ‚, Î¸Ì‚) > Vi? (a). Using again

the lower bound in inequality (50), one sees that Vi? (a + qÌ‚) âˆ’ pqÌ‚ âˆ’ Ï†Ì‚ > Vi? (a) â‰¥ Vi (a, 0, 0). Thus, by
Lemma 3, Vi (a, ÏƒÌ‚, Î¸) is strictly increasing in Î¸. Since it is also continuous, it then follows that Î˜(ÏƒÌ‚) < Î¸Ì‚.
Given that Î±(Î¸)/Î¸ is decreasing, we find that Î (ÏƒÌ‚) > 0, which contradicts dealersâ€™ zero-profit condition.
Finally, for the second part of the proposition, we apply the contraction mapping to the auxiliary Bellman
equation (7). Consider some arbitrary lower and upper bounds for the price, 0 < p < p. If asset holdings are
unrestricted, let a and a be the solutions to u0I (a) = rp and u01 (a) = rp, respectively. Since u0i (a) â‰¤ rp for
all a â‰¥ a and all i, and u0i (a)(p) â‰¥ rp for all a â‰¤ a and all i and all p âˆˆ [p, p], one can show that an investor
will always find it optimal to choose holdings a âˆˆ [a, a]. If asset holdings are restricted, we let a = min A
and a = max A: by assumption, asset holdings always lie in the interval [a, a]. To derive bounds on the
choice of Î¸, note that, up to a positive constant of proportionality, the left derivative with respect to Î¸ of the
equation to be maximized on the right-hand side of (7) is equal to
P


ui (a) + Ï€ij Vj? (a)

0 âˆ’
?
âˆ’(r + Î´)Î³ + Î± (Î¸ )Î¸ âˆ’ Î±(Î¸) Î³ + Î± (Î¸ )(r + Î´) Vi (a + q) âˆ’ pq âˆ’
.
r+Î´


0

âˆ’

The first term is strictly negative and independent of Î¸. The second term is negative because Î±(Î¸) is concave.
In the third term, the square bracket is bounded independently of Î¸ and p âˆˆ [p, p].29 Given than Î±0 (âˆ) = 0,
this implies that there exists some Î¸ such that, for all Î¸ > Î¸, all p âˆˆ [p, p], and all (i, a) âˆˆ I Ã— [a, a], the
left-derivative of equation (7) is strictly negative. Therefore, an investor will always find it optimal to choose
a market tightness Î¸ âˆˆ [0, Î¸].
Let S = I Ã— [a, aÌ„] Ã— [p, p] when assets are unrestricted, and let S = I Ã— A Ã— [p, p] when assets are
restricted. Let C (S) be the space of bounded, continuous functions f : S â†’ R equipped with the sup norm.
Indeed Vi (a) â‰¤ maxiâˆˆI uir(a) + pa, so that the maximum attainable utility is less than the present value of the
maximum utility flow from holding the maximum quantity of assets, plus the time-zero value of selling the maximum
quantity of assets at the maximum price. To see this, note that the inter-temporal value of an investor has two terms.
The first term is the expected present value of utility flows, ui [a(t)], net of search cost, âˆ’Î³Î¸(t), which is clearly less
than uIr(aÌ„) . The second term is the expected present value of the benefits of selling minus the costs of buying assets at
the random contact
 given realization of contact times, this present value can be written
Pâˆ times 0 <T1 < T2 < . . .. For
a(0)peâˆ’rT1 + n=1 pa(Tn ) eâˆ’rTn+1 âˆ’ eâˆ’rTn . Indeed, the investor resells a(Tn ) at time Tn+1 after buying it at
time Tn . Clearly, the first term is less than paÌ„, and all terms in the infinite sum are negative.
29

40

Notice that C (S) is a complete normed vector space. The right-hand side of (7) defines an operator T :
"
T (Vi )(a, p) =

max

ui (a) + Î´

P

jâˆˆI

Ï€ij Vj (a) + Î±(Î¸)[Vi (a0 ) âˆ’ p(a0 âˆ’ a)] âˆ’ Î³Î¸
r + Î´ + Î±(Î¸)

(a0 ,Î¸)âˆˆ[a,a]Ã—[0,Î¸]

#
.

(51)

If V âˆˆ C (S), then, from the Theorem of the Maximum T (V ) âˆˆ C (S). See Theorem 3.6 in Stokey and
Lucas (1989). Furthermore, T is monotonic and T (f + k)(a, i) â‰¤ T (f )(a, i) +

Î´+Î±(Î¸)
k
r+Î´+Î±(Î¸)

for all k â‰¥ 0

and all f âˆˆ C (S). Therefore, from Blackwellâ€™s Theorem, T is a contraction on C (S) and it has a unique
fixed point in C (S). See Theorem 3.3 in Stokey and Lucas (1989). Finally, if Vi (a, p) is a strictly increasing
function then T (Vi )(a, p) is also strictly increasing so that the unique fixed point of T is increasing. But since
ui (a) is strictly increasing, the Bellman equation (7) implies that Vi (a) is the sum of a strictly increasing
function and an increasing function, and so is strictly increasing as well. Finally, since we considered
arbitrary lower and upper bounds, p and p, and since a â†’ âˆ as p â†’ 0, and a â†’ 0 as p â†’ âˆ, the properties
extend by continuity to the domain S = I Ã— A Ã— (0, âˆ).

A.2

Proof of Proposition 2

We first note that, by Theorem of the Maximum, the correspondence (ai (a, p), Î¸i (a, p)) maximizing (51) is
compact valued and upper hemi continuous. Moreover, one sees that ai (a, p) is independent on a: it is equal
/ Î¸i (a, p) and to [a, a] otherwise. With this in mind, let
to arg maxa0 âˆˆ[a,a] Vi (a0 , p) âˆ’ pa0 if 0 âˆˆ

M(p) â‰¡ (ai (p), Î¸j (ai (p), p)), (i, j) âˆˆ I 2 .
The correspondence M(p) contains the collection of candidate equilibrium asset holdings if the price is p.
It is clearly compact valued and is easily shown to be upper hemi continuous. As explained in the text,
we look for an equilibrium in which the distribution of types has a finite support. To deal with potential
non-convexity arising if the Bellman equation has more than one maximizer, we partition the population of
investors into G â‰¥ 2 groups of size Âµg , for some Âµg in the G-dimensional simplex, âˆ†G . We assume that
each investor in group g optimally keeps its asset holdings in the support {ag1 , ag2 , . . . , agI } where, for all i
and g, agi is maximizing (7). If the investor has utility type i but asset holding agj , j 6= i, then he sends its
order for a contract with a market tightness Î¸i (agj ) maximizing (7). Therefore, the inflow-outflow equations
for the steady-state distribution, ngi (aj ), of group g write:
if i 6= j

: 0=Î´

X

: 0=Î´

X

nk (agj )Ï€ki âˆ’ Î´ngi (agj ) âˆ’ Î±[Î¸i (agj )]ni (agj )

(52)

nk (agi )Ï€ki âˆ’ Î´ni (agj ) +

(53)

kâˆˆI

if i = j

kâˆˆI

Âµg =

X

X

Î±[Î¸i (agk )]nk (agi )

kâˆˆI

ni (agj ).

(i,j)âˆˆâˆˆI 2

41

(54)

The first step is to establish the following result.
Lemma 4. The system of steady-state equations (52)-(54) has at least one solution.
Proof. The argument is standard. The system (8)-(9) characterizes the ergodic distributions of the continuous time Markov chain induced by the type switching and trading process. Denote the transition intensities
P
by Î»k,` , and let Î»k â‰¡ ` Î»k,` . The steady-state equations can be rewritten:
âˆ€` :

Î» ` n` =

X

nk Î»k,`

â‡â‡’

âˆ€` :

Î» ` n` =

k

where Ï€k â‰¡ Î»k nk and Q`,k =

X

Î» k nk

k
Î»`,k
Î»` .

Î»k,`
Î»k

â‡â‡’

Ï€ = Ï€Q,

Thus, a steady-state distribution can be found by solving for an ergodic

distribution, Ï€, of the discrete time Markov chain with transition probabilities Q. Since this discrete time
Markov chain has a finite state space, it follows from Theorem 11.1 of Stokey and Lucas (1989) that such


an ergodic distribution exists.

Equipped with this result, we can define the aggregate demand correspondence as follows. In matrix
form, the system of steady-state equations of group g, (52)-(54), can be written as Î“(mg )ng = b, where the
entries of Î“(mg ) are continuous in agi and Î¸i (agj ). Then, we let

D(p) â‰¡

ï£±
ï£²X
ï£³

g,i,j

ï£¼
ï£½
Âµg ni (agj )agj , for Âµg âˆˆ âˆ†G , mg = (ai , Î¸i (aj )) âˆˆ M(p), and ng s.t. Î“(mg )ng = b .
ï£¾

Now let us turn to the proof of Proposition 2. By Lemma 4, the aggregate demand correspondence is nonempty. It is convex by construction. To see that it is compact-valued, consider any sequence of elements of
D(p) generated by some sequences Âµgk , mgk , and ngk . Because group measures, asset holdings, and steadystate measures are all bounded, we can extract convergence subsequences Âµgk` , mgk` , and ngk` . Since the
simplex and M(p) are compact, it follows that lim Âµgk` âˆˆ âˆ†G and lim mgk` âˆˆ M(p). Since Î“(m) is

continuous, it follows that Î“(lim mgk` ) lim ngk` = b. Therefore, the aggregate excess demand generated by
lim Âµgk` , lim mgk` , and lim ngk` belongs to D(p), and we are done proving compactness. Finally, a similar

reasoning establishes that D(p) is upper hemi continuous. Now, we note that the aggregate demand goes to
zero as p goes to infinity, and to infinity as p goes to zero. An application of the Intermediate Value Theorem
(easily extended for upper hemi continuous, compact, and convex-valued correspondences) establishes the
claim of the proposition.
The last step is to verify the equilibrium condition for the candidate equilibrium objects shown in the text
after Proposition 2. Without loss of generality at this stage of the analysis, let us assume that G = 1 so that
we can simplify notations and drop the â€œgâ€ subscript everywhere. We first show that Î˜[Ïƒi (aj )] = Î¸i (aj ).
First, we prove that
Vi (aj , Ïƒi (aj ), Î¸i (aj )) > Vi (aj , 0, 0).

42

By construction, we have a weak inequality. Suppose, toward a contradiction, that Vi (aj , Ïƒi (aj ), Î¸i (aj )) =
Vi (aj , 0, 0). Expressing this equality using (49) and the dealerâ€™s zero-profit condition, we have
Î±[Î¸i (aj )]
[Vi (a + qi (aj )) âˆ’ pqi (aj ) âˆ’ Vi (a, 0, 0)] = Î³.
Î¸i (aj )
Now the right-derivative at Î¸ = 0 of the right-hand side of (51) is equal to
Î±0 (0) [Vi (a + qi (aj )) âˆ’ pqi (aj ) âˆ’ Vi (a, 0)] âˆ’ Î³
>0
r+Î´
using the equality we derived just above and noting that Î±0 (0) > Î±(Î¸)/Î¸ by strict concavity. Hence, the
right-hand side of the auxiliary Bellman equation (51) cannot be maximized at Î¸ = 0, which is a contradiction. Thus, we are in case 2 of Lemma 3, Vi (aj , Ïƒi (aj ), Î¸i (aj )) is strictly increasing, Î¸i (aj ) = inf{Î¸ â‰¥ 0 :
Vi (aj , Ïƒi (aj ), Î¸) > Vi? (aj )} and so is greater than Î˜(Ïƒi (aj )).
Suppose, toward a contradiction, that the inequality is strict. Then, by definition of Î˜(Ïƒ), there exists some Î¸ âˆˆ (0, Î¸i (aj )) and some (k, `) such that Vk (a` , Ïƒi (aj ), Î¸) > Vk? (a` ). Using the definition of
Vk (a, Ïƒ, Î¸), we obtain that
uk (a` ) + Î´

P

mâˆˆI

Î¸ (a )

i j
Ï€km Vm? (a` ) + Î±(Î¸) [Vk? (a` + qi (aj )) âˆ’ pqi (aj )] âˆ’ Î³Î¸ Î±(Î¸)
Î¸ Î±(Î¸i (aj ))

r + Î´ + Î±(Î¸)

> Vk? (a` ).

Since Î±(Î¸)/Î¸ is decreasing, it follows that the above inequality remains strict when we subtract Î³Î¸ instead
Î¸ (a )

i j
?
of Î³Î¸ Î±(Î¸)
Î¸ Î±[Î¸i (aj )] , which contradicts that Vk (a) solves the auxiliary Bellman equation (51).

Finally, we verify the zero-profit conditions of dealers. Suppose there is Ïƒ = (q, Ï†) such that âˆ’Î³ +
Î±[Î˜(Ïƒ)]
Î˜(Ïƒ) Ï† > 0. Then Î˜(Ïƒ) < âˆ and there is some type (i, aj ) and some tightness Î¸ such that Vi (aj , Ïƒ, Î¸) >
Î±(Î¸)
Vi? (aj ) and âˆ’Î³ + Î±(Î¸)
Î¸ Ï† > 0. Consider then the contract ÏƒÌ‚, with qÌ‚ = q and Ï†Ì‚ chosen such that Î³ = Î¸ Ï†Ì‚.
Because Ï†Ì‚ < Ï†, we have that Vi (aj , ÏƒÌ‚, Î¸) > Vi? (aj ), which can be written

ui (aj ) + Î´

P

Ï€ik Vk? (ak ) + Î±(Î¸) [Vi? (aj + qÌ‚) âˆ’ pqÌ‚] âˆ’ Î³Î¸
> Vi? (aj ),
r + Î´ + Î±(Î¸)

contradicting that Vi? (a) solves the Bellman equation (51).

A.3

Market clearing in the inter-dealer market

In this section, we confirm that the equilibrium conditions described in Definition 1 ensure that the interdealer market clears, i.e., that
X

Î± [Î¸i (aj )] ni (aj )(ai âˆ’ aj ) = 0.

i,j

43

(55)

To start, summing across all i âˆˆ I and j 6= i, we can use (8) to get
"
XX

Î± [Î¸i (aj )] ni (aj )aj = Î´

XX

iâˆˆI j6=i

iâˆˆI j6=i

aj

#
X

Ï€ki nk (aj ) âˆ’ ni (aj ) .

(56)

kâˆˆI

Adopting the convention that Î¸i (ai ) = 0, the left-hand side of (56) is equal to
X

Î± [Î¸i (aj )] ni (aj )aj .

(57)

i,j

Meanwhile, the right-hand side of (56) can be written
( "
Î´

XX

nk (aj )aj

kâˆˆI jâˆˆI

X

Ï€ki âˆ’ Î´

XX

iâˆˆI

= âˆ’

iâˆˆI

=

X

Î´

iâˆˆI

Î´

#)
X

nk (ai )Ï€ki âˆ’ ni (ai )

ai

kâˆˆI

#)

( "
X

ni (aj )aj âˆ’

iâˆˆI jâˆˆI

X

X

nk (ai )Ï€ki âˆ’ ni (ai )

ai

(58)

kâˆˆI

Î± [Î¸i (aj )] ni (aj )ai ,

(59)

i,j

where the first equality follows from

P

i Ï€ki

= 1, while the second equality follows from (9). Hence, (57)

is equal to (59), which ensures that (55) is satisfied.

A.4

Proof of Lemma 1

Let, for i âˆˆ {`, h}, Î¸i (0) â‰¡ arg maxÎ¸ {Î±(Î¸) (âˆ†Vi âˆ’ p) âˆ’ Î³Î¸} and Î¸i (1) â‰¡ arg maxÎ¸ {Î±(Î¸) (p âˆ’ âˆ†Vi ) âˆ’ Î³Î¸}.
We obtain the inequalities:
râˆ†Vh â‰¥ uh + Î´Ï€` (âˆ†V` âˆ’ âˆ†Vh ) + Î±[Î¸` (1)] (p âˆ’ âˆ†Vh ) âˆ’ Î³Î¸` (1) âˆ’ Î±[Î¸h (0)] (âˆ†Vh âˆ’ p) âˆ’ Î³Î¸h (0)
râˆ†V` â‰¤ u` + Î´Ï€h (âˆ†Vh âˆ’ âˆ†V` ) + Î±[Î¸` (1)] (p âˆ’ âˆ†V` ) âˆ’ Î³Î¸` (1) âˆ’ Î±[Î¸h (0)] (âˆ†V` âˆ’ p) âˆ’ Î³Î¸h (0).
Taking the difference between the two, all the search costs cancel out and we obtain
âˆ†Vh âˆ’ âˆ†V` â‰¥

uh âˆ’ u`
> 0,
r + Î´ + Î± [Î¸h (0)] + Î± [Î¸` (1)]

which establishes the first part of the claim.
For the second part, assume toward a contradiction that p â‰¥ âˆ†Vh , so that p > âˆ†V` . Then, it must be the
case that Î¸h (1) â‰¥ 0, Î¸` (1) > 0, and Î¸h (0) = Î¸` (0) = 0. The inflow-outflow equations for nh (1) and n` (1)

44

become
Î´Ï€h n` (1) = Î´Ï€` nh (1) + Î±[Î¸h (1)]nh (1)
Î´Ï€` nh (1) = Î´Ï€h n` (1) + Î±[Î¸` (1)]n` (1),
implying, after some manipulations, that
Î´Ï€`
Î´Ï€h
n` (1) = n` (1),
Î´Ï€` + Î±[Î¸h (1)] Î´Ï€h + Î±[Î¸` (1)]
so that n` (1) = nh (1) = 0. Thus, the market cannot clear, which is a contradiction. Symmetrically, if
p â‰¤ âˆ†V` , one finds that n` (0) = nh (0) = 0 so that n` (1) + nh (1) = 1 > A, which also contradicts market
clearing.

A.5

Proof of Lemma 2

i
h
.
The function F (S` ) is defined over [0, Î“âˆ’1 (uh âˆ’ u` )] and the function G(S` ) is defined over 0, uhÎ´Ï€âˆ’rp
`
Both functions are zero at the upper bound of their domain. Thus, solving the system of equations (15)-(16)
boils down to solving the one-equation-in-one-unknown problem F (S` ) = G(S` ). We have shown in the
text that, if a solution exists, then the function F (S` ) must cross the function G(S` ) from above. Therefore,
for a strictly positive solution to exist, it is necessary and sufficient that F (S` ) is above G(S` ) at zero, and
is eventually below G(S` ) for S` large enough in the intersection of their domains. The first condition can
be written
F (0) > G(0) â‡â‡’ Î“[F (0)] > uh âˆ’ rp and Î“[F (0)] = uh âˆ’ u`
â‡â‡’ Î´Ï€h F (0) < rp âˆ’ u` and Î“[F (0)] = uh âˆ’ u`


rp âˆ’ u`
â‡â‡’ uh âˆ’ u` < Î“
Î´Ï€h


rp` âˆ’ u`
â‡â‡’ p > p` s.t. uh âˆ’ u` = Î“
.
Î´Ï€h

(60)

The equivalence on the first line follows from the fact that, in equation (18), the function Î“(S) is strictly
increasing. The equivalence on the second line follows from simple manipulations, using the definition of
Î“(S). The equivalence on the third and fourth lines follow from the fact that Î“(S) is strictly increasing in
S. One sees easily using equations (15)-(16) that the price p` is such that S` = 0: in other words, it is the
lowest price at which a low-valuation investor is willing to sell his asset, knowing that heâ€™ll be able to buy
at this price later when heâ€™ll turn into a high type.
Next we note that, by definition, F (S` ) and G(S` ) are zero at the upper bound of their respective
domains. Thus, in order for G(S` ) to be below F (S` ) for S` large enough in the intersection of their
domains, it is necessary and sufficient that the upper bound of the domain of G(S` ) is below the upper

45

bound of the domain of F (S` ). This can be written as
Î“âˆ’1 (uh âˆ’ u` ) >

uh âˆ’ rp
Î´Ï€`


â‡â‡’ uh âˆ’ u` > Î“

uh âˆ’ rp
Î´Ï€`




â‡â‡’ p < ph s.t. uh âˆ’ u` = Î“

uh âˆ’ rph
Î´Ï€`


.

(61)

As before, one sees easily that the price ph is such that Sh = 0: it is the highest price at which a high type
is willing to buy.
Finally, we observe that p` < ph . Indeed, from their definitions we have that:
uh âˆ’ rph
rp` âˆ’ u`
=
â‡’ rph Ï€h + rp` Ï€` = Ï€h uh + Ï€` u` .
Î´Ï€`
Î´Ï€h
It thus follows that
ph > p` > 0 â‡â‡’ rÏ€` (ph âˆ’ p` ) > 0 â‡â‡’ rph > Ï€h uh + Ï€` u`


uh âˆ’ Ï€h uh âˆ’ Ï€` u`
> uh âˆ’ u`
â‡â‡’ Î“
Î´Ï€`


uh âˆ’ u`
â‡â‡’ Î“
> uh âˆ’ u` .
Î´
One easily verifies that Î“(S/Î´) > S, so this inequality holds.

A.6

Proof of Proposition 3

The only thing to show is that the buy-order flow, on the left-hand side of (25), is strictly decreasing in the
price, and that the sell-order flow, on the right-hand side of (25), is strictly increasing in the price. For this we
first note that, since Î±(Î¸) is increasing, it follows that the left-hand side is an increasing function of Î¸h and
the right-hand side is a decreasing function of Î¸` . Now the first-order condition Î±0 (Î¸h )Sh = Î³ implies that
Î¸h is an increasing function of Sh , and thus a decreasing function of p, with Î¸h = 0 when p = ph . Likewise,
the first-order condition for Î¸` implies that Î¸` is an increasing function of S` and thus an increasing function
of p with Î¸` = 0 when p = p` .

A.7

Proof of Proposition 4

Asymptotic expansion for the price. Let si â‰¡ Î»Si for i âˆˆ {`, h}. With this notation, the surplus
equation (17) can be written as
r+Î´
r+Î´
sh + f (sh ) +
s` + f (s` ) = uh âˆ’ u` ,
Î»
Î»

46

where f (s) â‰¡ maxÎ¸ {Î±(Î¸)s âˆ’ Î³Î¸}. Note that f (s) is strictly increasing, with f (0) = 0 and f (âˆ) = âˆ.
It thus follows that sh and s` are both bounded by the solution of f (s) = uh âˆ’ u` . Therefore, as Î» goes
to infinity, (sh , s` ) must have at least one accumulation point, (s?h , s?` ). Since Ï€h > A, it follows from the
market-clearing condition that Î¸h < Î¸` and so from the first-order condition that sh < s` . Thus s?h â‰¤ s?` .
Suppose that s?h > 0. Then the market tightness solving Î±0 (Î¸)s?h = Î³ is strictly positive, and going to the
Î» â†’ âˆ limit in the market-clearing condition leads to Ï€h = A, which contradicts our assumption that
Ï€h > A. Therefore s?h and s?` satisfy
s?h = 0
f (s?` ) = uh âˆ’ u` .
Thus, (sh , s` ) has a unique accumulation point, which must be its limit. To obtain a first-order approximation
for p we use the second equation (18) to get that
r + Î´Ï€`
s`
sh + f (sh ) = uh âˆ’ rp âˆ’ Î´Ï€` .
(62)
Î»
Î»

Since sh â†’ 0 as Î» â†’ âˆ, the first term on the left-hand side is o Î»1 . To analyze the second term, note from
the market-clearing condition that Î»Î±(Î¸h ) must have a positive limit, equating order flows when sellers can
contact the market infinitely fast. Letting this limit be Î»h we can write


Î»h
f (sh ) =
+o
Î»
The first term on the left-hand side is o

 

 
1
1
âˆ’1 Î»h
sh âˆ’ Î³Î±
+o
.
Î»
Î»
Î»

1
Î»



since sh â†’ 0 when Î» â†’ âˆ. Because Î±âˆ’1 (x) is convex, the

second term can be bounded by
Î±

âˆ’1



Î»h
+o
Î»

 

 

 
 âˆ’1 0 Î»h
1
Î»h
1
1
â‰¤
+o
Î±
+o
Î»
Î»
Î»
Î»
Î»

 
Î»h
1
1
h
=
+o
i .
Î»
Î»
Î»
Î±0 â—¦ Î±âˆ’1 h + o 1
Î»

Clearly, because of the Inada condition Î±0 (0) = âˆ, the upper bound is o


s?
o Î»1 . Finally,we note that sÎ»` = Î»` + o Î»1 .

Î»

1
Î»



. We conclude that f (sh ) is

Asymptotic expansion of the intermediation fee. Consider first the intermediation fee for a seller:
Î»Ï†` =

Î¸? Î±0 (Î¸? )
Î¸` Î±0 (Î¸` )
Î»S` â†’ ` ? ` s?` ,
Î±(Î¸` )
Î±(Î¸` )

47

as claimed in the proposition. Let us turn next to the intermediation fee for buyers:
Î»Ï†h =

Î¸h Î±0 (Î¸h )
Î»Sh â†’ 0
Î±(Î¸h )

since the elasticity is bounded above by one and limÎ»â†’âˆ Î»Sh = 0.

Asymptotic expansion of the distribution of types. From equation (24), given that Î¸` â†’ Î¸`? , we
have that
lim Î»n` (1) =

Î»â†’âˆ

AÎ´Ï€`
Î±(Î¸`? )

as claimed. To obtain an asymptotic expansion of nh (0), plug the equality of order flows, (20), into the
equation for nh (0), (23). In doing so, keep in mind that, for the asymptotic expansion, all the Î±(Î¸) are
multiplied by the search efficiency parameter Î». We then obtain
nh (0) =

Î´Ï€h (1 âˆ’ A)
Î´+

Î»Î±(Î¸` )n` (1)
nh (0)

â‡â‡’ Î´nh (0) + Î»Î±(Î¸` )n` (1) = (1 âˆ’ A)Î´Ï€h
â‡â‡’ Î´ [nh (0) âˆ’ (Ï€h âˆ’ A)] = âˆ’Î»Î±(Î¸` )n` (1) + (1 âˆ’ A)Î´Ï€h âˆ’ Î´(Ï€h âˆ’ A)
 
Î´AÏ€`
1
Î´AÏ€`
â‡â‡’ nh (0) âˆ’ (Ï€h âˆ’ A) =
+o
=
,
?
Î»Î±(Î¸` )
Î»Î±(Î¸` )
Î»

where the last line follows after substituting in expression (24) for n` (1). This establishes the claim.

A.8

Proof of Corollary 1

With a Cobb-Douglas matching function, the asymptotic seller surplus, s?` , and the asymptotic search intensity, Î¸`? , solve the system of equations:
Î¸Î· s âˆ’ Î³Î¸ = uh âˆ’ u`
Î·Î¸Î·âˆ’1 s = Î³.
The second equation implies that Î·Î¸Î· s?` = Î³Î¸. Together with the first equation, this implies that (1 âˆ’
Î·)Î¸Î· s = uh âˆ’ u` . Dividing through by the second equation, the â€œsâ€ cancel out and we obtain the expression
for Î¸`? . The expression for s?` follows. Clearly, Î¸`? is increasing in Î·. As for s?` we have:
log (s?` ) = Î· log

 




d log(s?` )
Î³
uh âˆ’ u`
Î³(1 âˆ’ Î·)
+ (1 âˆ’ Î·) log
=â‡’
= log
,
Î·
1âˆ’Î·
dÎ·
Î·(uh âˆ’ u` )

which is strictly decreasing, goes to plus infinity when Î· â†’ 0 and to minus infinity when Î· â†’ 1.

48

A.9

Proof of Proposition 5

Letâ€™s denote Ï‘i (a) the current-value co-state variables associated with ni (a) and Î¾ the Lagrange multiplier
associated with the balanced order flow constraint. The current-value Hamiltonian is
H [Î¸h , Î¸` , ni (a), Ï‘i (a), Î¾] = nh (1)uh + n` (1)u` âˆ’ Î¸h nh (0)Î³ âˆ’ Î¸` n` (1)Î³
+Ï‘h (1) {Î±(Î¸h )nh (0) + Î´Ï€h n` (1) âˆ’ Î´Ï€` nh (1)}
+Ï‘h (0) {Î´Ï€h n` (0) âˆ’ Î´Ï€` nh (0) âˆ’ Î±(Î¸h )nh (0)}
+Ï‘` (1) {Î´Ï€` nh (1) âˆ’ Î´Ï€h n` (1) âˆ’ Î±(Î¸` )n` (1)}
+Ï‘` (0) {Î±(Î¸` )n` (1) + Î´Ï€` nh (0) âˆ’ Î´Ï€h n` (0)}
+Î¾ {Î±(Î¸` )n` (1) âˆ’ Î±(Î¸h )nh (0)} .
The first-order conditions for Î¸h and Î¸` are
Î±0 (Î¸h ) [Ï‘h (1) âˆ’ Ï‘h (0) âˆ’ Î¾] = Î³
Î±0 (Î¸` ) [Ï‘` (0) âˆ’ Ï‘` (1) + Î¾] = Î³.

(63)
(64)

The social cost of assigning a dealer to the buy-side of the market corresponds to the entry cost, Î³, the right
side of (63). The social benefit, the left side of (63), is measured by the increase in the number of matches
generated by a dealer, Î±0 (Î¸h ), times the social gain from having an additional h-type investor holding an
asset, Ï‘h (1) âˆ’ Ï‘h (0), net of the cost of tightening the balanced order flow constraint, Î¾. The ODEs for the
co-state variables are
rÏ‘h (1) = uh + Î´Ï€` [Ï‘` (1) âˆ’ Ï‘h (1)] + Ï‘Ì‡h (1).

(65)

rÏ‘h (0) = Î±(Î¸h ) [Ï‘h (1) âˆ’ Ï‘h (0) âˆ’ Î¾] âˆ’ Î¸h Î³ + Î´Ï€` [Ï‘` (0) âˆ’ Ï‘h (0)] + Ï‘Ì‡h (0)

(66)

rÏ‘` (1) = u` + Î±(Î¸` ) [Ï‘` (0) âˆ’ Ï‘` (1) + Î¾] âˆ’ Î¸` Î³ + Î´Ï€h [Ï‘h (1) âˆ’ Ï‘` (1)] + Ï‘Ì‡` (1)

(67)

rÏ‘` (0) = Î´Ï€h [Ï‘h (0) âˆ’ Ï‘` (0)] + Ï‘Ì‡` (0).

(68)

The equations, (65)-(68), admit a standard interpretation as asset pricing conditions for the shadow values
of the state variables.
It is easy to check that the plannerâ€™s optimality conditions coincide with the conditions for a competitive
search equilibrium when Ï‘i (a) = Vi (a) and Î¾ = p. Using that the maximized Hamiltonian is linear
in the state variables, ni (a), the equilibrium path satisfies necessary and sufficient conditions (see Arrow
sufficiency theorem) for a constrained-optimal allocation.

49

A.10

Proof of Corollary 2

We indicate all equilibrium objects by a subscript o (for opaque). The free-entry conditions for dealers are
Î±(Î¸ho )
Î½ [Vho (1) âˆ’ Vho (0) âˆ’ po ] = Î³
Î¸ho
Î±(Î¸`o )
Î½ [V`o (0) âˆ’ V`o (1) + po ] = Î³.
Î¸`o

(69)
(70)

The left sides of (69) and (70) are the expected flow profits of dealers: a dealer receives an order to execute
with Poisson arrival rate Î±(Î¸io )/Î¸io , in which case he is paid an intermediation fee equal to a fraction Î½ of the
match surplus as measured by Vho (1) âˆ’ Vho (0) âˆ’ po if the investor is a buyer and V`o (0) âˆ’ V`o (1) + po if the
investor is a seller. The investorsâ€™ value functions in a steady state solve the following Bellman equations:
rVho (1) = uh + Î´Ï€` [V`o (1) âˆ’ Vho (1)]
rVho (0)
rV`o (1)

=

Î±(Î¸ho )(1

= u` +

âˆ’

Î½) [Vho (1)

Î±(Î¸`o )(1

âˆ’

Vho (0)

(71)
o

âˆ’p ]+

Î´Ï€` [V`o (0)

o

âˆ’ Î½) [V` (0) âˆ’ V` (1) + p ] +

âˆ’

Vho (0)]

Î´Ï€h [Vho (1)

rV`o (0) = Î´Ï€h [Vho (0) âˆ’ V`o (0)] .

âˆ’

V`o (1)]

(72)
(73)
(74)

In (71) and (74) investors hold their desired portfolio and hence the only transition that can happen is when
a preference shock hits with arrival rate Î´Ï€i . In contrast, in (72) and (73) investors are able rebalance their
portfolio with Poisson arrival rate Î±(Î¸io ), in which case they enjoy a fraction 1 âˆ’ Î½ of the surplus of a match
with a dealer. The result follows by comparing the equilibrium conditions, (69)-(70) and (71)-(74), with the
conditions for a constrained-efficient allocation, (63)-(64) and (65)-(68).

A.11

Formal proofs of the statements in Section 4.2

In this section we characterize an equilibrium for the economy described in Section 4.2, when the posting
cost, Î³, is small.

Equilibrium price. We guess and verify that, in this case, the equilibrium price in LR is an equilibrium
price in our environment as well.
Let Vi? (a, Î³) be the solution of the Bellman equation (7) when the contract posting cost is Î³ and the
price is equal to the equilibrium price in LR. By an application of the contraction mapping theorem, this
function is continuous in (a, Î³). In particular, Vi? (a, 0) coincides with the value function in LR. We know
the following result from their paper.
Lemma 5. In LR, the value net of purchasing cost, Vi? (a, 0)âˆ’pa, is an increasing and affine transformation

50

of
Ki (a) =

(r + Âµ)ui (a) + Î´

P

jâˆˆI

Ï€j uj (a)

r+Âµ+Î´

âˆ’ rpa.

(75)

Note that Ki (a) is strictly concave and it achieves its unique maximum at the asset holding prevailing
in LRâ€™s equilibrium.


 ? 0
Î³2
0
?
Ni (Î³1 , Î³2 ) â‰¡ a : max
Vi (a , Î³1 ) âˆ’ pa âˆ’
< Vi (a, Î³1 ) âˆ’ pa .
a0
Âµ
Lemma 6. The inaction regions Ni (Î³, Î³) are disjoint for all Î³ small enough.
Proof. Note that LRâ€™s net values, Vi? (a, 0) âˆ’ pa, are strictly concave so that the inaction regions Ni (0, Î³2 )
are open intervals around the optimal asset holding, arg maxa0 Vi? (a0 , 0) âˆ’ pa0 , shrinking monotonically
to LRâ€™s optimal asset holding when Î³2 â†’ 0. Consider then some Î³2 and Îµ small enough so that all the
Ni (0, Î³2 + ÂµÎµ) are disjoint. Noting that maxa0 {Vi? (a0 , Î³) âˆ’ pa0 } âˆ’ Vi? (a, Î³) + pa is continuous in (a, Î³),
there exists some Î³1 such that for all Î³10 â‰¤ Î³1 and all a âˆˆ [a, a]:
 ? 0 0
 ? 0
0
?
0
max
V
(a
,
Î³
)
âˆ’
pa
âˆ’
V
(a,
Î³
)
+
pa
>
max
Vi (a , 0) âˆ’ pa0 âˆ’ Vi? (a, 0) + pa âˆ’ Îµ.
i
1
i
1
0
0
a

a

In particular, for a âˆˆ
/ Ni (0, Î³2 + ÂµÎµ), we have maxa0 {Vi? (a0 , 0) âˆ’ pa0 } âˆ’ Î³Âµ2 âˆ’ Îµ â‰¤ Vi? (a, 0) âˆ’ pa. Plugging
this into the right-hand side of the above inequality and rearranging, we obtain

Î³2
0 0
0
max
V
(a
,
Î³
)
âˆ’
pa
âˆ’
â‰¥ Vi (a, Î³ 0 ) âˆ’ pa.
i
1
a0
Âµ
Hence, a âˆˆ
/ Ni (Î³10 , Î³2 ). By contrapositive, for all Î³10 â‰¤ Î³1 , we have that Ni (Î³10 , Î³2 ) âŠ† Ni (0, Î³2 + ÂµÎµ). Since
the sets Ni (0, Î³2 + ÂµÎµ) are disjoint by construction, and since the sets Ni (Î³10 , Î³20 ) are decreasing in Î³20 , it
follows that Ni (Î³10 , Î³20 ) are disjoint for all Î³10 â‰¤ Î³1 and Î³20 â‰¤ Î³2 . Letting Î³ = min{Î³1 , Î³2 } we obtain that
the sets Ni (Î³, Î³) are disjoint for all Î³ 0 â‰¤ Î³.



Next, following the argument in the text, we find that when Î³ is small enough, the net value Vi (a) âˆ’ pa
is an increasing affine transformation of Ki (a). Since the optimal asset holding must belong to the interior
of the inaction region, it must satisfy Ki0 (a) = 0, which implies in turn that it must coincide with LRâ€™s
optimal asset holdings. Since the distribution of type must also coincide with that of LR, which satisfies
market clearing by construction, it follows that LRâ€™s price is an equilibrium price in our economy as long as
Î³ is small enough.

Constructing a competitive search equilibrium. The last thing to do is to verify that the LR price,
which we already know clears the market, is the basis of a competitive search equilibrium. We note that, for
Î³ small enough, there are always strict gains from trade when i 6= j and so Î¸i (aj ) = 1. The equilibrium

51

objects are then defined in a manner similar to the paragraph following Proposition 3:
qi (aj ) = ai âˆ’ aj ,

Ï†i (aj ) =

Î³
, and
Âµ

Î¸i (aj ) = 1.

We let
Vi? (a) = max Vi [a, Ïƒk (a` ), Î¸k (a` )] .
k,`

We will adopt a slightly different definition for market tightness:
Î˜ (Ïƒ) = inf {Î¸ â‰¥ 0 : Vi (a, Ïƒ, Î¸) â‰¥ Vi? (a) and Vi? (a) > Vi (a, 0, 0) for some i âˆˆ I} .
In the case when Î±(Î¸) is strictly increasing and strictly concave, this definition is equivalent to the one we
used before. It is stronger in the present Leontief case.
We proceed to verify that these candidate equilibrium objects form a competitive search equilibrium.
We first show that Î˜[Ïƒi (aj )] = Î¸i (aj ). First, we note that there are strict gains from trade in LR so, by the
continuity arguments already used above, there must be strict gains from trade in our setup when Î³ is small
enough. That is,
Vi (aj , Ïƒi (aj ), Î¸i (aj )) > Vi (aj , 0, 0).
Given that Vi (aj , Ïƒi (aj ), Î¸i (aj )) = Vi? (aj ), the definition of Î˜(Ïƒ) implies that Î˜ [Ïƒi (aj )] â‰¤ Î¸i (aj ). Suppose, toward a contradiction, that the inequality is strict. Then, by definition of Î˜(Ïƒ), there exists some Î¸ âˆˆ
(0, Î¸i (aj )) and some (k, `) such that Vk (a` , Ïƒi (aj ), Î¸) â‰¥ Vk? (a` ) > Vi (a` , 0, 0). Since Vk (a` , Ïƒi (aj ), Î¸) >
Vi (a` , 0, 0), one sees easily that Î¸ 7â†’ Vk (a` , Ïƒi (aj ), Î¸) is strictly increasing in Î¸ âˆˆ (0, Î¸i (aj )). This implies that Vk (a` , Ïƒi (aj ), Î¸i (aj )) > Vk? (a` ), which is a contradiction since Vk? (a` ) is the maximum attainable
utility for this investor.
Finally, we verify the zero-profit conditions of dealers. For this, we first note that, in the Leontief case,
the alternative representation of Proposition 1 continues to hold (one can verify that proof goes through
almost identically), and so Vi? (aj ) solves the Bellman equation (51). Now suppose that there is Ïƒ = (q, Ï†)
Î±[Î˜(Ïƒ)]
Î˜(Ïƒ) Ï† > 0. Then Î˜(Ïƒ) < âˆ and there is some type (i, aj ) and some tightness Î¸ such
that Vi (aj , Ïƒ, Î¸) â‰¥ Vi? (aj ) > Vi (a, 0, 0) and âˆ’Î³ + Î±(Î¸)
Î¸ Ï† > 0. Consider then the contract ÏƒÌ‚, with qÌ‚ = q and
Î±(Î¸)
Ï†Ì‚ chosen such that Î³ = Î¸ Ï†Ì‚. Because Ï†Ì‚ < Ï†, we have that Vi (aj , ÏƒÌ‚, Î¸) > Vi? (aj ), which can be written

such that âˆ’Î³ +

ui (aj ) + Î´

P

Ï€ik Vk? (ak ) + Î±(Î¸) [Vi? (aj + qÌ‚) âˆ’ pqÌ‚] âˆ’ Î³Î¸
> Vi? (aj ),
r + Î´ + Î±(Î¸)

contradicting that Vi? (aj ) solves the Bellman equation (51).

52

