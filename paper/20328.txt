NBER WORKING PAPER SERIES

IMPLICATIONS OF HETEROGENEITY IN PREFERENCES, BELIEFS AND ASSET
TRADING TECHNOLOGIES FOR THE MACROECONOMY
YiLi Chien
Harold L. Cole
Hanno Lustig
Working Paper 20328
http://www.nber.org/papers/w20328

NATIONAL BUREAU OF ECONOMIC RESEARCH
1050 Massachusetts Avenue
Cambridge, MA 02138
July 2014

We would like to thank the SED for giving us the opportunity to present our new aggregation result
and our heterogeneous belief findings as part of the plenary lecture in Soul Korea in June of 2013.
The views expressed herein are those of the authors and do not necessarily reflect the views of the
National Bureau of Economic Research.
NBER working papers are circulated for discussion and comment purposes. They have not been peerreviewed or been subject to the review by the NBER Board of Directors that accompanies official
NBER publications.
© 2014 by YiLi Chien, Harold L. Cole, and Hanno Lustig. All rights reserved. Short sections of text,
not to exceed two paragraphs, may be quoted without explicit permission provided that full credit,
including © notice, is given to the source.

Implications of Heterogeneity in Preferences, Beliefs and Asset Trading Technologies for
the Macroeconomy
YiLi Chien, Harold L. Cole, and Hanno Lustig
NBER Working Paper No. 20328
July 2014
JEL No. E21,E44,G11,G12
ABSTRACT
This paper extends the methodology developed in Chien, Cole and Lustig (2011 & 2012) (hereafter
CCL2011 and CCL2012, respectively) to analyze and compute the equilibria of economies with heterogeneous
agents who have different asset trading technologies and are subject to both aggregate and idiosyncratic
income risk. The different asset trading technologies, which are designed to replicate the portfolio
behavior seen in the data, fall into two classes. Active traders manage the composition of their portfolios
among a given set of assets in addition to choosing how much to save. Passive traders take their portfolio
composition as given and choose only how much to save. There can be a wide variety of different
cases within each classes. For active traders, the trading technology varies depending on the set of
assets that they can use, while for passive traders it varies with the specific portfolio composition rule.
In CCL2011 and CCL2012, all of our agents had to have the same CRRA flow utility functions, discount
rates, and beliefs. In this extension, this restriction is relaxed greatly extending the set of economies
to which our method applies. This richer degree of heterogeneity allows the model to match a number
of key features of the data.

YiLi Chien
Research Division
Federal Reserve Bank of St. Louis
P.O. Box 442
St. Louis, MO 63166-0442
yilichien@gmail.com
Harold L. Cole
Economics Department
University of Pennsylvania
3718 Locust Walk
160 McNeil Building
Philadelphia, PA 19104
and NBER
colehl@sas.upenn.edu

Hanno Lustig
UCLA Anderson School of Management
110 Westwood Plaza, Suite C413
Los Angeles, CA 90095-1481
and NBER
hlustig@anderson.ucla.edu

Implications of Heterogeneity in Preferences, Beliefs and
Asset Trading Technologies for the Macroeconomy∗
YiLi Chien, Harold Cole and Hanno Lustig†
first version June 2013
revised July 14, 2014

Abstract
This paper analyzes and computes the equilibria of economies with large numbers
of heterogeneous agents who have different asset trading technologies, preferences, and
beliefs. We illustrate the value of our method by using it to evaluate the implications
of these heterogeneities through several quantitative exercises.

1

Introduction

This paper extends the methodology developed in Chien, Cole, and Lustig (2011) and Chien,
Cole, and Lustig (2012) (hereafter CCL2011 and CCL2012, respectively) to analyze and
compute the equilibria of economies with heterogeneous agents who have different asset
trading technologies and are subject to both aggregate and idiosyncratic income risk. The
different asset trading technologies, which are designed to replicate the portfolio behavior
seen in the data, fall into two classes. Active traders manage the composition of their
portfolios among a given set of assets in addition to choosing how much to save. Passive
traders take their portfolio composition as given and choose only how much to save. There
can be a wide variety of different cases within each classes. For active traders, the trading
technology varies depending on the set of assets that they can use, while for passive traders
∗

We would like to thank the SED for giving us the opportunity to present our new aggregation result and
our heterogeneous belief findings as part of the plenary lecture in Soul Korea in June of 2013.
†
Chien: Research Division, Federal Reserve Bank of St. Louis, P.O. Box 442, St. Louis, MO 631660442; yilichien@gmail.com. Cole: University of Pennsylvania, 3718 Locust Walk Philadelphia, PA 19104;
colehl@sas.upenn.edu. Lustig: UCLA Anderson School of Management, 110 Westwood Plaza, Los Angeles,
CA 90095; hlustig@anderson.ucla.edu.

1

it varies with the specific portfolio composition rule. In CCL2011 and CCL2012, all of our
agents had to have the same CRRA flow utility functions, discount rates, and beliefs. In
this extension, this restriction is relaxed greatly extending the set of economies to which our
method applies. This richer degree of heterogeneity allows the model to match a number of
key features of the data.
To compute and characterize equilibria, we use a recursive multiplier method and analytic
aggregation results with respect to consumption shares and the stochastic discount factor
that rely on a single cross-sectional moment of the multiplier distribution. As a result, we can
compute equilibria with an iterative method in which we guess and recover a transition rule
for the updating of this moment. These iterations do not require computation of ”market
clearing prices” since we know them analytically as a function of the updating rule. Instead,
we simply solve the analog of a dynamic programming problem for each type of agent with
respect to their individual multipliers to determine their individual multiplier updating rule.
The only input into this problem is the stochastic discount rate implied by the conjectured
updating rule for the key cross-sectional multiplier moment. We then pass individual agent’s
multiplier updating rules through a stochastic panel of aggregate and individual shocks to
determine the implied updates of the key cross-sectional multiplier moment. If we recover the
same updating rule we conjectured, then we have solved for an equilibrium of our economy.
Otherwise, we use the implied updating rule to modify our conjectured rule and continue to
iterate on the aggregate multiplier transition rule.
In CCL2011 and CCL2012, we relied on the homogeneity of the inverse of the marginal
utility of consumption when all households have common CRRA preferences, discount rates,
and beliefs. In our extension, we create a parallel economy of reference traders who have
common CRRA preferences, discount rates, beliefs, and a mapping rule that maps our
standard household’s multiplier into a multiplier for the reference traders such that their
consumptions are equal history-state-by-history-state if state prices are the same. All of
our aggregation results hold in the parallel economy. Our extended methodology takes
advantage of this by using a guess and recover method for the transition rule for the key
cross-sectional moment of the reference economy multipliers. We use the regular economy
to determine updating rule for traders individual multipliers, given the state prices implied
by the transition rule for the key moment of the reference trader’s multiplier distribution.
We then use these individual updating rules to determine the realized individual multipliers
in a stochastic panel. We map these multipliers into the multipliers for our reference traders
and then determine the cross-sectional moment and updated transition rule in the parallel
economy. The new procedure essentially adds one small step to the original algorithm.
However, the set of economies that can be handled includes any for which we can construct
2

a multiplier mapping rule for the reference traders, which turns out to be a very broad set.
Our methodology is well suited to exploring the implications of a rapidly growing literature on household finance that studies the portfolio decisions of households for the macroeconomy. This literature finds that many households do not use asset markets as our standard
theory would predict: Both the extent of the assets they use and how they use them differ
in important ways (see Guiso and Sodini (2012) for a survey of this literature). First, many
households do not use all of the available assets. Second, even households that hold equities make very few adjustments in their financial positions. Third, many households that
do adjust their portfolios seem to do so in a backward-looking manner that leads them to
systematically mistime the market. These empirical findings suggest that many households
are either completely unresponsive to variations in the pricing of risk or they respond in the
wrong direction. This pattern of asset usage by households is potentially important since
it creates a form of market segmentation that can have wide ranging implications for many
aspects of our models’ predictions such as household consumption behavior, the distribution
of wealth, and most directly, asset prices.
CCL2011 and CCL2012 used this methodology to impose portfolio behavior on passive
households in the model to evaluate its impact. We found that having a large number of
investors who invest only in low-risk / low-return portfolios means that other investors must
take on more risk, particularly aggregate risk. We also found that having a large number of
investors who invest in equities very passively, allowing the equity share in their portfolios to
rise and fall with excess returns on equity, means that the equity investments of other traders
who do adjust their equity positions must move in a counter-cyclical manner, rising when the
price of risk is high and falling when it is low. We found that the concentration of aggregate
risk through equities on a small number of active traders has the potential to generate both
a high and a highly volatile market price of risk (MPR), which has been a challenge for our
asset pricing models (see Lettau and Ludvigson (2010)). Also, having a large number of
households that do not use assets well can explain their failure to smooth their consumption
to the degree that the richness of actual financial markets would allow. Finally, the fact that
households realize very different returns on their investments can explain the distribution of
wealth: both the fact that it is highly skewed relative to income and that equity investment
is highly correlated with wealth.
We apply this new methodology to several quantitative experiments. In the first set of
experiments, we examine the impact of different attitudes toward the future derived through
either belief heterogeneity or patience. We consider two forms of belief heterogeneity that
lead to overweighting of recent events or recency bias in forming their beliefs. Disagreements
of this sort seem natural in a world in which the stationarity of the mechanism generating
3

our data is not obvious. We examine the implications of this recency bias for the behavior of
our actively trading households because belief differences are likely important both in terms
of their overall savings behavior and their portfolio decisions. The active traders with some
form of recency bias become more (less) optimistic about the likelihood of a good growth
shock precisely when the price of risk is rising (falling); their investment behavior is less responsive to the price of risk, forcing the standard active traders to have large counter-cyclical
aggregate risk exposure. This leads the recency-bias active traders to mistime the market
and substantially increases the counter-cyclical volatility of the MPR. This mechanism is
complementary to the mechanisms explored in CCL2011 and CCL2012 because it involves
a different set of traders and a similar cyclical concentration of risk for the standard active
traders. In addition, the inclusion of active traders with reduced patience has very little
impact on asset prices because these reduced-patience traders take very similar portfolio
positions as the standard active traders. The major impact of reduced patience is on their
overall wealth level, which falls because of the reduction in their precautionary motive to
save.
In the second set of experiments, we examine the role of difference in the attitude toward
future fluctuations in consumption derived through different degrees of risk aversion (RA),
or the intertemporal rate of substitution (IES), or both. To undertake this experiment, we
extend our methodology to include recursive preferences. We then compare the implications
of changing these two preference factors for the asset pricing, portfolio, and wealth implications of our model. We find that changes in the IES have very little impact on either overall
asset prices or the savings and portfolio decisions of our active traders. In contrast, changes
in the degree of risk aversion matter greatly. Increased willingness by some of our active
traders to absorb aggregate risk leads to a reduction in the extent to which our standard
active traders must absorb aggregate risk and, consequently, a reduction in its price.
One striking finding of our experiments is that households with incorrect beliefs, low
discount factors, or higher degrees of risk aversion do not become economically negligible.
In fact, they remain large and important throughout. The reason for this is twofold. First,
the presence of idiosyncratic risk and net wealth bounds implies that these households have
large precautionary saving motivations at low wealth levels. Second, the low risk-free rate
exerts a downward force on household wealth. The combination of these factors leads to
an ergodically stable wealth distribution for our economy. Moreover, if the standard active
traders became economically completely dominant, then asset prices would have to reflect
this, which would lead to a low price of risk and a high risk-free rate. This, in turn, would
make the other trading technologies more effective and the consequence of incorrect beliefs
less substantial. Hence, prices end up adjusting so that these standard active households
4

never become dominant. However, in our belief experiments the right tail of the wealth
distribution consists of active traders with the correct beliefs.
The paper proceeds as follows. After a brief literature review, we lay out our model and
develop our aggregation results. We do this by constructing a recursive multiplier that serves
as the individual’s state. Armed with our revised aggregation result, we turn next to our
quantitative experiments.

2

Literature Review

The use of cumulative multipliers in solving equilibrium models was pioneered by Marcet
and Marimon (1992), Marcet and Marimon (1999) and Kehoe and Perri (2002). See also
Cole and Kubler (2012), and Messner, Pavoni, and Sleet (2012) for extensions and further
developments of these methods.
Our use of measurability constraints to capture portfolio restrictions is similar to that in
Aiyagari, Marcet, Sargent, and Seppala (2002), while the aggregation result extends that in
Chien and Lustig (2010) to an incomplete markets environment. In continuous-time finance,
Basak and Cuoco (1998) and Cuoco and He (2001) provide a computationally efficient algorithm for computing equilibria in environments with a large number of agents subject to both
idiosyncratic risk and aggregate risk and heterogeneity in trading opportunities. Recently,
Brumm and Kubler (2013) have used recursive multipliers to construct an existence proof
and characterize the equilibria in OLG economies. Our paper is related to work by Krusell
and Smith (1998) who have an aggregation result for a production economy in which capital
is the only traded asset.
Our quantitative results are related to several literatures. One of our main findings
is that because of idiosyncratic risk and net wealth constraints households do not become
economically negligible despite having incorrect beliefs, or being more myopic, or having high
risk aversion. In fact the precautionary motive is so strong that households with incorrect
beliefs but sophisticated asset portfolio/trading rule end up having more wealth than the
average household who is using a less sophisticated rule. These results are the flip side of
results like Sandroni (2000) or Blume and Easley (2006) who showed the individual’s with
incorrect beliefs will become economically negligible in a Pareto-efficient economy because
they will asymptotically put zero weight on outcome paths that are consistent with the
correct stochastic process. These results are consistent with those of Tsyrennikov, Sargent,
and Cogley (2013) who show agents with Bayesian learning die out in complete markets vs.
agents who know the law of motion for the exogenous shocks, but not when the only asset is
a bond. However, Borovicka (2013) has shown analytically that agents with incorrect beliefs
5

can survive with recursive preferences in which the level of risk aversion is above the IES.
In terms of asset pricing, we find that having agent’s who overweight recent data tends to
magnify cyclical fluctuations in the pricing of risk. This is because the Sharpe ratio is countercyclical in our model, as it is in the data. Hence, a sequence of bad shocks both drive up the
Sharpe ratio and down probability that our Bayesian agents assign to probability of getting
a good shock. This dampens their responsiveness to fluctuations in the true Sharpe ratio and
ends up making it rise by more to make the rational agents demand more risky assets. Our
feedback effect works very differently than Long, Shleifer, Summers, and Waldman (1990)
because the increase in volatility is not coming from the tendency of traders who excessively
optimistic bidding up prices. Instead, our traders have different beliefs about the law of
motion for the shocks which induce them to have more stable portfolio behavior. This forces
the equity share of the rational traders to become more counter-cyclical and thereby induces
greater fluctuations in the market price of risk.
We also examine the impact of having households who are more myopic. This turns out
to have relatively small affects since these households act as if they have a lower wealth
target coming from the reduce impact of the net wealth constraint on precautionary savings.
However, their portfolio decisions are similar which leads to only a modest increase in their
consumption volatility but essentially no change in the market price of risk or its volatility.
In a related vein, Cvitanic, Jouini, Malamud, and Napp (2011) derive analytic characterizations of an exchange economy with differing beliefs, risk aversion and time preference, and
show that asymptotically prices are determined by the agents how place the most value on
consumption in those states. (See also Ross, Westerfield, Wang, and Kogan (2011), Beker
and Espino (2011) and Beker and Espino (2013).)
In terms of the role of recursive preferences and the differing affects of risk aversion
and the IES on asset pricing and consumption, we find that increasing the IES modestly
increases the volatility of a household’s consumption but does to change their portfolios.
Hence, adding in these households has almost no affect on the market price of risk or its
volatility. However, adding in households with lower risk aversion has large affects because
it changes their portfolio behavior and through that asset prices. The price of risk falls
substantially while its volatility rises. Bhamra and Uppal (2013) examine analytically the
impact of changes in risk aversion and the IES in a three period partial equilibrium model.
They also find that risk aversion is important for portfolio behavior. (See also Bhamra and
Uppal (2006).)

6

3

Model

This is an endowment economy with a single, nonstorable consumption good in each period.
Time is discrete, infinite, and indexed by t = 0, 1, 2, ... The first period, t = 0, is a planning
period in which financial contracting takes place. There are a unit measure of households
that come in a finite set of household types indexed by i ∈ {1, ..., I} . These household types
differ in terms of their preferences, beliefs, and asset trading technologies. All households
have additively separable utility functions over consumption with constant discount rates.
The aggregate amount of the endowment good is stochastic, and household endowments are
subject to both aggregate and idiosyncratic shocks. Asset markets are complete, and both
a stock and a risk-free bond are traded. A household’s portfolio selection is limited by its
trading technology.

3.1

Endowments and Shocks

There are two kinds of shocks. The first is an aggregate growth rate shock zt ∈ Z. The
second is an idiosyncratic household-specific income shock ηt ∈ N in period t. We assume
that Z and N are finite. The variable z t denotes the history of aggregate shocks and η t
denotes the history of idiosyncratic shocks. The history state for a household is (z t , η t ).
The aggregate per capita supply of the endowment good is given by Yt (z t ) and evolves
according to
Yt (z t ) = ezt Yt−1 (z t−1 ),
(1)
with Y0 (z 0 ) = 1. A household’s endowment of this good comes in the form of two Lucas
fruit trees. The first tree yields diversifiable income (1 − γ)Yt (z t ). The household is free to
trade claims directly on this income and hence it forms the basis for a positive net supply of
financial wealth. The second tree yields non-diversifiable income γYt (z t )ηt and is subject to
the household’s idiosyncratic income shock. We assume that the household cannot directly
trade away its claim to non-diversifiable income; hence, its ability to hedge its idiosyncratic
risk will depend on whether its asset trading technology allows it to trade claims that are
conditional on ηt . For simplicity, we assume that all households face the same stochastic
process for idiosyncratic shock. We assume that the expected value of ηt is 1 and that
the law of large numbers applies. So, these idiosyncratic income shocks average out in the
population. Thus the per capita supply of non-diversifiable income is γYt (z t ), and γ is the
overall share of income that is non-diversifiable.
We use π(z t , η t ) to denote the unconditional probability of state (z t , η t ) being realized.
In a slight abuse of notation, we also use π(η t ) to denote the unconditional probability of

7

personal history η t . Since we can appeal to the law of large numbers, π(η t ) also denotes
the fraction of agents in state z t that have drawn an idiosyncratic history η t . The events
are first-order Markov and, continuing our pattern of notation abuse, we assume that the
conditional probability of (z t+1 , η t+1 ) is given by
π(z t+1 , η t+1 |z t , η t ) = π(zt+1 |zt )π(ηt+1 |ηt , zt+1 ).

(2)

Thus, we allow the distribution of idiosyncratic shocks to depend on the aggregate shock,
but not the reverse.
We introduce some additional notation to deal with the timing on the event tree: z t+1  z t
or η t+1  η t means that the left-hand-side node is a successor node to the right-hand-side
node. We denote by {z τ  z t } the set of successor aggregate histories for z t , including those
many periods in the future; we do the same for {η τ  η t }. When we use , we include the
current nodes z t or η t in the set.

3.2

Preferences

Households come in a variety of types which indexed by i. A household of type i has a
flow utility function ui (c), where ui is strictly concave and differentiable. We also assume
that the marginal utility of consumption is continuous and monotonic, so it is invertible.
Households discount future utility at a constant but potentially type-specific rate, βi . The
measure of type i households is given by µi . The households are expected utility maximizers;
however, we allow their beliefs to differ from the true probabilities. A household of type i
has preferences over stochastic consumption sequences given by
∞
X

(βi )t ui (ct )π̃ i (z t , η t ),

t≥1,(z t ,η t )

where π̃ i (z t , η t ) denotes the probabilities that agent i assigns to state (z t , η t ).1 We assume
that π̃ i (z t , η t ) is separable between z t and η t , as in (2), and that all agents have common beliefs about the agent’s personal outcomes η t given by the actual probabilities π(ηt+1 |ηt , zt+1 ).
However, agents may differ with respect to the aggregate probabilities, with π̃ i (zt+1 |zt ) denoting agent i’s aggregate beliefs.2
1

It is straightforward to add preference shocks to our model.
Without this assumption of common beliefs about idiosyncratic risk, we cannot price this risk in the
simple manner assumed in equation (3).
2

8

3.3

Asset Markets

Households trade assets in securities markets that reopen every period. A wide range of
assets can be traded, including one-period Arrow securities, a risk-free bond, and a levered
equity claim. So, asset markets are complete, but restrictions on a household’s ability to use
these assets may render it incomplete from its perspective. We denote the price of a unit
claim to the final good in aggregate state z t+1 acquired in aggregate state z t by Qt (zt+1 , z t ).
We take the price of a unit claim in state (z t+1 , η t+1 ) to be
Q (zt+1 , ηt+1 ) , z t , η t



= Qt (zt+1 , z t )π(ηt+1 |ηt , zt+1 ).

(3)

If a trader can hedge his idiosyncratic risk, then this price is implied by arbitrage, while if
not it is an innocuous assumption since he will care only about the aggregate state price
Q(zt+1 , z t ).
Starting from aggregate state-contingent Arrow bond prices, we can back out the aggregate present-value prices recursively as follows:
Pe(z t ) = Q(zt , z t−1 )Q(zt−1 , z t−2 ) · · · Q(z1 , z 0 )Q(z0 ).
From the present-value price Pe(z t ), we can construct the state prices as
P (z t ) =

Pe(z t )
.
π(z t )

Consistent with (3), we let Pe(z t , η t ) = Pe(z t )π(η t |z t ).3 Finally, we let m(z t+1 |z t ) = P (z t+1 )/P (z t )
denote the stochastic discount factor that prices any random payoffs.
In addition to state-contingent bonds, we split the aggregate diversifiable income stream,
(1 − γ)Yt (z t ), into payments on a risk-free debt and an equity claim. For simplicity, the
bonds are taken to be one-period risk-free bonds. Since we assume a constant leverage ratio
ψ, the supply of one-period non-contingent bonds Bts (z t ) in each period needs to adjust such
that
Bts = ψ [(1 − γ)Vt [{Y }] − Bts ] ,
where Vt [{Y }](z t ) denotes the value of a claim to aggregate income in node z t . The payout
s
to bond holders is given by Rtf (z t−1 )Bt−1
(z t−1 ) − Bts (z t ), where Rtf (z t−1 ) is the risk-free rate
between t − 1 and t in node z t−1 . The payments to shareholders, Dt (z t ), are then determined
3

The state price is independent of the realization of the idiosyncratic history.

9

residually as follows:
s
Dt = (1 − γ)Yt − Rtf (z t−1 )Bt−1
+ Bts .

In our model, the supply of shares is constant and all equity payouts come exclusively in the
form of dividends. We denote the value of the equity claim as Vt [{D}](z t ). Rte (z t ) denotes
the gross return on the dividend claim between t − 1 and t. A trader who invests a fraction
ψ/(1 + ψ) in bonds and the rest in debt is holding the market portfolio. Note that both
equities and the risk-free bond are in positive net supply because they add up to a claim to
diversifiable wealth.

3.4

Asset Trading Technologies

Our households face different asset trading technologies that take the form of portfolio restrictions and net wealth constraints. Portfolio restrictions fix the relative amounts that the
household can invest in certain groups of assets. As a result, a household can choose only
how much to invest in such an asset group. Since the relative shares within a group will determine the return on the total amount invested in the group, given the asset returns within
the group, each group in effect becomes a single asset from the perspective of a restricted
household. The total number of groups available to a household, along with their possibly
state-contingent returns, will then determine the extent to which it can allocate financial
wealth tomorrow across states of the world.
To ensure that the stochastic discount factor is uniquely determined, at least with respect
to the aggregate shock, we assume that a positive measure of our agents can freely trade an
aggregate state-contingent bond. This implies that the return on any traded asset can be
expressed in terms of the return on an Arrow security as a result of arbitrage. Hence, we
can simply think of all households as trading the state-contingent Arrow securities subject
to a linear portfolio restriction.
We denote by bi [(z t , η t ), (zt+1 , ηt+1 )] the number of state contingent bonds purchased in
state (z t , η t ) and paying off one unit in state ([z t , zt+1 ] , [η t , ηt+1 ]) by a household of type i.
We denote the vector of bond positions acquired in state (z t , η t ) by bizt+1 ,ηt+1 [(z t , η t )].(We
use this notation whenever we convert a function into a conditional vector.) A household’s
trading technology implies a savings choice σ(z t , η t ) that has the same dimension as the
number of asset groups among which the trader can choose. Their savings technology implies
a matrix Ai (z t ) of asset group returns between z t and z t+1  z t , which is of dimension
# [Z × N ] × #σ(z t , η t ) (i.e., the dimension of shocks × the dimension of the number of asset
choices). The portfolio restrictions of these restricted households can be expressed as the

10

requirement that


bizt+1 ,ηt+1 (z t , η t ) = Ai (z t ) × σ(z t , η t ).4
This linear restriction can encompass a wide range of standard cases.
Active traders have multiple groups and hence have genuine portfolio allocation decisions.
Two examples of this class of traders are complete and aggregate-complete traders. Complete traders can freely trade Arrow securities; the dimension of σ(z t , η t ) is # [Z × Θ] and
Ai (z t ) = I. For aggregate-complete traders who can trade only in aggregate state contingent
bonds, σ(z t , η t ) has dimension #Z, and Ai (z t ) = 1 for those row elements that correspond
to a particular realization of the aggregate shock zt+1 . This leads to a collection of linear
restrictions of dimension #Z for each (z t , η t ) that have the form


bi (z t , η t ), (zt+1 , ηt+1 ) − σ(zt+1 , z t , η t ) = 0,
where σ(zt+1 , z t , η t ) denotes the aggregate state contingent bond position chosen at state
(z t , η t ).
For active traders who can choose between a risk free bond and a stock portfolio, then
σ(z t , η t ) has two elements, with the first being, say, investment in stocks and the second
being purchases of bonds. Ai (z t ) is a matrix with two columns, where the first column is
e
the stock return Rt+1
(z t+1 ) for the corresponding aggregate state and the second column is
f
the risk-free rate Rt+1
(z t ). They have a restriction of the form


f
e
bi (z t , η t ), (zt+1 , ηt+1 ) − σ e (z t , η t )Rt+1
(z t+1 ) + σ b (z t , η t )Rt+1
(z t ) = 0,
where σ e (z t , η t ) and σ b (z t , η t ) denote for equity and bond investments at (z t , η t ). 5
Passive traders have only one group, so there is no allocation decision, only an overall
savings decision. We refer to these investors as passive since they do not actively manage
their portfolios. Two examples of this class of traders are nonparticipants and fixed-portfolio
traders. For nonparticipant traders who can trade only a risk-free bond, σ(z t , η t ) has dimenf
sion 1 and Ai (z t ) is a vector whose elements equal the risk-free rate Rt+1
(z t ). This leads to
4

To be clear, we can also write this expression as


bi (zt+1 , ηt+1 )(z t , η t ) = Ai(zt+1 ,ηt+1 ) (z t ) × σ(z t , η t ),


which is the vector of realized returns for each asset in state z t+1 , η t+1 times the investment in each asset,
summed up.
5
In the quantitative analysis, we restrict attention to the case in which zt takes on two values. In this
case, spanning implies that our aggregate-complete traders are equivalent to equity-and-bond traders.

11

a series of linear restrictions of dimension 1 for each (z t , η t ) with the form


f
(z t )σ(z t , η t ) = 0.
bi (z t , η t ), (zt+1 , ηt+1 ) − Rt+1
For fixed-portfolio traders whose restrictions imply that they hold a portfolio with fixed
value shares of stocks and bonds, then σ(z t , η t ) has dimension 1 and Ai (z t ) is a vector whose
p
elements equal the state-contingent returns on that portfolio Rt+1
(z t+1 ). In this case, the
restrictions implied by Ai (z t ) take the form


p
(z t+1 )σ(z t , η t ) = 0.
bi (z t , η t ), (zt+1 , ηt+1 ) − Rt+1
Net-Wealth Constraints: Our traders also face a net-wealth constraint, which puts a
lower bound on the value of their financial position at (z t , η t ) of Dit (z t ), or


bi (z t , η t ), (zt+1 , ηt+1 ) ≥ Dit (z t ) for all (z t , η t ) and (zt+1 , ηt+1 ).

(4)

This net-wealth constraint plays an important role in the quantitative analysis since it prevents any traders from trading away all of his wealth. Note that since this constraint is on
net-wealth, it does not directly restrict how negative a trader’s bond position can be. In
the quantitative analysis, we find it useful to scale the net-wealth constraint by aggregate
output because output in this economy is nonstationary.

3.5

The Savings Function

It is convenient to pose the trader problems in terms of feasible consumption sequences
{ci (z t , η t )} . For that reason, we define the continuation net-savings function. This allows
us to express our portfolio restrictions and net-wealth restrictions in terms of restrictions on
the continuation consumption allocation.
Denote the continuation net-savings out of non-tradable income in state (z t , η t ) for a
trader of type i by S i (z t , η t ), where
S i (z t , η t ) =

X

X



Pe(z τ , η τ ) γY (z τ )ητ − ci (z τ , η τ ) .

τ ≥t (z τ ,η τ )(z t ,η t )

Since the present-value budget constraint from state (z t , η t ) onward is given by
S i (z t , η t ) + bi (z t , η t )Pe(z t , η t ) = 0,
6

Note that S i (z t , η t ) < 0 represents positive net saving.

12

6

this means that we can directly map restrictions on bi (z t , η t ), the household’s beginning of
period financial wealth, into S i (z t , η t ), the present-value of its continuation net-savings. To
see this, let Szit+1 ,ηt+1 (z t , η t ) denote the vector of continuation values conditional on the vector
of history states that can follow from (z t , η t ) or (z t+1 , η t+1 )  (z t , η t ). Then we can express
our portfolio restriction in terms of net savings as
−

Szit+1 ,ηt+1

i
 t t   i t
 h
t t
t t
e
(z , η ) = A (z ) × σ(z , η ) ◦ Pzt+1 ,ηt+1 (z , η ) .7

(5)

We can also express the net wealth constraint as


S i (z t , η t ), (zt+1 , ηt+1 ) ≤ Dit (z t ) for all (z t , η t ) and (zt+1 , ηt+1 ).
This in turn allows us to reformulate our traders’ problems solely in terms of consumption
sequences.

3.6

Trader i’s Problem

We exploit the equivalence between the sequential choice problem and the present-value
problem to formulate our trader’s problem as a time-zero choice problem. Let χ denote the
multiplier on the present-value budget constraint. Let ν(z t , η t ) denote the multiplier on the
trader’s portfolio restrictions, and let νzt+1 ,ηt+1 (z t , η t ) denote the vector collection of successor
ν(z t+1 , η t+1 ) conditional on the history states (z t , η t ). Let ϕ(z t , η t ) denote the multiplier on
the debt constraint. With this notation, the saddle point problem of trade i can be stated
as
L =

max
min
i i

{c ,σ } {χ,ν,ϕ}

∞
X
t=1

(βi )t

X

ui (ci (z t , η t ))π̃ i (z t , η t )

(z t ,η t )


X X





+χi
Pe(z t , η t ) γY (z t )ηt − ci (z t , η t ) + $(z 0 )


t≥1 (z t ,η t )
(
)
i
t−1 t−1
X X
S
(z
,
η
)
zt ,ηt
h
i
+
νzit ,ηt (z t−1 , η t−1 ) ×
i t−1
i t−1 t−1
t−1 t−1
e
− [A (z ) × σ (z , η )] ◦ Pzt ,ηt (z , η )
t≥1 (z t−1 ,η t−1 )
o
n
X X
(6)
+
ϕi (z t , η t ) Dit (z t )Pe(z t , η t ) − S i (z t , η t ) .
t≥1 (z t ,η t )

The first constraint is the standard present-value budget constraint. We start each house7

The symbol ”◦” denotes element-by-element multiplication, which will result in each asset position for
state (z t+1 , ht+1 ) being multiplied by the present value price P̃ (z t+1 , ht+1 ).

13

hold out symmetrically by endowing them with a claim to diversifiable income, $(z 0 ). There
is no consumption in period 0; however, households use this period to trade their claims into
consumption consistent with their trading technology as dictated by their measurability and
borrowing constraints. The second constraint is the household’s measurability constraint,
which dictates that each period the household’s continuation net savings, and hence its beginning of period net wealth, be consistent with the realized returns in z t as given by Ai (z t−1 )
and asset investment choices in the prior period σ i (z t−1 , η t−1 ). This asset investment choice
is chosen optimally, but its only role is to dictate how net savings, Szit ,ηt (z t−1 , η t−1 ), can vary
across realized states. This is because the present value budget constraint already requires
overall consumption spending to be consistent with the household’s overall wealth. The final
constraint is the net wealth limit, which caps the extent to which wealth can be transferred
across states by forcing the present value of net savings in that state not to be too high, and
hence the net asset position too low.
This is a standard convex programming problem – the constraint set is still convex, even
with the measurability conditions and the solvency constraints. The first order conditions
are necessary and sufficient. The first-order condition for consumption is given by
βit ui0 (ci (z t , η t ))π̃ i (z t , η t ) −




χi +



X
(z τ ,η τ )(z t ,η t )


 i τ τ

ν (z , η ) − ϕi (z τ , η τ ) Pe(z t , η t ) = 0.


This condition is common to all traders irrespective of their trading technology because
differences in their trading technology do not affect how c(z t , η t ) enters the objective function
or the constraints. However, it does vary depending on their utility function, discount rate
and beliefs.
To economize on notation, define the recursive multiplier
ζ i (z t , η t ) = χi +

X

 i τ τ

ν (z , η ) − ϕi (z τ , η τ ) .

(z τ ,η τ )(z t ,η t )

Note that this implies that ζ0 = χ and that ζ evolves over time as follows for all t ≥ 1:

ζ i (z t , η t ) = ζ i (z t−1 , η t−1 ) + ν i z t , η t − ϕi (z t , η t ).

(7)

Given this notation, we can rewrite this first-order condition for consumption in terms of
the state price P (z t ) as
βit u0 (c(z t , η t ))π̃ i (z t , η t ) = ζ i (z t , η t )P (z t )π(z t , η t ).

14

(8)

The first order condition with respect to σ(z t , η t ) is specific to a trading technology. For
active aggregate-complete traders, their conditions are given by
X


ν z t+1 , η t+1 π(ηt+1 |z t+1 , ηt )P (z t+1 ) = 0, for all z t+1

(9)

η t+1 η t

For passive fixed-portfolio traders, their conditions are
X


ν z t+1 , η t+1 Rp (z t+1 )π(z t+1 , η t+1 )P (z t+1 ) = 0,

(10)

(z t+1 ,η t+1 )(z t ,η t )

The recursive rule (7); the two first order conditions, (8) and (9) or (10); the measurability
condition with respect to net savings, (5); and the net-wealth constraint written in terms of
net savings determine the updating rule for our recursive multiplier.

3.7

The Reference Consumer, Consumption Shares, and Asset
Prices

We construct a reference consumer for each household and a mapping from the household’s
recursive multiplier to a Negishi-type weight for the reference consumer in a static allocation
problem that will lead him to consume the same level of consumption as the household given
the state prices. These reference consumers have identical CRRA utility functions, discount
rates, and beliefs. As a result, we are able to exploit an aggregation result along the lines of
CCL2011 and CCL2012. To do so, we express the reference consumer’s consumption share
in terms of his Negishi weight and a single moment of the overall weight distribution in that
aggregate state z t . Given this, we are able be able to derive an expression for the stochastic
discount factor that depends only on the aggregate growth rate of output and the updating
of this single moment of the weight distribution.
We start by constructing an allocation problem for all traders. In this problem, the state
contingent price of output is P (z t ) and each reference agent has identical CRRA flow utility
ū(c), the same discount rate β, common beliefs π, and a Negishi weight 1/ζ̄ i (z t , η t ). (In an
abuse of language, we refer to ζ̄ i (z t , η t ) as the Negishi weight even through it is actually its
inverse.) The static allocation problem is given by

X
i



βt

X
(z t ,η t )

1
ζ̄ i (z t , η t )

ū(c̄(z t , η t ))π(z t , η t ) − P (z t )c̄(z t , η t )





15

µi .

The first-order condition for consumption is then given by
β t (c̄(z t , η t ))−ᾱ
= ζ̄(z t , η t ),
P (z t )
where ᾱ is the common risk-aversion rate for the reference trader. Then, note that if we set
i

t

t



ζ̄ (z , η ) :

ζ̄ i (z t , η t )P (z t )
βt

−1/ᾱ
=u

0−1



ζ i (z t , η t )π(z t , η t )P (z t )
βit π̃ i (z t , η t )


,

(11)

then both the type i trader and the reference consumer with recursive multiplier ζ̄ i (z t , η t )
would make the same consumption choice (given the same price P (z t )). In essence, this
mapping rule indicates the appropriate ”change in variables” to allow us to recover our
aggregation results in this richer environment.
Remark 1. This mapping takes a very simple form in case where ui (ci (z t , η t )) is CRRA
and π(z t , η t ) = π̃ i (z t , η t ). In this case, our mapping rule becomes


ζ̄ i (z t , η t )P (z t )
βt

−1/ᾱ


=

ζ i (z t , η t )P (z t )
βit

−1/αi
,

where αi is the CRRA coefficient for type i.
Assume that we constructed the social planning weight for each type of trader as dictated
by (11). Then, note that since aggregate consumption is the sum of individual consumptions,
it is given by



X X  ζ̄ i (z t , η t )P (z t ) −1/ᾱ
t t
t
π(z , η ) µi .
C(z ) =

t t
βt
i

z ,η

Note next that the consumption share of the type i reference consumer is given by
ci (z t , η t )
= P nP
C(z t )
i

ζ̄ i (z t , η t )−1/ᾱ

z t ,η t

o .
ζ̄ i (z t , η t )−1/ᾱ π(z t , η t ) µi

Hence, the consumption share of the consumer is determined solely by the ratio of his social
planning weight raised to the −1/ᾱ relative to the average of this ratio in the population.
Define this average as
h(z t ) =


X X
i



z t ,η



i t t −1/ᾱ
t t
ζ̄ (z , η )
π(z , η ) µi .

t

16

(12)

This is our first aggregation result, where we have transformed our recursive multipliers in
”weights” that we can use to construct consumption shares.
Assume that we had constructed the reference multipliers at all dates and states, and
note that for each reference type
i

t+1

t+1

β (c (z P (z,ηt+1 ) ))

−ᾱ

=

(ci (z t ,η t ))−ᾱ
P (z t )

ζ̄ i (z t+1 , η t+1 )
.
ζ̄ i (z t , η t )

If we substitute consumption by using the prior result on consumption shares, we derive


β

ζ̄ i (z t+1 ,η t+1 )−1/α
C(z t+1 )
h(z t+1 )

−ᾱ

P (z t )


−ᾱ
ζ̄ i (z t ,η t )−1/α
t)
C(z
t
h(z )

=

ζ̄ i (z t+1 , η t+1 )
,
ζ̄ i (z t , η t )

P (z t )

which simplifies to
P (z t+1 )
=β
P (z t )



h(z t+1 )
h(z t )

ᾱ 

C(z t+1 )
C(z t )

−ᾱ
.

(13)

This is our second aggregation result, and leads to the following proposition.
Proposition 1. Relative state prices in this economy are determined by the growth rate of
aggregate consumption and the −1/ᾱ population average of the reference Negishi weight.
This result implies that we can think of the equilibrium of our economy in terms of a
simple fixed point. If H(z t+1 ) = h(z t+1 )/h(z t ) is the updating rule implied by the reference
recursive multipliers, then prices are given by (13). Given the prices, when we construct the
updating rule for ζ i (z t , η t ) and thereby for ζ̄ i (z t , η t ), the resulting values of

X X
i



z t ,η



ζ̄ i (z t , η t )−1/α π(z t , η t ) µi

t

must satisfy (12).
Remark 2. Our aggregation results are fairly general. For example, we could have
1. assumed a finite of traders of each type,
2. allowed for preference shocks, θt , so that flow utility becomes θt ui (ct ),
3. included an additively separate disutility of labor, so flow utility is ui (ct ) − v i (lt ), or
4. as we shall show in one of our quantitative exercises below, assumed recursive utility.
17

3.8

Computational Algorithm

Here we discuss how to construct a computational algorithm to compute an equilibrium of our
model. The algorithm involves several steps. First, a law of motion for the updating of the
multiplier moment ratio, H(z t+1 ) = h(z t+1 )/h(z t+1 ), is posited. Note that this updating rule
is with respect to the cross-sectional moment of the reference traders. Given this updating
rule, we can determine relative state prices Q(z t+1 ) = P (z t+1 )/P (z t ) using (13). Second,
we solve for the household’s savings function and multiplier updating rule for the standard
traders. Third, we map the sequences of household multipliers into the implied sequences
of reference traders’ multipliers and compute the implied updating rule for their multiplier
moment. Fourth, we compare our original guess of H(z t+1 ) with its realized value; if they
are the same, we have an equilibrium and if not, we need to iterate on H(z t+1 ) in some
fashion. To simplify, we assume preferences are CRRA (though they may differ in terms of
their degree of risk aversion). Remember that our agent’s beliefs differ only with respect to
the aggregate state’s evolution.
To describe step 2 in more detail, note that we can recursively represent the savings
functions as
S i (ζ, ηt , z t ) =


γηt Y (z t ) − ci (ζ, z t )
X

+βi
S i (ζt+1 (zt+1 , ηt+1 ) , ηt+1 , z t+1 )Qt (zt+1 , z t )π ηt+1 |ηt , z t ,



(zt+1 ,ηt+1 |z t ,η t )

where
βit u0 (ci (ζ, z t ))

π̃ i (z t , η t )
= ζP (z t ).
π(z t , η t )

To close the system we need to specify how the household’s recursive multiplier ζ is updated.
i
The updating of the individual’s multiplier ζt+1
(zt+1 , ηt+1 ) ,
i
ζt+1
(zt+1 , ηt+1 ) = ζti + ν i (zt+1 , ηt+1 ) − ϕi (zt+1 , ηt+1 )

must be consistent with our (i) saving’s measurability condition (5), (ii) net wealth constraint
4, and (iii) optimality condition (9 or 10). To satisfy (i) and (ii), there must exist σ i (z t , η t )
−Szit+1 ,ηt+1 (ζt+1

i
 i t
 h
t t
i t t
e
(zt+1 , ηt+1 ) , z ) = A (z ) × σ (z , η ) ◦ Pzt+1 ,ηt+1 (z , η ) ,
t

i
i
where Szit+1 ,ηt+1 (ζt+1
(zt+1 , ηt+1 ) , z t ) is a conditional vector and ζt+1
(zt+1 , ηt+1 ) is understood

18

to vary with this conditioning, and
i
(zt+1 , ηt+1 ) , ηt+1 , z t+1 ) ≥ 0.
Dit+1 (z t+1 )Pe(z t+1 , η t+1 ) − S i (ζt+1

For example, to satisfy (iii) for passive fixed portfolio traders, it must be the case that
X




i
(zt+1 , ηt+1 ) − ζti Rp (z t+1 )π(z t+1 , η t+1 )P (z t+1 ) = 0
ζt+1

(z t+1 ,η t+1 )(z t ,η t )

if the net-wealth bound does not bind. To satisfy (iii) for an aggregate-complete trader it
must be the case that

i
(zt+1 , ηt+1 ) = ζti + ν i z t+1 , η t+1
ζt+1
i
if the net-wealth bound does not bind. If the net-wealth bound binds, then ζt+1
(zt+1 , ηt+1 )
must be such that it satisfies the bound and the bound multiplier ϕi (z t+1 , η t+1 ) and portfoliorestrictions multiplier ν i (z t+1 , η t+1 ) are chosen so that the updating rule and (9) or (10) are
jointly satisfied. The outcome of step 2 is an operator T i (ζt , ηt , z t ) = ζt+1 (zt+1 , ηt+1 , ζ), that
gives the law of motion for the recursive multiplier ζ for a household of type i.
∞
In the third step, we compute the implied sequence of multipliers {ζti (z t , η t )}t=0 for each
of our types. We then use our mapping rule (11) to map these sequences into sequences of

∞
weights for our reference traders ζ̄ti (z t , η t ) t=0 . Then we can compute the implied values of
the key moment of the distribution in each state (z t , η t ) using (12), and thereby complete
third step by computing the implied value of H(z t+1 ) = h(z t+1 )/h(z t ).
This computation is simplified by first stationarizing the economy, and second making
a key assumption. The law of motion H(z t+1 ) depends in principle on the either history
z t+1 . However, we have found that a sufficiently long but finite history allows computation
of the equilibrium with a very high degree of accuracy. Let j denote the length of the
utilized history and let z ∈ Z j denote an element of these j-period histories. Then the
moment updating and relative state prices – H(z, z0 ) and Q(z, z0 ) – are simply functions of
the history transition. In addition, the saving function S i (ζ, η, z) and multiplier updating
rule T i (ζ, η, z) are functions of the aggregate history state, the current idiosyncratic shock,
and the recursive multiplier ζ. Hence, computing them amounts to a simple fixed point
operation.
In sum, our algorithm works by first positing H 0 (z, z0 ) for all z, z0 ∈ Z j and Pr(z0 |z) > 0
(i.e., positive probability history transitions). Then it works as follows:

1. Draw a long sample of aggregate shocks {zt } and a corresponding large panel of id
iosyncratic shocks ηtij , where i corresponds to the trader’s type and j distinguishes
19

among traders of a given type. The proportions of trader types is determined by µi .
Construct the implied history state sequence {zt } from {zt } .
2. Construct the sequence of relative prices Q0 (z, z0 ) for each positive probability finite
history transition using H 0 (z, z0 ) and the pricing rule (13).
3. For each type i, use the stationary first-order conditions and savings function S i (η, z, ηt ),
along with the budget constraint and measurability conditions to construct the transition rule for their recursive multiplier T : ζ 0 = T i (η, ζ, z, z0 ). 8
4. Use T i (η, ζ, z, z0 ) and (11) to construct the implies sequence of reference recursive

multiplier ζ̄tij for the panel. Note that these reference multipliers correspond oneto-one with the consumption share of each agent. We therefore take the ratio of the
actual average consumption share and one as a measure of the allocation error (and
hence of the accuracy of our approximation).
5. Construct the panel of implied reference weights and use them to estimate H n+1 (z, z0 ).
If z takes on a small set of values this can be done using simple conditional means.
6. If the accuracy is high and kH n+1 (z, z0 ) − H n (z, z0 )k is small, stop. Otherwise, return
to the second step with a new guess for H.

4

Baseline Model

The parameter setup of our baseline model is similar to that of CCL2011. Our baseline model
operates at annual frequency. We set the value of the coefficient of relative risk aversion α
to 5 and the time discount factor β to 0.95. These preference parameters allow us to match
the collateralizable wealth to income ratio in the data when the tradable or collateralizable
income share 1 − γ is 10%.
The aggregate shock process of our model is governed by a two state Markov chain and
is largely calibrated to match the moments of consumption growth data used in Mehra and
Prescott (1985). The average consumption growth rate is 1.8% and the standard deviation
is 3.16%. The elements of the discretized process for aggregate shocks are {0.9602, 1.0402}.
Since U.S. recessions occur less frequently than expansions, we set 27% of realizations as low
aggregate consumption growth states and hence 73% are high growth states. Unlike Mehra
8

In section 7, we consider recursive preferences. With recursive preference, both the recursive savings
function and the appropriate ratio of future utility to expect future utility must be constructed. This ratio
is denoted by M (η 0 , ζ 0 , z, z0 ). See section 7 for details.

20

and Prescott (1985), we assume i.i.d. consumption growth, so the first-order autocorrelation
coefficient of aggregate consumption growth is zero.
We calibrate the idiosyncratic income process as in Storesletten, Telmer, and Yaron
(2007), except that we eliminate the counter-cyclical variation of labor income risk. Hence,
the variance of labor income risk is constant in our model, which together with i.i.d. assumption of aggregate shock implies that all propagation is internally generated. The Markov
process for the log of the labor income shock, log η, has a standard deviation of 0.71 and
its autocorrelation is 0.89. We also use a two-state discretization for idiosyncratic risk. The
elements of the discretized process for η are {0.3894, 1.6106}.
Equity in our model is simply a leveraged claim to diversifiable income. Following Abel
(1999) and Bansal and Yaron (2004), we set the leverage parameter ψ to 3 so the variance
of the growth rate of dividends is closer to the data. We set the net wealth constraint at
zero, which means that households cannot borrow against their idiosyncratic income.
We consider three types of trading technologies that can be easily ranked in terms of their
sophistication. The first and most sophisticated are aggregate-complete active traders who
can trade (i) Arrow bonds conditional on aggregate growth shocks and (ii) equity and riskfree debt claims. The second and least sophisticated are nonparticipants –, that is, passive
traders who hold only risk-free bonds. The third technology is that of the disversified traders,
who are passive traders who hold debt and equity claims in the same fixed proportion as
existed in the market. The diversified traders are following the standard advice of holding
the market and will earn a higher return than the nonparticipants to the extent that the
economy exhibits an equity premium, which it will. That is why we rank the sophistication
of their trading technology between that of the other two types.
In the most recent Survey of Consumer Finances, around 50% of households reported
owning stocks directly or indirectly. Therefore, the fraction of passive traders with zero
equity holding (non-participants) is calibrated to 50%. In order to deliver a large equity
premium, a small fraction of active traders need to bear the residual aggregate risk created
by non-participants. This leads us to set the share of active traders to 10%. We set the
share of passive traders who hold both equities and debt to 40%.

4.1

Baseline Results

We begin by computing the equilibrium outcomes for our baseline economy. Table 1 reports
the results. The average value of the MPR of 0.40 and the risk-free rate of 1.93% are very
close to what financial economists estimate in the data. The low volatility of the risk-free
rate also agrees well with the data.

21

Figure 1 shows several plots of the dynamics of our baseline economy for a fixed 100
period simulation interval. Low aggregate growth rate realizations are in the grey shaded
panes. A plot of the Sharpe ratio (shown in the first panel) indicates that the Sharpe ratio
(and the MPR) are counter-cyclical, as they are in the data. However, the volatility of the
MPR is much lower than commonly estimated.
Figure 1: Baseline Case

Sharpe Ratio
0.46
0.44
0.42
0.4
0.38
0

10

20

30

40

50

60

70

80

90

100

70

80

90

100

70

80

90

100

Equity Share of Portfolio Choices
1
0.9
0.8
0.7
0

10

20

30

40

50

60

Ratio of Group Wealth to Average Wealth
2.5
2
1.5
1
0

10

20

30

40

50

60

As would be expected, since the active traders have the most sophisticated trading technology, they earn the highest return on their investments, with an excess return of 4.64%.
The diversified traders have an excess return of 1.45%. The nonparticipants, with the least
sophisticated trading technology, by construction have no excess return. The active traders
earn higher returns by taking more risk, as indicated by a much more volatile excess return:
The standard deviation of their excess return is 12.08, while that of the diversified traders
is only 3.80. The active traders achieve their high and volatile returns by heavily investing
in risky assets, with equities making up 79% of their portfolios on average. Moreover, their
equity exposure is very tightly connected to cyclical fluctuations in the pricing of risk; as a
result, the correlation of their equity share and the Sharpe ratio on equities is 0.94.
The differences in investment returns affects the wealth distribution. The active traders
accumulate more than twice as much wealth per capita as the average individual. The
22

Table 1: Baseline Results

Asset Pricing
σ(m)
E(m)

Consumption and Wealth
0.408

E (Wz /W )

2.149

Std( Et (m) )

2.782

E(Wdiv /W )

1.033

E(Rf )

1.926

E (Wnp /W )

0.836

σ(Rf )

0.056

σ (Wz /W )

0.574

E(RzW − Rf )

4.638

σ(Wdiv /W )

0.027

W −R )
E(Rdiv
f

1.448

σ (Wnp /W )

0.098

σ(RzW − Rf )

12.080

σ (∆ log (Cz ))

6.990

W −R )
σ(Rdiv
f

3.798

σ (∆ log (Cdiv ))

3.631

E (ωz )

0.790

σ (∆ log (Cnp ))

2.552

σ (ωz )

0.105

σ (∆ log (cz ))

10.781

corr (ωz , SR)

0.938

σ (∆ log (cdiv ))

12.186

accuracy (max % allocation error)

0.375

σ (∆ log (cnp ))

12.958

σ (m)
t

average wealth level of diversified traders is close to average per capita wealth, while the
nonparticipants on average have only 84% of per capita wealth.
When we turn to consumption, the agents with the most sophisticated trading technology have the lowest standard deviation of consumption growth, , denoted by σ (4 log(ci )) ,
while those with the least sophisticated technology have the highest. In Table 1, the standard deviation of individual consumption growth is 10.8 for the active traders, 12.2 for the
diversified traders, and 13.0 for the nonparticipants. However, when we look at the volatility
of average consumption for a trader-type, denoted by σ (4 log(Ci )) for traders of type i, the
results are reversed. The standard deviation of the growth rate of average consumption for
the active traders is 7.0, for diversified is 3.6, and for the nonparticipants it is 2.6. This
is because averaging removes the impact idiosyncratic income shocks and thereby reveals
that the agents with the more sophisticated trading technology are using this technology
to take on more aggregate risk. Hence, their consumption fluctuations are driven more by
aggregate shocks, while the reverse is true of the nonparticipants whose trading technology
shields them more from aggregate risk.
The first panel of Figure 1 shows a plot of the conditional Sharpe ratio for a fixed
simulation interval. In this plot, the gray bars indicate negative growth rate realizations
while the white bars indicate positive realizations. One can see from the plot that the
23

price of risk is counter-cyclical, just as in the data, though not as much as in the data. In
addition, the second and third panels of Figure 1 show plots of the average equity share
and the average wealth to per-capita wealth ratio for active traders for our fixed simulation
interval. It indicates that the average equity exposure is counter-cyclical, while the wealth
ratio is pro-cyclical. These plots indicate the fundamental dynamics driving asset pricing in
our baseline economy. The active traders absorb the aggregate risk created by investors who
hold low risk assets. They do this by holding large amounts of the equity claims and low
amounts of risk-free debt. At certain points, their average holdings are greater than 100%,
indicating that they are shorting the risk-free security to meet its demand. At the same time,
high realizations of the aggregate growth rate shock lead them to become relatively rich, while
low realizations lead to the reverse. When they are relatively poor, the active traders are
induced to hold large amounts of equity by a high Sharpe ratio. These fluctuations in the
relative wealth of the active traders and the resulting price they demand to bear the amount
of aggregate risk being pushed at them by the market leads to the aggregate dynamics in
the model. If all of our traders were either active traders or passive traders who held the
market, then there would be no dynamics in the stationarized economy. As a result, each
group would simply ”hold the market” in their portfolios and have a constant and identical
consumption share. These outcomes are very similar to results reported in our earlier work;
in particular CCL2011, where we discuss them in greater detail.

5

Belief Heterogeneity

In this section, we consider belief heterogeneity with respect to the aggregate shock zt . A
natural issue with respect to forming beliefs about the aggregate shock is how much to
rely on the full-time series history. This is because it is unclear how strong a stationarity
assumption to impose and statistically it can be difficult to determine whether and when a
structural break in a time series has occurred, especially if is fairly recent. In forecasting
models, it is common practice to allow for the possibility of structural breaks by (i) using a
moving window in the estimation, (ii) explicitly allowing for parameter drift, or (iii) downweighting older observations (See Clements and Hendry (2006)). Procedures such as these
lead to parameter estimates that are more responsive to recent data than to older data and
suggest that this greater responsiveness can have a rational basis. We therefore allow for
some traders who put more weight on recent data in forming their beliefs.
To keep things relatively simple, we assume that the operative data generating mechanism
is always taken to be first-order Markov. Given this, and a belief that a structural break
has occurred, a forecaster needs to use the recent data to form appropriate beliefs about the
24

new transition probability matrix. Two approaches present themselves.
The first approach is to use the recent data to form the MLE estimate of the transition
matrix, and then couple this with a probabilistic view of the likelihood of a transition from
the long-run data generating mechanism to this new data generating mechanism. To keep
things tractable, we will assume that these agents only consider the possibility of a break
a fixed number of periods in the past. Because the possible break will be recent, and the
data will not be very informative about the likelihood of a break, we will assume that they
have a fixed probability as to a break. We will refer to the agents who act in this fashion as
having ”volatile beliefs”. The volatile-belief agents are implicitly allowing for a wide range
of possible new regimes (equal to the set of all possible outcomes since the series break).
But, at the same time they are ignoring parameter uncertainty and simply switching from
the former MLE estimate to the new MLE estimate as their alternative to the long-run
estimate as they accumulate new data. Note that our volatile-belief agents nest our rational
agents, since they can be thought of as volatile-belief agents who put zero weight on the
MLE estimate and weight 1 on the ergodic estimate.
The second approach is to view the data within a Bayesian perspective where one allows
for several (here two) possible new transition matrices and then uses the recent data to
appropriately weight these new outcomes. As in the literature, we will refer to these different
transitions matrices as regimes and assume that switches between them are unobserved. We
will also require that these transition matrices and the agent’s overall beliefs about how we
switch from one regime to another is consistent with long-run facts from the data. As a
result, these agent’s beliefs will nest the ergodic if we assume appropriate i.i.d. probabilities
for the regimes. We will refer to agents who form beliefs in this fashion as ”Bayesian regimeswitchers”. Note that unlike the volatile-belief agents, the Bayesian regime-switchers are not
using the data to directly infer the nature of the operative transition matrix. Instead, they
are using the data to infer which of the possible data transition matrices are operative.
Both the Volatile-belief and Bayesian regime-switchers become more (less) optimistic
about future realizations of the aggregate growth rate zt after seeing a large (small) number
of recent high growth occurrences. This leads them to become more (less) optimistic about
future income, dividend and equity price growth since all of these outcomes are associated
with high zt realizations. Their optimism does not rely on a misunderstanding of the equilibrium relationships implied by the model, nor does it rely on some sort of implicit bubble
in asset prices. Rather, it stems from optimism with respect to the fundamentals that drive
the model. Conditional on a sequence of high aggregate growth shocks, the outcomes are
completely in line with their expectations, moreover they also correctly anticipate that if
instead a sequence of low growth are realized what will result. They simply miss-estimate
25

the likelihood of these different outcomes relative to the ergodic data generating device. As
a result, they are aware of their conditional risks. This distinguishes our approach from that
of Long, Shleifer, Summers, and Waldman (1990) or Barberis, Greenwood, Jin, and Shleifer
(2013), whose traders rely on short-term price extrapolation.
We focus on the impact of belief heterogeneity with respect to our active traders who are
choosing not only how much to save but also their portfolio holdings. We do this because
fluctuations in beliefs about the future realization of zt+1 are likely to affect both these
decisions and therefore the impact of belief heterogeneity is maximized.

5.1
5.1.1

Volatile Aggregate Belief Traders
Definition

Definition 1. A trader with volatile beliefs (VB) believes with probability κ the current
aggregate transition zt → zt+1 is governed by π (zt+1 |z t ) and with probability 1 − κ it is
governed by a new Markov transition matrix about which he has a uninformative prior.
Conditional on the occurrence of a shift in the transition matrix, his best estimate of the new
transition matrix would be the empirically observed transition frequencies since the assumed

t
potential shift date t − j. Let Π ·|·; zt−j
denote these conditional transition frequencies for
t
the history zt−j . Then, the trader’s conditional probability distribution over zt+1 would be
given by


 9
t
π̃ zt+1 |z t = κπ zt+1 |z t + (1 − κ)Π zt+1 |zt ; zt−j
.
The volatility of beliefs is governed by the parameter κ. With κ = 1, these traders rely
solely on the ergodic transition probabilities and have stable beliefs that do not vary over
time. With κ = 0, they are using a rolling window that completely ignores older data. With
κ ∈ (0, 1), traders with VB down weight older data through the use of two tiers: older than
j years and j years or less.
5.1.2

Volatile Belief Experiment

The first experiment involves giving half of our active traders slightly volatile beliefs. We
set the belief parameter to κ = 0.75, which implies that 75% of the probability mass is
placed upon the ergodic transition matrix, while the remaining 25% is placed on the observed
transition frequencies during the past 5 years. The results are reported in the second column
of Table 2 and in Figure 2.
The first and second columns of Table 2 show that the average MPR and the average
risk-free rate change little. However, the volatility of the MPR increases by a factor of 3. The
26

Table 2: Results of Heterogeneous Belief and Low-Patience Cases

Cases

Baseline

Z ∗ -com feature

Volatile Belief

BRS Belief

Low Patience

κ = 0.75

ρ = 0.85

β = 0.925

Fraction of Traders
Z com

10%

5%

5%

5%

Z ∗ com

0%

5%

5%

5%

0.408

0.419

0.417

0.416

2.782

8.574

9.267

2.782

E(Rf )

1.926

2.037

2.040

1.975

σ(Rf )

0.056

0.401

0.472

0.076

E(RzW − Rf )

4.638

5.115

5.039

4.852

E(RzW∗ − Rf )
σ(RzW − Rf )

NA

3.299

3.504

5.150

12.080

13.107

13.037

12.384

σ(RzW∗ − Rf )

NA

9.302

9.822

13.147

E (Wz /W )

2.149

2.396

2.357

2.384

E (Wz∗ /W )

NA

1.880

1.864

1.561

σ (Wz /W )

0.574

0.544

0.545

0.675

σ (Wz∗ /W )

NA

0.476

0.483

0.401

E (ωz )

0.790

0.900

0.878

0.822

E (ωz∗ )

NA

0.663

0.699

0.872

σ (ωz )

0.105

0.257

0.255

0.113

σ (ωz∗ )

NA

0.139

0.148

0.120

Asset Pricing
σ(m)
E(m)
σ (m)
Std( Et (m) )
t

Wealth Returns

Portfolio Choices

corr(ωz , SR)

0.938

0.982

0.978

0.914

corr(ωz∗ , SR)

NA

−0.974

−0.867

0.943

σ (∆ log (Cz ))

6.990

7.152

7.118

7.118

σ (∆ log (Cz∗ ))

NA

6.955

7.004

7.059

σ (∆ log (cz ))

10.781

10.463

10.517

10.648

σ (∆ log (cz∗ ))

NA

11.059

11.197

12.528

0.375

0.284

Consumption

Computation Accuracy
Max allocation error (%)

0.256

0.384

Note: BRS: Bayesian regime-switching beliefs

increased volatility in asset prices widens the gap of the excess returns among our traders.
The average excess return of the standard active traders rises to 5.1%, while that of the VB
traders falls to 3.3%. The lower excess return for the VB traders is due in part to the fact
that their average equity share is much lower than in the benchmark case. At the same time,
this forces the average equity share of the standard active traders to rise to 0.90. Note also
27

Figure 2: Volatile Belief Experiment

Subjective Probability of Expansion
0.8
Zcom
Zcom*
0.7

0.6
0

10

20

30

40

50

60

70

80

90

100

Sharpe Ratio
0.6

Sharpe Ratio

0.5
0.4
0.3
0

10

20

30

40

50

60

70

80

90

100

Equity Share of Portfolio Choices
1.5

Zcom
Zcom*

1
0.5
0

10

20

30

40

50

60

70

80

90

100

Ratio of Group Wealth to Average Wealth
Zcom
Zcom*

2.5
2
1.5
0

10

20

30

40

50

60

70

80

90

100

Note: The shaded areas indicate recessions.

that the average equity share of the VB traders is more stable, with a standard deviation
of 0.14, while that of the standard active traders is higher at 0.26. When we compute the
Sharpe ratio using the ergodic probabilities, we find that the correlation of their equity share
with the Sharpe ratio is the mirror image of the normal active traders: -0.974 vs. +0.982.
Thus, the VB traders are systematically mistiming the market and this also depresses the
excess return on their portfolio. At the same time, the standard deviation of their excess
return is also substantially lower than that of the standard active traders: 9.3% vs. 13.1%.
However, the fact that their equity share is more stable means that the extent to which they
move their equity share the wrong direction is not that large.
The differences in returns leads to differences in wealth accumulation and consumption
for our two types of active traders. The average ratio of the per capita wealth of our standard
active traders to overall per capita wealth is 2.4 and that of the VB traders is 1.9, while the
28

standard deviation of this ratio is 0.54 and 0.48, respectively. Interestingly, the standard
deviations of consumption growth are both very similar, which indicates a similar degree
of overall consumption smoothing. In addition, the volatility of the ratio of group average
consumption to per capita consumption are also very similar, which indicates that their
exposure to aggregate risk is very close.
To better understand the dynamics in this first experiment, we display some key series
from the same fixed interval in the simulation panel in Figure 2. The first panel shows the
probability that the two types of active traders assign to the event that the next period
aggregate growth rate shock is high. Because we assume that the growth rate shocks are
i.i.d., this probability is constant for our normal active traders but pro-cyclical for our VB
active traders. However, the fluctuations are fairly modest, staying between 0.80 and 0.60
and often near the 0.72 ergodic probability. The second panel shows the conditional Sharpe
ratio, which indicates that the VB traders’ probability and the Sharpe ratio are strongly
negatively correlated. This negative correlation means that the pricing of risk and the
likelihood of a good outcome are moving in opposite directions for these traders, which
simultaneously explains the low and stable equity shares for them relative to the normal
active traders in the third panel. It is interesting to note that the VB traders appear to
exhibit momentum trading: Their equity share rises after a series of good shocks/returns
and falls when the reverse is true. The final panel shows how the per capita wealth levels
for these two types of traders (relative to the average per capita wealth) evolve. It is easy
to see that the VB traders have lower and smoother wealth levels.
To get more perspective on individual level behavior, we also examined how the trader’s
policy rules vary with wealth. In Figure 3 we plot the equity share as a function of wealth
for both the rational and the volatile-belief types. We do this for two history states, one
where beliefs are very close and one where they are very far apart. First, both types of
traders have the highest equity share at wealth levels very near the lower bound, and they
decline with wealth. This is because, with zero financial wealth, aggregate risk exposure
is coming solely through the individual’s non-tradeable income, and the exposure level is
equivalent to holding the market. To put this another way, exposure to aggregate risk
is highly rewarded. At high wealth levels, the trader’s aggregate risk level is essentially
determined by his financial portfolio composition which is skewed towards equities, while at
low wealth levels the exposure to aggregate risk coming through income is more important.
Thus, at low income level the individual actually holds more equities in his financial portfolio
to offset the lower aggregate risk exposure coming through his non-tradeable income. The
gap in equity exposure is largest in the state in which there is the largest belief disagreement.
In this state, the low probability that the volatile-belief type attaches to a high aggregate
29

shock substantially dampens his equity investment, especially at low wealth levels.
Figure 3: Portfolio Equity Share

Portfolio Equity Share Share (%)

Portfolio Equity Share at the state with largest deviation in beliefs
800
Zcom* low idio−shock
Zcom* high idio−shock
Zcom low idio−shock
Zcom high idio−shock

700
600
500
400
300
200
100
0
0

5

10

15

20

25

Wealth

Portfolio Equity Share Share (%)

Portfolio Equity Share at the state with smallest deviation in beliefs
500
Zcom* low idio−shock
Zcom* high idio−shock
Zcom low idio−shock
Zcom high idio−shock

400

300

200

100

0
0

5

10

15

20

25

Wealth

In Figure 4 we plotted the ergodic wealth distribution by type. For the active traders, the
wealth distributions look roughly log-normal and are similar except in the right tail. Only
the rational active traders become extremely wealthy, where that is taken to be a wealth level
more than 30 times aggregate income. The wealth distributions for the two types of passive
traders look different from each other and from the active traders. Both traders have large
masses of individuals near the net wealth bound of 0, and this is particularly pronounced
for non-participants. Also, the upper limit on their wealth is much lower than for the active
traders; again this more pronounced for non-participants.

5.2
5.2.1

Bayesian Regime-Switching Beliefs
Definition

Here we consider an environment where some households assume that the aggregate growth
shock {zt } follows a simple regime-switching process. Just as in the baseline calibration,
the observed growth rate takes on two values, zt ∈ {zh , zl }, where zh > zl . The households
believe that with evolution of the growth rate is governed by a two state process in which
30

Figure 4: Wealth Distribution by Type

Wealth Distribution for Z−complete Traders

Frequency

0.1
Zcom
Zcom*

0.08
0.06
0.04
0.02
0
0

5

10

15

20

25

30

35

40

30

35

40

30

35

40

Wealth
Wealth Distribution for Diversified Traders

Frequency

0.2
0.15
0.1
0.05
0
0

5

10

15

20

25

Wealth
Wealth Distribution for Non−Participants

Frequency

0.2
0.15
0.1
0.05
0
0

5

10

15

20

25

Wealth

the probability of the high growth rate is πh in the high regime and πl in the low regime,
where πh > πl . The regime state, st ∈ {h, l} , follows a simple Markov transition process,
with the probability that st+1 = st is ρ, and hence the probability of a switch is 1 − ρ.
We assume that the regime cannot be observed, only the realized sequence of growth rates
z t . These households use the observed history to infer the probability of the regime being
high or low. Using Bayes’ rule, these probabilities have a simple recursive relationship. We
therefore refer to such households as having Bayesian regime-switching beliefs (BRS). This
recursive relationship leads households to place less weight on distant observations. The rate
at which this weight declines with time is slower the closer ρ is to 1 and steeper the close ρ
is to 0.5.
Here we construct the recursive relationship that governs a BRS household’s belief that
the regime is high. Denote the probability of a high growth state conditional on z t by
ωt = Pr(st = h|z t ). We want to derive a simple recursive relationship to allow us to update
ωt+1 given ωt and zt+1 .

31

Starting from Bayes rule,
p st+1 |z t+1



p(zt+1 |st+1 )p(st+1 |z t )
= p(st+1 |zt+1 , z t ) =
p(zt+1 |z t )
P
p(zt+1 |st+1 ) st p(st+1 , st |z t )
P
=
t
st p(zt+1 , st |z )
P
p(yt+1 |st+1 ) st p(st+1 |st )p(st |z t )
P
=
.
t
t
st p(zt+1 |st , z )p(st |z )

Rewriting yields
πh [ρωt + (1 − ρ)(1 − ωt )]
if zt+1 = zh , and
πh [ρωt + (1 − ρ)(1 − ωt )] + πl [(1 − ρ)ωt + ρ(1 − ωt )]
(1 − πh ) [ρωt + (1 − ρ)(1 − ωt )]
=
if zt+1 = zl .
(1 − πh ) [ρωt + (1 − ρ)(1 − ωt )] + (1 − πl ) [(1 − ρ)ωt + ρ(1 − ωt )]

ωt+1 =
ωt+1

Using this simple recursion, we can compute the implied probability that the regime is h,
and this probability summarizes the relevant history for forecasting st+1 in a single statistic.
This statistic will increase in the frequency of high draws. By manipulating the probability
ρ, we are in essence playing around with the volatility of beliefs. For ρ = 1 or ρ = 0.5,
we have completely stationary beliefs, while for 0.5 < ρ < 1, there is a dependence on past
history, which makes beliefs vary across the realization of past aggregate shocks.
Formally, because the regime-switching model has a great deal of structure, one should be
able to test it and reject it if the data were generated by an i.i.d. process for zt . To overcome
this objection, we find it useful to think of the data as only recently being determined by the
regime-switching model. In this case, our version of regime-switching is something of a hybrid
between the volatile-belief model and a true regime-switching model. This interpretation is
consistent with our truncation of the data used in the recursion.
5.2.2

Bayesian Regime-Switching Belief Experiment

This experiment involves giving half of our active traders Bayesian regime-switching belief.
To maintain tractability, we assume that the households use only the most recent j observations in forming their beliefs.10 We set the belief parameters as ρ = 0.85, πh = 0.9, and
πl = 0.552. Given this setting, we find that the beliefs of BRS traders are fairly close to
those of VB traders. Therefore, their behavior is also fairly close, and hence the results of
this experiment are quite similar. The asset pricing results are almost identical. (See Table
10

Because we only use a finite history and assume the ergodic distribution as a starting point for the
recursion, our BRS trader makes forecast errors relative to a Bayesian updater who used the whole history.
These errors averaged 2 percentage points in our simulation panel.

32

2) Similarly, traders with BRS beliefs earn a lower return on their wealth and end up poorer
than our standard active traders with correct beliefs. However, the return of BRS traders is
higher than for either type of passive trader and they end up much richer as a result. The
consumption and portfolio behaviors of BRS traders are very similar to those of VB traders.
5.2.3

When the ”Crazy”-Types Are Right

The BRS traders have a single model of the stochastic generating process that is consistent
with long-run moments from the data. (It is only inconsistent with short-run correlations.)
The VB traders have in effect multiple models, none of which need be consistent with the
long-run moments from the data. It therefore seems natural to use the BRS data generating
device to examine its implications. This turns out to be fairly easy. We simply change the
stochastic process generating the aggregate shocks, {zt }, redraw the aggregate shocks for
our panel, and recompute the equilibrium. Because our finite aggregate history accurately
summarize the internal dynamics, the updating rule for the multiplier moment ratio, H,
is very similar to the BRS or VB experiment, and the major change is to the transition
probabilities for our finite aggregate histories. Because the aggregate shocks now exhibit
positive persistence, the main impact of this change in the transition probabilities is to
increase the likelihood of more extreme history states with a large number of either high or
low shocks.
We do two experiments with the BRS aggregate stochastic process. In the first, half of
active traders and all passive traders are standard (i.e., they assume that zt is generated
by our i.i.d. version of Mehra and Prescott (1985) while half of the active traders are VB
traders. In the second experiment, we change half of our active trader to have BRS traders,
while keeping the rest standard. The results are reported in Table 3. As before, the two
experiments yield similar outcomes despite the change in the aggregate shock process. (Note
that we are computing the conditional Sharpe ratio using the ergodic probabilities.)
The greater frequency of sustained high or low growth shock realizations leads to more
frequent large swings in the beliefs of our VB and BRS traders. This (i) modestly reduces
the negative correlation of their group average equity investment share with the conditional
Sharpe ratio and (ii) slightly reduces the volatility of their average equity share but leaves
their portfolio behavior largely unchanged. The impact on asset prices is fairly modest,
though there is a slight increase in volatility of the pricing of risk. With respect to realized
returns, those of the standard active traders fall slightly, whereas those of the VB and BRS
traders rise very slightly. This leads the average ratio of standard active trader wealth to
per capita wealth to fall slightly, while that of VB and BRS traders rises slightly. This
in turn leads to a slight increase in the volatility of the standard active trader’s volatility
33

of consumption growth and a decrease in the nonstandard trader’s. At the same time,
the impact the lower (higher) wealth levels decreases (increases) the impact of aggregate
fluctuations on consumption.

6

Less Patient Traders

This quantitative experiment involves lowering the discount rate for half of our active traders
from 0.95 to 0.925, thereby making them less patient (LP) than the normal active traders.
Surprisingly, this change has little impact on the outcomes at either the aggregate or the
individual level. The last column of Table 2 shows the results.
At the aggregate level, asset prices were virtually unchanged relative to the baseline
model. At the individual level, the two types of active traders had very similar average
equity shares, similar volatility in their equity shares, and a similar correlation of their
equity share and the Sharpe ratio. The LP traders had a lower and less volatile per capita
wealth, and their consumption growth rate was more volatile. However, the volatility of the
average growth rate of consumption for the two groups was very similar, reflecting the fact
that they had similar exposure to aggregate risk. The similarity in the outcomes of the two
types of traders and the level differences in wealth can be seen clearly in the second and
third panels of Figure 5.
To understand what is occurring here, note the following. The fact that both type of
traders have similar exposure to idiosyncratic risk and the same borrowing constraint leads to
similar demands for precautionary saving. However, differences in patience imply differences
in the extent to which the low risk-free rate leads to a downward drift in the per capita
wealth. As a result, the point at which the two forces offset is lower for the LP traders and
hence their average wealth level is also lower.

7

Risk Aversion versus Intertemporal Elasticity Substitution

In this section, we indicate how our methodology can be extended to allow for recursive
preferences that distinguish between the degree of risk aversion (RA) and the intertemporal
elasticity of substitution (IES). We then use this extension to examine the implications of
these variations for our economy.

34

Figure 5: Less Patient Traders

Sharpe Ratio
Sharpe Ratio

0.46
0.44
0.42
0.4
0.38
0

10

20

30

40

50

60

70

80

90

100

Equity Share of Portfolio Choices
1.2

Zcom
Zcom*

1.1
1
0.9
0.8
0.7
0

10

20

30

40

50

60

70

80

90

100

Ratio of Group Wealth to Average Wealth
3

Zcom
Zcom*

2.5
2
1.5
1
0

10

20

30

40

50

60

70

80

90

100

Note: The shaded areas indicate recessions.

7.1

Recursive Preferences

To extend our methodology to allow for households with different recursive preferences,
assume that a type i household has recursive preferences along the lines of Epstein and Zin
(1989) and these preferences are given by

 1
Vt = (1 − β)c1−ρ
+ β (Rt Vt+1 )1−ρ 1−ρ ,
t
where Rt denotes the operator

Rt Vt+1 =




X

Vt+1 (z t+1 , η t+1 )1−α π̃ z t+1 , η t+1 |z t , η t



 1
1−α


.



(z t ,η t )(z t+1 ,η t+1 )

With these preferences, ρ controls the substitutability between consumption today and future
utility as measured by Vt+1 , and α controls the willingness to have future utility vary across
states of the world tomorrow (i.e., risk). To economize on notation, we do not index ρ, α,
and β by i; however, it should be understood that they can differ with the trader’s type.
We can replace the objective in Trader i’s problem (6) with this objective. We can then
35

Table 3: Results of Heterogeneous Belief under Bayesian Shock Process

Cases

Baseline

Z ∗ -com feature

Volatile Belief

BRS Belief

κ = 0.75

ρ = 0.85

Fraction of Traders
Z com

10%

5%

5%

Z∗

com

0%

5%

5%

σ(m)
E(m)
σ (m)
Std( Et (m) )
t

0.408

0.421

0.424

Asset Pricing

3.617

10.052

10.755

E(Rf )

1.932

2.084

2.093

σ(Rf )

0.107

0.486

0.560

E(RzW − Rf )

4.608

E(RzW∗ − Rf )
σ(RzW − Rf )

NA

3.724

3.805

12.112

13.717

13.677

Wealth Returns

σ(RzW∗ − Rf )
E (Wz /W )
E (Wz∗ /W )

4.874

4.791

NA

9.267

9.423

2.176

2.095

2.026

NA

2.171

2.210

σ (Wz /W )

0.670

0.549

0.556

σ (Wz∗ /W )

NA

0.622

0.630

Portfolio Choices
E (ωz )
E (ωz∗ )
σ (ωz )
σ (ωz∗ )

0.799

0.927

0.924

NA

0.701

0.718

0.155

0.354

0.342

NA

0.109

0.139

corr(ωz , SR)

0.940

0.969

0.970

corr(ωz∗ , SR)

NA

−0.886

−0.736

σ (∆ log (Cz ))

6.901

Consumption

σ (∆ log (Cz∗ ))

7.085

7.114

NA

6.848

6.849

σ (∆ log (cz ))

10.782

11.009

11.178

σ (∆ log (cz∗ ))

NA

10.510

10.467

Computation Accuracy
Max allocation error (%)

0.445

0.309

0.319

determine the first-order condition by recursive constructing of the derivative of Vt with
respect to c(z t , η t ) as

∂Vt
t+1 t+1 t t
= Vtρ (1 − β)Mt+1 c−ρ
, η |z , η ,
t+1 π̃ z
t+1
t+1
∂ct+1 (z , η )

36

where
Mt+1 (z

t+1

,η

t+1


)=β

Vt+1 (z t+1 , η t+1 )
Rt Vt+1

ρ−α
.

By backward induction, we get
∂V0
= V0ρ Mt+1 (z t+1 , η t+1 )(1 − β)ct+1 (z t+1 , η t+1 )−ρ π(z t+1 , η t+1 ),
∂ct+1 (z t+1 , η t+1 )
where
Y

Mt+1 (z t+1 , η t+1 ) =

Mτ (z τ , η τ ).

(z τ ,η τ )(z t+1 ,η t+1 )

With these results, we can write the first-order condition for our trader’s consumption
ct (z t , η t ) as
V0ρ Mt (z t , η t )(1 − β)ct (z t , η t )−ρ π̃(z t , η t )
= ζ(z t , η t )P (z t )π(z t , η t ).

(14)

The recursive rule for the multiplier ζ is still (7), and the first order condition with respect
to σ(z t , η t ) is still given by (9) or (10).
The mapping between the type i trader and his reference trader is easy to compute and
is given by solving the following equation for ζ̄(z t , η t ) :
ζ(z t , η t )P (z t )π(z t , η t )
ct (z , η ) =
V0ρ Mt (z t , η t )(1 − β)π̃(z t , η t )
t

t



−1/ρ

ζ̄(z t , η t )P (z t )
=
βt


−1/ᾱ
.

(15)

Note that this mapping trick carries through even with different beliefs across traders.

7.2

Quantitative Experiments

We can now use our model as a laboratory to examine the implication of different RA
and IES. We consider three quantitative experiments. The first experiment lowers the risk
aversion (RA) for half of our active traders from 5 to 2.5. The second experiment increases
the intertemporal elasticity of substitution (IES) from 0.2 to 0.4. The third experiment
combines both of these shifts by changing the exponential coefficient within standard CRRA
preferences from 5 to 2.5. The results are reported in Table 4.
The findings for these experiments are shown below:
1. Changes in the IES have a very modest impact. Asset prices and portfolio behavior
are largely unchanged.
37

Table 4: Risk Aversion versus Intertemporal Elasticity of Substitution

Cases

Baseline

Lower RA

Higher IES

Low RA and High IES

Fraction of Traders
Z complete: γ = 5, IES = 1/5

10%

5%

5%

5%

Z ∗ complete: γ = 2.5, IES = 1/5

0%

5%

0%

0%

Z ∗ complete: γ = 5, IES = 1/2.5

0%

0%

5%

0%

Z∗

0%

0%

0%

5%

complete: γ = 2.5, IES = 1/2.5

Asset Pricing
σ(m)
E(m)
σ (m)
Std( Et (m) )
t

0.408

0.312

0.403

0.300

2.782

3.712

2.670

3.406

E(Rf )

1.926

2.397

1.993

2.469

σ(Rf )

0.056

0.120

0.075

0.146

E(RzW − Rf )

4.638

2.723

E(RzW∗ − Rf )
σ(RzW − Rf )
σ(RzW∗ − Rf )

NA
12.080

E (Wz /W )
E (Wz∗ /W )

Wealth Returns
4.596

2.464

6.521

4.863

6.457

9.414

12.149

8.865

NA

22.547

12.858

23.251

2.149

1.470

2.122

1.421

NA

1.623

1.929

1.577

σ (Wz /W )

0.574

0.194

0.563

0.174

σ (Wz∗ /W )

NA

0.952

0.499

0.884

0.790

0.615

0.809

0.598

Portfolio Choices
E (ωz )
E (ωz∗ )
σ (ωz )
σ (ω

NA

1.469

0.855

1.559

0.105

0.137

0.111

0.131

)

NA

0.374

0.126

0.423

corr(ωz , SR)

0.938

0.986

0.926

0.986

corr(ωz∗ , SR)

NA

0.906

0.921

0.893

σ (∆ log (Cz ))

6.990

5.458

z∗

Consumption
6.900

5.274

NA

9.599

7.247

10.156

σ (∆ log (cz ))

10.781

11.549

10.813

11.621

σ (∆ log (cz∗ ))

NA

17.775

11.053

17.466

σ (∆ log (Cz∗ ))

Computation Accuracy
Max allocation error (%)

0.375

0.777

0.359

0.703

2. Changes in RA have a big impact. The pricing of risk falls sharply, though its variability
rises. This is driven by the increased willingness of our low RA traders to absorb
aggregate risk, which in turn leads to their earning higher excess returns. However, the
reduction in their precautionary motive to save leads them to accumulate less wealth.
Combined with their more aggressive portfolio behavior,this leads to an increase in both

38

their individual consumption volatility and their group average consumption volatility
as measured by the standard deviation of the growth of consumption.
3. Changing the CRRA coefficient generates results consistent with the individual component changes. Because changing the IES does very little, the results look very similar
to the RA results.

8

Conclusion

We develop aggregation results for an economy with heterogeneous preferences and beliefs,
as well as different portfolio trading restrictions. These aggregation results allows us to
readily compute the equilibria of our economy when there are many agents and many types,
and when these agents face both idiosyncratic and aggregate income risk. To develop this
aggregation result, we exploit an analytic trick in which we construct a ”twin planning
economy” in which appropriately chosen planning weights result in the twin’s consumption
being identical to that in the original economy given the same history state and state price
for consumption. Using this construction we are able to derive the appropriate change of
variables to recover the aggregation results that we previously derived for economies with
homogenous preferences and identical beliefs. This analytic trick is fairly general. As one
illustration of this, we consider recursive preferences along the lines of Epstein and Zin (1989)
to evaluate the impact of different attitudes toward risk and willingness to intertemporally
substitute.
One general finding in all our experiments is that traders who have incorrect beliefs, are
more myopic, or earn lower returns because of higher risk aversion do not become economically irrelevant over time. The combination of their net wealth bound and their exposure
to idiosyncratic risk leads to a strong precautionary motive to save, and this makes them
economically important in the long run. The flip side of this finding is that the low average
value of the stochastic discount factor exerts a downward drift on traders’ wealth, which
prevents traders who have rational beliefs, are more patient, or earn higher returns because
of lower risk aversion from accumulating wealth without bound. Instead, it is primarily the
level of their average excess returns and the strength of their precautionary saving motive
that determine how rich these traders are on average. Higher average returns and a stronger
precautionary motive do raise average wealth but only to a limited degree.
A second general finding is that anything that forces a subset of our active traders to
absorb more aggregate risk while not lowering their risk aversion leads to an increase in the
average price of risk. Additionally, greater cyclical fluctuations in their wealth relative to the

39

extent of aggregate risk they are absorbing leads to greater cyclical volatility in the pricing
of risk.

40

References
Abel, A. B. (1999): “Risk Premia and Term Premia in General Equilibrium,” Journal of
Monetary Economics, 43, 3–33.
Aiyagari, S. R., A. Marcet, T. J. Sargent, and J. Seppala (2002): “Optimal
Taxation without State-Contingent Debt,” Journal of Political Economy, 110(6), 1220–
1254.
Bansal, R., and A. Yaron (2004): “Risks for the Long Run: A Potential Resolution of
Asset Prizing Puzzles,” The Journal of Finance, 59, 1481–1509.
Barberis, N., R. Greenwood, L. Jin, and A. Shleifer (2013): “X-CAPM: An Extrapolative Capital Asset Pricing Model,” .
Basak, S., and D. Cuoco (1998): “An Equilibrium Model with Restricted Stock Market
Participation,” Review of Financial Studies, 11(2), 309–341.
Beker, P. F., and E. Espino (2011): “The dynamics of efficient asset trading with
heterogeneous beliefs,” Journal of Economic Theory, 146(1), 189–229.
Beker, P. F., and E. Espino (2013): “Too Good to Be True: Asset Pricing Implications
of Pessimism,” The Warwick Economics Research Paper Series (TWERPS).
Bhamra, H. S., and R. Uppal (2006): “The role of risk aversion and intertemporal
substitution in dynamic consumption-portfolio choice with recursive utility,” Journal of
Economic Dynamics and Control, 30(6), 967–991.
Bhamra, H. S., and R. Uppal (2013): “Asset Prices with Heterogeneity in Preferences
and Beliefs,” CEPR Discussion Papers.
Blume, L., and D. Easley (2006): “If You’re so Smart, why Aren’t You Rich? Belief
Selection in Complete and Incomplete Markets,” Econometrica, 74(4), 929–966.
Borovicka, J. (2013): “Survival and long-run dynamics with heterogeneous beliefs under
recursive preferences,” Working Paper, New York University.
Brumm, J., and F. Kubler (2013): “Applying Negishis method to stochastic models with
overlapping generations,” Working Papers, University of Zurich.
Chien, Y., H. Cole, and H. Lustig (2011): “A Multiplier Approach to Understanding
the Macro Implications of Household Finance,” Review of Economic Studies, 78(1), 199–
234.
41

Chien, Y., H. Cole, and H. Lustig (2012): “Is the Volatility of the Market Price of
Risk Due to Intermittent Portfolio Rebalancing?,” American Economic Review, 102(6),
2859–96.
Chien, Y., and H. Lustig (2010): “The Market Price of Aggregate Risk and the Wealth
Distribution,” Review of Financial Studies, 23(4), 1596–1650.
Clements, M. P., and D. F. Hendry (2006): Forecasting with Breakschap. 12, pp.
605–657, Handbook of Economic Forecasting. Elsevier, North Holland.
Cole, H., and F. Kubler (2012): “Recursive Contracts, Lotteries and Weakly Concave
Pareto Sets,” Review of Economic Dynamics, 15(4), 479–500.
Cuoco, D., and H. He (2001): “Dynamic Aggregation and Computation of Equilibria in
Finite-Dimensional Economies with Incomplete Financial Markets,” Annals of Economics
and Finance, 2(2), 265–296.
Cvitanic, J., E. Jouini, S. Malamud, and C. Napp (2011): “Financial Markets Equilibrium with Heterogeneous Agents,” Review of Finance, 16(1), 285–321.
Epstein, L., and S. Zin (1989): “Substitution Risk Aversion and the Temporal Behavior of
Consumption and Asset Returns: A Theoretical Framework,” Econometrica, 57, 937–968.
Guiso, L., and P. Sodini (2012): “Household Finance: An Emerging Field,” CEPR
Discussion Papers.
Kehoe, P. J., and F. Perri (2002): “International Business Cycles with Endogenous
Incomplete Markets,” Econometrica, 70(3), 907–928.
Krusell, P., and A. Smith (1998): “Income and Wealth Heterogeneity in the Macroeconomy,” Journal of Political Economy, 6, 867–896.
Lettau, M., and S. Ludvigson (2010): “Measuring and Modelling Variation in the RiskReturn Trade-off,” in Handbook of Financial Econometrics, ed. by Y. Ait-Sahalia, and
L. P. Hansen. Elsevier Science B.V., North Holland, Amsterdam.
Long, J. B. D., A. Shleifer, L. H. Summers, and R. J. Waldman (1990): “Noise
Trader Risk in Financial Markets,” Journal of Political Economy, 98, 703–738.
Marcet, A., and R. Marimon (1992): “Communication, commitment, and growth,”
Journal of Economic Theory, 58(2), 219–249.

42

(1999): “Recursive Contracts,” working paper Universitat Pompeu Fabra.
Mehra, R., and E. Prescott (1985): “The Equity Premium: A Puzzle.,” Journal of
Monetary Economics, 15(2), 145–161.
Messner, M., N. Pavoni, and C. Sleet (2012): “Recursive Methods for Incentive Problems,” Review of Economic Dynamics, 15(4), 501–525.
Ross, S., M. Westerfield, J. Wang, and L. Kogan (2011): “Market Selection,”
Working Papers, Soical Science Research Network.
Sandroni, A. (2000): “Do Markets Favor Agents Able to Make Accurate Predicitions?,”
Econometrica, 68(6), 1303–1342.
Storesletten, K., C. Telmer, and A. Yaron (2007): “Asset Pricing with Idiosyncratic
Risk and Overlapping Generations,” Review of Economic Dynamics, 10(4), 519–548.
Tsyrennikov, V., T. Sargent, and T. Cogley (2013): “Wealth Dynamics in a Bond
Economy with Heterogeneous Beliefs,” Economic Journal, forthcoming.

43

A

Appendix

A.1

Stationarizing the Economy

There are two issues with respect to stationarizing our economy. First, aggregate output
is subject to growth rate shocks and hence is not stationary over time. This implies that
the individual’s consumption and wealth are also nonstationary, as are equity prices. To
deal with this first issue, we express real quantities in terms of aggregate output. Second,
the presence of net-wealth constraints implies that the individual’s recursive multipliers are
−1/α
nonstationary. For this reason, normalize ht = 1 each period. This implies that ζt
is the
individual’s consumption share given this normalization.
For any agent with CRRA preferences, we can readily express his normalized payoff
(given Yt = 1) in terms of his consumption share. This allows us to construct a stationary
analog to our economy. Assume that
ci (z t , η t )1−αi
,
1 − αi

ui (ci (z t , η t )) =

and let ĉi (z t , η t ) = ci (z t , η t )/C(z t ) denote the individual’s consumption share. Then
∞
X

(βi )t

X

ui (ci (z t , η t ))π̃ i (z t , η t ) = βi

(z t ,η t )

t=1

+

X

ui (z1 ĉi (z 1 , η 1 )π̃ i (z 1 , η 1 )

(z 1 ,η 1 )
∞
X

(βi )t

ui (ci (z t , η t ))π̃ i (z t , η t ),

(z t ,η t )

t=2

= βi

X

X

ui (z1 ĉi (z 1 , η 1 )π̃ i (z 1 , η 1 )

(z 1 ,η 1 )

+

+

X

(βi )2 C(z 1 )1−αi ui (z2 ĉi (z 2 , η 2 )π̃ i (z 2 , η 2 )

(z 2 ,η 2 )
∞
X

(βi )t

t=3

X

ui (ci (z t , η t ))π̃ i (z t , η t ).

(z t ,η t )

Continuing in this fashion, we get that
∞
X
t=1

t

(βi )

X
(z t ,η t )

i

i

t

t

i

t

t

u (c (z , η ))π̃ (z , η ) =

∞ X
X


βi z t−1 ui (zt ĉi (z t , η t ))π̃ i (z t , η t ),

t=1 (z t ,η t )

where

βi z t−1 = (βi )t C(z t−1 )1−αi ,

44

and take C(z 0 ) = 1. Note that this normalization does depend upon the CRRA coefficient of
the individual’s preferences, but is independent of his probabilities or his preference shock.
We can exploit this change in variables to express the individual’s f.o.c. (8) as
(βi )t u0 (zt ĉ(z t , η t ))π̃ i (z t , η t ) = ζ̂ i (z t , η t )P (z t )π(z t , η t ),
where ζ̂ i (z t , η t ) = ζ i (z t , η t / [C(z t−1 )1−αi ] . The transformed version of our law of motion for
the recursive multiplier, (7), is

ζ̂ i (z t , η t ) = ζ̂ i (z t−1 , η t−1 )/ (zt−1 )1−αi + ν̂ i z t , η t − ϕ̂i (z t , η t ),
where ν̂ i (z t , η t ) = ν i (z t , η t ) / [C(z t−1 )1−αi ] and ϕ̂i (z t , η t ) = ϕi (z t , η t )/ [C(z t−1 )1−αi ] . The
transformed version of (10) is simply
X


ν̂ z t+1 , η t+1 R(z t+1 )π(z t+1 , η t+1 )P (z t+1 ) = 0.

η t+1 η t

The individual’s net saving function can also be made stationary and expressed in terms of
the consumption share:
S i (z t , η t ) X
=
Sbi (z t , η t ) =
Y (z t )
τ ≥t

"
X



Pe(z τ , η τ ) γητ − ĉi (z τ , η τ )

(z τ ,η τ )(z t ,η t )

τ
Y

#
zj .

j=t+1

And, finally, the the analog of the mapping rule (11) is given by
i

t

t

ζ̄ (z , η ) :



ζ̄ i (z t , η t )P (z t )
β t C(z t−1 )1−α

−1/α
=u

45

0−1



ζ i (z t , η t )π(z t , η t )P (z t )
(βi )t C(z t−1 )1−αi π̃ i (z t , η t )


.

(16)

