NBER WORKING PAPER SERIES

A MECHANISM DESIGN APPROACH TO IDENTIFICATION AND ESTIMATION
Bradley Larsen
Anthony Lee Zhang
Working Paper 24837
http://www.nber.org/papers/w24837

NATIONAL BUREAU OF ECONOMIC RESEARCH
1050 Massachusetts Avenue
Cambridge, MA 02138
July 2018

We thank Susan Athey, Lanier Benkard, Tim Bresnahan, Gabriel Carroll, Evgeni Drynkin, Matt
Gentzkow, Han Hong, Jakub Kastl, Andrey Ordin, Mike Ostrovsky, Karl Schurter, Paulo
Somaini, Caio Waisman, and Ali Yurukoglu, as well as and conference participants at Duke
University, the Federal Trade Commission, Hitotsubashi University, Nagoya University,
Northwestern University, Princeton University, University of Minnesota, University of Texas,
University of Tokyo, University of Toronto, Stanford University, the 2016 California
Econometrics Conference, the 2016 Empirics and Methods in Economics Conference, and the
2018 International Industrial Organization Conference for helpful comments. The views
expressed herein are those of the authors and do not necessarily reflect the views of the National
Bureau of Economic Research.
NBER working papers are circulated for discussion and comment purposes. They have not been
peer-reviewed or been subject to the review by the NBER Board of Directors that accompanies
official NBER publications.
Â© 2018 by Bradley Larsen and Anthony Lee Zhang. All rights reserved. Short sections of text,
not to exceed two paragraphs, may be quoted without explicit permission provided that full
credit, including Â© notice, is given to the source.

A Mechanism Design Approach to Identification and Estimation
Bradley Larsen and Anthony Lee Zhang
NBER Working Paper No. 24837
July 2018
JEL No. C1,C7,D4,D8,L0
ABSTRACT
This paper presents a two-step identification argument for a large class of quasilinear utility
trading games, imputing agents' values using revealed preference based on their choices from a
convex menu of expected outcomes available in equilibrium. This generalizes many existing twostep approaches in the auctions literature and applies to many cases for which there are no
existing tools and where the econometrician may not know the precise rules of the game, such as
incomplete-information bargaining settings. We also derive a methodology for settings in which
agents' actions are not perfectly observed, bounding menus and agents' utilities based on features
of the data that shift agents' imperfectly observed actions. We propose nonparametric value
estimation procedures based on our identification results for general trading games. Our
procedures can be combined with previously existing tools for handling unobserved heterogeneity
and non-independent types. We apply our results to analyze efficiency and surplus division in the
complex game played at wholesale used-car auctions, that of a secret reserve price auction
followed by sequential bargaining between the seller and high bidder.

Bradley Larsen
Department of Economics
Stanford University
579 Serra Mall
Stanford, CA 94305
and NBER
bjlarsen@stanford.edu
Anthony Lee Zhang
Graduate School of Business
Stanford University
655 Knight Way
Stanford, CA 94305
anthonyz@stanford.edu

A MECHANISM DESIGN APPROACH TO IDENTIFICATION AND ESTIMATION

1

1. Introduction
A frequent goal of the growing empirical literature studying mechanism and market design
is to compare outcomes of a mechanism that is used in practice to outcomes under a theoretical counterfactual benchmark, such as some benchmark notion of efficiency, optimality,
or equity. In order to make such counterfactual comparisons, the econometrican must first
estimate primitives (principally, distributions of playersâ€™ valuations) under the mechanism
used in practice. Given advances in the methodological literature over the past twenty years,
such an exercise is straightforward for certain types of real-world mechanisms, such as first
price auctions. A number of games observed in the real world, however, are quite complex
and do not have clear-cut equilibrium characterizactions from which the researcher can infer
valuations with off-the-shelf tools. Examples of such complex incomplete-information trading games include alternating-offer bargaining games, simultaneous-move bargaining games,
non-standard auctions (such as median-price or average-price auctions), auctions preceded
by a knockout auction (as in cases of collusion), and auctions followed by bargaining (or
the reverse). In such settings, analytically solving for equilibria is difficult, and general
proposals for identification and estimation have been scarce.
The theoretical mechanism design literature tackles analysis of such games by abstracting
away from the particular rules of the game or extensive form of the game and instead
focusing on the direct mechanism corresponding to an equilibrium of the original game
(following the celebrated Revelation Principle, Myerson 1979). In this paper, we adopt a
similar approach for empirical analysis, abstracting away from the rules or extensive form
of the game and instead focusing on revealed preference arguments to develop a unified
approach to identification and estimation of playersâ€™ valuations in such trading games.
We focus on a class of single-unit, transferable utility trading games in which players
have independent private values and their utilities are linear in these values. This nests a
number of games, such as various kinds of auctions and bargaining games. In such a setting,
a player with valuation v who plays action a (such an action could be a bid in an auction
or an offer in bargaining) receives an expected payoff of vP(a) âˆ’ T (a), where P(a) is the
probability of winning the good and T (a) is the transfer paid by the player in expectation
when choosing action a. Our identification argument is simple: An agentâ€™s action can be
considered to be a choice from a convex menu of possible (P, T ) pairs, and subgradients of
this menu provide bounds on the agents value. When the action space is continuous, the
derivative of this menu, evaluated at the action chosen by the agent, corresponds precisely
to the agentâ€™s value. The data requirements for identifying an agentâ€™s value are thus that
the econometrician observe the final allocation, the final transfer, and the agentâ€™s action
from many independent instances of the same underlying game; the objects P(Â·) and T (Â·)

2

LARSEN AND ZHANG

are then essentially observed in the data, and subgradients of the menu identify agentsâ€™
values.
This is a simple revealed preference argument, and it is by no means new to the theoretical
mechanism design literature. The novelty of our paper is to exploit this argument to obtain
a general identificationâ€”and accompanying estimationâ€”approach that applies to a broad
class of games regardless of the specific rules of the game, which is applicable even in
cases where the econometrician may be unaware of the actual rules of the game, such as
when prices arise from some unknown negotiation process. Furthermore, our approach
can apply to games in which, even if the rules are known, equilibrium outcomes may not
be uniquely predicted by the model (due to the possibility of multiple equilibria) or may
simply be difficult to characterize analytically. Each of these features of our approach are
not particularly advantageous in a well-understood setting such as a first price auctions,
where the theoretical model has a unique, simple-to-characterize equilibrium and where the
rules of the game are known. In a number of other settings, however, our approach can be
useful.1
A particular novel feature of this paper is the application of these identification and
estimation concepts to cases where actions are imperfectly observed by the econometrician.
This can include settings where only a portion of an agentâ€™s actions are observed, such as a
multistage auction mechanism where the econometrician observes an indicative (first-stage)
bid and the final allocation and price, but not intermediate-stage actions; or a bilateral
bargaining setting where the econometrician may observe a sellerâ€™s list price and an indicator
for whether or not a sale occurs and (if a sale does occur) the final negotiated price, but
not the full sequence of intermediate bargaining actions. The imperfectly observed action
case can also include cases where the action is not observed at all but the econometrician
observes a variable in the data that is correlated with that agentâ€™s action and not with other
agentsâ€™ actions, similar to an instrumental variable. We provide conditions under which our
identification and estimation approach can be used to approximate equilibrium menus and
playersâ€™ values, and we provide conditions under which this approximation will work well.
We derive nonparametric estimation procedures to accompany these identification arguments. We consider both continuous- or discrete-action settings. For the continuous action
case, we propose a local polynomial regression procedure. The general trading game model
imposes the restriction that equilibrium menus must be convex, and therefore we also propose empirical ironing procedures that enforce menu convexity during estimation through
flexible shape-constrained splines.

1Our approach can be thought of as a generalization of the first price auction approach of Guerre, Perrigne,

and Vuong (2000) to settings where the rules of the game or equilibrium of the game are unknown.

A MECHANISM DESIGN APPROACH TO IDENTIFICATION AND ESTIMATION

3

We analyze the performance of our estimation procedure in simulations of first price
auctions relative to the approach of Guerre, Perrigne, and Vuong (2000). While our estimator performs well in terms of finite-sample mean squared error, the approach of Guerre,
Perrigne, and Vuong (2000) clearly outperforms our estimator, as it exploits the knowledge
that the game is indeed a first price auction. We then simulate the bilateral bargaining
game studied in Satterthwaite and Williams (1989) and tie our hands, treating the simulated data as though it came from a bargaining game with an unknown extensive form, as
is this case with bargaining data in many real-world settings.2 We demonstrate that our
method again performs well. We emphasize that if a researcher is analyzing a game with
known rules and an existing, well-established estimation approach, as in the case of first
price auctions, existing tools should be used. The advantage of our approach is in analyzing
settings which, in spite of being quite common forms of tradeâ€”such as bargainingâ€”do not
have well-established tools or well-understood equilibrium characterizations.
The tools we propose can be extended in a number of ways. First, we demonstrate that
in certain games our identification and estimation approach can accommodate observed as
well as unobserved game-level heterogeneity; that is, a component of player valuations that
is common to all players. Second, we show that independence of agentsâ€™ values can be
relaxed when the equilibrium is assumed to be separating in agentsâ€™ types.
We apply our estimation approach to data from the wholesale used-car market, a large
market fueling the supply side of US used-car industry. The market involves individual cars
sold through a game of a secret reserve price auction followed by alternating-offer bargaining
between the seller and high bidder when the high bid falls short of the reserve price. This
game has multiple equilibria and no complete theoretical characterization. In the data,
we observe the final transaction price, an indicator for whether or not trade occurred (the
allocation), and the secret reserve price of the seller. We combine our imperfectly observable
actions case with our unobserved heterogeneity correction procedure to estimate the menu
of expected payoffs sellers choose from. We then estimate the mapping from reported secret
reserve prices to sellersâ€™ true values by evaluating the derivatives of this menu.
With the estimated valuations we perform a number of counterfactual exercises. First, we
evaluate how close this real-world mechanism (the auction followed by post-auction bargaining) lies to the first-best efficient mechanism and the second-best (information-constrained)
efficient mechanism for this setting of N > 1 buyers and 1 seller. We then evaluate the
mechanism that would be optimal for the seller in this setting (an auction with a public

2Fudenberg and Tirole (1991) refer to the choice of a particular extensive form as a â€œthorny issueâ€ when

modeling bargaining, as the actual extensive form in many real-world negotiations is unknown to the researcher.

4

LARSEN AND ZHANG

reserve price) and the mechanism that would be optimal for the buyer (an auction followed by a take-it-or-leave-it offer by the high bidder to the seller). We find that the
auction-plus-bargaining mechanism used in practice only has a small efficiency loss relative
to the first-best or second-best, and it outperforms the seller-optimal and buyer-optimal
mechanisms, both in terms of total surplus and the volume of trade. We also examine
distributional implications of mechanism choice: who gets what share of the surplus. We
find that the mechanism favors sellers, in the sense that it gives them a larger share of the
surplus, but we find that it favors sellers less-so than the second-best mechanism would. We
also examine the implications of the Myerson and Satterthwaite (1983) Theorem for this
setting. We find that second-best efficiency is very close to first-best efficiency in our setting,
largely because competition between buyers decreases losses from asymmetric information.
We see the results presented in this paper as having potential to be used to identify
and estimate agentsâ€™ preferences from complex games or mechanisms in a variety of settings, such as wage bargaining (Cramton and Tracy 1992), pre-trial settlement (Silveira
2017; Prescott, Spier, and Yoon 2014), bargaining in developing countries (Keniston 2011),
state-run procurement mechanisms (Best, Hjort, and Szakonyi (2017)), international trade
negotiations (Bagwell, Staiger, and Yurukoglu 2014), bargaining between hospitals and
suppliers (Grennan and Swanson 2016), public housing allocation mechanisms (Waldinger
2017), and others.

Related Literature. Our identification and estimation approach is related to existing
approaches for specific types of games, such as Guerre, Perrigne, and Vuong (2000) for
first price auctions. Similar approaches have since been applied to many other specific settings. For example, the ad auctions literature (Varian, 2009; Athey and Nekipelov, 2010;
Nekipelov, Syrgkanis, and Tardos, 2015) discusses value identification in a manner that is
close to ours. Related two-step approaches have also been applied to treasury auctions
(HortacÌ§su and McAdams, 2010), auctions for bundles of goods (Gentry, Komarova, and
Schiraldi, 2014), assignment mechanisms (Agarwal and Somaini, 2018), demand curve estimation in e-commerce (Einav, Kuchler, Levin, and Sundaresan, 2015), and general dynamic
games (Bajari, Benkard, and Levin, 2007).
In a related, contemporaneous study, Kline (2016) focuses on identification, but not estimation, in a class of games that overlaps with the class we study: trading games with
monotone equilibria and perfectly observable actions. We see his study as complementary to
ours; whereas his results apply to settings with correlated values, we only discuss correlated
values briefly in Section 7. Our study instead focuses primarily on the case of independent values, deriving additional identification results regarding menu convexity, imperfectly

A MECHANISM DESIGN APPROACH TO IDENTIFICATION AND ESTIMATION

5

observable actions, and unobserved game-level heterogeneity, and presenting estimation approaches for each of these cases. Our results for handling heterogeneity relate to arguments
in Krasnokutskaya (2011), which have previously been applied primarily to particular auction settings and not incomplete information trading games more broadly. Our extension to
correlated private values settings relates to arguments from Li, Perrigne, and Vuong (2002).
Our exposition aims to emphasize several key points. First, while our identification
arguments in the case of perfectly observable are related to ideas that have been applied to
other specific settings in the past, we illustrate here that these identification results largely
only require taking a stance on the structure of agentsâ€™ utility functions, not the specific
rules of the game being played. These approaches can be applied in any kind of trading
procedure with observed actions, so long as agentsâ€™ utility functions are assumed to be affine
in expected trade probabilities and transfers. We hope that our general exposition can help
to conceptually unify the many independent identification results derived in specific settings
in the literature. We also highlight that our approach in the observed actions case can apply
in games without unique equilibria and that are currently understudied empirically, such
as median- or average-price auctions (Cramton, Ellermeyer, and Katzman 2015; Chang,
Chen, and Salmon 2014; Decarolis 2018) or double auctions (Chatterjee and Samuelson
1983; Satterthwaite and Williams 1989; Li and Liu 2015).
Our approach to identification and estimation with imperfectly observed actions in Section 4 is new and unrelated to previous approaches. It can allow the econometrician to
avoid modeling a complex game and instead use a partially observed action vector or a
characteristic of an agent not observed by other agents to identify payoff menus and infer
underlying valuations. This can particularly useful in many complex games that do not
immediately fit the mold of existing empirical frameworks and tools, such as sequential bilateral bargaining (Keniston 2011; Ambrus, Chaney, and Salitskiy 2018), auctions followed
by bargaining (Elyakime, Laffont, Loisel, and Vuong 1997; Larsen 2014; An and Tang 2016),
auctions with collusion (Asker 2010; Kawai and Nakabayashi 2015), or other multi-stage
games of incomplete information.
Furthermore, as we show in Section 3, the general trading game model imposes a simple
empirical restriction, independently of the extensive-form game being played: equilibrium
menus {(Pi (ai ) , Ti (ai ))} must be convex. This unifies a number of known restrictions
on equilibrium outcomes in specific settings: menu convexity is exactly equivalent to the
restrictions on first-price auction equilibrium outcomes in Guerre, Perrigne, and Vuong
(2000), and the condition that marginal revenues are monotone in the ad auctions (Varian,
2009; Athey and Nekipelov, 2010; Nekipelov, Syrgkanis, and Tardos, 2015) and e-commerce
(Einav, Kuchler, Levin, and Sundaresan, 2015) literatures. Our paper demonstrates how to

6

LARSEN AND ZHANG

exploit this restriction. We propose estimation procedures in Section 5 below that enforce
convexity of equilibrium menus, and our methodology for handling imperfectly observed
actions in Section 4 also relies on menu convexity. In principle, menu convexity could
be used as a test of the utility and equilibrium assumptions of the trading game model,
independently of the particular rules of the game.

2. Model
Throughout, agents will be indexed by i. Uppercase Xi will denote random variables or
vectors, lowercase xi will denote realizations, and bold xi (Â·) will denote functions. We will
use a âˆ’i subscript to denote the vector of objects for all agents other than i. For example,
Xâˆ’i â‰¡ (X1 . . . Xiâˆ’1 , Xi+1 . . . Xm ), where m is the number of agents.
We consider an incomplete information trading game with asymmetric independent private values. Each agent i âˆˆ {1, 2, . . . m} has a value Vi for a single indivisible good, where
each Vi is drawn independently from a continuous bounded distribution Fi (Â·), supported
on [vi , vÌ„i ]. Agent iâ€™s value is observed only by i. All agents are risk-neutral. Let xi be
an indicator representing i attaining the good, and ti âˆˆ R any net payment made by i. If
agent i has value Vi = vi , her utility for the pair (xi , ti ) is linear in her value:
vi xi âˆ’ ti .
Agents play trading game G . We assume that agents play according to a single BayesNash equilibrium; if there are multiple equilibria of the game, we assume the same equilibrium is played across all observations. We will analyze G in normal form (thus, we do not
require refinements such as perfection).
First, values Vi are drawn from Fi (Â·) and observed by each agent i. Having observed
their types Vi , agents choose (potentially mixed) strategies: si : R â†’ âˆ†Ai , mapping values
vi âˆˆ [vi , vÌ„i ] into probability distributions over actions ai âˆˆ Ai , where Ai is the space of
actions available to i. The outcome allocation and transfers for all agents,
(x1 , t1 ) , (x2 , t2 ) . . . (xm , tm ) ,
are calculated as a function of all agentsâ€™ actions a1 . . . am . We will denote the individual
allocation and transfer functions as xi (a1 . . . am ) , ti (a1 . . . am ). These functions are what
constitute the rules of the game; they determine the outcome for each player given the full
set of agent actions. We assume that each agent i has some outside option aÌ„i which leads to
some outcome xÌ„i , and transfer normalized to tÌ„i = 0, independently of the actions of other
agents aâˆ’i . We assume nothing else about the structure of G .

A MECHANISM DESIGN APPROACH TO IDENTIFICATION AND ESTIMATION

7

For a given strategy si , we define Î£i (vi ) as the set of all actions ai âˆˆ Ai played by type
vi with positive probability under strategy si (Â·). Let
vi (ai ) â‰¡ sâˆ’1
i (ai ) = {vi : ai âˆˆ Î£i (vi )} ,
that is, vi (ai ) is the set of types vi which play ai with positive probability under strategy
si .
Example 1. Auction: Agents {1 . . . m} participate in an auction. Actions ai belong to a
space that depends on the rules of the auction. For example, in a sealed-bid auction, the
actions are sealed bids in R. In an ascending or multi-round auction, actions are historycontingent bidding strategies. Agentsâ€™ outside options are to leave without participating in
the auction, leading to xÌ„i = 0.
Example 2. Bargaining: A seller (player 1) and a buyer (player 2) bargain over an indivisible good. The sellerâ€™s outside option is xÌ„1 = 1, and the buyerâ€™s outside option is xÌ„2 = 0.
Once again, the form of the actions ai depends on the specific rules of the bargaining
game; for example, the game could consist of a take-it-or-leave-it offer by one party or an
alternating-offer bargaining game, or could follow any other bargaining protocol.
If player i plays action ai when her value is vi , she attains some expected outcome
(Pi (ai ) , Ti (ai )), defined as
Pi (ai ) â‰¡ E [xi (ai , Aâˆ’i )] , Ti (ai ) â‰¡ E [ti (ai , Aâˆ’i )] ,
that is, the expectation of the allocation xi (ai , Aâˆ’i ) and transfer ti (ai , Aâˆ’i ) over the
actions Aâˆ’i of players âˆ’i (which, from iâ€™s perspective, is a random vector). The expected
utility that agent i attains where her value is vi and she plays action ai , relative to her
outside option, is
vi Pi (ai ) âˆ’ Ti (ai ) âˆ’ vi xÌ„i .

(1)

In Bayes-Nash equilibrium, each agent i must be optimally choosing actions with respect
to the distributions of opponentsâ€™ actions Aâˆ’i . This implies that, for all i, vi , the following
incentive compatibility conditions must hold:


0
0
ai âˆˆ Î£i (vi ) =â‡’ ai âˆˆ arg max
v
P
a
âˆ’
T
a
âˆ’ vi xÌ„i ,
i
i
i
i
i
0

(2)



vi âˆˆ vi (ai ) =â‡’ vi Pi (ai ) âˆ’ Ti (ai ) > vi Pi a0i âˆ’ Ti a0i âˆ€a0i .

(3)

ai

Or, equivalently,

In addition to incentive compatibility, we require individual rationality: if the outside
option is not chosen, the action that is chosen must yield a better outcome than the outside

8

LARSEN AND ZHANG



option, so the total utility maxa0i vi Pi a0i âˆ’ Ti a0i âˆ’ vi xÌ„i must be nonnegative. This
condition will not play a major role in our identification and estimation arguments, with
the exception of the unobserved heterogeneity correction in Section 7.2.
Equation (3) is a necessary and sufficient condition for strategies si (vi ) to constitute a
Bayes-Nash equilibrium. Importantly, (3) does not directly reference either the rules of the
gameâ€”that is, the functions xi (a1 . . . am ) , ti (a1 . . . am )â€”or the distribution of opponentsâ€™
actions Aâˆ’i . This is because neither of the objects xi (a1 . . . am ) and ti (a1 . . . am ) enter
directly into the expected utility function of type vi of agent i. From the perspective of agent
i, the equilibrium of G defines a menu of feasible expected outcomes {(Pi (ai ) , Ti (ai ))},
indexed by action choices ai . This menu is a sufficient statistic for iâ€™s choice in equilibrium:
given her type vi , each agent i chooses the item (Pi (ai ) , Ti (ai )) from the equilibrium menu
that affords her the highest utility. The equilibrium menu is also sufficient for characterizing
agentsâ€™ welfare gains from participating in trade; the expected welfare gain of type vi is the
maximized value of (2).
In what follows, we will assume that the econometrician observes data from many independent realizations of the same underlying trading game. As mentioned above, we will
further assume that all realizations of the game represent play from the same Bayes-Nash
Equilibrium. While this assumption is common in the structural empirical literature, it is
certainly strong. We emphasize here, however, that this assumption does not imply that
the underlying game need only have a single equilibrium, only that the data represents play
from a single equilibrium. This therefore allows the data to speak as to the equilibrium
selection from a (potentially infinite) set of equilibria rather than requiring the researcher to
impose an equilibrium refinement. This is particularly useful in the settings we seek to analyze, as many of these are cases with multiple equilibria that are qualitatively very different
and where theoretical equilibrium refinements do not always yield a unique equilibrium.3
Moreover, all of our results in this paper still hold if the assumption of a single equilibrium
in the data is relaxed to instead assume that, if the equilibrium does indeed differ from
one realization of the game to another, then which equilibrium is selected depends only on
features in the data that are observable to the econometrician and can thus be controlled
for. We discuss this further in Section 9.4.
By allowing all value distributions Fi and action sets Ai to be distinct, we allow agents
to be completely asymmetric. This is important for games in which players play different
roles, such as in bilateral bargaining settings, as in Example 2. In some cases below, we
will use the subscripts i to denote a particular role played by the agent, such as using
3For example, in the case of bilateral bargaining, proposed equilibrium refinements often fail to exist or

result in equilibria that predict immediate agreement. See discussion in Ausubel, Cramton, and Deneckere
(2002) or results in Perry (1986).

A MECHANISM DESIGN APPROACH TO IDENTIFICATION AND ESTIMATION

9

i âˆˆ {S, B} indexing whether the player is a seller or buyer in bargaining. In practice, each
instance of the trading game may involve classes of agents who are indistinguishable. For
example, different bidders in an auction may be indistinguishable to the econometrician,
or only distinguishable based on certain observables; an example is the case of loggers vs.
mills bidding in timber auctions (Athey, Coey, and Levin 2013). In such settings, the
econometrician may wish to model all players from a certain class as drawing valuations
from a single distribution. All of our identification and estimation results can be thought
of as applying to such cases as well.

3. Identification with Fully Observed Actions
In this section, we derive identification results for the model described above, assuming
that the econometrician fully observes agentsâ€™ actions from many instances of equilibrium
play of the trading game G . We first analyze the case where the equilibrium is not necessarily
increasing or in pure strategies. We then demonstrate stronger results that can be obtained
when such an increasing, pure-strategy equilibrium does exist. In each instance of the game,
values Vi , for each agent i âˆˆ {1, ..., m}, are independently drawn from Fi (and these actions
are independent across instances of the game). Agents then take actions corresponding to
a set of equilibrium strategies (s1 (Â·) , . . . , sm (Â·)). We assume in this section that in each
instance of the game, the econometrician observes xi (the allocation for agent i), ti (the
transfer for agent i), and agent iâ€™s action ai .
Examples of cases in which the econometrician might observe agentsâ€™ actions are any
sealed-bid trading game or any simultaneous-move trading game. This includes not only
first-price or second price auctions, where the structure of equilibria is well-known in the
theoretical and empirical literature, but also any arbitrary sealed-bid trading game where
such properties may be less well-known or strategies less well-behaved, such as the medianprice auction used in Medicare durable good equipment auctions, which is known to potentially yield equilibria that are non-increasing (Cramton, Ellermeyer, and Katzman 2015); or
sealed-bid bilateral bargaining games, such as the k double auction, which are known to have
multiple, qualitatively different equilibria (Chatterjee and Samuelson 1983; Satterthwaite
and Williams 1989; Li and Liu 2015). Another example is the average-bid auction, which
Chang, Chen, and Salmon (2014) and Decarolis (2018) demonstrate can have multiple equilibria and, in some cases, no equilibria in increasing strategies. Decarolis (2018) highlights
that this mechanism is used for public procurement by state agencies in Florida and New
York, as well as in Chile, China, Colombia, Italy, Japan, Peru, Malaysia, Switzerland, and
Taiwan.

10

LARSEN AND ZHANG

3.1. Fully Observed Actions: General Case. In Section 2, we argued that the expected
outcome functions (Pi (ai ) , Ti (ai )) are sufficient to summarize agentsâ€™ choices in equilibrium, without requiring knowledge of the full functions xi (a1 . . . am ) and ti (a1 . . . am ).
These expected outcome functions are simply conditional expectations of outcomes xi , ti
with respect to actions ai . Hence value identification follows from a revealed preference
argument: for any given action value ai , the econometrician can use the incentive compatibility conditions in (3) to bound the values of any type vi âˆˆ vi (ai ), that is, any type vi
that plays ai with positive probability in equilibrium. We state this result as the following
theorem:
Theorem 1. For any ai , all vi âˆˆ vi (ai ) satisfy:


Ti (ai ) âˆ’ Ti a0i
 âˆ€a0i : Pi a0i < Pi (ai )
vi >
0
Pi (ai ) âˆ’ Pi ai


Ti a0i âˆ’ Ti (ai )
0
0

âˆ€a
vi 6
:
P
a
> Pi (ai ) .
i
i
i
Pi a0i âˆ’ Pi (ai )
Proof. Follows immediately from (3).



Agentsâ€™ values are inferred from the points they choose on the menu of expected outcomes
{(Pi (ai ) , Ti (ai ))}. In Figure 1, we illustrate a hypothetical equilibrium menu in a setting

where agent iâ€™s possible actions are a0i âˆˆ a1i , ..., a5i . Indifference curves in this figure
correspond to straight lines, with higher utility achieved by the agent on curves lying more
to the southwest of the figure.
Suppose we observe an agent choosing point a3i . Compared to a3i , points a4i and a5i have
higher probability Pi (ai ) of receiving the good, in exchange for higher transfers Ti (ai ). If
the agent prefers point a3i to a4i and a5i , her value must be lower than the average cost of
purchasing the additional probability when moving from a3i to a4i and a5i ; that is,


Ti a0i âˆ’ Ti a3i

,
vi 6
Pi a0i âˆ’ Pi a3i



for items a0i âˆˆ a4i , a5i with Pi a0i > Pi a3i . Similarly, compared to point a3i , points a1i
and a2i have lower probability of receiving the good in exchange for lower transfers. If the
agent prefers point a3i , her value must be higher than the average cost of purchasing the
additional probability of getting the good when moving from a1i or a2i to a3i ; that is,


Ti a3i âˆ’ Ti a0i

,
vi >
Pi a3i âˆ’ Pi a0i



for items a0i âˆˆ a1i , a2i with Pi a0i < Pi a3i . Thus, the value of any agent type choosing


point a3i must lie between the slopes of the green lines labeled v a3i , vÌ„ a3i respectively.

A MECHANISM DESIGN APPROACH TO IDENTIFICATION AND ESTIMATION

11

Since any action played in equilibrium must be optimal for some type, the inequalities
in Theorem 1 must have nonempty intersection; in particular, this implies that the menu
{(Pi (ai ) , Ti (ai ))} of actions played with positive probability in equilibrium must be convex,
ruling out the existence of points such as a6i in Figure 1. This is a known restriction on the
structure of incentive-compatible revelation mechanisms from the theoretical mechanism
design literature; we formalize this observation and its implications in Proposition 1 below.
Let {(Pi (ai ) , Ti (ai ))} denote the set of all (Pi (ai ) , Ti (ai )) pairs. A subgradient of a set
{(Pi (ai ) , Ti (ai ))} at point ai is any value Î½ such that



Ti a0i > Ti (ai ) + Î½ Pi a0i âˆ’ Pi (ai ) âˆ€a0i ,
that is, a value Î½ such that a line in R2 of slope Î½ passing through (Pi (ai ) , Ti (ai )) lies
weakly below all points in {(Pi (ai ) , Ti (ai ))}. The graph of {(Pi (ai ) , Ti (ai ))} is the function
obtained by joining the points in order of increasing Pi (ai ) values.
Proposition 1.

(1) The graph of {(Pi (ai ) , Ti (ai ))} is convex.

(2) For any ai , vi (ai ) for any ai is the collection of subgradients of {(Pi (ai ) , Ti (ai ))}
at Pi (ai ). Each vi (ai ) is a closed interval, and the union of all vi (ai ) contains
the interval of values [vi , vÌ„i ].
(3) If we order actions ai by the values of Pi (ai ), vi (ai ) is setwise increasing in ai .

For any ai , a0i , the intervals vi (ai ) , vi a0i intersect at at most one point.
The proof of Proposition 1 and all other involved proofs are found in the Appendix. Part
1 of Proposition 1 states that the menu is convex. Part 3 states that vi (ai ) is higher for
values of ai with higher probabilities Pi (ai ). This is related to the classic fact in mechanism
design that implementable allocation rules must be monotone, assigning higher bundles to
higher types. Intuitively, under our â€œconvex menuâ€ interpretation of equilibria, convex
menus have monotonically increasing slopes, where the slope represents the average cost of
additional probability. Agents who choose bundles with higher Pi (ai ) pay higher average
costs per unit probability, and thus must have higher values.
Together, parts 2 and 3 also state that each vi (ai ) is an interval, and distinct intervals

vi (ai ) , vi a0i intersect at no more than a single point. This implies that the bounds of
Theorem 1 partition the interval of values [vi , vÌ„i ]. While in general this does not allow us to
identify the exact types of each agent, this identification result is the best possible, in the
sense that different types in the same interval vi âˆˆ vi (ai ) are observationally equivalent
if the econometrician only observes xi , ti , ai for different agents i in each instance of the
game (and does not observe, for example, actions that are never chosen in equilibrium or the
probabilities with which agents mix across actions in a mixed-strategy equilibrium). Thus,
the bounds in Theorem 1 capture the full empirical content of the incomplete information

12

LARSEN AND ZHANG

trading game model; in other words, the structure of the game only matters for value
identification insofar as it affects the equilibrium menu {(Pi (ai ) , Ti (ai ))}.
3.2. Pure Strategy or Increasing Equilibrium. We can derive stronger results than
those in Theorem 1 if we assume that the equilibrium of G is in pure strategies, so that the
strategy si (vi ) is a function mapping values to actions ai âˆˆ Ai . The informativeness of the
bounds in Theorem 1 depends on the degree to which different types play different actions
in game G . Specifically, suppose agents with types Î´ apart play strictly different actions, so
that si (vi + Î´) 6= si (vi ) âˆ€vi , and that distinct actions lead to distinct expected outcomes
(Pi (ai ) , Ti (ai )). Then, we have, for any vi ,
Ti (si (vi + Î´)) âˆ’ Ti (si (vi ))
6 vi + Î´,
Pi (si (vi + Î´)) âˆ’ Pi (si (vi ))
Ti (si (vi )) âˆ’ Ti (si (vi âˆ’ Î´))
vi âˆ’ Î´ 6
6 vi .
Pi (si (vi )) âˆ’ Pi (si (vi âˆ’ Î´))

vi 6

(4)
(5)

Hence, for any ai , vi (ai ) is an interval with length at most 2Î´. In particular, if si (Â·)
fully separates types, the interval vi (ai ) for any ai collapses to a single point, leading to
the following result:
Corollary 1. If, in game G , each type vi has a distinct best response action si (vi ), the
inverse mapping vi (ai ) from actions to types is pointwise identified.
Proof. Follows immediately from (4) and (5).



Under corollary 1, we also have:
Ti (si (vi )) âˆ’ Ti (si (vi âˆ’ Î´))
.
Î´â†’0 Pi (si (vi )) âˆ’ Pi (si (vi âˆ’ Î´))

vi = lim

(6)

If the problem is sufficiently smooth, as described in the following corollary, this expression simplifies further.
Corollary 2. If ai âˆˆ R, Pi and si (Â·) are both increasing and continuous, and Pi , Ti are
both differentiable, then
vi (ai ) =

Ti0 (ai )
.
Pi0 (ai )

In Section 5, we will describe an estimation strategy based on Corollary 2.
As highlighted above, one example of an incomplete information trading game that fits
into our framework is a first-price auction. We now demonstrate that the standard identification argument for first-price auctions, derived in Guerre, Perrigne, and Vuong (2000),
is analytically equivalent to our approach; however, theirs relies explicitly on knowing that
the game is indeed a first-price auction whereas ours does not.

A MECHANISM DESIGN APPROACH TO IDENTIFICATION AND ESTIMATION

13

Example 3. Consider an m-bidder first-price auction in an independent private values
environment. Assume for simplicity that bidders are symmetric. Bidder iâ€™s action ai is a
bid. Let the distribution of bids be written G(Â·), with density g(Â·). In a first-price auction,
the expected probability of winning, (P), and expected transfer (T ) are given by
P (ai ) = G (ai )mâˆ’1 , T (ai ) = ai G (ai )mâˆ’1 ,
where i subscripts are omitted from P and T because of symmetry. Player iâ€™s value is then
given by
dT (ai )
dai
dP(ai )
dai

=

ai (m âˆ’ 1)G(ai )mâˆ’2 g(ai ) + G(ai )mâˆ’1
(m âˆ’ 1)G(ai )mâˆ’2 g(ai )

= ai +

G(ai )
.
(m âˆ’ 1)g(ai )

This expression is equivalent to that derived in the identification argument of Guerre, Perrigne, and Vuong (2000).

4. Identification with Imperfectly Observed Actions
In many contexts, it is impossible for the econometrician to observe all elements of a
realization of the action ai . For example, in a multiple-offer bargaining game, observing
ai would entail observing a vector of all of iâ€™s actions contingent on all possible sequences
of offers from other agents, or in an ascending auction, all of iâ€™s bid strategies over all
sequences of opponent bids, within a single instance of the game. Thus, observing ai would
not simply mean observing what actions i took, but what actions i would have taken in every
history of the game, including those not reached; this would be equivalent to observing a
set of instructions player i would have given to a third-party agent to play on her behalf.
However, in many of these cases where the action is a multidimensional vector, the
econometrician will be able to observe some portion of an agentâ€™s action vector or will
be able to observe some other feature in the dataset that is correlated with an agentâ€™s
unobserved action vector. We refer to such an objectâ€”either a partially observed action
or a separate feature in the dataset correlated with an agentâ€™s actionâ€”as an action shifter,
defined as follows:
Definition 1. Zi is an action shifter if Zi and Ai are not independent, but Zi and Aâˆ’i
are independent.
We now provide several examples in which this condition is satisfied. The first three
pertain to a partially observed action.

14

LARSEN AND ZHANG

Example 4. First Offer in Bargaining: Suppose that Ai specify strategies in a multipleround bargaining game. If i always makes the first offer in the game, the first offer will
generally depend on iâ€™s value Vi in equilibrium, but it cannot depend on other agentsâ€™
values Vâˆ’i . Since actions Ai are functions of values Vi in equilibrium, this first offer is a
Zi satisfying the conditions of Definition 1.
Example 5. Knockout Bid in Bidding Ring Auction Followed by Target Auction: In the
stamp auction case of Asker (2010), members of a bidding ring participate in a sealed-bid
knockout auction. The winning bid from the knockout auction then becomes the cartelâ€™s
bid in the target (English) auction. Asker (2010) provides a full model of this game. The
knockout bid of an agent, which comes from a first, sealed-bid stage of the game, would be
a Zi satisfying Definition 1.
Example 6. Indicative Bid : In many procurement settings with auctions or bargaining,
interested bidders are required to first submit an indicative bid (Ye 2007; Quint and Hendricks 2018). This indicative bid only represents a portion of an agentâ€™s full action vector to
be played in the full game, but can satisfy Definition 1 as a shifter Zi for that unobserved
action vector.
The arguments provided in this section can allow the researcher to identify objects of
interest using the above action shifters Zi without a full model of the (potentially complex)
game agents play. The next two examples pertain to other observables in the data that are
arguably correlated with one agentâ€™s action but not with other agentsâ€™ actions.
Example 7. Agent Characteristics in Bargaining: In the setting of Ambrus, Chaney, and
Salitskiy (2018), Spanish ransom parties haggle with North African pirates to buy back
Spanish captives. In the data, the authors observe the amount of earmarked money raised
by a given captiveâ€™s family back home. This amount is known to the econometrician and to
the buyer (the rescue party) but is unobserved to the seller (the pirates). This earmarked
money is arguably correlated with the buyerâ€™s valuation and thus with his action and can
serve as a shifter Zi for the rescue partyâ€™s action.4
Example 8. Assets in Auctions: In many auction datasets, such as auto auctions or real
estate auctions, the econometrician may observe information about an agentâ€™s assets that
is only known to that agent and not to opponents, and that may be correlated with that
agentâ€™s willingness to pay. For example, in auto auctions, the data may contain information
on previous cars purchased by that agent or credit constraints of that agent. In real estate
4Ambrus, Chaney, and Salitskiy (2018) estimated buyerâ€™s private valuations by instead imposing the struc-

ture of a one-sided-offers bargaining game from Fudenberg, Levine, and Tirole (1985). Through our approach,
such structure could potentially be tested, as it would allow the researcher to identify certain objects without
imposing a particular bargaining model.

A MECHANISM DESIGN APPROACH TO IDENTIFICATION AND ESTIMATION

15

auctions, the data may contain information on the size of the loan the potential buyer has
been approved for, known to the buyer but not the seller. In each case, the level of these
assets may serve as a Zi satisfying Definition 1.
We now prove several properties of our menu approach in imperfectly observed action
cases. These properties can be used to identify objects of interest without a complete model
of the full underlying (potentially multi-stage) game.
4.1. Bounds on Utility with Imperfectly Observed Actions. Suppose that Zi satisfies our Definition 1. Let H (ai , zi ) be the joint distribution of actions and action shifters,
which is unobserved by the econometrician, and let PÌ†i (zi ) and TÌ†i (zi ) represent conditional
expectations of xi , ti with respect to zi , given by

(PÌ†i (zi ), TÌ†i (zi )) â‰¡ E [(xi (Ai , Aâˆ’i ) , ti (Ai , Aâˆ’i )) | Zi = zi ]
= E [E [(xi (Ai , Aâˆ’i ) , ti (Ai , Aâˆ’i )) | Ai , Zi = zi ] | Zi = zi ]
= E [E [(xi (Ai , Aâˆ’i ) , ti (Ai , Aâˆ’i )) | Ai ] | Zi = zi ]
= E [(Pi (Ai ) , Ti (Ai )) | Zi = zi ] .
The equality on the second line follows by the law of iterated expectations and the equality
on third line follows by the fact that Zi is independent of Aâˆ’i , so the inner conditioning on
Zi can be ignored. The final equality follows by the definition of Pi and Ti , the expected
outcomes defining the menu. The above argument shows that conditional expectations of
xi , ti with respect to zi recover convex combinations of (Pi (ai ) , Ti (ai )) pairs. Since the
graph of {(Pi (ai ) , Ti (ai ))} is convex, any such convex combinations lie above the graph
of {(Pi (ai ) , Ti (ai ))}. In other words, for any zi that satisfies Definition 1, the graph
of {(PÌ†i (zi ) , TÌ†i (zi ))} lies strictly above the graph of {(Pi (ai ) , Ti (ai ))}. This allows us to
obtain a lower bound on the utility of any given type vi in equilibrium, or, equivalently, an
upper bound on the graph {(Pi (ai ) , Ti (ai ))}:
Corollary 3. For any Zi satisfying Definition 1, maxzi vi PÌ†i (zi ) + TÌ†i (zi ) is a lower bound
on the equilibrium utility of type vi .
While we can thus derive an upper bound for the menu, in general, neither the true
menu {(Pi (ai ) , Ti (ai ))} nor the joint distribution of action shifters and values G (z, v) are
identified. In Figure 2, we show the imperfectly observed menu {(PÌ†i (zi ) , TÌ†i (zi ))} generated
from a true menu {(Pi (ai ) , Ti (ai ))}, where we generate action shifters such that Vi =
Zi +i , where i > 0 is a uniformly distributed error term. The imperfectly observed menu is
convex; thus, if we were to only observe {(PÌ†i (zi ) , TÌ†i (zi ))}, we would be unable to distinguish

16

LARSEN AND ZHANG

the true data generating process from an alternative process in which Zi = Vi , and the menu
{(Pi (ai ) , Ti (ai ))} were exactly the imperfectly observed menu {(PÌ†i (zi ) , TÌ†i (zi ))}.
4.2. One-to-one Shifters. In some cases, the econometrician may be willing to assume
5
that Zi is a one-to-one function of type Vi , that is, Vi = zâˆ’1
i (Zi ) . For example, suppose

the game G is a multiple-round bargaining game, with a first sealed-bid stage in which the
optimal bid is a strictly increasing function of type vi . In this case, the mapping zi (Â·) is
fully identified from the data.
If zi is a one-to-one function of the type vi , then (PÌ†i (zi ) , TÌ†i (zi )) is exactly the expected
0
outcome attained by the unique type zâˆ’1
i (zi ). Moreover, for any other zi , the expected


outcome (PÌ†i z0i , TÌ†i z0i ) is attainable by type zâˆ’1
i (zi ). Also, there are types vi + Î´, vi âˆ’ Î´

playing different actions zi (vi + Î´) , zi (vi âˆ’ Î´). As in Section 3, this implies the following
bounds for any Î´:
vi 6

TÌ†i (zi (vi + Î´)) âˆ’ TÌ†i (zi (vi ))
PÌ†i (zi (vi + Î´)) âˆ’ PÌ†i (zi (vi ))

vi âˆ’ Î´ 6

6 vi + Î´,

TÌ†i (zi (vi )) âˆ’ TÌ†i (zi (vi âˆ’ Î´))
PÌ†i (zi (vi )) âˆ’ PÌ†i (zi (vi âˆ’ Î´))

6 vi .

(7)
(8)

One-to-oneness implies that these bounds will collapse to a single point, and the entire
mapping zi (Â·) is identified, which we state as the following extension of Corollary 1:
Corollary 4. If, in game G , each type vi is one-to-one with zi , the inverse mapping
vi = zâˆ’1
i (zi ) from action shifters to types is pointwise identified.
Proof. Follows immediately from (7) and (8).



Corollary 2 also immediately extends to the imperfectly observed actions case, as follows:
Corollary 5. If each type vi is one-to-one with zi , zi âˆˆ R, the functions PÌ†i , zi (Â·) are
increasing and continuous, and the functions TÌ†i , PÌ†i are differentiable, then
vi =

TÌ†i0 (zi )
PÌ†i0 (zi )

.

As with Corollary 2 in the fully observed action case, we see Corollary 5 as particularly
useful for empirical work in the imperfectly observed action case. Section 5 will discuss
estimation for these cases.
5Once again, we will treat different values of z as identical if they induce the same expected outcomes

(PÌ†i (z) , TÌ†i (z)).

A MECHANISM DESIGN APPROACH TO IDENTIFICATION AND ESTIMATION

17

4.3. Approximating E [V | z]. For general noisy action shifters, the joint distribution of
action shifters and values G (z, v) is not identified. However, under certain conditions, it is
possible to approximate the function E [V | Z = z] (which we will write in short as E [V | z]),
the conditional expectation of an agentâ€™s valuation given the observed Z. This object may
be of direct interest as a best guess of an agentâ€™s valuation given the data, and it will also
be useful in allowing us to construct an approximate lower bound for gains from trade for
the agent in the game.
Throughout this and the next subsection, we suppress subscripts i, writing for example z
to mean zi . We will also write P (v) and T (v) as shorthand for P(s(v)) and T (s(v)), rather
than writing P(a) and T (a), because we are primarily interested here in the relationship
between the action shifter Z and values V. We also assume Z is real-valued and supported
on a continuous bounded interval; P (Â·) , T (Â·) are everywhere strictly increasing and differentiable; G (v | z) is differentiable in v for any z; and G (v | z) is continuous in z for almost
all v. These assumptions make our results easier to state and prove, but they are stronger
than we need; all of these assumptions can be relaxed without significantly affecting the
results.
We impose one final restriction that cannot easily be relaxed: we assume that G (v | z) is
ordered by stochastic dominance, that is
z2 > z1 =â‡’ G (v | z2 ) >FOSD G (v | z1 ) .
Under these assumptions, we aim to find conditions under which we can approximate the
conditional expectation of an agentâ€™s value given the agentâ€™s observed Z, that is,
E [V | z]. To begin, Proposition 2 characterizes the ratio

TÌ† 0 (z)
PÌ† 0 (z)

TÌ† 0 (z)
PÌ† 0 (z)

â‰ˆ

in terms of the conditional

distributions G (v | z) and the menu {(PÌ† (Â·) , TÌ† (Â·))}:
Proposition 2. Under the conditions stated above for Z, PÌ† (Â·),TÌ† (Â·), and G (v | z),
Â´ vÌ„  dG(v|z)  0
0
P (v) dv
0 v âˆ’
dz
TÌ† (z)

= Â´ 
.
vÌ„
dG(v|z)
0 (v) dv
PÌ†0 (z)
P
âˆ’
0
dz

(9)



Since both âˆ’ dG(v|z)
and P0 (v) are positive and finite by assumption, their product
dz


âˆ’ dG(v|z)
P0 (v) can be thought of as a weighting function; hence the expression on the
dz
right
handside of (9) can be thought of as a weighted average of values v with respect to

dG(v|z)
âˆ’ dz
P0 (v).


Proposition 2 implies that if the weighting function âˆ’ dG(v|z)
P0 (v) behaves similarly to
dz
the probability density function g (v | z) then the ratio

TÌ† 0 (z)
PÌ† 0 (z)

will be close to the conditional

18

LARSEN AND ZHANG

expectation E [V | z] =

Â´ vÌ„
0

v g (v | z) dv. This behavior will only hold under fairly restrictive

assumptions on the functions G (v | z) and P0 (v); however, these assumptions are satisfied
by certain classes of conditional distributions commonly assumed in practice. We describe
two such sets of conditions below. The first involves conditional invariance of the joint
distribution G(v, z) and a linear expected allocation function:
Corollary 6. Suppose that (i) G (v, z) is translationally invariant, that is, G (v, z) =
GÌ„ (v âˆ’ z); and (ii) P0 (v) is constant. Then,
TÌ† 0 (z)
PÌ†0 (z)

= E [V | z] .

While the result in Corollary 6 is stated as an equality, equation (9) is smooth in all of
its arguments, so a similar statement about approximate equality holds: if G (v, z) is close
to translationally invariant locally at some z, and P0 (Â·) is close to constant in the relevant
neighborhood,

TÌ† 0 (z)
PÌ† 0 (z)

will be close to E [V | z].

Our second case where E [V | z] can be approximated well involves the noise in Z being
bounded:
Corollary 7. Suppose G (v | z) has compact support: G (v | z) âˆˆ [Î½ (z) âˆ’ Î´, Î½ (z) + Î´] for
some Î´ > 0, where Î½ (z) is continuous. Then,
TÌ† 0 (z)
PÌ†0 (z)

âˆ’ E (V | z) 6 2Î´.

If the support of G (v | z) is not compact, but the majority of the probability mass is
concentrated near Î½ (z), Corollary 7 will still hold approximately. Intuitively, this corollary
says that if z is a fairly good predictor for v, in the sense that the residual variation in v
conditional on observing z is small, the derivatives

TÌ† 0 (z)
PÌ† 0 (z)

will be fairly close to E (V | z).

4.4. Approximating Gains from Trade. Corollary 6 or Corollary 7 can be used to
obtain a lower bound on the total expected gains from trade in the game played in the
data. We can use the following quantity to obtain an approximate lower bound to the
expected gains from trade for all agents. Total expected welfare from trade is:




0
0
EV max
V
P(v
)
âˆ’
T
(v
)
âˆ’
VxÌ„
,
0
v

where the maximization is performed pointwise for each realization of V. Using the law of
iterated expectations, we can write this as:
 



0
0
= EZ EV max
VP(v ) âˆ’ T (v ) âˆ’ VxÌ„ | Z .
0
v

A MECHANISM DESIGN APPROACH TO IDENTIFICATION AND ESTIMATION

19

Corollary 3 shows that the convex hull of the (PÌ† (z) , TÌ† (z)) pairs is an upper bound for the
true menu {(P (v) , T (v))}. Hence, for all z,




0
0
EV max
VP(v ) âˆ’ T (v ) âˆ’ VxÌ„ | Z = z
v0


h
i


0
0
V
PÌ†
z
âˆ’
TÌ†
z
âˆ’
VxÌ„
|
Z
=
z
> EV max
0
z



> max
EV [V | Z = z] PÌ† z0 âˆ’ TÌ† z0 âˆ’ EV [V | Z = z] xÌ„.
0
z

(10)
(11)

This last inequality follows because any value attainable in (11) is also attainable in (10).
An intuition for this inequality is that, fixing a feasible expected outcome (PÌ† (z) , TÌ† (z)), the
gains from trade are linear in values V. Hence, the average maximal utility across agent
types is at least the maximal utility of the average agent type. Thus, one can use Corollary
6 or Corollary 7 to identify E [V | Z = z], and then, taking expectations with respect to the
empirical distribution of Z, one can obtain (11) as a lower bound on the total gains from
trade.
The expression in (11) will correspond exactly to the gains from trade only if the action
shifter Z is a one-to-one function of values. If the action shifter Z is not a one-to-one function
of V, the inequalities (10) and (11) will hold strictly. Thus, even if we are unsure whether
the approximation E [V | z] â‰ˆ

TÌ† 0 (z)
PÌ† 0 (z)

is valid, as long as we believe that the assumptions of

Corollaries 6 or 7 are even approximately satisfied, this is a generally conservative approach
to identifying a bound on the expected gains from trade.

5. Estimation
We now present approaches for estimating valuations, building on the identification arguments presented in Sections 3 and 4. For simplicity of exposition, we describe our estimation
results in the context of the fully observed action case, but the same estimation approaches
apply to the imperfectly observed actions settings described in Section 4. We discuss estimation with discrete actions in Section 5.1 and with continuous actions in Section 5.2.
Throughout this section, we will focus on estimation for a single agent (or a class of agents
who are indistinguishable), thus we will omit subscripts i, writing for example a, v, P (Â·) , T (Â·)
instead of ai , vi , Pi (Â·) , Ti (Â·). We will introduce here a subcript j to index an observation in
the data, putting this subscript on each object observed in instance j of the game, namely
xj , tj , and aj .
5.1. Discrete Actions. Suppose that there are a finite number of possible actions, A =
 1
a . . . aK , with generic element ak . As above, we order the values of ak in terms of

increasing probability P ak of attaining the asset. We wish to identify the set of types

20

LARSEN AND ZHANG


sâˆ’1 ak choosing each action value ak . Again, we suppose that the econometrician observes
multiple instances of the trading game, and that in each instance she observes the agentâ€™s
action ak
j âˆˆ A, the trade outcome xj , and the transfer tj . We can construct a family of


two-step estimators as follows. First, we construct estimates PÌ‚ ak , TÌ‚ ak as the averages
of xj , tj respectively conditional on observations where the action ak was chosen. We then
set, as in Theorem 1,
 0ï£¹
ï£®  0
ï£®
ï£¹

TÌ‚ ak âˆ’ TÌ‚ ak
TÌ‚ ak âˆ’ TÌ‚ ak

ï£» 6 sÌ‚âˆ’1 ak 6 min ï£°
ï£».
max ï£°
0
0
k0 >k
k0 <k
PÌ‚ (ak ) âˆ’ PÌ‚ (ak )
PÌ‚ (ak ) âˆ’ PÌ‚ (ak )
 0
TÌ‚ (ak )âˆ’TÌ‚ ak

Asymptotically, all ratios
converge to their population equivalents, hence
0
PÌ‚(ak )âˆ’PÌ‚ (ak )


sÌ‚âˆ’1 ak consistently estimates the bounds of the set sâˆ’1 ak .


A disadvantage of this estimator is that, in finite samples, the set of {(PÌ‚ ak , TÌ‚ ak )}
pairs may not be convex, in which case the lower and upper bounds may cross for some
values of a. An alternative strategy is to adopt an empirical ironing procedure: rather than


using the {(PÌ‚ ak , TÌ‚ ak )} graph directly, we take its convex hull, and use the subgradients
of the convex hull to estimate values.


For a given collection {(PÌ‚ ak , TÌ‚ ak )}, we define the supporting hyperplane H (p; Î½)


of slope Î½, as the highest line of slope Î½ which lies below all points in {(PÌ‚ ak , TÌ‚ ak )}:


b (Î½) â‰¡ max b : TÌ‚ ak > b + Î½PÌ‚ ak âˆ€ak
H (p; Î½) â‰¡ b (Î½) + Î½p


We construct the convex hull of {(PÌ‚ ak , TÌ‚ ak )} at any point p by taking the supremum
over all supporting hyperplanes, which we denote HÌ„ (p) â‰¡ supÎ½ H (p; Î½). We then estimate


sÌ‚âˆ’1 ak using the set of subgradients of HÌ„ (p) at point PÌ‚ ak ; that is, the set of slopes Î½

such that H (p; Î½) attains the supremum at point PÌ‚ ak :



 

sÌ‚âˆ’1 ak = Î½ : H PÌ‚ ak ; Î½ = HÌ„ PÌ‚ ak
.
HÌ„ (p) is an upper envelope of linear functions H (p; v), so it is convex. Thus, it admits
subgradients at any point p, and the collection of subgradients is setwise increasing in p.




Asymptotically, since the true menu P ak , T ak
is convex, the inferred sÌ‚âˆ’1 ak has


the same limit as the first estimator. However, using the convex hull of {(PÌ‚ ak , TÌ‚ ak )}
ensures that the estimator produces non-overlapping bounds for agentsâ€™ values in finite
samples.
5.2. Continuous actions. In many cases of interest, the econometrician may be willing to
assume that the equilibrium strategies are smooth functions of values, and the equilibrium

A MECHANISM DESIGN APPROACH TO IDENTIFICATION AND ESTIMATION

21

P (a) and T (a) mappings are also smooth. In this case, we can estimate the mapping from
actions to values using nonparametric regression. In particular, assume that the mappings
P (a) , T (a) are differentiable, and the function v = sâˆ’1 (a) is continuous. Corollary 2 (or
Corollary 5 in the imperfectly observable actions case) implies that:
sâˆ’1 (a) =

dT
ds
dP
ds

.

If we can nonparametrically estimate the derivatives TÌ‚ 0 (a) , PÌ‚0 (a) as functions of actions
a, their ratio is a consistent estimator for sâˆ’1 (a). Nonparametric derivative estimation of
smooth functions can be done using local polynomial regression (Fan and Gijbels, 1996).
The local polynomial regression estimator for T (a) at a given point a with degree p, bandwidth h, kernel Kh is:
ï£®"
ï£¹
#2
p
h
i
X
X
k

ï£° tj âˆ’
Î²Ì‚0 (a) , . . . Î²Ì‚p (a) = arg min
Î² k aj âˆ’ a
K h aj âˆ’ a ï£» .
Î²

j

(12)

k=0

In this expression, p represents the degree of the local polynomial fit; Fan and Gijbels
suggest using even polynomial orders p = k + 2m + 1 for estimating first derivatives, hence
local quadratic regression with p = 2 is appropriate for our case. Kh (Â·) is a kernel function
of bandwidth h; common kernel functions include Gaussian or Epanechnikov kernels. The
coefficient Î²k estimates the kth derivative of T . Therefore, an estimate of the first derivative
TÌ‚ 0 (a) is given by running a local polynomial regression of the observed transfer, tj , on the
observed action, aj , and taking the coefficient on the linear term in (12), Î²Ì‚1 . Similarly, an
estimate of the first derivative PÌ‚0 (a) is given by running a local polynomial regression of
the observed allocation, xj (i.e., an indicator for whether the player won), on the observed
action, aj , and taking the coefficient on the linear term in the regression.6
As in Section 5.1, this estimation procedure may result in a nonconvex {(P (a) , T (a))}
menu, and it may be desirable to â€œironâ€ the empirical menu function, constraining it to

6For the bandwidth, Fan and Gijbels, Chapter 4.2, describes the following rule-of-thumb selection procedure:

Ë†
First, one fits a global quintic polynomial by standard ordinary least squares, TÌ‚ (a) = Î±0 + Î±1 a . . . + Î±5 a5 .
Let the residual variance from the regression be ÏƒÌƒ2 . The rule-of-thumb bandwidth is then equal to the
following â€œvariance componentsâ€-like formula:
ï£¹ 71
ï£®
ï£¯
hÌ‚ = CÎ½,p (K) ï£°

ÏƒÌƒ2
ï£º
2 ï£» ,
Pn  Ë† 00
i=1 TÌ‚ (a)

(13)

where CÎ½,p (K) is a kernel-specific constant. Fan and Gijbels, Table 3.2, reports this constant as approximately 0.884 for the Gaussian kernel, 2.275 for the Epanechnikov kernel, and 2.869 for the triweight kernel.
This procedure chooses smaller bandwidths for functions that can be fitted better by polynomials.

22

LARSEN AND ZHANG

be convex during estimation.7 In addition, it may be desirable in some contexts to enforce
monotonicity of the P (a) function. In a manner similar to Judd (1998) and Schumaker
(1983), we propose a spline-based procedure to nonparametrically estimate the P (Â·) , T (Â·)
functions while imposing convexity of the {(P (a) , T (a))} menu. In Appendix B, we describe
the construction of the quadratic and cubic spline bases in detail. Our estimation approach
proceeds in two stages: first, P (a) is nonparametrically estimated as a smooth function of
a, possibly constrained to be monotonic, using quadratic splines. Then, T (Â·) is estimated
as the composite function TÌ‚ (P (a)), where TÌ‚ (Â·) is constrained to be a convex cubic spline.
Constraining the quadratic (cubic) spline coefficients to be nonnegative ensures that the
target function is nondecreasing (convex). Note that, by construction, the quadratic splines
have two continuous derivatives, and the cubic splines three continuous derivatives. Since
TÌ‚ (p) is a cubic spline, the estimated mapping sâˆ’1 (a) =

dT
dP

is guaranteed to be continuous

and differentiable.
6. Monte Carlo Simulations
6.1. First-Price Auction Simulations. In this section, we simulate data from a firstprice auction and estimate values using the standard Guerre, Perrigne, and Vuong (2000)
(GPV) approach as well as our approaches based on local polynomial regressions and convex
splines. We use m = 5 bidders for each auction instance, using uniform, exponential and
lognormal value distributions. We generate datasets of size 4,000, 16,000, and 40,000 for
estimation; we solve for the unique equilibrium as in GPV, and then simulate and estimate
from each combination of distribution and dataset size 200 times.
The GPV estimator can be written:
vÌ‚ (a) = a +

Ë† (a)
GÌ„
,
Ë† (a)
gÌ„

Ë† (Â·) , gÌ„
Ë† (Â·) are estimates of the
where v is the agentâ€™s value, a is the agentâ€™s bid, and GÌ„
distribution and density functions of the maximum opposing bid, rather than the distribution
Ë† (Â·) using a kernel density estimator, using Gaussian kernels with
of all bids.8 We estimate gÌ„
Ë† (Â·) using a
bandwidth chosen using the Silverman (1986) rule of thumb. We estimate GÌ„
linearly interpolated empirical CDF. To implement our local polynomial regression method,
7Menu convexity corresponds exactly to monotonicity of Myerson (1981) marginal revenue, hence â€œironingâ€

in this context is exactly equivalent to the Myersonian procedure of enforcing marginal revenue monotonicity
for a demand curve.
8While we draw i.i.d. bids for simulation, we estimate values allowing for bidders to be potentially drawn
from different distributions. The symmetric GPV estimator uses multiple data points from each auction,
and could technically be implemented with only observing one auction (with many bidders) whereas our
approach requires observing multiple instances of the game. We use the asymmetric version here to hold
fixed the effective sample size between our procedure and GPV, comparing only the estimation proceduresâ€™
performances.

A MECHANISM DESIGN APPROACH TO IDENTIFICATION AND ESTIMATION

23

we run local quadratic regressions to estimate derivatives as described in Section 5.2, using
Gaussian kernels with bandwidths equal to half9 the Fan-Gijbels rule of thumb in (13).
To implement our convex spline method, we first estimate Pi (Â·) separately for each agent
i using a local linear regression, with bandwidth chosen using a rule of thumb that Fan
and Gijbels propose for local linear regression. Then, we estimate the function Ti (Pi ) for
each agent i using convex splines with 10 knots uniformly separated in bid quantile space,
minimizing the sum of squared errors from the (a, x, t) triples observed in data. We did not
explicitly apply any procedure for spline knot selection, but we found that results were not
very sensitive to using knot counts between 5 and 20.
We show pointwise 95% coverage bands from 200 estimation sample for both estimators,
for the case of the exponential distribution with N = 4, 000 in Figure 3. In Table 1, for
all specifications we used, we show average mean squared errors normalized by the true
variance in values, for bid values between the 20th and 80th bid quantiles.10
We find that GPV significantly outperforms both of our estimators: the mean squared
error of GPV is less than 1 percent in all of the simulation specifications, and in some
cases it is even below 0.1%. In absolute terms, however, both the local quadratic and spline
estimators perform fairly well, achieving below 10% MSE in all specifications, and achieving
around 1% MSE in specifications with 40,000 observations.
Our proposed spline estimator may have a number of qualitative benefits over the local
quadratic regression estimator. First, it is guaranteed to produce convex menus for any given
estimation instance, which may be desirable in settings where value and menu estimates
are used for economic counterfactuals. Second, as we demonstrate in Section 7.2, the
spline estimator allows the researcher to incorporate an unobserved heterogeneity correction
procedure. If unobserved heterogeneity is not a serious issue, we suggest using the local
quadratic regression estimator, as its finite-sample performance appears to exceed that of the
spline estimator. In cases where unobserved heterogeneity or other multi-step procedures
that benefit from parametric estimation are needed, or in cases where data is sparse and
enforcing menu convexity is important for statistical reasons, our spline procedure may be
preferable despite its worse finite-sample performance. We use the splines approach in our
empirical application in Section 8 below.
9This is an ad-hoc adjustment, because we found that the estimator performed somewhat better with

smaller bandwidths, possibly because this reduces bias in the estimator when the target function is relatively
nonsmooth.
10While this is a large truncation, as Figure 3 shows, both GPV and our local quadratic regression estimator
can function very poorly towards the lower end of the support of the bid distribution. For our estimator,
0
this is essentially because the probability of winning and transfer both become very small; the ratio TP0 (b)
(b)
thus becomes numerically unstable. Thus MSE comparisons are more meaningful for bids well inside the
interior of the support of the bid distribution.

24

LARSEN AND ZHANG

We interpret these first-price auction simulation results as suggesting that if the researcher
is well aware that the game generating the data is indeed a first-price auction, the researcher
should use the standard GPV approach for identification and estimation. If, however, the
researcher has data by some unknown bidding procedure or by some unknown equilibrium
selection rule, or from a bidding procedure for which no specific, standard tool has yet
been derived, and wishes to identify and estimate valuations in a manner that is robust to
misspecification of these features of the game, our menu approach can perform well.

6.2. Bargaining Simulations. To further illustrate our method, we choose a setting for
which, unlike first-price auctions, there is no existing off-the-shelf method for estimation:
a bargaining game with two-sided incomplete information. The theoretical literature on
incomplete information bargaining demonstrates that such games in general have multiple
equilibria that are difficult to characterize. Here, we generate data from a particular equilibrium from such a game. In order to do so, we adopt the bilateral bargaining game described
in Satterthwaite and Williams (1989). Playersâ€™ roles are denoted i âˆˆ {B, S}. The buyer B
and seller S have private valuations and make offers. If the buyerâ€™s offer (aB ) exceeds that
of the seller (aS ), trade occurs at price t = kaS +(1âˆ’k)aB , where k âˆˆ [0, 1]. The parameter
k can be considered a bargaining power weight. A game with k = 1 corresponds to the
seller-optimal mechanism (a take-it-or-leave-it offer by the seller) and a game with k = 0
corresponds to the buyer-optimal mechanism (a take-it-or-leave-it offer by the buyer). This
game is referred to in the literature as a k double auction (see also Chatterjee and Samuelson 1983). Satterthwaite and Williams (1989) demonstrate that a continuum of equilibria
exist in this game, and they provide methods to solve for a class of equilibria. We simulate
data following their solution approach, as described in Appendix C.
An observation in the data we generate consists of a final transfer t, an allocation x
(i.e. an indicator for whether or not the good sold), and a sellerâ€™s offer aS . In applying
our estimation approach, we then deliberately tie our hands by treating the buyerâ€™s offer
and the bargaining power parameter as unknown and treating the sellerâ€™s action as though
arising from an unknown extensive form bargaining game generating the data. Specifically,
we treat the sellerâ€™s offer as a partially observed action vector that is one-to-one with the
sellerâ€™s value as described in Section 4. This simulated data mimmicks a type of dataset
that a researcher may commonly find: prices arising from an unknown negotiation process
(i.e. the precise extensive form of the game is unknown to the researcher). For example,
a researcher might observe housing data with transacted prices, a measure of how many
buyers placed offers on the house and failed to win it, and the sellerâ€™s initial list price
(analogous to the seller offer generated in our data).

A MECHANISM DESIGN APPROACH TO IDENTIFICATION AND ESTIMATION

25

We apply our estimators to cases were valuations are distributed according to a uniform or
truncated Normal distribution, and for sample sizes of 4,000, 16,000, or 40,000 observations.
The distributional parameters for the true distributions are discussed in Appendix C. Figure
4 display sellersâ€™ offers on the horizontal axis and the estimated and true valuations of
sellers on the vertical axis for the uniformly distributed case with 4,000 observations. The
estimation procedure performs well in recovering valuations close to the truth. Table 2
displays the mean squared error for the different specifications, normalized by the true
variance as in Table 1. The mean squared error of the local quadratic regression estimator
is at most 10% in small samples and in larger samples it is below 5%. The convex spline
estimator is less accurate in small samples, but also has MSE below 10% in larger samples.
We also remark here that this estimation exercise did not exploit any information about
the value of k (the bargaining power), any offer made by the buyer, or the particular
equilibrium being played. Recall that a continuum of equilibria exist to this game at any
value of k. The generated data in our simulation exercise could have come from any fixed
value of k and any fixed equilibrium, or even a sequential bargaining game completely
distinct from the static k double auction, and the two-step approach proposed herein would
still have returned reasonable estimates of valuations based solely on the observed first seller
offer, the allocation, and the transfer.11

7. Extensions: Heterogeneity and Correlated Values
We now provide extensions to our identification arguments provided above to settings of
game-level heterogeneity (observed and unobserved heterogeneity) and correlated values.
7.1. Observable Game-Level Heterogeneity. If realizations of the game differ in a way
that is observable observable to the econometrician, such heterogeneity can easily be controlled for. In particular, the estimation procedures described in Section 5 can be extended
to include a vector Y of observable characteristics (that may vary in each realization of the
game) as a control in the estimation of the Pi (Â·) and Ti (Â·) functions determining the menu.
If such heterogeneity enters playersâ€™ valuations and actions in an additively or multiplicatively separable, single-index form, the econometrican can simply regress observations of
actions on observations of the vector Y and treat the residuals from this regression as coming
from a â€œhomogenizedâ€ game, as in the auction setting of Haile, Hong, and Shum (2003).
We discuss this separability condition in more detail below when we discuss unobserved
heterogeneity.
11Li and Liu (2015) propose an estimation approach for settings where the researcher instead knows that

the data is generated by a k double auction.

26

LARSEN AND ZHANG

Allowing for the equilibrium menu to vary with observable heterogeneity at the game level
also allows for the data to represent play from different equilibria of the underlying game:
as long as the equilibrium selection can be controlled for using observables, the presence of
multiple equilibria poses no threat to identification or estimation. We discuss this further
in Section 9.4 below.
7.2. Unobserved Heterogeneity. We focus here on correlation induced in values through
game-level heterogeneity that is observed by the players but not by the econometrician,
similar to the unobserved auction-level heterogeneity in Krasnokutskaya (2011). We study
a class of games that we call separable heterogeneity games, which are defined as follows. In
the first stage, common component W is drawn from the bounded distribution FW (Â·) and
commonly observed by all agents i âˆˆ {1 . . . m} but not the econometrician. In the second
stage, agentsâ€™ private values Vi are drawn independently from distributions Fi (Â·); agentsâ€™
values are then
VÌƒi = Vi + W.
In the third stage, agents take actions aÌƒi âˆˆ [ai , aÌ„i ], which are observed by the econometrician. We require the game to satisfy the following property:
Definition 2. We say that game G satisfies the separable heterogeneity game property if
for all aÌƒ1 . . . aÌƒm , âˆ†, and for all i
xi (aÌƒ1 + âˆ†, aÌƒ2 + âˆ†, . . . aÌƒm + âˆ†) = xi (aÌƒ1 , aÌƒ2 , . . . aÌƒm ) ,
ti (aÌƒ1 + âˆ†, aÌƒ2 + âˆ†, . . . aÌƒm + âˆ†) = ti (aÌƒ1 , aÌƒ2 , . . . aÌƒm ) + âˆ† (xi (aÌƒ1 , aÌƒ2 , . . . aÌƒm ) âˆ’ xÌ„i ) .

(14)
(15)

The separable heterogeneity game property can also be defined multiplicatively. We
focus on the additive case here for brevity. This property implies that, if all agents increase
bids by a constant amount âˆ†, the probability of any agent winning is unchanged, and
the prices paid by agents change by the same amount by which bids change. Intuitively,
this property is appropriate for games which are position-invariant, in the sense that the
structure of the game is unchanged when all bids are changed by a given amount. The
separable heterogeneity game property may not be appropriate, for example, in bargaining
settings with fixed costs, in which case the structure of the game may be qualitatively
different depending on the size of the payoff agents are bargaining over.12
Since the common component W is observed by all agents prior to agentsâ€™ action choices,
agents can condition their strategies on the common component W; thus, we can think of
12In such settings, one possible approach is to divide instances of the game into coarse partitions by ob-

servable characteristics that may affect payoff size. The separable heterogeneity game property may be a
reasonable assumption within each partition, and the approach described in this section could be applied
within partitions.

A MECHANISM DESIGN APPROACH TO IDENTIFICATION AND ESTIMATION

27

agentsâ€™ strategies in separable heterogeneity games as functions si (vi , w) mapping common
components and private values into actions. Bayes-Nash equilibrium in the full game requires that agentsâ€™ strategies constitute a Bayes-Nash equilibrium conditional on any value
of w. Fixing a given value of w, the game is identical to that of Section 3. Let Aw
i be a
random variable representing iâ€™s equilibrium action when the common component is w. As
in Section 3, we define the expected probability and transfer that i achieves when playing
ai in equilibrium as:
Piw (ai ) â‰¡ E xi ai , Aw
âˆ’i



, Tiw (ai ) â‰¡ E ti ai , Aw
âˆ’i



.

Agent iâ€™s expected utility when her type is vi and she plays ai when the common component
is w is
(vi + w) Piw (ai ) âˆ’ Tiw (ai ) âˆ’ (vi + w) xÌ„i .
Analogously to Section 3, equilibrium in a separable heterogeneity game with common
component w requires that iâ€™s strategy si (vi , w) maximize her utility in expectation over
the distributions of other agentsâ€™ actions Aw
âˆ’i . That is, fixing w, for all i, vi , we require
si (vi , w) âˆˆ arg max (vi + w) Piw (ai ) âˆ’ Tiw (ai ) âˆ’ (vi + w) xÌ„i .
ai

In the following proposition, we show that the equilibria of separable heterogeneity games
have a â€œposition invarianceâ€ property with respect to wâ€”if actions a1 . . . am are equilibrium
actions conditional on w, actions ai + w0 âˆ’ w are equilibrium actions under w0 .
Proposition 3. Fix some value of w, and suppose that strategies s1 (v1 , w) . . . sm (vm , w)
constitute an equilibrium of a separable heterogeneity game. Then, for any common component w0 , the following strategies constitute an equilibrium:

s1 v1 , w0 = s1 (v1 , w) + w0 âˆ’ w
..
.

sm vm , w0 = sm (vm , w) + w0 âˆ’ w.

Motivated by this proposition, we will define position-invariant equilibria by requiring
that agents play the same equilibrium for any common component w:
Definition 3. A position-invariant equilibrium is a set of position-invariant strategies
si (vi ), such that:
si (vi , w) = si (vi ) + w.
and si (vi ) constitute equilibrium strategies for w = 0.

28

LARSEN AND ZHANG

In the equilibrium conditional on w = 0, we have, as before in Section 3,


Ti0 (ai ) âˆ’ Ti0 a0i
0
0

(a
)
vi (ai ) >
âˆ€a
:
P
>
P
a
,
i
i
i
i
i
Pi (ai ) âˆ’ Pi a0i


Ti0 a0i âˆ’ Ti0 (ai )

âˆ€a0i : Pi (ai ) < Pi a0i .
vi (ai ) 6
0
Pi ai âˆ’ Pi (ai )
Thus, if we can recover the function Pi (ai ) and Ti0 (ai ), we can bound values or point
identify values as in Section 3. Unlike the setting with no unobserved heterogeneity, these
objects are not immediately identified from conditional expectations in the data. Rather, the
objects that can easily be identified in the data are noisy versions of Pi (ai ) and Ti0 (ai ) that
includeâ€”but cannot condition onâ€”the unobserved heterogeneity term in each realization
of the game. We will denote these objects
h 
i
h 
i
PÌƒi (aÌƒi ) â‰¡ E xi aÌƒi , AÌƒâˆ’i , TÌƒi (ai ) â‰¡ E ti aÌƒi , AÌƒâˆ’i .
Assuming the econometrician observes multiple independent observations of same underlying separable heterogeneity game in which a position-invariant equilibrium is played, the
true menu is identified.
Proposition 4. Pi (Â·) , Ti0 (Â·) are uniquely identified by PÌƒi (aÌƒi ) , TÌƒi (aÌƒi ) and actions {aÌƒi } from
a separable heterogeneity game in which the equilibrium is position invariant.
The intuition behind our identification result is as follows. Since the unobserved private
value components vi are independent by assumption, any correlation in observed actions
aÌƒi must be caused by to the unobserved heterogeneity W. Using a method similar to Krasnokutskaya (2011), we can thus separately recover the distribution FW of the unobserved
heterogeneity term W, and the distribution of actions that would have been played at a
realization of w = 0, which we will refer to as FAi . These distributions are identified from
the observed distribution of actions that includes the realized unobserved heterogeneity,
FAÌƒi , through a deconvolution argument. We then show that the distributions FW , FAi allow
us to recover Pi (ai ) , Ti0 (ai ) from the functions PÌƒi (aÌƒi ) , TÌƒi (aÌƒi ) through a series of deconvolutions and convolutions against FW (Â·). In particular, if agent i is the agent whose menu
and valuation we wish to identify (for example, suppose i is a seller in a bilateral bargaining
game and the other agent is the buyer), then Pi (ai ), the true underlying menu, solves:
Â´
Pi (ai ) fai (ai ) fW (aÌƒi âˆ’ ai ) dai
Â´
PÌƒi (aÌƒi ) =
,
fai (ai ) fW (aÌƒi âˆ’ ai ) dai
and Ti0 (ai ), the homogenized or true underlying transfer function, solves
Â´ 0
Ti (ai ) fai (ai ) fW (aÌƒi âˆ’ ai ) dai
Â´
,
TÌƒ (aÌƒi ) âˆ’ E (Wâˆ†Pi | aÌƒi ) =
fai (ai ) fW (aÌƒi âˆ’ ai ) dai

A MECHANISM DESIGN APPROACH TO IDENTIFICATION AND ESTIMATION

29

where the term E (Wâˆ†Pi | aÌƒi ) is given by
Ë†
E (Wâˆ†Pi | aÌƒi ) = (Pi (ai ) âˆ’ 1) (aÌƒi âˆ’ ai ) fai (ai ) fW (aÌƒi âˆ’ ai ) dai .
This identification argument for Pi (ai ) and Ti0 (ai ) immediately leads to an estimation
procedure. To describe the estimation, we now re-introduce subscripts j to denote observations in the data. Assume the econometrician observes the allocation xij , transfer tÌƒij , and
action aÌƒij for agent i in j = 1, ..., J games. The objects tÌƒij and aÌƒij include the unobserved
heterogeneity component wj . In order to perform the initial Krasnokutskaya (2011) deconvolution, the econometrician must also observe the action aÌƒij of at least one other agent.
For simplicity here we will assume the econometrician observes all agentsâ€™ actions, the set
{aÌƒi }, but only one is required. The first step is to estimate fW and each fAi (the densities
corresponding to FW and FAi ) through parametric or nonparametric maximum likelihood
using observed actions {aÌƒi }. The log-likehood function is given by
!
XË† Y
fAi (aÌƒij âˆ’ w; Î¸a ) fW (w; Î¸W )dw
j

(16)

i

The objects Î¸a and Î¸W represent vectors to be estimated, parameterizing the densities fW
and each fAi to belong to some parametric family or sieve space. The second step is to
estimate PÌƒ (Â·) and TÌƒ (Â·) which can be done through local linear regression just as in the
no-unobserved-heterogeneity case in Section 5.2.
Given the estimates of fAi (Â·) , fW (Â·) , PÌƒ (Â·) , TÌƒ (Â·), we can solve for Pi (Â·) , Ti0 (Â·) using minimum weighted distance, using our empirical ironing, shape-constrained spline basis functions suggested in Section 5.2 and described in detail in Appendix B. We propose quadratic
spline coefficients Î¸P , flexibly parameterizing Pi (Â·; Î¸P ), to solve the following objective function:
Ë† "Ë†
min
Î¸P

#2
Pi (ai ; Î¸P ) fAi (ai )fW (aÌƒi âˆ’ ai ) dai âˆ’ PÌƒi (aÌƒi )
Ë†


fAi (ai ) fW (aÌƒi âˆ’ ai ) dai daÌƒi .

(17)

Â´
This minimizes the integrated distance between Pi (ai ; Î¸P ) fAi (ai ) fW (aÌƒi âˆ’ ai ) dai and
Â´
PÌƒi (aÌƒi ), weighting by fAi (ai ) fW (aÌƒi âˆ’ ai ) dai , which is the density function of aÌƒi .13

13Weighting by the density of aÌƒ is ad-hoc and does not matter asymptotically, but in finite samples it
i

has the effect of lowering the estimation weight on regions where aÌƒi has low density, so PÌƒi (aÌƒi ) may not be
estimated accurately.

30

LARSEN AND ZHANG

We can then estimate Ti0 (Â·) as a function of P(Â·), parameterizing it as Ti0 (Pi (ai ; Î¸P ) ; Î¸T ),
where Î¸T are cubic spline coefficients chosen to solve
Ë† "Ë†
min
Î¸T



Ti0 (Pi (ai ; Î¸P ) ; Î¸T ) fAi (ai ) fW (aÌƒi âˆ’ ai ) dai âˆ’ TÌƒi (aÌƒi ) âˆ’ E (Wâˆ†Pi | aÌƒi )
Ë†

#2


fAi (ai ) fW (aÌƒi âˆ’ ai ) dai daÌƒi .

(18)

The minimum distance problems in (17) and (18) can be computed with standard gradient
descent methods. Once Pi (Â·) , Ti0 (Â·) are estimated, values can then be estimated using the
relationship sâˆ’1 (a) =

dT
dP

as in Section 5.2.

7.3. Identification with Non-independent Private Values. In this section, we relax
the assumption that values of different agents are independent. Suppose that agentsâ€™ values
V1 . . . Vm are drawn from some joint distribution F (v1 . . . vm ), which is common knowledge
to all agents. This incorporates and generalizes, for example, the affiliated private value
model of first-price auctions analyzed by Li, Perrigne, and Vuong (2002). As above, we
suppose that the agents play trading game G . We assume that the equilibrium of the game
is separating: equilibrium strategies are described by the si (vi ), where each si is invertible.
We show that, as in Section 3, we can derive bounds on the inverse functions vi (Â·) for
each ai . Our results in this section are complementary to a contemporaneous paper by
Kline (2016), which derives stronger identification results than ours under an additional
assumption about equilibrium monotonicity.
Let si (Â·) denote the equilibrium strategy of agent i. Since values are not independent,
equilibrium actions will be given by some joint distribution G (a1 . . . an ), derived from
F (v1 . . . vn ) and the equilibrium strategy si (Â·). Fix any given value vi of player i; conditional on vi , the distribution over values of agents âˆ’i is some F (vâˆ’i | vi ). This conditional
distribution of values, combined with the equilibrium strategies of other players sâˆ’i , induces
a conditional distribution over opponentsâ€™ actions G (aâˆ’i | vi ). Thus, in equilibrium, if agent


i is of type vi and plays action a0i , she attains the expected outcome (Pivi a0i , Tivi a0i ),


defined as the expectation over the expected outcomes xi a0i , Aâˆ’i , ti a0i , Aâˆ’i when
Aâˆ’i âˆ¼ G (aâˆ’i | vi ). That is,




Pivi a0i = E xi a0i , Aâˆ’i | Aâˆ’i âˆ¼ G (aâˆ’i | vi ) ,




Tivi a0i = E ti a0i , Aâˆ’i | Aâˆ’i âˆ¼ G (aâˆ’i | vi ) .
In order for type vi to play action ai = si (vi ) in equilibrium, si (vi ) must then satisfy:
si (vi ) = arg max vi Pivi (ai ) âˆ’ Tivi (ai ) âˆ’ vi xÌ„i .
ai

(19)

A MECHANISM DESIGN APPROACH TO IDENTIFICATION AND ESTIMATION

31

As in Section 3, this allows us to bound vi (ai ), the unique type that plays ai in equilibrium.
Proposition 5. For each ai , the unique v = vi (ai ) satisfies:

v =v (a )
v =v (a )

Ti i i i (ai ) âˆ’ Ti i i i a0i
vi =vi (ai )
v =v (a )
0
0
âˆ€
a
:
P
a
< Pi i i i (ai ) ,
v > v =v (a )


i
i
i
vi =vi (ai )
i
i
i
0
0
Pi
ai âˆ’ Pi
ai

v =v (a )
v =v (a )

Ti i i i a0i âˆ’ Ti i i i (ai )
v =v (a )
v =v (a )
v 6 v =v (a )
âˆ€ a0i : Pi i i i a0i > Pi i i i (ai ) .

(a
)
v
=v
i
i
i
i
i
i
0
(ai )
Pi
ai âˆ’ Pi

(20)

(21)

If the distribution F (v1 . . . vn ) has full support, these bounds collapse to a single point.
Proof. Follows from (19).



If the distribution F (v1 . . . vn ) has full support on the rectangle [min v1 , max v1 ] Ã— . . . Ã—
[min vn , max vn ], then the equilibrium probability distribution over action tuples G (a1 . . . an )
will likewise have full support on the product rectangle of actions played; thus, by observing
multiple independent repetitions of G , the econometrician can consistently estimate both
the equilibrium action distribution G (a1 . . . an ), and the outcomes conditional on all action
tuples:
Pi (a1 . . . an ) = E [xi (a1 , . . . an ) | a1 , . . . an ] ,
Ti (a1 . . . an ) = E [ti (a1 , . . . an ) | a1 , . . . an ] .
Note that G (aâˆ’i | vi = vi (ai )), the equilibrium action distribution conditional on v =
vi (ai ), involves the unknown quantity vi (ai ). However, this is equivalent to the conditional
distribution G (aâˆ’i | ai ), which can be derived from G (a1 . . . an ). Thus, for any ai , the
econometrician can estimate the functions:




v =v (a )
Pi i i i a0i = E xi a0i , Aâˆ’i | Aâˆ’i âˆ¼ G (aâˆ’i | ai ) ,




v =v (a )
Ti i i i a0i = E ti a0i , Aâˆ’i | Aâˆ’i âˆ¼ G (aâˆ’i | ai ) .
These functions, plugged into the equations in Proposition 5, allow us to identify the unique
vi (ai ).
This approach is related to that of Li, Perrigne, and Vuong (2002), although it is more
general, as it applies to incomplete information trading games more broadly, rather than
just auctions. The argument utilizes the fact that any type vi must play an equilibrium
action that is a best response to the distribution of opponentsâ€™ actions conditional on her
type. These conditional distributions can be estimated by the econometrician, allowing
us to identify types essentially as in Section 3. While our identifiation argument in this
section is quite general, estimation in this general correlated values setting would likely be
cumbersome given the number of different conditional objects to be estimated.

32

LARSEN AND ZHANG

Our approach in this section requires that the equilibrium strategy si (vi ) is strictly
separating. This assumption is necessary in order to estimate the distribution G (aâˆ’i | vi )
for the unique vi = vi (ai ) using the observed G (aâˆ’i | ai ). If si were not invertible, in
general vi (ai ) would be a set of vi values; thus, the observed G (aâˆ’i | ai ) would be a
mixture over distributions G (aâˆ’i | vi ) for different values vi âˆˆ vi (ai ) and the researcher


would not be able to use G (aâˆ’i | ai ) to consistently estimate Pivi a0i , Tivi a0i for any
given type vi .

8. Application to Auction with Sequential Bargaining
We apply our approach to study a complex game used in wholesale used-car markets,
that of a secret reserve price auction followed by alternating-offer bargaining between the
seller and high bidder.14 The presence of sequential bargaining in this mechanism, with
both parties having private information about their valuations, puts this game in a class
for which there is no known analytical solution or full equilibrium characterization: that
of two-sided bargaining games with two-sided incomplete information and continuum of
agent values. The properties of such games are unknown. In particular, it is unknown how
efficient such a mechanism is in practice relative to efficient bargaining, and how the gains
from trade created by the mechanism are divided among the participants.15 Our approach
allows us to estimate playersâ€™ valuations and expected gains from trade in this game without
imposing a particular extensive form or equilibrium selection. We then use these objects
to measure how efficient the market is and how the total welfare is split among buyers and
sellers.
We also use our estimates to address an additional question of interest for market design.
The seminal work of Myerson and Satterthwaite (1983) demonstrated that, when there is
uncertainty about whether gains from trade exist and when a mechanism must be budgetbalanced, any mechanism between one buyer and one seller will fall short of the ex-post
efficient outcome.16 In used car markets, there is not merely one buyer, but multiple buyers.
The natural question then follows: with N > 1 buyers, does the Myerson and Satterthwaite
(1983) result still hold, or is ex-post efficiency achievable? Below, we describe the setting
and data and explain how we apply our menu approach to this setting. We then discuss

14Auctions followed by post-auction bargaining between the buyer and seller have been reported in a number

of other settings as well, such as procurement. In an important precurser to GPV, Elyakime, Laffont, Loisel,
and Vuong (1997) analyze this mechanismâ€™s use in timber auctions.
15See discussions of complications introduced in these settings in Ausubel, Cramton, and Deneckere (2002).
16The ex-post efficient outcome is for trade to occur whenever the buyer values the good more than the
seller.

A MECHANISM DESIGN APPROACH TO IDENTIFICATION AND ESTIMATION

33

counterfactual results, comparing the mechanism used in practice to the efficient mechanism for N buyers and 1 seller and analyzing how this relates to Myerson-Satterthwaite
inefficiency.
The application we present in this section is related to a previous study focusing on this
market, Larsen (2014). That previous paper also reports welfare measures under counterfactual mechanisms, but focuses solely on the post-auction bargaining element of the game,
whereas here we study instead the full N-buyer, 1-seller mechanism. That paper also did not
apply the menu approach we present herein for identification or for estimation, but instead
applied undominated-strategy bounds, akin to those in Haile and Tamer (2003); Section
9.3 below highlights the distinction between these types of approaches for other settings.
Our focus in this section is on applying the menu approach to estimating the distribution
of seller valuations given that this is the particularly tricky object to recover structurally,
as described below. Other preliminary steps for estimation are rather straightforward (e.g.
controlling for observable heterogeneity), and we follow the same approach as in Larsen
(2014) for those preliminary steps. We describe the full estimation procedure, including
these preliminary steps, below.
8.1. Background and Data. The wholesale used-car industryâ€”an industry with revenues
above $80 billion annually in the United Statesâ€”operates through a network of several hundred auction house locations scattered throughout the country (and operations are similar
internationally). These auction houses have been a part of the US used car market for over
seventy years. Over 15 million cars pass through auto auction houses annually. At each
auction house location, used-car dealers come to buy cars from other car dealers or from
companies who possess large fleetsâ€”such as rental car companies, banks with repossessed
vehicles, or manufacturers with lease-buyback vehicles. Sales at a given auction house typically take place once a week, and the seller of a given car brings the car to the auction house
several days before the sale and reports a secret reserve price to the auction house. On the
day of the sale, buyers (used-car dealers) come to the auction house, with many buyers
traveling long distances to attend. Cars are auctioned off roughly in the order they arrive,
with multiple auctions running simultaneously, as multiple sales lanes run throughout the
building where the sale takes place.
The mechanism proceeds as follows: buyers participate in an ascending auction, indicating their willingness to pay the current price, with the bidding controlled by a human
auctioneer who raises the price until only one bidder remains. The auction itself takes about
90 seconds (Lacetera, Larsen, Pope, and Sydnor 2016). If the final auction price exceeds the
secret reserve price (observed to the auctioneer, but not the buyers), then the high bidder is
awarded the car. If not, the high bidder and seller enter into an alternating-offer bargaining

34

LARSEN AND ZHANG

game, mediated by an auction-house employee over the phone. The high bidder is allowed
the chance to opt out of bargaining before the seller is contacted.
Our data consists of 133,249 realizations of the auction-plus-bargaining game from sales
by fleet/lease sellers (as opposed to sales where the seller was a used-car dealer) from six
different auction house locations from 2007â€“2010. For each game, the primary variables we
observe are the sellerâ€™s reported secret reserve price, the final transaction price, the final
allocation (i.e. an indicator for whether the car sold), and the auction price. We also
observe a large set of observable characteristics of each sale, including characteristics of the
car and features of the auction house environment at the time of the sale. Our data also
contains bid logs for a subset of sales, from which the number of bidders can be inferred.

8.2. Applying the Menu Approach to Used-Car Markets. To improve clarity, we
will introduce here some notation specific to our application. The key object of interest for
our counterfactual exercises is the distribution of seller private valuations, VS âˆ¼ FS . The
distribution of buyer valuations, VB âˆ¼ FB , is also of interest, but Larsen (2014) demonstrates
that, in this setting, bidders in the auction cannot gain by deviating from truthtelling, and
thus FB can be estimated quite easily using a standard order statistics inversion using the
high bid from the auction, a random variable we denote HB âˆ¼ FHB .17 We assume here that
VB and VS are independent and hence, by truthtelling, HB and R will also be independent.
We further assume that the data represents independent realizations of play from a single,
position-invariant equilibrium of the game (with the analytical characterization of that
equilibrium unknown to us as the econometricans).
To estimate FS , we apply the results for imperfectly observed actions from Section 4 and
the results for unobserved heterogeneity from Section 7.2. Specifically, we will assume that
the sellerâ€™s secret reserve price (a random variable R âˆ¼ FR ) is a strictly increasing function
of her valuation VS â€”and thus serves as a one-to-one action shifterâ€”and that the game
satisfies the separable heterogeneity property of Section 7.2. Larsen (2014) demonstrates
that these two properties will indeed be satisfied in Bayes-Nash equilibria of this game as

17N, the number of bidders, varies from one instance of the game to the next. We assume N is independent

of VS and VB . For any y, FB (y) is estimated by solving the following order-statistic relationship:
X


FHB (y) =
Pr(N = n) nFB (y)nâˆ’1 âˆ’ (n âˆ’ 1)FB (y)n ,

(22)

n

where the distribution FHB (y) is the distribution of the high bid from the auction, an estimate of which
comes the maximum likelihood estimation described below. Pr(N = n) is the distribution of the number of
bidders, which we estimate using the empirical distribution of N for the subset of auctions with big log data.
See Larsen (2014) for more details on this bid log data and for a proof that the maximum order statistic
distribution (which we use in counterfactuals) implied by the estimated FB and by Pr(N = n) is not sensitive
to the fit of Pr(N = n).

A MECHANISM DESIGN APPROACH TO IDENTIFICATION AND ESTIMATION

35

long as bargaining strategies do not jump discontinuously with the auction price.18 We can
then apply our results to estimate the true menu faced by sellers and, consequently, the
equilibrium mapping from sellersâ€™ reserve price offers to sellersâ€™ underlying values, given by
the derivative of that menu.
Throughout this section, for simplicity of exposition, we will omit the subscript i = S
from menu objects (P(Â·), T (Â·), etc.) because we only apply the menu approach to estimating
seller valuations. We will also omit the (Ë˜Â·) notation from menu objects even though these
will be estimated here using only a partially observable action rather than the sellerâ€™s full
action vector (which is not observable). The reserve price functions act an action shifter Z
in this application, but for clarity we will simply refer to the reserve price as R throughout.
We first describe our preliminary estimation steps before we apply the actual menu
estimation. Because of the position-invariance property, we can first control for observable
heterogeneity through a regression of auction prices and reserve prices on Yj , a large set
of observables.19 We assume this variable enters valuations and actions as a single index,
Yj0 Î·, and we estimate Î· through a linear regression. For the sake of concreteness, we will
refer to the predicted value from this regression, Yj0 Î·Ì‚, as the â€œbluebookâ€ value of the car.
We treat the residuals from this regression (that is, reserve prices and auction prices minus
the bluebook) as contaminated with an unobserved heterogeneity term, W âˆ¼ FW , which we
assume is independent of VB , VS , and N. Let these residuals be denoted by the random
f = HB + W. We then estimate FW , FR , and FHB by maximum
variables RÌƒ = R + W and HB
likelihood, as in (16), parameterizing each distribution as a Normal distribution.
To apply the menu approach, we then estimate the object PÌƒ (rÌƒ)â€”the noisy measure of the
expected allocation functionâ€”a using local linear regression of xj on rÌƒj using a Gaussian
kernel.20 To estimate TÌƒ (rÌƒ), we perform a similar local linear regression, but where the

18While our estimation relies strongly on the secret reserve price being a one-to-one function of type, even if

this assumption is violated, our results in Sections 4.3 and 4.4 suggest that, so long as the setting is relatively
smooth, our estimates of value distributions and trade surplus are likely to be close to true values.
19The vector Y contains fifth-order polynomial terms (all degrees of the polynomial from one through five)
j
in the auction housesâ€™ own bluebook estimate and the odometer reading; the number of previous attempts
to sell the car; the number of pictures of the car displayed online on the auction houseâ€™s website; a dummy
for whether or not the odometer reading is considered accurate, and the interaction of this dummy with
the odometer reading; the interaction of the odometer reading with car-make dummies; dummies for each
make-model-year-trim-age combination (where age refers to the age of the vehicle in years); dummies for
condition report grade (ranging from 1â€“5); dummies for the year-month combination of the date of the
sale and for auction house location interacted with hour of sale; dummies for 32 different vehicle damage
categories recorded by the auction house; dummies for each seller who appears in at least 500 observations;
dummies for discrete odometer bins; and several measures of the thickness of the market during a given sale
and of the order the cars were run (see Larsen 2014 for details on the construction of these measures).
20We choose a bandwidth of 500 for this estimation. The mean and standard deviation of reserve prices in
the data are $10,385 and $5,805.

36

LARSEN AND ZHANG

dependent variable when trade occurred is the final transaction price minus Yj0 Î·Ì‚, denoted,
tÌƒj .
Given the estimates of FR , FW , PÌƒ (rÌƒ), and TÌƒ (rÌƒ), we solve for the true menu {(P (r) , T 0 (r))}
using minimum weighted distance as described in (17) and (18). For P (r) we use quadratic
splines with 9 knots, constrained to be nondecreasing. For T 0 (r) we use cubic splines with
7 knots, constrained to be convex. Finally, since the object T 0 (P (r)) is represented as a
convex sum of splines, we can analytically take its derivatives, giving us the final estimated
mapping from reserve prices to values vS (r). We then estimate the gains from trade attained
by a seller with value vS as vS P(r(vS )) âˆ’ T 0 (r(vS )), where r(vS ) is the inverse of vS (r).21
8.3. Estimation Results. Before displaying the estimated menu and valuations, we first
provide some descriptive evidence that different secret reserve prices do indeed appear to
yield different payoffs for sellers, and hence can serve to help separate seller types as a our
method requires. In the left panel of Figure 5 we show the probability of sale as a function
of sellersâ€™ residualized reserve prices, RÌƒ. This probability is estimated from a local linear
regression, corresponding to 1 âˆ’ PÌƒ (rÌƒ), as PÌƒ (rÌƒ) is the probability of the seller keeping the
good. The units for the horizontal axis are $1,000, and these numbers can be negative
because they are the result of subtracting off Yj0 Î·Ì‚; these numbers can thus be thought of
indicating where the reserve price lies relative to the bluebook estimate of the car, (Yj0 Î·Ì‚).
The right panel of Figure 5 displays, on the vertical axis, the auction price and the final
price from the mechanism, again from a local linear regression against reserve prices.22 The
regressions in each panel use observations with reserve prices lying between the 0.01 and
0.99 quantiles of empirical reserve prices.
Figure 5 demonstrates that auction prices are correlated with reserve prices, violating
the independence assumption of the baseline model of Section 2. This suggests that it
is important to account for unobserved heterogeneity in this setting. We also see that
sellers who post higher reserve prices sell with lower probabilities, but are able to attain
higher prices conditional on sale. In particular, the difference between the average final
price conditional on sale and the average auction price is increasing in the reserve price.
The average auction price roughly measures the value of unobserved car-level heterogeneity
conditional on the reserve price.23 Thus, if the difference between the final price and the
21Appendix D describes how computing buyersâ€™ gains from trade requires an additional assumption: that

each seller type trades with all buyer types above a certain cutoff. Larsen (2014) demonstrates that this
property will indeed be satisfied in Bayes-Nash equilibria of this game, relying on results from Storms (2015).
22Recall that auction prices and final prices will not necessarily coincide with one another because of the
bargaining component of the mechanism. Also, the final price exists only for observations of the game that
end in trade, whereas the auction price always exists.
23To see this, note that, since HB
f = HB + W, RÌƒ = R + W, and HB, R, W are mutually independent, we have
h
i
h
i
f | RÌƒ = E W | RÌƒ .
that E HB

A MECHANISM DESIGN APPROACH TO IDENTIFICATION AND ESTIMATION

37

auction price is increasing in the reserve price, this suggests that sellers who post high
reserve prices are forgoing some probability of selling the good in order to obtain a higher
sale price.
In Figure 6, we show the local linear estimates of PÌƒ (rÌƒ) , TÌƒ (rÌƒ), as well as the unobserved
heterogeneity corrected estimates P (r) , T 0 (r). We also display intermediate steps in this
unobserved heterogeneity correction to illustrate the procedure. For probabilities, the PÌƒ (rÌƒ)
function is essentially a noisy version of the P (r) function; thus, correcting for unobserved
heterogeneity will yield an estimate of P (r) that is steeper than PÌƒ (rÌƒ). This can be seen in
panel A by comparing the P (r) line to the PÌƒ (rÌƒ) line. For transfers, unobserved heterogeneity necessitates two corrections to the TÌƒ (rÌƒ) function. First, we subtract from TÌƒ (rÌƒ) the term
E (Wâˆ†P | rÌƒ), which represents the expected value of the unobserved heterogeneity conditional on rÌƒ. Intuitively, for higher values of rÌƒ, we will observe that trades tend to happen at
higher prices, but much of this is due to the unobserved heterogeneity term W being higher
on average, rather than the transfer T 0 (r) being higher. In panel B, comparing the TÌƒ (rÌƒ) line
to the TÌƒ (rÌƒ) âˆ’ E (Wâˆ†P | rÌƒ) line shows that this correction makes the slope of the expected
0
transfer function significantly

 less negative. Secondly, T (r) is essentially a noise-corrected
version of TÌƒ (rÌƒ) âˆ’ E Wâˆ†PÌƒ | rÌƒ , and thus the slope and concavity of T 0 (r) are both larger in

absolute value than the noisy version. The net effect is that T 0 (r) is much less negatively
slopedâ€”and somewhat more concaveâ€”than the original nonparametric estimate TÌƒ (rÌƒ). In
each panel, the yellow line displays the convolution of the estimated allocation or transfer
function against FW , constructed from the left-hand side of (17) and (18), as a check on fit;
in each case, the estimate aligns closely with the PÌƒ (rÌƒ) or TÌƒ (rÌƒ) âˆ’ E (Wâˆ†P | rÌƒ) function as it
should.
We now display, in Figure 7, the estimated menu constructed from the objects P (r) and
T 0 (r),

with P (r) on the horizontal axis and T 0 (r) on the vertical axis. Each point on the

menu corresponds to an expected payoff for the seller from choosing a particular secret
reserve price. We note here that our formulation for payoffs described in (1) in Section 2,
vP(a) âˆ’ T (a), is perhaps more intuitive in a game where the agent of interest is a buyer, in
which case P(a) represents the expected probability of the buyer winning and T (a) is the
expected payment made by the buyer. Here, with the agent being a seller, P(r) represents
the probability of the seller keeping the good (so 1 âˆ’ P(r) is the probability that a sale
occurs) and T 0 (r) is the expected transfer paid by the seller (so âˆ’T 0 (r) is the expected
payment received by the seller). Also, as highlighted above, all seller values are relative
to the estimated bluebook value of the car, Yj0 Î·Ì‚, so a seller value of -$1,000, for example,
represents a seller who values the car at $1,000 below bluebook.

38

LARSEN AND ZHANG

With this interpretation in mind, we compare several points long the menu, marked Aâ€“D
in Figure 7. Each point corresponds to a distinct reserve price, which we will refer to as
rA â€“rD , where rA < rB < rC < rD . Points A and B lie along the downward-sloping portion
of the menu. Choice rA would yield a lower probability of keeping the good and a lower
expected transfer (i.e. a less negative T 0 (r)) than would choice rB . Therefore, a seller who
chooses rA must want to get rid of the car more than a seller who chooses rB , implying that
the former seller has a lower value (lower s) than the latter. This is precisely what Figure 7
shows: the derivative of the menu at rA is more negative than at rB , and these derivatives
(by Corollary 2) reveal sellersâ€™ values, so a seller choosing rA must therefore have a value s
that is farther below the bluebook value of the car than does a seller choosing rB . Points
C and D lie along the upward-sloping portion of the menu. Comparing these two points,
choice rC would yield a lower probability of keeping the good but a higher expected transfer
to the seller (i.e. a more negative T 0 (r)). Therefore, a seller choosing rD must want to keep
the good more (i.e. have a higher s) than a seller choosing rC . This is again clearly revealed
by the derivatives of the menu at these points: the derivative is more positive at point D
than at point C.
Taking these derivatives at each point r yields the mapping between the reserve price and
the inferred value s corresponding to that reserve price. We display this mapping with the
solid blue line in panel A of Figure 8, with reserve prices on the horizontal axis and values on
the vertical axis. The units for each axis are $1,000. The dashed lines indicate a pointwise
95% confidence band computed by bootstrapping the exercise 500 times. The red line shows
the 45 degree line (the reserve prices itself) for comparison. To interpret this plot, consider
a particular point on this mapping at approximately r =-$300 (-0.3 on the horizontal axis).
We see that the corresponding inferred value for such a seller is approximately s =-$1,000
(a value of -1 on the vertical axis). Therefore, a seller who chooses a reserve price that is
$300 below the bluebook is actually willing to let the car go for up to $1,000 below the
bluebook.
The estimated reserve-value mapping, combined with the distribution FR of reserve prices,
gives us an estimated distribution FS of sellersâ€™ values, and we plot this in panel B of Figure 8.
For comparison, we also plot the estimated distribution of the highest-value buyer, which
is the buyer who potentially ends up in bargaining with the seller.24 The distributions
indicate that 80% of sellers have values less than about $50 below the bluebook estimate,
while nearly 90% of buyers have values above this amount. This suggests that there is a
lot of room for trade gains in this market, which is to be expected given that these auction
houses have been functioning well as market makers in this industry for three quarters of
24This distribution can be computed by using the objects F and Pr(N = n), described above. The maximum
B

order stastic distribution is then given by FB(1) (y) =

P

n

Pr(N = n)FB (y)n .

A MECHANISM DESIGN APPROACH TO IDENTIFICATION AND ESTIMATION

39

a century. However, panel B also shows overlap between seller and buyer distributions,
which, by the Myerson and Satterthwaite (1983) Theorem, could lead to inefficiency in this
market due to incomplete information, with some trades failing to occur even when the
highest-value buyer values the good more than the seller. We will analyze this in more
detail below.
We pause to remark on individual rationality. Throughout our identification arguments
and estimation process, we have only used local incentive compatibility conditions of sellersâ€”
that is, the condition that outcomes under the reserve prices chosen are preferred to the
outcomes from any other possible choice of reserve price. We have not exploited or enforced
individual rationality constraints. Individual rationality (IR) for the seller refers to the fact
that the seller should always be able to choose an outcome corresponding to (P, T ) = (1, 0);
that is, keeping the good with probability 1 and receiving no payment. There is no simple
way to enforce this constraint jointly with our estimation procedure, but it can be imposed
after the fact. In our estimated menu, we find that the IR constraint is violated for the
roughly 17% of seller types who are inferred to have the highest values, implying that
these sellers would be better off ex-ante by not participating in the mechanism. Since it
is empirically implausible that sellers would actually violate individual rationality, in our
counterfactual exercise below, we will analyze the mechanismâ€™s efficiency only for the 83%
of seller types for whom the IR constraint is satisfied. This is equivalent to assuming that
IR-violating sellers have infinitely high values, which is conservative for estimating actual
and potential gains from trade as it treats these sellers as never having potential gains from
trade. An alternative approach would be to assume that all IR-violating sellers have the
same values and expected outcomes as the highest non-IR-violating seller type. We found
that taking this approach did not have noticeable effects, qualitatively or quantitatively, on
our counterfactual results.

8.4. Efficiency, Optimality, and Equity. We now compare the outcomes observed in
the data to a number of counterfactual benchmarks in order to study efficiency, optimality,
and equity. These counterfactual benchmarks can each be computed using the estimated
distributions of valuations. First, we calculate the fully efficient outcome, where trade
occurs whenever the highest-value buyer values the good more than the seller. Second, we
calculate the the second-best, information-constrained mechanism. This is the mechanism
that would maximize ex-ante efficiency in a setting with N buyers and 1 seller, taking into
account playersâ€™ incentive compatibility and individual rationality constraints (and budget
balance). This mechanism is similar the second-best mechanism studied in Myerson and
Satterthwaite (1983), but theirs is for just 1 buyer and 1 seller. Appendix D discusses
technical details of how we solve for this mechanism. Third, we consider the mechanism

40

LARSEN AND ZHANG

that would be optimal for the seller in this setting, which is a second-price auction with an
optimally chosen public reserve price. Fourth, we consider the buyer-optimal mechanism,
in which the highest-value buyer makes a take-it-or-leave-it offer to the seller.
These above mechanisms allow us to examine the efficiency of the real-world mechanism
and its optimality relative to what would be optimal for one-party or the other. To study
equityâ€”who obtains what share of the total surplusâ€”we impose no assumptions a priori
about who has more bargaining power, but instead let the data speak to this question by
examining the buyer and seller surplus in each of these counterfactual mechanisms and in
the real-world mechanism.
Table 3 displays the welfare measures for each of the counterfactual mechanisms and for
the real-world mechanism. Rows 1â€“4 report each of the four counterfactual mechanisms,
followed by the real-world auction-plus-bargaining mechanism in the final row. For each
mechanism, the first column reports the probability of trade. Columns 2â€“6 report total
expected surplus, expected surplus and margin for the seller (seller margin is the difference
between the sellerâ€™s price and the sellerâ€™s value for transacted cars), and expected surplus
and margin for the highest-value buyer (buyer margin is the difference between the buyerâ€™s
value and the price paid for transacted cars). The final column reports the percentage of
the surplus achieved by the seller.
In terms of surplus division (the final column in Table 3), the mechanism in the data gives
the seller 60.4% of the trade surplus, slightly lower than the 66.8% that sellers achieve in the
second-best mechanism, and lying between the extremes of 41.6% and 76.3% that the seller
would achieve in the buyer-optimal and seller-optimal mechanisms respectively. Quantitatively, this implies that sellers achieve $2,093 of surplus in the real-world mechanism,
compared to $2,421 in the second-best mechanism, $2,628 in the seller-optimal mechanism,
and $1,335 in the buyer-optimal mechanism. We can also calculate average margins for
sellers by dividing seller utility by the probability of trade. This is $2,571 in the real-world
mechanism, compared to $1,940 in the buyer-optimal mechanism and $3,443 in the seller
optimal mechanism. Given that average car prices are approximately $10,000, this implies that sellersâ€™ markups over their reservation values are approximately 26% of car prices
in the real-world mechanism, compared to 19% and 34% at the buyer and seller-optimal
mechanisms respectively. Buyer surplus is $1,374 in the real-world mechanism, compared
to $818 and $1,874 in the seller-optimal and buyer-optimal mechanisms respectively. In
margin terms, buyersâ€™ margins in the real-world mechanism are roughly 14% of car prices,
computed by dividing buyer surplus by the probability of trade.
In Figure 9, we display the seller surplus and trade probability specific to different seller
types (different values s) in the real-world mechanism and in each counterfactual mechanism.

A MECHANISM DESIGN APPROACH TO IDENTIFICATION AND ESTIMATION

41

Panel A demonstrates that in the real-world mechanism sellers with values near the median
(the median seller value is approximately $78 below the bluebook estimate) trade with
substantially higher probabilities than in the buyer- and seller-offer mechanisms; sellers
with values towards the extremes of the distributions trade with probabilities equal to or
lower than the seller-optimal mechanism. This suggests that sellers with values close to the
median contribute significantly to the relatively high efficiency of the real-world auctionplus-bargaining mechanism. Panel B demonstrates that the real-world mechanism yields
sellers a surplus that, across most of the range of seller types, is roughly a constant fraction
of what the seller could achieve in the seller-optimal or the second-best mechanisms. At
seller values closer to the bluebook estimate (i.e. at seller values closer to 0 on the horizontal
axis), the seller-optimal mechanism yields the seller a much higher surplus than in the realworld or second-best efficient mechanisms.
Returning to Table 3, we find that the Myerson-Satterthwaite impossibility result for
1 buyer and 1 sellerâ€”which implies that the second best will always fall short of the first
best when buyer and seller distributions overlapâ€”imposes very weak restrictions on feasible
mechanisms in this context: the maximal possible second-best surplus is 99.99% of the firstbest trade surplus. This is partly because competition between multiple buyers (N > 1)
tends to alleviate Myerson-Satterthwaite impossibility. In Figure 10, we examine this result
more closely. We re-compute the second-best and first-best mechanisms under different
assumptions for the average number of bidders present at the auction, varying this number
smoothly between between 1 and 2.34, the number estimated from bid log data.25 The
upper (blue) line displays the percentage of the first-best surplus achievable in the secondbest mechanism, the middle (red) line displays the fraction of first-best sales achieved by
the second-best mechanism, and the lower (yellow) line displays the percentage of the total
surplus sellers achieve in the second-best mechanism. The plot shows that, as the average
number of bidders increases, the second-best achieves a larger fraction of the first-best
surplus and sale volume, and sellers attain a larger share of the total surplus.
Table 3 also demonstrates that the auction-plus-bargaining mechanism in the data is
fairly efficient relative to the second-best, achieving $3,467 in expected gains from trade,
which represents 95.6% of the second-best surplus level, $3,626. However, the mechanism
achieves trade only 81.4% of the time, whereas the second-best mechanism would achieve
trade 96.4% of the time. Interestingly, if the auction house were to employ a mechanism
that was optimal for either the seller or the buyer, the probability of trade would drop to
76.3% and 68.8%, respectively, and the total surplus would drop to $3,445 and $3,209. This
would only be a slight drop in trade or total surplus in the case of the seller mechanism.
25We do this by taking convex combinations between the distribution of the number of bidders observed in

the data, and a distribution with a unit mass at 1 buyer.

42

LARSEN AND ZHANG

The auction house revenue model is such that fees are paid only when trade occurs, so
the auction house cares particularly about keeping the probability of trade high. This
may explain in part why the auction-plus-bargaining mechanism is used in practice over a
traditional auction with a reserve price; while the latter would be optimal for the seller, it
would reduce the probability of trade, reducing auction house revenue from fees.

9. Discussion
9.1. Counterfactuals. As highlighted in the introduction, a number of counterfactual exercises of interest for studying real-world mechanisms involve comparing a mechanism used
in practice to some theoretical benchmark that achieves some notion of efficiency, optimality, equity, no-collusion, efficient collusion, etc. Or the counterfactual may involve a change
to an alternative mechanism completely, such as a shift from a median price auction to a
first-price auction. Counterfactuals such as these can be performed using the objects our
approach delivers. Certain types of counterfactuals, however, would not be feasible using
our approach. This includes any counterfactual in which the researcher needs to be able to
simulate from the game played in the data and solve for an equilibrium. For example, in
our application to used-car auctions, it would be infeasible to use our approach to study
the question of what would happen if credit constraints were introduced or if players were
required to pay a cost for each bargaining offer made. Such counterfactuals would require
being able to solve for equilibria of an alternating-offer offer bargaining game with twosided incomplete information (which, as explained above, is beyond the state of the current
theory literature). Our approach explicitly avoids modeling the game actually played in
the data, achieving identification of primitives without solving for an equilibrium. It is an
incomplete model approach. We see this as a plus for the approach, making it capable of
applying to settings where the rules of the game are either unknown or the gameâ€™s equilibria
are complex, but the approach does indeed rule out studying some counterfactuals that the
additional structure of a complete model could deliver.

9.2. Beliefs and Rational Expectations. Throughout this paper, we have assumed
Bayes-Nash equilibrium, which requires that agents have rational expectations about the
distributions of opposing actions, and thus know the functions P (a) , T (a) for any action a
that they could play. This assumption is important for our estimation procedure; if agentsâ€™
beliefs coincide with the true conditional expectations P (a) , T (a), we can simply estimate
agentsâ€™ beliefs using expected outcome functions in data. Our approach is in fact robust to
some deviations from Bayes-Nash equilibrium: since only agent iâ€™s best response condition

A MECHANISM DESIGN APPROACH TO IDENTIFICATION AND ESTIMATION

43

is used to estimate her valuation, inference about agent iâ€™s value only requires that agent i
has correct beliefs about opponentsâ€™ actions, not that all agents are rational.26
Our approach can fail for agents who do not have correct beliefs about the distribution
of opponentsâ€™ actions. These agents can be thought of as optimizing with respect to some
PÌ‡ (a) , TÌ‡ (a) functions which may differ from empirical averages, and the econometrician
must then take an essentially unverifiable stance on how agentsâ€™ PÌ‡ (a) , TÌ‡ (a) functions are
formed. A number of approaches have been proposed in the literature. Agarwal and Somaini
(2018) estimate values assuming rational expectations as well as coarse and lagged expectations. Syrgkanis, Tamer, and Ziani (2017) explore inference in auctions under different
information assumptions. In a related literature, Doraszelski, Lewis, and Pakes (2018) show
that firms in a new market for frequency response behave in a way that is more consistent
with adaptive learning than rational-expectations equilibrium.
Belief formation in multi-agent games is a difficult and important question in the literature; further discussion is beyond the scope of this paper, but we emphasize that the
assumption of rational expectations is important for our methods to work. This may be
a reasonable assumption for marketplace-like settings, in which traders interact frequently
in environments that are relatively stationary over time, but it may be less appropriate
for large one-shot mechanisms, or nonstationary settings in which agents are learning and
converging towards optimal behavior over time.
9.3. Belief Estimation versus Undominated-Strategy Approaches to Identification. This paper, along with GPV and many of the papers discussed in the subsection
above, assumes that agents are optimizing with respect to some beliefs about outcomes,
and moreover that the econometrician can estimate these beliefs. If these beliefs can be
estimated, revealed preference arguments can be applied to identify agentsâ€™ values. We view
these papers as conceptually distinct from a set of identification and estimation approaches
that are based instead on the concept of rationalizability, or undominated strategies. Examples include Haile and Tamer (2003) (or recent work by Chesher and Rosen (2017)) for
estimating bounds on buyer valuations in ascending auctions or Larsen (2014) for estimating bounds on seller valuations in bargaining games. Rather than taking a stance on what
agentsâ€™ beliefs about outcomes are, these approaches rule out only values under which actions observed in the data are dominatedâ€”that is, values for which particular actions could
not to be rationalizable by any belief. In the classic example of Haile and Tamer (2003),
an agent bidding some amount y at some point in an ascending auction must have value
26A similar argument is made in Nekipelov, Syrgkanis, and Tardos (2015), who argue that many learning

algorithms should eventually converge to regret-free behavior, which motivates using no-regret conditionsâ€”
essentially best-response conditions for stationary averages over opponentsâ€™ actionsâ€”in estimation.

44

LARSEN AND ZHANG

above y; if not, there is no possible outcome that the agent could achieve from bidding y
that would give the agent positive utility.
The belief estimation approach requires strictly stronger assumptions about agentsâ€™ beliefs than the rationalizability-based approach; if the econometrician is willing to make
these assumptions, the benefit can be powerful identification results with weaker assumptions about game structure. In contrast to rationalizability-based approaches such as Haile
and Tamer (2003), the approach we take here allows the econometrician to use essentially
no information about the rules of the game; all relevant information about game rules is
inferred from observing game outcomes. Moreover, rationalizability-based approaches tend
to only allow partial identification of values, whereas our approach can often achieve point
identification.
We believe that these two approaches can be used in a complementary manner. In some
settings, for example, dominance-based arguments could be used to robustly find bounds
on agentsâ€™ values, and the stronger assumption of Bayes-Nash equilibrium could be used
more tentatively to point-identify values.
9.4. Multiple Equilibria. We assume that agents are playing a single equilibrium across
all observations. In some marketplace-like settings, agents interact with anonymous trading
partners and few observables are available for agents to coordinate on; the assumption that
all agents are playing the same equilibrium may be plausible in these settings. In other
settings, agents may be able to coordinate to play different equilibria based on various
features of the environment that they observe. For example, in timber auctions, agents
bidding in auctions for high quality timber could play a certain equilibrium, bidding in
a systematically different way than agents bidding in auctions for low quality timber. In
such settings, if the econometrician observes all possible characteristics that agents could
use for coordination, the problem of multiple equilibria could be addressed by estimating
equilibrium menus conditional on observables, rather than pooling all observations into a
single menu. This effectively allows a different equilibrium to be played for each possible
combination of observables characterizing a trading game. There may be setting in which
agents play different equilibria conditional on variables unobserved by the econometrician;
this presents an interesting unobservable heterogeneity problem for which we do not yet
have a solution.
Examples of features on which equilibrium selection can depend would be a reserve price
in an auction or the number of competing bidders in an auction. If reserve prices are present
and vary from one instance of the game to the next, and if these reserve prices are observable
to agents, the econometrician would also need to observe and condition on reserve prices in
order to correctly estimate equilibrium menus for buyers. Similarly, if agents can observe

A MECHANISM DESIGN APPROACH TO IDENTIFICATION AND ESTIMATION

45

the number of their competitors and this number affects equilibrium behavior (it would
do so in a first-price auction, for example, but not in an ascending button auction), then
econometrician should observe and condition on this quantity when estimating equilibrium
menus. If, however, agents themselves do not observe the number of their competitors, the
econometrician need not observe it either in applying the menu approach.
9.5. Affine-Utility Games. We focus in this paper on trading games, in which agentsâ€™
utility functions depend on an indicator variable xi for trade and real-valued transfers
ti . However, our arguments only utilize the fact that agentsâ€™ expected utilities are affine
functions of expected outcomes, up to some unknown vector of types, and similar arguments
apply to other settings in which agents maximize objective functions which are affine in types
and observable outcomes.
For example, in an oligopolistic competition setting, our menu estimation approach is
related to the Baker and Bresnahan (1988) approach of using firm cost shifters to estimate
the residual demand curve facing a given firm, and using this to make statements about
firmsâ€™ price-setting power. Similar arguments apply to other settings in which firms or
agents have preferences that are assumed to be linear in some quantity measure q (p),
rather than a probability P (a) as in our setting.27 Applying our approach to such settings
could allow for firms to potentially have incomplete information about competitorsâ€™ costs
without assuming a particular model of conduct by those firms. This could be particularly
useful given that Sweeting, Tao, and Yao (2018) point out that small amounts of asymmetric
information in oligopoly pricing can have big effects on prices, and price setting in such cases
may look similar to collusion if incomplete information is ignored.
Related arguments also apply to settings in which agents maximize affine functions of
more than two outcomes. Agarwal and Somaini (2018) analyze school choice problems, in
which applicantsâ€™ utilities for submitting a given report are affine functions of probabilities
of admission to different schools, and uses this to derive identification and estimation arguments. Gentry, Komarova, and Schiraldi (2014) use similar arguments to analyze bidding
in combinatorial auctions for highway procurement. While our nonparametric estimation
is specialized to the case of two outcomes, menus are also convex in settings with multiple goods, and similar approaches to ours can be applied in such settings. For example,
Agarwal and Somaini (2018) show that solving for agentsâ€™ values for any preference report
requires satisfying a set of revealed-preference inequalities that define the subgradient set
27For example, consider a monopolist pricing problem, where the monopolist chooses price p to maximize

pq (p) âˆ’ cq (p), where c is the (potentially privately known) marginal cost and q(p) is demand. Defining
T (p) = pQ (p), we can write monopolist profit as T (p) âˆ’ cq (p) and obtain c as
0

re-written to obtain the standard monopolist pricing formula c = p + qp (q).

dT
dp
dq
dp

= c, which can be

46

LARSEN AND ZHANG

of a multidimensional convex function; this is a linear programming problem, so it is fairly
straightforward even in high dimensions.
9.6. Mechanism Design. The class of quasilinear-utility trading games that we study
here is exactly the canonical model of classical mechanism design, as pioneered by Myerson
(1981), and many parallels can be drawn between our results and this literature. Similarly to the mechanism design literature, our incentive compatibility constraints in (1) rely
only on the quasilinear-utility setup, and are independent of the particular game being
played. Indeed, one interpretation of our results from the perspective of mechanism design
is that equilibria of arbitrary trading games can alternatively be thought of as revelation
mechanisms, in which the abstract actions that agents take are their type reports. The
econometrician can estimate the mapping that the revelation mechanism from type reports
to outcomes, and use this to estimate the value of an agent making any given type report.
The constraint that equilibrium menus are convex is related to the implementability constraint from Myerson, stating that equilibrium allocations must be weakly increasing in
types. The â€œempirical ironingâ€ procedures we propose in Section 5 to enforce menu convexity are thus related to the concept of ironing demand curves to enforce monotonicity of
optimal allocation rules in optimal mechanism design.
10. Conclusion
This paper provides a two-step identification argument, based on intuitions from the
theoretical mechanism design literature, for general incomplete information trading games,
generalizing a number of game-specific approaches in the literature. We propose an method
to deal with imperfectly observed actions, derive general estimation procedures, and extend
tools for unobserved heterogeneity and correlated private values from auctions setting to
general trading games. We believe our results may be useful in a number of incompleteinformation settings where closed-form equilibrium solutions may not exist, or where playersâ€™ actions may be difficult to fully observe, or where the rules of the game are not necessarily known to the econometrician, such as incomplete-information sequential bargaining
games.

A MECHANISM DESIGN APPROACH TO IDENTIFICATION AND ESTIMATION

47

References
Agarwal, N., and P. Somaini (2018): â€œDemand Analysis using Strategic Reports: An
application to a school choice mechanism,â€ Econometrica, 86(2), 391â€“444.
Ambrus, A., E. Chaney, and I. Salitskiy (2018): â€œPirates of the mediterranean: An
empirical investigation of bargaining with asymmetric information,â€ Quantitative Economics, 9(1), 217â€“246.
An, Y., and X. Tang (2016): â€œSpecification and negotiation in incomplete contracts: An
econometric analysis,â€ Working paper, Rice University.
Asker, J. (2010): â€œA study of the internal organization of a bidding cartel,â€ American
Economic Review, 100(3), 724â€“762.
Athey, S., D. Coey, and J. Levin (2013): â€œSet-asides and subsidies in auctions,â€ American Economic Journal: Microeconomics, 5(1), 1â€“27.
Athey, S., and D. Nekipelov (2010): â€œA structural model of sponsored search advertising
auctions,â€ in Sixth Ad Auctions Workshop, vol. 15.
Ausubel, L., P. Cramton, and R. Deneckere (2002): â€œBargaining with incomplete
information,â€ Handbook of Game Theory, 3, 1897â€“1945.
Bagwell, K., R. W. Staiger, and A. Yurukoglu (2014): â€œMultilateral trade bargaining:A first peek at the GATT bargaining records,â€ Working paper.
Bajari, P., C. L. Benkard, and J. Levin (2007): â€œEstimating dynamic models of
imperfect competition,â€ Econometrica, 75(5), 1331â€“1370.
Baker, J. B., and T. F. Bresnahan (1988): â€œEstimating the residual demand curve
facing a single firm,â€ International Journal of Industrial Organization, 6(3), 283 â€“ 300.
Best, M. C., J. Hjort, and D. Szakonyi (2017): â€œIndividuals and organizations as
sources of state effectiveness, and consequences for policy,â€ NBER Working Paper 23350.
Chang, W.-S., B. Chen, and T. C. Salmon (2014): â€œAn investigation of the average
bid mechanism for procurement auctions,â€ Management Science, 61(6), 1237â€“1254.
Chatterjee, K., and W. Samuelson (1983): â€œBargaining under incomplete information,â€ Operations Research, 31(5), 835â€“851.
Chesher, A., and A. Rosen (2017): â€œIncomplete English auction models with heterogeneity,â€ Working paper, Centre for Microdata Methods and Practice, Institute for Fiscal
Studies.
Cramton, P., S. Ellermeyer, and B. Katzman (2015): â€œDesigned to fail: The Medicare auction for durable medical equipment,â€ Economic Inquiry, 53(1), 469â€“485.
Cramton, P. C., and J. S. Tracy (1992): â€œStrikes and holdouts in wage bargaining:
Theory and data,â€ American Economic Review, pp. 100â€“121.
David, H. (1981): â€œOrder statistics,â€ J. Wiley.

48

LARSEN AND ZHANG

Decarolis, F. (2018): â€œComparing public procurement auctions,â€ International Economic
Review, 59(2), 391â€“419.
Doraszelski, U., G. Lewis, and A. Pakes (2018): â€œJust starting out: Learning and
equilibrium in a new market,â€ American Economic Review, 108(3), 565â€“615.
Einav, L., T. Kuchler, J. Levin, and N. Sundaresan (2015): â€œAssessing Sale Strategies in Online Markets Using Matched Listings,â€ American Economic Journal: Microeconomics, 7(2), 215â€“47.
Elyakime, B., J.-J. Laffont, P. Loisel, and Q. Vuong (1997): â€œAuctioning and
bargaining: An econometric study of timber auctions with secret reservation prices,â€
Journal of Business & Economic Statistics, 15(2), 209â€“220.
Fan, J., and I. Gijbels (1996): Local Polynomial Modelling and its Applications: Monographs on Statistics and Applied Probability, vol. 66. CRC Press.
Freyberger, J., and B. Larsen (2017): â€œIdentification in ascending auctions, with an
application to digital rights management,â€ NBER Working Paper No. 23569.
Fudenberg, D., D. Levine, and J. Tirole (1985): â€œInfinite-horizon models of bargaining with one-sided incomplete information,â€ in Game Theoretic Models of Bargaining,
ed. by A. Roth, pp. 73â€“98. Cambridge: Cambridge University Press.
Fudenberg, D., and J. Tirole (1991): Game Theory. Cambridge: MIT Press.
Gentry, M., T. Komarova, and P. Schiraldi (2014): â€œPreferences and performance
in simultaneous first-price auctions: A structural analysis,â€ Working paper, LSE.
Grennan, M., and A. Swanson (2016): â€œTransparency and Negotiated Prices: The Value
of Information in Hospital-Supplier Bargaining,â€ NBER Working Paper 22039.
Guerre, E., I. Perrigne, and Q. Vuong (2000): â€œOptimal nonparametric estimation
of first price auctions,â€ Econometrica, 68(3), 525â€“574.
Haile, P., H. Hong, and M. Shum (2003): â€œNonparametric tests for common values at
first-price sealed-bid auctions,â€ NBER Working Paper 10105.
Haile, P., and E. Tamer (2003): â€œInference with an incomplete model of English auctions,â€ Journal of Political Economy, 111(1), 1â€“51.
HortacÌ§su, A., and D. McAdams (2010): â€œMechanism choice and strategic bidding in
divisible good auctions: An empirical analysis of the Turkish treasury auction market,â€
Journal of Political Economy, 118(5), 833â€“865.
Judd, K. (1998): Numerical Methods in Economics. Cambridge: The MIT Press.
Kawai, K., and J. Nakabayashi (2015): â€œDetecting large-scale collusion in procurement
auctions,â€ Working paper, UC Berkeley.
Keniston, D. (2011): â€œBargaining and welfare: A dynamic structural analysis,â€ Working
Paper, Yale.
Kline, B. (2016): â€œRobust identification in mechanisms,â€ Working Paper, UT Austin.

A MECHANISM DESIGN APPROACH TO IDENTIFICATION AND ESTIMATION

49

Krasnokutskaya, E. (2011): â€œIdentification and estimation of auction models with unobserved heterogeneity,â€ Review of Economic Studies, 78(1), 293â€“327.
Lacetera, N., B. J. Larsen, D. G. Pope, and J. R. Sydnor (2016): â€œBid takers or
market makers? The effect of auctioneers on auction outcomes,â€ American Economic
Journal: Microeconomics, 8(4), 195â€“229.
Larsen, B. (2014): â€œThe efficieny of real-world bargaining: Evidence from wholesale usedauto auctions,â€ NBER Working Paper 20431.
Li, H., and N. Liu (2015): â€œNonparametric identification and estimation of double auctions
with bargaining,â€ Working paper, Penn State.
Li, T., I. Perrigne, and Q. Vuong (2002): â€œStructural estimation of the affiliated
private value auction model,â€ RAND Journal of Economics, pp. 171â€“193.
Myerson, R. (1979): â€œIncentive compatibility and the bargaining problem,â€ Econometrica,
pp. 61â€“73.
Myerson, R., and M. Satterthwaite (1983): â€œEfficient mechanisms for bilateral trading,â€ Journal of Economic Theory, 29(2), 265â€“281.
Myerson, R. B. (1981): â€œOptimal auction design,â€ Mathematics of Operations Research,
6(1), 58â€“73.
Nekipelov, D., V. Syrgkanis, and E. Tardos (2015): â€œEconometrics for learning
agents,â€ in Proceedings of the Sixteenth ACM Conference on Economics and Computation,
pp. 1â€“18. ACM.
Perry, M. (1986): â€œAn example of price formation in bilateral situations: A bargaining
model with incomplete information,â€ Econometrica, pp. 313â€“321.
Prescott, J., K. E. Spier, and A. Yoon (2014): â€œTrial and settlement: A study of
high-low agreements,â€ Journal of Law and Economics, 57(3), 699â€“746.
Quint, D., and K. Hendricks (2018): â€œA theory of indicative bidding,â€ American Economic Journal: Microeconomics, 10(2), 118â€“151.
Satterthwaite, M., and S. Williams (1989): â€œBilateral trade with the sealed bid kdouble auction: Existence and efficiency,â€ Journal of Economic Theory, 48(1), 107â€“133.
Schumaker, L. I. (1983): â€œOn shape-preserving quadratic spline interpolation,â€ SIAM
Journal on Numerical Analysis, 20(4), 854â€“864.
Silveira, B. S. (2017): â€œBargaining with asymmetric information: An empirical study of
plea negotiations,â€ Econometrica, 85(2), 419â€“452.
Silverman, B. W. (1986): Density Estimation for Statistics and Data Analysis, vol. 26.
CRC press.
Storms, E. (2015): â€œMonotonicity of trade in PSBNE of bargaining with alternating
offers,â€ Mimeo, Stanford University.

50

LARSEN AND ZHANG

Sweeting, A., X. Tao, and X. Yao (2018): â€œDynamic oligopoly pricing with asymmetric
information: Implications for mergers,â€ Working Paper, University of Maryland.
Syrgkanis, V., E. Tamer, and J. Ziani (2017): â€œInference on auctions with weak assumptions on information,â€ arXiv:1710.03830 [cs, econ, math, stat], arXiv: 1710.03830.
Varian, H. R. (2009): â€œOnline ad auctions,â€ American Economic Review, 99(2), 430â€“34.
Waldinger, D. (2017): â€œTargeting in-kind transfers through market design: A revealed
preference analysis of public housingallocation,â€ Working paper, MIT.
Ye, L. (2007): â€œIndicative bidding and a theory of two-stage auctions,â€ Games and Economic Behavior, 58(1), 181â€“207.

A MECHANISM DESIGN APPROACH TO IDENTIFICATION AND ESTIMATION

51

Figure 1. Hypothetical menu

T (ai )
a5i
vÌ„ a3i



v a3i



a4i
a6i
a1i

a2i

a3i

P (ai )
Notes: Hypothetical menu. The slopes of the green lines are upper and lower bounds for the value
of an agent choosing action a3i .

Figure 2. Example Menu in Imperfectly Observed Action Case

Notes: True menu (P, T ) compared to a menu generated in an imperfectly observed action case.
The latter menu (PÌ†i , TÌ†i ) is based on an action-shifter Z that is a noisy measure of the true
underyling valuation.

52

LARSEN AND ZHANG

Figure 3. Estimated Buyer Valuations From First-Price Auction Simulation

Notes: Figure displays the mapping between values (vertical axis) and bids (horizontal axis) from
first-price auction simulations. Lines correspond to estimated medians (solid lines) and pointwise
95% quantiles (dotted lines) for the true values (black), GPV (blue), our local quadratic regression
method (LQ, red), and our spline method (Spl, green) for exponential value distributions with
N = 4, 000. Means and quantiles are constructed across 200 simulation replications.

Figure 4. Estimated Seller Valuations from Bargaining Simulation

Notes: Figure displays the mapping between values (vertical axis) and bids (horizontal axis)â€”i.e.
seller offersâ€”from bargaining game simulations. Lines correspond to estimated medians (solid
lines) and pointwise 95% quantiles (dotted lines) for the true values (black), our local quadratic
regression method (LQ, red), and our spline method (Spline, green) for uniform value distributions
with N = 4, 000. Means and quantiles are constructed across 200 simulation replications.

A MECHANISM DESIGN APPROACH TO IDENTIFICATION AND ESTIMATION

53

Figure 5. Average Sale Probability, Auction Price, and Final Price by
Reserve Price

(a)

(b)

Notes: Panel A displays local linear regression estimates of an indicator for whether the car sold
regressed on the secret reserve price. Panel B contains similar local linear regression estimates for
the auction price (the high bid from the auction) in red and the final price (conditional on a sale
occurring) in blue. Units are in terms of $1,000, relative to the bluebook estimate.

Figure 6. Removing Unobserved Heterogeneity from Allocation/Transfer
Functions

(a) Allocation function (P)

(b) Transfer function (T )

Notes: Figure displays heterogeneity correction for allocation function (Panel A) and transfer
function (Panel B). Red lines display the original uncorrected estimates from local linear
regressions, PÌƒ(rÌƒ) and TÌƒ (rÌƒ), and green lines display final, corrected estimates, P(r) and T 0 (r). In
panel B, blue line (which is very close to the yellow line) displays estimates from intermediate step
subtracting off mean of unobserved heterogeneity, TÌƒ (rÌƒ) âˆ’ E (Wâˆ†P | rÌƒ). In each panel, yellow line
displays convolution against FW , constructed from the left-hand side of (17) and (18), as a check
on fit. Units on the horizontal axis (and vertical axis of panel B) are $1,000, relative to the
bluebook estimate.

54

LARSEN AND ZHANG

Figure 7. Estimated Menu

Notes: Figure displays the final estimated menu, (P, T ). Dashed lines show pointwise 95%
confidence bands from bootstrapping with 500 replications. Units on the vertical axis are $1,000
relative to the bluebook estimate. The points marked Aâ€“D are discussed in the body of the paper.

Figure 8. Value Mapping and Value CDFs

(a) Mapping from Reserve to Value

(b) Value CDF

Notes: Left panel shows the estimated mapping from reserve prices to values (blue line) and the
reserve price (red line, 45-degree line). Right panel displays estimated CDF of seller valuations, FS
(blue line), and estimated CDF of maximum order statistic of buyer valuations, FB(1) (green line).
Dashed lines in panel A and shaded region in panel B show 95% confidence bands from
bootstrapping with 500 replications. Units on horizontal axes (and on vertical axis of panel A) are
$1,000 relative to bluebook estimate.

A MECHANISM DESIGN APPROACH TO IDENTIFICATION AND ESTIMATION

55

Figure 9. Trade Probability and Seller Surplus

(a) Trade Probability

(b) Seller Surplus

Notes: Panel A shows trade probability as a function of the sellerâ€™s valuation under different
mechanisms. Panel B shows the expected seller surplus as a function of the sellerâ€™s valuation under
different mechanisms. Units are $1,000 relative to the bluebook estimate.

Figure 10. Second-Best Efficiency as Function of Number of Bidders

Notes: Figure shows results for counterfactual mechanisms with a different average number of
bidders. Horizontal axis shows average number of bidders; upper (blue) line displays the
percentage of the first-best surplus achievable in the second-best mechanism; middle (red) line
displays the fraction of first-best sales achieved by the second-best mechanism; and lower (yellow)
line displays the percentage of the total surplus sellers achieve in the second-best mechanism.

56

LARSEN AND ZHANG

Table 1. Mean Squared Error for First-Price Auction Simulations
Distribution
Uniform

N
GPV MSE LQ MSE Spline MSE
4, 000
0.316%
2.9%
6.05%
16, 000 0.0959%
1.2%
2.21%
40, 000 0.0446%
0.696%
1.39%
Exponential 4, 000
0.148%
3.44%
4.51%
16, 000 0.0485%
1.47%
1.29%
40, 000 0.0211%
0.885%
0.729%
Lognormal
4, 000
0.15%
5.37%
5.46%
16, 000 0.0434%
2.45%
1.62%
40, 000
0.022%
1.36%
0.92%
Notes: Mean squared error between bid quantiles 0.2 and 0.8 for GPV, our local quadratic
regression method (LQ), and our convexity-constrained spline method (Spline), for uniform,
exponential, and lognormal distributed values of various sample sizes. Mean squared errors are in
terms of percent of the true variance in bidder values between bid quantiles 0.2 and 0.8 and are
based on 200 simulation replications.

Table 2. Mean Squared Error for Bargaining Simulation Results
Distribution
Uniform

Normal

N
LQ MSE Spline MSE
4, 000
6.2%
14.2%
16, 000
2.82%
5.45%
40, 000
1.61%
2.89%
4, 000
8.96%
24%
16, 000
4.28%
11.5%
40, 000
2.59%
7.41%

Notes: Mean squared error between true valuations and estimated valuations from bargaining
simulations for uniform and Normal distributions of valuations of various sample sizes. LQ refers
to the local quadratic estimator and Spline refers to the convexity-constrained spline estimator.

Table 3. Efficiency of Various Mechanisms
Trade
Total
Seller
Seller
Buyer
Buyer
Seller
Probability Surplus Surplus Margin Surplus Margin Surplus Share
First Best
97%
3.627
Second Best
96.4%
3.626
2.421
2.511
1.205
1.250
66.8%
Seller Optimal
76.3%
3.445
2.628
3.443
0.818
1.071
76.3%
Buyer Optimal
68.8%
3.209
1.335
1.940
1.874
2.723
41.6%
Real World
81.4%
3.467
2.093
2.571
1.374
1.687
60.4%
Notes: Sale probability, total surplus, seller surplus (and seller margin), buyer surplus (and buyer
margin), and share of surplus accruing to seller in different mechanisms, including first-best,
second-best, seller-optimal, buyer-optimal, and real-world mechanisms. Seller and buyer margins
are calculated by dividing seller and buyer surplus, respectively, by trade probability. Units for
surplus are $1,000.

A MECHANISM DESIGN APPROACH TO IDENTIFICATION AND ESTIMATION

57

Appendix
Appendix A. Proofs
A.1. Proof of Proposition 1.
Proof. Part 2. We can rearrange the inequalities in Theorem 1 to:



Pi a0i âˆ’ Pi (ai ) vi 6 Ti a0i âˆ’ Ti (ai ) âˆ€a0i .

(23)

Hence, any type vi âˆˆ vi (ai ) is a subgradient of {(Pi (ai ) , Ti (ai ))} at ai . Each individual
inequality in (23) describes a closed convex set, hence their intersection is a closed convex
set, which is a closed interval in R. Since each type vi must play some action si (vi ), the
union of vi (ai ) for all actions ai is the support of values vi .

Part 3. Fix some ai , a0i and suppose that Pi a0i > Pi (ai ). For any vi âˆˆ vi (ai ), by
(23), we must have:



Ti a0i âˆ’ Ti (ai ) > vi Pi a0i âˆ’ Pi (ai ) .

For any v0i âˆˆ vi a0i , we must have:



Ti a0i âˆ’ Ti (ai ) 6 v0i Pi a0i âˆ’ Pi (ai ) .

Since by assumption Pi a0i > Pi (ai ), we have v0i > vi . Moreover, if vi = v0i , we must have

Ti a0i âˆ’ Ti (ai )

.
vi =
Pi a0i âˆ’ Pi (ai )

Thus, the intersection of vi (ai ) , vi a0i contains at most a single point.
Part 1. Given a set of points (pi , ti ), the graph of (pi , ti ) is convex if and only if every
secant line lies above every point (pi , ti ). Formally, for any p1 , p2 , p3 , if Î±p1 + (1 âˆ’ Î±) p2 =
p3 , and 0 6 Î± 6 1, then
t3 6 Î±t1 + (1 âˆ’ Î±) t2 .


Consider any ai . Suppose we have a0i , a00i s.t. Î±Pi a0i + (1 âˆ’ Î±) Pi a00i = Pi (ai ) , and
0 6 t 6 1. We know that the {(Pi (ai ) , Ti (ai ))} graph admits some subgradient v at ai .
Thus,



Ti (ai ) + Pi a0i âˆ’ Pi (ai ) v 6 Ti a0i ,



Ti (ai ) + Pi a00i âˆ’ Pi (ai ) v 6 Ti a00i .
Hence,





Ti (ai ) + Î±Pi a0i + (1 âˆ’ Î±) Pi a00i âˆ’ Pi (ai ) v (ai ) 6 Î±Ti a0i + (1 âˆ’ Î±) Ti a00i ,


Ti (ai ) 6 Î±Ti a0i + (1 âˆ’ Î±) Ti a00i ,

58

LARSEN AND ZHANG

as desired.

A.2. Proof of Corollary 2.
Proof. Using (6), we have
Ti (ai ) âˆ’ Ti (si (vi âˆ’ Î´))
.
Î´â†’0 Pi (ai ) âˆ’ Pi (si (vi âˆ’ Î´))

vi (ai ) = lim

Since si (Â·) is continuous, this is the same as the following, for some  > 0:
Ti (ai ) âˆ’ Ti (ai âˆ’ )
=
= lim
â†’0 Pi (ai ) âˆ’ Pi (ai âˆ’ )

dTi
dai
dPi
dai

=

Ti0 (ai )
.
Pi0 (ai )


A.3. Proof of Corollary 3.
Proof. For any zi , if the true menu is {(Pi (ai ) , Ti (ai ))}, the agent can attain the outcome
{(PÌ†i (zi ) , TÌ†i (zi ))} by playing a mixed strategy, with distribution over actions equal to the
conditional distribution
H (ai | Zi = zi ) .
This attains the expected outcome:
E [(Pi (Ai ) , Ti (Ai )) | Zi = zi ] .
which we have shown is equal to {(PÌ†i (zi ) , TÌ†i (zi ))}. Since any outcome attainable under {(PÌ†i (zi ) , TÌ†i (zi ))} is also attainable under {(Pi (ai ) , Ti (ai ))}, maximum utility under
{(PÌ†i (zi ) , TÌ†i (zi ))} is a lower bound for maximum utility under the true menu.



A.4. Proof of Corollary 5.
Proof. Following the proof of Corollary 2, we have:
vi (zi ) = lim

Î´â†’0

TÌ†i (zi ) âˆ’ TÌ†i (zi (vi âˆ’ Î´))
PÌ†i (zi ) âˆ’ PÌ†i (zi (vi âˆ’ Î´))

.

Since zi (Â·) is continuous, this implies, for  > 0,
= lim

â†’0

TÌ†i (zi ) âˆ’ TÌ†i (zi âˆ’ )
PÌ†i (zi ) âˆ’ PÌ†i (zi âˆ’ )

=

dTÌ†i
dzi
dPÌ†i
dzi

=

TÌ†i0 (zi )
PÌ†i0 (zi )

.


A MECHANISM DESIGN APPROACH TO IDENTIFICATION AND ESTIMATION

59

A.5. Proof of Proposition 2.

Proof. First, note that we can write
Ë†

vÌ„

PÌ† (z) = E (P (v) | z) =

P (v) dG (v | z) ,

0

Ë†

vÌ„

TÌ† (z) = E (T (v) | z) =

T (v) dG (v | z) .

0

We will write P (v) , T (v) as:

Ë†

v

P0 (vÌƒ) dvÌƒ,
Ë† v
Ë† v
dT 0
T (v) =
P (vÌƒ) dvÌƒ =
vÌƒP0 (vÌƒ) dvÌƒ.
dP
0
0
Hence, the expectations with respect to z are
Ë† vÌ„ Ë† v
Ë† vÌ„
P0 (vÌƒ) dvÌƒ g (v | z) dv,
P (v) g (v | z) dv =
PÌ† (z) =
P (v) =

0

0

Ë†

Ë†

vÌ„

0

vÌ„ Ë†

T (v) g (v | z) dv =

TÌ† (z) =
0

0

0
v

vÌƒP0 (vÌƒ) dvÌƒ g (v | z) dv.

0

Suppose we have z2 , z1 , where z2 > z1 , hence G (v | z2 ) >FOSD G (v | z1 ). The slope of
the secant line connecting them is:
Â´ vÌ„ Â´ v 0
Â´ vÌ„ Â´ v 0
TÌ† (z2 ) âˆ’ TÌ† (z1 )
0 0 vÌƒP (vÌƒ) dvÌƒ g (v | z2 ) dv âˆ’ 0 0 vÌƒP (vÌƒ) dvÌƒ g (v | z1 ) dv
= Â´ vÌ„ Â´ v
.
Â´ vÌ„ Â´ v
0
0
PÌ† (z2 ) âˆ’ PÌ† (z1 )
0 0 P (vÌƒ) dvÌƒ g (v | z2 ) dv âˆ’ 0 0 P (vÌƒ) dvÌƒ g (v | z1 ) dv
This simplifies to:

(24)

Â´ vÌ„ Â´ v

vÌƒP0 (vÌƒ) dvÌƒ [g (v | z2 ) âˆ’ g (v | z1 )] dv
.
Â´0 vÌ„ Â´0 v
0
0 0 P (vÌƒ) dvÌƒ [g (v | z2 ) âˆ’ g (v | z1 )] dv

Since vÌƒ is bounded above and below, and both G (v | z1 ) and G (v | z2 ) are bounded measures, we can change the order of integration for both the numerator and the denominator.
For example, for the numerator,
Ë† vÌ„ Ë† v
Ë†
vÌƒP0 (vÌƒ) dvÌƒ [g (v | z2 ) âˆ’ g (v | z1 )] dv =
0

0

Ë†

Ë†

vÌ„

vÌƒP0 (vÌƒ)

=
Ë†
=

0
vÌ„

0
vÌ„

vÌ„ Ë† vÌ„

vÌƒP0 (vÌƒ) [g (v | z2 ) âˆ’ g (v | z1 )] dvdvÌƒ

vÌƒ

[g (v | z2 ) âˆ’ g (v | z1 )] dvdvÌƒ

vÌƒ

vÌƒP0 (vÌƒ) [(G (vÌ„ | z2 ) âˆ’ G (vÌ„ | z1 )) âˆ’ (G (vÌƒ | z2 ) âˆ’ G (vÌƒ | z1 ))] dvÌƒ.

0

Since G (vÌ„ | z2 ) = G (vÌ„ | z1 ) = 1, the term (G (vÌ„ | z2 ) âˆ’ G (vÌ„ | z1 )) cancels, and we are left
Ë†

with:
=

0

vÌ„

vÌƒP0 (vÌƒ) [G (vÌƒ | z1 ) âˆ’ G (vÌƒ | z2 )] dvÌƒ.

60

LARSEN AND ZHANG

For simplicity, we will now write all vÌƒâ€™s in the integrand as vâ€™s. Interchanging the order
of integration in both the numerator and denominator in 24, we have:
Â´ vÌ„ 0
vP (v) [G (v | z1 ) âˆ’ G (v | z2 )] dv
TÌ† (z2 ) âˆ’ TÌ† (z1 )
.
= Â´0 vÌ„
0
PÌ† (z2 ) âˆ’ PÌ† (z1 )
0 P (v) [G (v | z1 ) âˆ’ G (v | z2 )] dv
Now, suppose that z2 = z1 +  for some  > 0. We then have:
Â´ vÌ„ 0
vP (v) [G (v | z1 ) âˆ’ G (v | z1 + )] dv
TÌ† (z1 + ) âˆ’ TÌ† (z1 )
.
= Â´0 vÌ„
0
PÌ† (z1 + ) âˆ’ PÌ† (z1 )
0 P (v) [G (v | z1 ) âˆ’ G (v | z1 + )] dv
Dividing all terms by the difference , we have:
Â´ vÌ„ G(v|z1 )âˆ’G(v|z1 +)
TÌ† (z1 +)âˆ’TÌ† (z1 )

PÌ†(z1 +)âˆ’PÌ†(z1 )


vP0 (v) dv

.
G(v|z1 )âˆ’G(v|z1 +) 0
P (v) dv
0


= Â´0 vÌ„

Taking the limit as  â†’ 0, this becomes:
Â´ vÌ„  dG(v|z)  0
0
P (v) dv
0 v âˆ’
dz
TÌ† (z)

,
= Â´ 
vÌ„
dG(v|z)
PÌ†0 (z)
P0 (v) dv
0 âˆ’
dz
which proves Proposition 2.



A.6. Proof of Corollary 6.
Proof. Let PÌ†0 (v) be equal to some constant C for all v. If G (v, z) = GÌ„ (v âˆ’ z), then

dG(v|z)
dz

=

g (v | z). Hence,
Â´ vÌ„  dG(v|z)  0
Â´ vÌ„
PÌ† (v) dv
v g (v | z) Cdv
0 v âˆ’
dz

= Â´ 
= Â´0 vÌ„
= E [V | z] .
vÌ„
dG(v|z)
0
PÌ† (z)
PÌ†0 (v) dv
0 g (v | z) Cdv
0 âˆ’
dz

TÌ† 0 (z)


A.7. Proof of Corollary 7.
Proof. We have:
Â´ vÌ„  dG(v|z)  0
Â´ Î½(z)+Î´  dG(v|z)  0
(v)
PÌ†
dv
PÌ† (v) dv
0 v âˆ’
dz
dz
Î½(z)âˆ’Î´ v âˆ’
TÌ† 0 (z)



= Â´ 
= Â´
.
Î½(z)+Î´
vÌ„
dG(v|z)
dG(v|z)
0 (v) dv
0 (v) dv
PÌ†0 (z)
PÌ†
âˆ’
PÌ†
âˆ’
0
dz
dz
Î½(z)âˆ’Î´
We must have

TÌ† 0 (z)
PÌ† 0 (z)

âˆˆ [Î½ (z) âˆ’ Î´, Î½ (z) + Î´]. Likewise, E (V | z) âˆˆ [Î½ (z) âˆ’ Î´, Î½ (z) + Î´].

Hence,
TÌ† 0 (z)
PÌ†0 (z)

âˆ’ E (V | z) 6 2Î´.


A MECHANISM DESIGN APPROACH TO IDENTIFICATION AND ESTIMATION

61

A.8. Proof of Proposition 3.
Proof. Fixing common component w, we have


Piw (ai ) â‰¡ E xi ai , Aw
âˆ’i ,


Tiw (ai ) â‰¡ E ti ai , Aw
âˆ’i .
Suppose strategies si (vi , w) constitute an equilibrium under w. Then, for all i, vi :
si (vi , w) âˆˆ arg max (vi + w) Piw (ai ) âˆ’ Tiw (ai ) âˆ’ (vi + w) xÌ„i .
ai

We wish to show that conjectured equilibrium strategies s0i (vi , w0 ) = si (vi , w) + (w0 âˆ’ w)
0

= s0i (Vi , w0 ) denote the random variable
constitute an equilibrium under w0 . Let Aw
i
representing iâ€™s action under w0 , assuming that i plays according to the conjectured equi0

0

librium strategies si . We define Piw (ai ) , Tiw (ai ) as the expected allocation and transfer i
0

achieves under w0 , assuming opponentsâ€™ actions are distributed as Aw
âˆ’i . That is,
h

i
0
0
Piw (ai ) = E xi ai , Aw
,
âˆ’i
h 
i
0
0
Tiw (ai ) = E ti ai , Aw
.
âˆ’i
In order to prove our Proposition, we need to show that:

 0

0
s0i (vi , w) + w0 âˆ’ w âˆˆ arg max vi + w0 Piw (ai ) âˆ’ Tiw (ai ) âˆ’ vi + w0 xÌ„i .
ai

We will show a stronger result: for any ai , the expected utility from playing ai + (w0 âˆ’ w)
0

under w0 , Aw
âˆ’i (net of the outside option) is the same as the expected utility from playing
ai under w, Aw
âˆ’i . That is,


 0

0
vi + w0 Piw ai + w0 âˆ’ w âˆ’ Tiw ai + w0 âˆ’ w âˆ’ vi + w0 xÌ„i =
(vi + w) Piw (ai ) âˆ’ Tiw (ai ) âˆ’ (vi + w) xÌ„i . (25)
Thus, if ai maximizes the right-hand side, ai + (w0 âˆ’ w) maximizes the left-hand side, and
we are done.



Proof of (25)
Proof. We have
h 
i


0
0
Piw ai + w0 âˆ’ w = E xi ai + w0 âˆ’ w , Aw
.
âˆ’i
0

By construction of s0i (vi , w0 ) = si (vi , w)+(w0 âˆ’ w), the random variable Aw
i has the same
0
distribution as Aw
i + (w âˆ’ w). Thus,
h 
i




0
0
E xi ai + w0 âˆ’ w , Aw
= E xi ai + w0 âˆ’ w , Aw
.
âˆ’i
âˆ’i + w âˆ’ w

62

LARSEN AND ZHANG

By the separable heterogeneity game property in Definition 2,



0
xi ai + w0 âˆ’ w , Aw
= xi ai , Aw
âˆ’i + w âˆ’ w
âˆ’i ,
hence,





0
E xi ai + w0 âˆ’ w , Aw
= E xi ai , Aw
âˆ’i + w âˆ’ w
âˆ’i .
Thus we have shown that

0
Piw ai + w0 âˆ’ w = Piw (ai ) .

(26)

For transfers, we have




0
Tiw ai + w0 âˆ’ w = E ti ai + w0 âˆ’ w , Aw
âˆ’i



0
= E ti ai + w0 âˆ’ w , Aw
.
âˆ’i + w âˆ’ w
Again using Definition 2, we have






0
0
w
ti ai + w0 âˆ’ w , Aw
= ti ai , Aw
âˆ’i + w âˆ’ w
âˆ’i + w âˆ’ w xi ai , Aâˆ’i âˆ’ xÌ„i .
Hence,



0
E ti ai + w0 âˆ’ w , Aw
=
âˆ’i + w âˆ’ w






E ti ai , Aw
+ E w0 âˆ’ w xi ai , Aw
âˆ’i
âˆ’i âˆ’ xÌ„i . (27)


The term E ti ai , Aw
is equal to Tiw (ai ) by definition. Using linearity of expectations,
âˆ’i
the right term simplifies to




 


E w0 âˆ’ w xi ai , Aw
= w0 âˆ’ w E xi ai , Aw
âˆ’ xÌ„i
âˆ’i âˆ’ xÌ„i
âˆ’i

= w0 âˆ’ w (Piw (ai ) âˆ’ xÌ„i ) .
Hence, we have shown that


0
Tiw ai + w0 âˆ’ w = Tiw (ai ) + w0 âˆ’ w (Piw (ai ) âˆ’ xÌ„i ) .

(28)

Once again, iâ€™s expected utility from playing ai + (w0 âˆ’ w) when common component is
0

w0 and opponentsâ€™ actions are distributed as Aw
âˆ’i is




0
0
vi + w0 Piw ai + w0 âˆ’ w âˆ’ Tiw ai + w0 âˆ’ w âˆ’ vi + w0 xÌ„i .
Using the expressions in (26) and (28), this is





= vi + w0 Piw (ai ) âˆ’ Tiw (ai ) âˆ’ w0 âˆ’ w (Piw (ai ) âˆ’ xÌ„i ) âˆ’ vi + w0 xÌ„i
= [(vi + w) Piw (ai ) âˆ’ Tiw (ai )] âˆ’ (vi + w) xÌ„i .
Hence we have proved the equality in (25).



A MECHANISM DESIGN APPROACH TO IDENTIFICATION AND ESTIMATION

63

A.9. Proof of Proposition 4.
Proof. We observe actions aÌƒij , allocations xij , and transfers tij for a number of repetitions
j of the game. We suppose that:
vÌƒij = vij + wj .
Following our definition of position-invariant equilibria,
aÌƒij = aij + wj .
Following Krasnokutskaya (2011), we can identify the distributions fW , fAi using correlation
in actions aÌƒij across players. In the remainder of this proof, we omit the subscript j.
We can empirically estimate the functions:
h 
i
h 
i
PÌƒi (aÌƒi ) â‰¡ E xi aÌƒi , AÌƒâˆ’i , TÌƒi (ai ) â‰¡ E ti aÌƒi , AÌƒâˆ’i .
The functions involved in the position-invariant equilibrium are the probability of trade and
the homogenized T 0 (ai ) as a function of the homogenized action ai :
Pi (ai ) = E [xi (ai , Aâˆ’i )] , Ti0 (ai ) = E [ti (ai , Aâˆ’i )] .
Below, we show that the functions Pi (ai ) , Ti0 (ai ) are identified from the functions PÌƒi (aÌƒi ),
TÌƒi (aÌƒi ), fW , fAi .
Probabilities
First, note that:
h 
i
PÌƒi (aÌƒi ) = E xi aÌƒi , AÌƒâˆ’i
= E [E [xi (W + Ai , W + Aâˆ’i ) | Ai , W + Ai = aÌƒi ] | W + Ai = aÌƒi ] .
By Definition 2, we have
xi (w + ai , w + Aâˆ’i ) = xi (ai , Aâˆ’i ) âˆ€w
=â‡’ E [xi (W + Ai , W + Aâˆ’i ) | Ai , aÌƒi = W + Ai ] = E [xi (Ai , Aâˆ’i ) | Ai ] = Pi (Ai ) .
Hence,
PÌƒi (aÌƒi ) = E [Pi (Ai ) | W + Ai = aÌƒi ]
Â´âˆž
a =âˆ’âˆž Pi (ai ) fAi (ai ) fW (aÌƒi âˆ’ ai ) dai
.
PÌƒi (aÌƒi ) = i Â´ âˆž
ai =âˆ’âˆž fAi (ai ) fW (aÌƒi âˆ’ ai ) dai
This shows that PÌƒi (aÌƒi ) is equal to Pi (ai ) convolved against the function
fAi (ai ) fW (aÌƒi âˆ’ ai )
.
ai =âˆ’âˆž fAi (ai ) fW (aÌƒi âˆ’ ai ) dai

Â´âˆž

(29)

64

LARSEN AND ZHANG

Since the distributions of Ai and W both have bounded support, we can set Pi (ai ) to
0 for all ai outside the support of Ai . Thus, both Pi (ai ) and (29) are in L1 ; hence the
convolution theorem applies, meaning that the convolution of Pi (ai ) and (29) is invertible,
hence Pi (ai ) is identified from (29) and PÌƒi (aÌƒi ).
Homogenized transfers
First, note that
 

TÌƒi (aÌƒi ) = E ti aÌƒi , AÌƒâˆ’i
= E [E [ti (W + Ai , W + Aâˆ’i ) | Ai , W + Ai = aÌƒi ] | W + Ai = aÌƒi ] .
By Definition 2, we have
ti (W + Ai , W + Aâˆ’i ) = ti (Ai , Aâˆ’i ) + (xi (Ai , Aâˆ’i ) âˆ’ xÌ„i ) W.
Taking expectations,
E [ti (W + Ai , W + Aâˆ’i ) | W, Ai ]
= E [ti (Ai , Aâˆ’i ) | W, Ai ] + E [(P (Ai ) âˆ’ xÌ„i ) W | W, Ai ]
= Ti0 (Ai ) + (Pi (Ai ) âˆ’ xÌ„i ) W.
Hence,
TÌƒi (aÌƒi ) = E





Ti0 (Ai ) + (Pi (Ai ) âˆ’ xÌ„i ) W | W + Ai = aÌƒi .

Since we are conditioning on the event W + Ai = aÌƒi , we can substitute out for W:



= E Ti0 (Ai ) + (Pi (Ai ) âˆ’ xÌ„i ) (aÌƒi âˆ’ Ai ) | W + Ai = aÌƒi .
In integral form, this equation is:
Â´âˆž
0
ai =âˆ’âˆž Ti (ai ) fAi (ai ) fW (aÌƒi âˆ’ ai ) dai
Â´
TÌƒi (aÌƒi ) =
+
âˆž
ai =âˆ’âˆž fAi (ai ) fW (aÌƒi âˆ’ ai ) dai
Â´âˆž
ai =âˆ’âˆž (aÌƒi âˆ’ ai ) (Pi (ai ) âˆ’ xÌ„i ) fAi (ai ) fW (aÌƒi âˆ’ ai ) dai
Â´âˆž
. (30)
ai =âˆ’âˆž fAi (ai ) fW (aÌƒi âˆ’ ai ) dai
The rightmost term represents the average common component of payment. We can define
this as:

Â´âˆž
E (Wâˆ†Pi | aÌƒi ) â‰¡

ai =âˆ’âˆž (aÌƒi

âˆ’ ai ) (Pi (ai ) âˆ’ xÌ„i ) fAi (ai ) fW (aÌƒi âˆ’ ai ) dai
Â´âˆž
.
ai =âˆ’âˆž fAi (ai ) fW (aÌƒi âˆ’ ai ) dai

(31)

Since we have shown that Pi (ai ) is identified, E (Wâˆ†Pi | aÌƒi ) can be calculated for any aÌƒi .
We can rearrange (30) to:
TÌƒi (aÌƒi ) âˆ’ E (Wâˆ†Pi | aÌƒi ) =

Â´âˆž

0
ai =âˆ’âˆž Ti (ai ) fAi (ai ) fW
Â´âˆž
ai =âˆ’âˆž fAi (ai ) fW (aÌƒi

(aÌƒi âˆ’ ai ) dai
âˆ’ ai ) dai

.

A MECHANISM DESIGN APPROACH TO IDENTIFICATION AND ESTIMATION

65

The term TÌƒi (aÌƒi ) can be estimated from the data, so the entire LHS is known. The RHS is
a convolution of Ti0 (ai ) against
fAi (ai ) fW (aÌƒi âˆ’ ai )
.
ai =âˆ’âˆž fAi (ai ) fW (aÌƒi âˆ’ ai ) dai

Â´âˆž

Again, by the convolution theorem, this is invertible, and thus T 0 (ai ) is identified.



Appendix B. Spline Construction
Suppose we wish to estimate some function of a variable y using splines. Given a knot
q
sequence y1 . . . yn , we define the quadratic splines Sq
1 (Â·) . . . Sn+1 (Â·):
"
#
|y âˆ’ y1 |2+ âˆ’ |y âˆ’ y2 |2+
2
q
|y âˆ’ y1 |+ âˆ’
S1 (y) =
y2 âˆ’ y1
2 (y2 âˆ’ y1 )

Sq
k (y) =

2
yk+1 âˆ’ ykâˆ’1

"

..
.
#
2
|y âˆ’ ykâˆ’1 |+ âˆ’ |y âˆ’ yk |2+ |y âˆ’ yk |2+ âˆ’ |y âˆ’ yk+1 |2+
âˆ’
2 (yk âˆ’ ykâˆ’1 )
2 (yk+1 âˆ’ yk )
..
.

2
Sq
n (y) =
yn âˆ’ ynâˆ’1

"

|y âˆ’ ynâˆ’1 |2+ âˆ’ |y âˆ’ yn |2+
âˆ’ |y âˆ’ yn |+
2 (y2 âˆ’ y1 )

#

Sn+1 (y) = 1.
As shown in Figure 11, each Sq
k (Â·) behaves like a smoothened step function, increasing
on the interval [ykâˆ’1 , yk+1 ]. By constraining the coefficients Î²1 . . . Î²n to be nonnegative,
we can constrain the target function to be nondecreasing. Moreover, each Sq
k (Â·) has the
property that limyâ†’âˆž Sq
k (y) = 1; hence, to constrain the target function to always lie below
P
some bound M, we need only constrain n+1
k=1 Î²k 6 M. We impose the constraint that
P
k Î²k 6 1 in estimating PÌ‚ (Â·).
The family of cubic splines Sck (Â·) we use are integrals of the Sq
k functions, hence they are
quadratic splines in first derivative space; that is,
Ë† y
c
S1 (y) =
Sq
1 (yÌƒ) dyÌƒ
âˆ’âˆž

Ë†
Scn (y)

..
.
y

Sq
n (yÌƒ) dyÌƒ

=
âˆ’âˆž

Scn+1 (y) = y
Scn+2 (y) = 1.

66

LARSEN AND ZHANG

Constraining the coefficients in this approximation to be nonnegative ensures that the
target function is convex.

Appendix C. Bargaining Simulation Details
For the bargaining simulations, we follow the game studied in Satterthwaite and Williams
(1989), referred to as a k double auction. The authors demonstrated that, for any k âˆˆ [0, 1],
a continuum of strictly increasing, differentiable equilibria exist satisfying the following
linked differential equations for the buyerâ€™s action aB and sellerâ€™s action aS as a function
of their private valuations VB âˆ¼ FB and VS âˆ¼ FS :


FS (vS )
= aS (vS ) +
vS +
,
fS (vS )


1 âˆ’ FB (vB )
(âˆ’1)
0
aS (aB (vB )) = aB (vB ) + (1 âˆ’ k)aB (vB ) vB âˆ’
.
fB (vB )
(âˆ’1)
aB (aS (vS ))

kaS0 (vS )

(32)
(33)

Satterthwaite and Williams (1989) provided an approach for solving for equilibria numerically given knowledge of the distributions of player types. A point (vS , vB , t), where
t is a final price which vS and vB could potentially agree upon, is chosen in the set
P = {(vS , vB , t) : vS 6 vS 6 t 6 vB 6 vB , vS 6 vS , vB > vB }, and then a one-dimensional
manifold passing through this point is traced out using the differential equations defined
by (32) and (33). This path traces out an equilibrium. This approach does not allow for
identification of playersâ€™ value distributions, only for solving for equilibria given knowledge
of the distributions. We use their approach to solve for an equilibrium and simulate data
from equilibrium play, then apply our method for estimating the underlying valuations.
In our bargaining simulations, we focus on two possibilities for valuation distributions:
VS âˆ¼ U[0, 1] and VB âˆ¼ U[0, 1], or VS âˆ¼ N(.2, .5) and VB âˆ¼ N(.6, .3). For the Normal case, we
truncate the distribution to lie within [0, 1] to simplify computation. We set k = 1/2. In each
case we choose an equilibrium passing through the point (vS , vB , t) = (0.375, 0.625, 0.5). An
example of a solution path crossing through this point, for the truncated Normal case, is
shown in Figure 12.

Appendix D. Solving for Second-Best and Computing Gains From Trade
Consider a trading game between a seller with a private value VS âˆ¼ FS (supported on
[vS , vS ]) for keeping the good, and N buyers B1 . . . Bn with private values independently
drawn from FB supported on [vB , vB ]. Let VB1 , ..., VBn denote buyersâ€™ values. N is a random
variable. Suppose in this section that its realization is n. When biddersâ€™ values are ordered,
we denote this ordering, from highest to lowest, using superscripts on B: VB(1) , ..., VB(n) . Let

A MECHANISM DESIGN APPROACH TO IDENTIFICATION AND ESTIMATION

67

FB(1) denote the distribution of VB(1) , the maximum order statistic of buyer valuations.28
Here we solve for the second-best optimization problem, subject to information constraints
and ex-ante budget balance, that maximizes the expected gains from trade.
A mechanism is a set of m functions p1 (vS , vB1 . . . vBn ) . . . pm (vS , vB1 . . . vBn ), mapping
a tuple of seller and buyer values to a vector of probabilities that the seller trades with each
buyer. The surplus of any mechanism is:
#
Ë† vS Ë† vB
Ë† vB "X
m
(vBi âˆ’ vS ) pi (vS , vB1 . . . vBn )
...
vS

vB

vB

i=1

dFB (vB1 ) . . . dFB (vBn ) dFS (vS ) . (34)
The revenue from any mechanism is:
#

 
Ë† vS Ë† vB
Ë† vB "X
m 
1 âˆ’ FB (vBi )
FS (vS )
...
pi (vS , vB1 . . . vBn )
v Bi âˆ’
âˆ’ vS +
fB (vBi )
fS (vS )
vS
vB
vB
i=1

dFB (vB1 ) . . . dFB (vBn ) dFS (vS ) . (35)
If buyer marginal revenues (i.e. virtual valuations) vBi âˆ’

1âˆ’FB (vBi )
f B ( vB i )

are strictly increasing

then in the optimal mechanism, whenever the good is allocated, it will be allocated to the
highest value bidder; that is, pi = 0 whenever vBi 6= vB(1) , and revenue and trade surplus
from the highest value buyer do not depend on the values of lower valued buyers. We find
that estimated buyer marginal revenues are indeed strictly increasing in our application;
thus, we can replace the vector of pi functions by a single function p (vS , vB(1) ) determining
the probability of trade between the seller and the highest-value buyer. For notational
simplicity, in the following we will omit the superscript and refer to vB(1) simply as vB .
Under this simplification, the surplus from (34) can be written as follows:
Ë† vS Ë† vB
(vB âˆ’ vS ) p (vS , vB ) dFB(1) (vB ) dFS (vS ) .
vS

(36)

vB

28When the number of bidders present N is a random variable, varying from one instance of the game to

another, as in our application, the first order statistic distribution will be the unconditional order statistic, as
in Freyberger and Larsen (2017). The traditional notation for order statistics writes values from highest to
lowest as VBn:n , ..., VB1:n , which refers to an order statistic conditional on a realization of N = n. In contrast,
VB(j) is the jth highest VB among N bidders, unconditional on the realization of the random variable N, and
is thus a draw from the distribution
X
FB(j) (u) â‰¡
Pr(N = n)FV nâˆ’j+1:n (u),
n

B

where FV nâˆ’j+1:n is the distribution of the jth highest bid conditional on N = n, which, given that draws of
B

VB are i.i.d., is given by the following (see David 1981):
" n
#
X n
k
nâˆ’k
FV nâˆ’j+1:n (u) â‰¡
FB (u) (1 âˆ’ FB (u))
.
B
k
k=nâˆ’j+1

68

LARSEN AND ZHANG

and the total revenue from (35) can be written as
 

Ë† vS Ë† vB 
FS (vS )
1 âˆ’ FB (vB )
âˆ’ vS +
p (vS , vB ) dFB(1) (vB ) dFS (vS ) .
vB âˆ’
fB (vB )
fS (vS )
vS
vB

(37)

In addition, incentive compatibility requires that marginal probabilities of trade are componentwise increasing. This implies that the quantities
Ë† vB
p (vS , vB ) dFB(1) (vB )

(38)

vB

Ë†

vS

p (vS , vB ) dFS (vS )

(39)

vS

must respectively be monotone in vS , vB . Because in our application we find that marginal
revenue for buyers is monotone, the monotonicity constraint for (39) does not bind at
the optimum. However, our seller value distribution has a non-monotone virtual valuation
function, hence we need to enforce that (38) be monotone, ironing sellersâ€™ virtual valuations.
We numerically solve the second-best problem on a uniformly spaced quantile grid of
seller values. For each vS , since buyer marginal revenue is monotone, at the optimum sellers
will trade with all buyers with values above a cutoff; hence we need only specify a lower
cutoff buyer value c (vS ) for each seller type. As in the bilateral trade case of Myerson
and Satterthwaite (1983), the revenue constraint (37) can be included in the objective
as a Lagrange multiplier; with some algebra, the Lagrangian incorporating the revenue
constraint can be written as a function of a scalar Î± to be solved for:
 

Ë† vS Ë† vB 
1 âˆ’ FB (vBi )
FS (vS )
v Bi âˆ’ Î±
âˆ’ vS + Î±
dFB(1) (vB ) dFS (vS ) .
fB (vBi )
fS (vS )
vS
c(vS )

(40)

Similarly to the second-best problem in Myerson and Satterthwaite (1983), to solve the
second-best problem here, we take a two-step approach: in an inner loop, fixing Î±, we

maximize (40) subject to the monotonicity constraints vS > v0S =â‡’ c (vS ) 6 c v0S .
In an outer loop, we evaluate revenue (37) for the optimal solution for any given Î±, and
search for a value of Î± âˆˆ [0, 1] that leads to zero revenue. Since buyer marginal revenue is
monotone, the inner loop is a convex optimization problem, and similarly to Myerson and
Satterthwaite (1983) the outer loop can be shown to be monotone in Î±; hence both the
inner and outer loops are guaranteed to be well-behaved.
Finally, we discuss how we calculate trade surplus for the mechanism observed in the data.
Since our estimation procedure produces estimates of the probability of trade P (r(vS )) and
transfer T 0 (r(vS )) for all seller values in the mechanism observed in the data, we can
calculate the utility achieved by any seller type as
vS P (r(vS )) âˆ’ T 0 (r(vS )) .

A MECHANISM DESIGN APPROACH TO IDENTIFICATION AND ESTIMATION

69

In order to calculate trade surplus, since we do not observe the buyerâ€™s value for each
instance of bargaining, we need to impose the assumption that trade is monotonic, in the
sense that each seller type trades with all buyer types above a certain cutoff. Larsen (2014)
demonstrates that this property will indeed be satisfied in Bayes-Nash equilibria of this
game, relying on results from Storms (2015). Under this property, our estimated P (r(vS ))
function and the buyer value distribution FB (Â·) together imply cutoffs
cÌƒ (vS ) = {vB : 1 âˆ’ FB (vB ) = P (r(vS ))} .
This allows us to calculate gains from trade from the actual mechanism essentially using
(36), that is:

Ë†

vS

vS

Ë†

vB

cÌƒ(vS )

(vB âˆ’ vS ) p (vS , vB ) dFB(1) (vB ) dFS (vS ) .

(41)

70

LARSEN AND ZHANG

Figure 11. Quadratic/Cubic Spline Basis

(a) Quadratic

(b) Cubic

Notes: Example of quadratic (panel A) and cubic (panel B) spline basis functions, with knots at
y = (1, 2, 3, 4, 5, 6) . In addition, the quadratic spline basis includes an intercept term, and the
cubic spline basis includes slope and intercept terms.

Figure 12. An Equilibrium in the k Double Auction

Notes: A solution to the k = 1/2 double auction, lying with the tetrahedron
P = {(vS , vB , t) : vS 6 vS 6 t 6 vB 6 vB , vS 6 vS , vB > vB }. This solution passes through the point
(vS , vB , t) = (0.375, 0.625, 0.5). Buyer valuations are drawn from a N(0.6, 0.3) and seller valuations
from a N(0.5, 0.2), with each distribution truncated to lie between [0, 1].

