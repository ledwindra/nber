NBER WORKING PAPER SERIES

CONSUMPTION COMMITMENTS AND HABIT FORMATION
Raj Chetty
Adam Szeidl
Working Paper 10970
http://www.nber.org/papers/w10970
NATIONAL BUREAU OF ECONOMIC RESEARCH
1050 Massachusetts Avenue
Cambridge, MA 02138
December 2004

Previously circulated as "Consumption Commitments: Neoclassical Foundations for Habit Formation."
For helpful comments we thank John Campbell, Gary Chamberlain, Tom Davido¤, Drew Fudenberg,
Elhanan Helpman, Miklos Koren, Hanno Lustig, Todd Sinai, Jeremy Stein, and Moto Yogo. For funding,
Chetty and Szeidl thank the National Science Foundation (Grant SES 0522073), Szeidl thanks the
Social Science Research Council, the Institute for Humane Studies, and the European Research Council
under the European Unions Seventh Framework Program (FP7/2007-2013), ERC grant agreement
number 283484. The views expressed herein are those of the author and do not necessarily reflect
the views of the National Bureau of Economic Research.
NBER working papers are circulated for discussion and comment purposes. They have not been peerreviewed or been subject to the review by the NBER Board of Directors that accompanies official
NBER publications.
© 2004 by Raj Chetty and Adam Szeidl. All rights reserved. Short sections of text, not to exceed two
paragraphs, may be quoted without explicit permission provided that full credit, including © notice,
is given to the source.

Consumption Commitments and Habit Formation
Raj Chetty and Adam Szeidl
NBER Working Paper No. 10970
December 2004, Revised September 2015
JEL No. D8,E21,G11,G12
ABSTRACT
We analyze the implications of household-level adjustment costs for the dynamics of aggregate consumption.
We show that an economy in which agents have “consumption commitments” is approximately equivalent
to a habit formation model in which the habit stock is a weighted average of past consumption if idiosyncratic
risk is large relative to aggregate risk. Consumption commitments can thus explain the empirical regularity
that consumption is excessively sensitive and excessively smooth, findings that are typically attributed
to habit formation. Unlike habit formation and other theories, but consistent with empirical evidence,
the consumption commitments model also predicts that excess sensitivity and smoothness vanish for
large shocks. These results suggest that behavior previously attributed to habit formation may be better
explained by adjustment costs. We develop additional testable predictions to further distinguish the
commitment and habit models and show that the two models have different welfare implications.
Raj Chetty
Department of Economics
Harvard University
1805 Cambridge St.
Cambridge, MA 02138
and NBER
chetty@fas.harvard.edu
Adam Szeidl
Department of Economics
Central European University
Nador u. 11
Budapest, Hungary
and NBER
szeidla@ceu.hu

1

Introduction

Many households have “consumption commitments” such as housing that are costly to adjust in
response to fluctuations in income. Chetty and Szeidl (2007) document that more than 50% of the
average U.S. household’s budget remains fixed when the household faces moderate income shocks
such as unemployment. Olney (1999) gives historical evidence on the importance of households’
installment finance commitments during the Great Depression. Such consumption commitments
can amplify the welfare costs of shocks because–for shocks that are not large enough to induce a
change in commitments–households are forced to concentrate all reductions in wealth on changes in
adjustable (e.g., food) consumption. Through this mechanism, consumption commitments can help
explain microeconomic evidence in domains ranging from wage rigidities (Postlewaite, Samuelson
and Silverman 2008) to added-worker effects (Chetty and Szeidl 2007), housing choices of couples
(Shore and Sinai 2009), and portfolio choice (Chetty and Szeidl 2014).
In this note, we show that household-level consumption commitments also have important implications at the macroeconomic level, especially for the dynamics of aggregate consumption. We
show that when idiosyncratic risk is large relative to aggregate risk, nonlinear dynamics due to commitments at the household level aggregate into approximately linear dynamics for larger groups,
producing patterns that are approximately identical to representative-agent habit formation.1 In
particular, commitments can explain the key facts–often attributed to habit formation–that consumption exhibits excess sensitivity and excess smoothness.

But the commitments model also

explains empirical regularities that are not consistent with standard habit formation models. For
instance, it predicts that excess sensitivity and smoothness vanish for large shocks, providing foundations for an empirical phenomenon termed the “magnitude hypothesis” (Japelli and Pistaferri
2010).

Hence, our results suggest that some of the behavior previously attributed to habit for-

mation may be due to adjustment costs in consumption. The distinction between the two models
matters because they generate different comparative statics and yield different welfare implications.
We begin our analysis in Section 2 with a household-level model in which changing the consumption of certain goods is costly.

These costs could reflect either transaction costs or mental

costs such as the effort required for changing plans (Grossman and Laroque 1990, Chetty and
1

Beginning with Ryder and Heal (1973), models in which habit is an average of past consumption are widely used
in economics. Sundaresan (1989), Constantinides (1990), Campbell and Cochrane (1999) and Boldrin, Christiano and
Fisher (2001) use variants of this model in macro-finance, while Carroll, Overland and Weil (2000), Fuhrer (2000),
Christiano, Eichenbaum, and Evans (2003) and a literature building on this work uses variants in macroeconomics
and monetary policy.

1

Szeidl 2007). We show that in an economy populated by many such agents, aggregate dynamics
can be represented by the preferences of a representative agent whose utility function involves a
state variable corresponding to aggregate commitments.2 This state variable is endogenous: each
household chooses commitments to maximize expected utility, and hence aggregate commitments
are shaped by the expectations agents hold on the dates on which they update.
In Section 3, we characterize the aggregate dynamics of consumption commitments.

Our

main result is a precise characterization showing that when the ratio of idiosyncratic to aggregate
consumption risk is large, aggregate commitments are well approximated by a (linear) weighted
average of past consumption with fixed weights. As a result, the commitments economy is closely
approximated by a representative-agent habit model in which the habit stock is a weighted average
of past consumption.3

To understand this result, note that the impulse response to aggregate

shocks in the commitments model depends on the distribution of agents in the inaction region
for commitment consumption.

Aggregate shocks perturb this distribution, while idiosyncratic

shocks push it back towards its steady state. When idiosyncratic risk is large, the second effect
dominates, and hence on most dates the distribution remains close to its steady state.

Thus

impulse-responses are approximately state-independent, which in turn can be generated in a habit
model with fixed weights. Since in practice idiosyncratic risk is much larger than economy-wide
risk (e.g., Deaton, 1991, Carroll, Hall, and Zeldes 1992), we interpret this result as showing that
consumption commitments and habit formation generate similar aggregate consumption dynamics
in a typical environment.
While the commitments model matches the predictions of habit models in a commonly-studied
domain, it yields new predictions in other settings. In Section 4, we illustrate the similarities and
differences between the two models using three applications. We first consider the consumption
response to income shocks.

Two well-documented empirical regularities are that consumption

does not respond fully to contemporaneous shocks (“excess smoothness,” Deaton 1987) and that
anticipated changes affect current consumption (“excess sensitivity,” Flavin 1981). Fuhrer (2000)
argues that both of these facts can be explained by a habit formation model in which habit responds
sluggishly to shocks, which is one reason why habit models have been influential in macroeconomics.
Our equivalence result implies that the commitments model also produces sluggish responses in most
2

In our economy the relative price of commitment and adjustable consumption is exogenous and fixed. We discuss
both general equilibrium and partial equilibrium interpretations of this assumption in Section 2.2.
3
Our characterization is analytical. Previous studies of aggregate consumption with adjustment costs use numerical
techniques (Marshall and Parekh 1999), or time-dependent adjustment (Lynch 1996, Gabaix and Laibson 2001, Reis
2006). These studies focus on a model with a single illiquid good, as in Grossman and Laroque (1990).

2

periods and therefore also explains excess sensitivity and smoothness.
However, a key prediction of the commitments model–but not the habit model–is that the
excess sensitivity of consumption vanishes for large shocks. When such shocks occur, households
adjust their commitments and thus behave more in line with the permanent income model. This
prediction helps explain a large body of micro evidence about consumption responses to shocks
termed the “magnitude hypothesis” by Japelli and Pistaferri (2010). For example, Hsieh (2003)
finds that Alaskan households’ consumption is excessively sensitive to tax refunds (a small income
change), but not to payments from the Alaska Permanent Fund (a large income change). Similarly,
Parker (1999), Souleles (1999) and Souleles (2002) find excess sensitivity to small income changes
associated with tax and social security payments, but Browning and Collado (2001) and Souleles
(2000) find no excess sensitivity to large changes in disposable income coming from bonus salary
payments and college tuition. Such facts are difficult to explain with standard habit models, in
which the impulse response to income shocks does not depend on shock size. They can, however, be
explained by the commitments model, suggesting that a significant part of consumption behavior
attributed to habits in preferences may be due to adjustment costs in consumption.
In our second application, we explore how consumption dynamics are affected by changes in
the environment. Because commitments are chosen by the consumer, they respond endogenously
to such changes. In contrast, the parameters determining reduced-form habit are exogenous and
do not vary with the environment. We show that reductions in risk or in expected growth increase
sluggishness of consumption in the commitment economy because they reduce the frequency of
adjustment.

This result yields a new prediction about excess sensitivity: consumption should

respond more quickly to shocks in high-growth and high-risk environments. At the macroeconomic
level, this logic suggests that recessions may be shorter lived in rapidly growing economies, in
which agents reorganize their arrangements frequently. Similarly, recessions may last longer in
welfare states that have large social safety nets. Evidence on these predictions would help further
distinguish between the commitments and habit models.
In our final application, we turn to welfare analysis. Distinguishing between the commitments
and habit models is especially important because the two models have different welfare and policy
implications. We first note that the commitment model has a natural welfare measure based on
expected utility.

In the habit model, such a measure is not immediately available.

Prior work

(e.g., Ljungquist and Uhlig 2000, Ljungquist and Uhlig 2009) has assumed that the welfare of
agents with habit preferences is fully determined by surplus consumption, without including the
3

habit stock. We follow this approach and compare the welfare cost of a shock–measured by the
willingness to pay to avoid it–in the two models. We find that the welfare cost of large shocks
is smaller in the commitments model than in the habit model because agents can abandon their
commitments but not their habits in extreme events. This result suggests that the optimal size
of social insurance programs that insure large shocks such as disability or job displacement may
be smaller than predicted by analyses using habit models such as Ljungquist and Uhlig (2000).
We also find that reducing idiosyncratic risk–e.g., by expanding social insurance programs–can
increase the welfare cost of aggregate shocks by slowing the rate of adjustment.
Our results build on two strands of prior research.

First, several papers have pointed out

the qualitative similarity between the commitment and habit models.

Dybvig (1995) examines

ratcheting consumption demand under extreme habit persistence and motivates these preferences
by pre-commitment in consumption.

Flavin and Nakagawa (2008) study asset pricing in a two-

good adjustment cost model and note the similarity to habit. Fratantoni (2001) and Postlewaite,
Samuelson and Silverman (2008) also study two-good models and note this similarity in other
contexts.

We contribute to this literature by analyzing aggregate dynamics, presenting formal

conditions under which commitments and habit formation are similar, and deriving new behavioral
and welfare predictions that distinguish the two models (summarized in Section 5).
Second, our results also build on a literature on industry dynamics, including Bertola and
Caballero (1990), Caballero (1993), and Caballero and Engel (1993, 1999). Our main innovation
relative to this literature is to develop a theory of state-dependent impulse responses, which we then
use to derive an analytical characterization of aggregate dynamics. Our habit equivalence result
is also related to Khan and Thomas (2008), who establish approximate linearity in a production
setting with endogenous prices computationally. We establish approximate linearity–emerging
through a different mechanism–in a consumption setting with exogenous prices analytically.

2

A Model of Consumption Commitments

In this section, we present our model, characterize household behavior, and show the existence of a
representative consumer in our setting. We present a map of all proofs in the Appendix, and full
technical details in a Supplementary Appendix.

4

2.1

Setup

We study a continuous-time economy with a unit mass of consumers. We index agents by i ∈ [0, 1],
but suppress the index in notation for simplicity when it does not cause confusion.

Each agent

maximizes expected lifetime utility given by
E

Z

∞

0

where ρ is the discount rate.



xt 1−γ
at 1−γ
+
dt
e−ρt κ
1−γ
1−γ

(1)

Each agent consumes two goods: at and xt measure the service

flows from adjustable (e.g., food) and commitment (e.g., housing) consumption, and κ measures
the relative preference for adjustables.

Adjusting commitment consumption xt involves a fixed

monetary cost, which may depend both on the pre-existing and new service flow from commitment
consumption. Formally, denoting xt− = lim supsրt xs , if on date t the agent sets xt 6= xt− , he
must pay a monetary cost of λ1 xt− + λ2 xt where λ1 , λ2 ≥ 0 and at least one of them is positive.4
We are interested in characterizing how individual heterogeneity translates into aggregate dynamics in the presence of consumption commitments. We therefore study an economy in which
agents are exposed to both idiosyncratic and aggregate risk. We introduce these risks by assuming
that agents have access to a variety of financial assets. The return processes of all assets are technologically determined and exogenous, and all returns are paid out in the adjustable good. Each
agent can invest in a bond with a constant instantaneous riskfree return r, so that the face value
of the bond evolves as
dBt /Bt = rdt.

(2)

We also allow two types of risky investments, both with i.i.d. returns. The source of aggregate risk
is the stock market, with instantaneous return
dSt /St = (r + π)dt + σdzt

(3)

where zt is a standard Brownian motion that generates a filtration {Ft , 0 ≤ t < ∞}, π is the expected excess return, and σ is the standard deviation of asset returns. Households also face idiosyncratic risk in the form of a household-specific risky investment opportunity. This background
risk can be thought of as entrepreneurial investment or labor income risk (where “investment” is
4

Similar utility and adjustment cost specifications have been used by Flavin and Nakagawa (2008), Fratantoni
(2001), Li (2003), and Postlewaite, Samuelson and Silverman (2008).

5

investment in human capital). The return of household i’s entrepreneurial investment is given by
dStE,i /StE,i = (r + π E )dt + σ E dzti
where the z i s are standard Brownian motions uncorrelated across households.5 Each agent can
invest or disinvest any amount into his private asset at any time. We ignore imperfections in
financial markets: an agent can go long and short in any of the assets available to him.
We assume that the relative price of adjustable and commitment consumption services is exogenous and normalized to one. We discuss below both general equilibrium and partial equilibrium
interpretations of this assumption.

We also assume that the agent pays for the commitment

consumption service every period (e.g., as with rental housing).6 Denoting total wealth by wti , the
wealth share invested in the stock market by αit , and the wealth share invested in the entrepreneurial
asset by αE,i
t , the dynamic budget constraint of agent i is
#
E,i

 dB
dS
dS
t
t
t
+ αE,i
− (at + xt ) dt − 1{xt− 6=xt } (λ1 xt− + λ2 xt ) .
+ 1 − αit − αE,i
dwti = wti αit
t
t
E,i
St
B
t
St
(4)
 2


We make the standard assumption that ρ > (1 − γ) r + π / 2σ 2 + π 2E / 2σ 2E (1 − γ) /γ, which
"

ensures that with zero adjustment costs, expected consumption utility grows at a smaller rate than
the discount rate in the optimum, generating finite lifetime utility.

2.2

Discussion of Modelling Choices

Consumption commitments.

As a benchmark, we interpret the adjustment cost as the physical

transaction cost inherent in changing consumption of illiquid durables such as houses, cars, or
appliances, or the cost of renegotiating service contracts (Attanasio 2000, Eberly 1994, Grossman
and Laroque 1990).7 However, the adjustment cost may also represent costs required to respond
to new circumstances and make new choices (Browning and Collado 2001, Ergin 2003), and may
arise from attention costs or computing costs (Ameriks, Caplin and Leahy, 2003, Reis, 2006).
Exogenous price of commitment good.

The fixed relative price of the commitment good can

5

Sun (1998) develops the mathematical foundations for working with a “large number” of independent stochastic
processes, and derives exact laws of large numbers in these settings.
6
Because the agent is free to borrow, this model is equivalent to one in which the agent buys and sells the
capitalized service flow at price x/r on every adustment date.
7
More recently, several studies have examined state-dependent models with two consumption components, one
freely adjustable and one that is costly to adjust (Flavin and Nakagawa 2008, Fratantoni 2003, Li 2003).

6

be interpreted as arising from a technology that can transform adjustable into commitment and
commitment into adjustable goods at a given conversion rate, after paying the adjustment cost.
With this interpretation, since investment opportunities are also technologically determined, our
model environment is a general equilibrium economy.
An alternative, partial equilibrium interpretation of the exogenous price assumption is that the
model describes a group of people who are small from the perspective of the aggregate economy.
In this interpretation “aggregate shocks” affect all members of the group but are uncorrelated
with economy-wide fluctuations; and a “representative agent” represents the group, not the entire
economy. This partial equilibrium interpretation is closest to the micro evidence we discuss in the
context of excess sensitivity and smoothness in Section 4.1 below.
In a parallel literature on adjustment costs in firm investment, Khan and Thomas (2008) show
that even though dynamics at the firm level are highly nonlinear, endogenous prices can create
aggregate dynamics which are approximately linear.

Our habit equivalence result below is con-

nected to this finding. It establishes that a high ratio of idiosyncratic risk to aggregate risk can also
create aggregate dynamics which are approximately linear in our exogenous-price setting. In the
Khan and Thomas model, the nonlinearities generated by simultaneous adjustment of many firms
are infrequent because relative prices adjust such that the benefits of adjustment are limited. In
our model, simultaneous adjustment by many agents is infrequent because idiosyncratic risk keeps
the cross-sectional distribution near its steady-state shape. The fact that price effects push in the
same direction as idiosyncratic risk suggests that even when the price of the commitment good is
endogenized–an important issue we leave for future research–the results on approximate linearity
are not likely to be overturned.
Preferences. When κ → ∞, our model converges to a neoclassical model without adjustment
costs, and when κ = 0 we obtain a model with only commitment consumption, as in Grossman
and Laroque (1990). Because utility is time-separable, γ measures the elasticity of intertemporal
substitution as well as relative risk aversion for an individual who is free to adjust both x and a.
We use this functional form to make the evolution of commitments tractable. However, we believe
that the intuitions underlying our main results apply more generally to other specifications as well.

2.3

Household Behavior

Optimal choice of commitment and adjustable consumption. The following proposition characterizes
the choice of commitment consumption using an (S,s) band.
7

This result has been previously

established for a class of models that nests our model as a special case (Flavin and Nakagawa
2008). We state the proposition here as a reference.
Proposition 1 [Household behavior] There exist s < s∗ < S such that xit is not adjusted as long
as xit /wti ∈ (s, S), but adjusted otherwise; and when it is adjusted, the household sets xit = s∗ wti .
The behavior of adjustable consumption ait can be characterized directly from the Euler equation. The appendix shows that log at is a random walk with drift that satisfies
d log ait = µa · dt +

πE
π
· dzt +
· dzti .
γσ
γσ E

(5)

Here, µa is the constant mean growth rate, while the second and third terms measure how at
responds to aggregate shocks dzt and idiosyncratic shocks dzti . Motivated by (5), we define σ A =
π/ (γσ) and σ I = π E / (γσ E ), which measure the standard deviation of adjustable consumption due
to aggregate respectively idiosyncratic risk. Let σ 2T = σ 2A + σ 2I measure total consumption risk.
Characterizing consumption dynamics.

Proposition 1 and equation (5) do not constitute a

full characterization of consumption dynamics because the (S,s) rule involves the commitments-towealth ratio, and, by equation (4), the evolution of wealth depends on portfolio decisions.

We

obtain a full characterization of optimal consumption dynamics by specifying the household’s choice
of xit as a function of ait instead of wti . Define yti = log(xit /ait ). It then follows from Proposition
1 that there exist numbers L < M < U such that for yti ∈ (L, U ), the household does not adjust
xit from its prior level; but as soon as yti reaches L or U , the household resets xit so that yti = M .8
This rule characterizes the choice of xit with an inaction region over yti . Importantly, because yti
depends on the endogenous variable ait , this rule is a description of optimal behavior. However,
in combination with (5), which characterizes the evolution of ait , this description yields a complete
characterization of consumption dynamics.

In particular, given initial values for wealth w0i and

commitment xi0 , the household chooses the initial level of adjustable consumption ai0 based on the
long-run budget constraint, and the evolution of ait and xit are then completely pinned down.
A key implication of this characterization is that household consumption cit = ait + xit jumps
on adjustment dates. Chetty and Szeidl (2007) document evidence consistent with this prediction
and with the (S,s) policy predicted by Proposition 1. Using data from the Panel Study of Income
8
The existence
of an inaction region representation with x/a follows from the fact that the consumption function

ait = a wti , xit is strictly increasing in wti and homogenous of degree one. As a result it can be used to map the (S,s)
band over wealth into a band over adjustable consumption: for example L = 1/a (1/s, 1).

8

Dynamics, they show that following “small” unemployment shocks that generate a wage income
loss of less than 33 percent, most households cut food consumption significantly, while 31 percent
of them move out of their house and adjust housing consumption discretely. In response to larger
shocks (wage loss greater than 33 percent), households are more likely to adjust on both margins,
and in particular 40 percent of them move and change housing consumption discontinuously.
Interpreting at as permanent income. As shown by equation (5), log at follows a random walk:
it adjusts immediately and fully to both aggregate and idiosyncratic shocks. In fact, for an agent
facing no adjustment costs (λ1 = λ2 = 0) equation (5) would also characterize the dynamics of
total consumption, and hence at is proportional to what consumption (equivalently, permanent
income) would be in the absence of adjustment costs. Thus ait is usefully thought of as a measure
of the permanent income of agent i. Given the equivalent characterization of the optimal policy
described above, we often take the perspective that ait , defined by (5), measures fluctuations in
permanent income, and that xit evolves in response to these fluctuations.
Initial conditions. We assume that at t = 0 initial wealth and commitment consumption levels
are such that households are all inside their inaction region, that ai0 = A0 is the same for all
households, and that the distribution of y0i inside the (L, U ) region is given by F0 (y).

2.4

Existence of a Representative Consumer

We now show that aggregate dynamics in the adjustment cost model coincide with those of a
single-agent economy in which aggregate commitments act as a habit-like reference point for the
R
R
representative consumer. Let Xt = i xit di, At = i ait di, and Ct = Xt + At denote aggregate
commitment, adjustable, and total consumption at time t.



π2
Proposition 2 Assume that δ = ρ− 2σI2 1 + γ1 > 0. Then the aggregate dynamics of consumption
I

are the optimal policy of a representative consumer with external habit formation utility
E

Z

0

∞

e−δt

(Ct − Xt )1−γ
dt
1−γ

(6)

where Xt follow the dynamics of aggregate commitments.
The intuition for the existence of a representative consumer is that–as in Grossman and Shiller
(1982)–idiosyncratic shocks cancel in the aggregation.

The presence of idiosyncratic risk also

increases mean consumption growth, and to compensate for this, the representative consumer must

9

be more patient than the individual households.

An implication of Proposition 2 is that the

functional form for the utility of the representative consumer is identical to the commonly used
“additive habit” specification (e.g., Constantinides, 1990, Campbell and Cochrane, 1999). In this
framework, the only observational difference in the aggregate between the commitment model and
habit formation models comes from the dynamics of Xt .

3

Dynamics of Aggregate Commitments

We now turn to characterize the evolution of the aggregate commitments Xt .

We set the stage

in Section 3.1 by adapting existing results about the cross-sectional distribution to our setting.
The new contribution is in the remainder of the section. In Section 3.2 we present our key idea:
we represent Xt as a moving-average of past shocks, in which the weights are state-dependent
impulse responses determined by the cross-sectional distribution at the time of the shock.

In

Section 3.3 we show that habit models admit an analogous representation in which the weights are
state-independent. Finally, in Section 3.4 we identify conditions under which the weights of the
commitments model are approximately state-independent, establishing approximate linearity and
an equivalence with habit formation.

3.1

The Cross-Sectional Distribution

We begin with preliminary results which build on the literature on firm dynamics. Because they
have identical preferences, the numbers {L, M, U } are the same for all households in the economy.
However households face different idiosyncratic shocks and as a result are in general in different
locations in the (L, U ) region.

Characterizing the dynamics of Xt thus requires keeping track

of the distribution of households.

The main object we use for this purpose is the adjustableR
consumption-weighted cross-sectional distribution of y, defined as F (y, t) = (1/At ) {i:yi (t)<y} ait di.
This quantity equals the share of total adjustable consumption at date t which is consumed by

households i whose yti is below y in the inaction region (L, U ). Given our discussion in Section 2.3
that at reflects lifetime resources, F (y, t) can be intuitively thought of as measuring how permanent
income is distributed inside the inaction region. Note that because at t = 0 we have ai0 = A0 for all
households, F (y, 0) = F0 (y). Let µA denote the instantaneous drift of At and f (y, t) denote the
density of F (y, t), the existence and dynamics of which are characterized by the following result.

10

Proposition 3 f (y, t) exists for all t > 0 and satisfies the stochastic partial differential equation
for t > 0 and y ∈ (L, U )



σ 2I ∂f (y, t) σ 2T ∂ 2 f (y, t)
∂f (y, t)
+
dt + σ A
dz
df (y, t) =
µA +
2
∂y
2
∂y 2
∂y

(7)

together with the following boundary conditions:
∂f (M, t) + ∂f (M, t) − ∂f (U, t) − ∂f (L, t) +
−
=
−
∂y
∂y
∂y
∂y
f (U, t) = f (L, t) = 0 and f (M, t)+ = f (M, t)− .
Aggregate commitments follow the dynamics
dXt = At


σ 2T
· fy (L, t)(eM − eL ) + fy (U, t)(eU − eM ) dt.
2

(8)

This result is based on Propositions 1 and 2 in Caballero (1993) combined with Girsanov’s
theorem to account for a change in drift. Equation (8) shows that the evolution of commitments
is “smooth” in the aggregate in the sense that it is a bounded variation process (has no dz term).
This follows because the cross-sectional densities go to zero near the boundary of the (S,s) band.
As a result the total mass of agents who adjust in response to an aggregate shock of size dz is small:
it is proportional to the area under the density at the boundaries, which is of order (dz)2 = dt.
To understand the intuition for equation (7), first consider the case with no aggregate risk
(dz = 0). Then the final term on the right hand side vanishes, and the resulting partial differential
equation has a unique time-invariant solution f ∗ .

This density f ∗ can be thought of as the

“unperturbed” steady state of the economy. In the presence of aggregate shocks, the actual crosssectional density f is constantly perturbed relative to f ∗ , as represented by the dz term in (7); but
in the long term the system returns to f ∗ in expectation.
Figure 1 illustrates these results. The top panels plot the steady-state distribution f ∗ in two
environments: one with high aggregate and low idiosyncratic risk and the other with low aggregate
and high idiosyncratic risk. The bottom panels show the actual cross-sectional distribution sampled
twenty times from simulating the two environments.

The actual distributions are more similar

to the steady state distribution when idiosyncratic risk is high relative to aggregate risk.

This

observation–which follows because idiosyncratic risk forces the distribution to converge towards
f ∗ , while aggregate risk pushes it away from f ∗ –plays a key role in our approximation result below.
11

(a) High aggregate, low idiosyncratic risk (b) Low aggregate, high idiosyncratic risk
2

2

1

1

0
−1
−0.5
0
0.5
1
Log commitment to adjustable ratio

0
−1
−0.5
0
0.5
1
Log commitment to adjustable ratio

2

2

1

1

0
−1
−0.5
0
0.5
1
Log commitment to adjustable ratio

0
−1
−0.5
0
0.5
1
Log commitment to adjustable ratio

Figure 1: Cross-sectional densities of the log commitment to adjustable consumption ratio. Top
panel shows the long run steady state f ∗ , bottom panel shows twenty realizations. Environment
(a) has high aggregate risk (σ A = .1) and low idiosyncratic risk (σ I = .05), environment (b) has
low aggregate risk (σ A = .05) and high idiosyncratic risk (σ I = .1).

3.2

State-Dependent Impulse Responses and a Moving-Average Representation

To connect the dynamics of Xt to exogenous habit models, we develop a moving average (MA)
representation for Xt . This representation summarizes the dynamic response of Xt to past aggregate
shocks. Because our interest is in fluctuations, we focus on the de-trended processes At = e−µA t At ,
which is a martingale, and X t = e−µA t Xt . It is useful to think of At as summarizing aggregate
shocks up to date t.
The next definition introduces the impulse response of commitments to an aggregate shock at
t = 0. Specifically, we consider a small change in A0 relative to an initial value A∗0 , holding fixed
the initial distribution of commitment consumption. Given the initial value A∗0 , the commitment
i
i
∗
i
consumption of agent i is xi∗
0 = a0 exp y0 = A0 exp y0 . Hence–given that the initial distribution

of y0i is F0 –the initial cross-sectional distribution of commitment consumption is F x (x0 |A∗0 ) =
F0 [log x0 − log A∗0 ].

We let X t (A0 , F x (x0 |A∗0 )) denote normalized aggregate commitments at

date t when ai0 = A0 may differ from A∗0 , but the initial distribution of commitments is fixed at
F x (x0 |A∗0 ).

12

Cumulative impulse response
Cumulative impulse response

(a) High aggregate, low idiosyncratic risk

(b) High aggregate, high idiosyncratic risk

1

1

0.5

0.5

0

0
5

10

15 20 25 30
Years
(c) Low aggregate, low idiosyncratic risk

15 20 25 30
Years
(d) Low aggregate, high idiosyncratic risk

1

1

0.5

0.5

0

0
5

10

15 20
Years

25

30

5

10

5

10

15 20
Years

25

30

Figure 2: Normalized cumulative impulse response function of aggregate commitment consumption
in four environments with high (σ = .1) and low (σ = .05) aggregate and idiosyncratic risk.
Definition 1 The impulse response function of the commitments model in state F is the function


∂E0 X t (A0 , F x (.|A∗0 )) |
ξ (t|F ) =
∂A0

.
F0 =F,

A0 =A∗0

This is just the derivative of E0 X t with respect to a uniform change in a0 for all households,
holding fixed initial commitments. The Appendix shows that ξ (t|F ) is well-defined and independent of A∗0 . Because we usually work with cross-sectional distributions that have a density, we often
write ξ (t|f ) where f is the density of F , or ξ (t|f (s)) when f (s) is the adjustable-consumptionweighted cross-sectional density at date s. It is intuitive that impulse responses should depend on
the initial distribution: when many households are on the verge of downsizing, a negative aggregate
shock will reduce commitments at a faster rate. Figure 2 plots impulse-responses in our model in
four environments (assuming f = f ∗ ). As t → ∞, these impulse responses gradually converge to a
limit (normalized to one in the figures), which corresponds to full adjustment to the initial shock.
Higher risk leads to more rapid convergence, as commitments are updated more quickly.
We use ξ (t|f ) to make explicit the dependence of Xt on past aggregate shocks.

13

Proposition 4 De-trended aggregate commitments admit the moving average representation
Xt =

Z

t

ξ (t − s, f (s)) dAs + E0 X t .

(9)

0

As we show below, this MA representation is the key diagnostic in analyzing the dynamics of
Xt . The result is intuitive: the current level of X t equals its ex ante expectation plus the sum of the
effects of aggregate shocks between date 0 and date t, accounting for partial adjustment to shocks
using the impulse response function. We interpret (9) as a “state-dependent MA representation”
for commitments, where the coefficients ξ (t − s, f (s)) depend on the state of the economy at date
s through f (y, s).

3.3

Habit Models and a State-Independent MA Representation

A leading special case of the moving-average representation in (9) is where the weights ξ are stateindependent, i.e., do not depend on history.

We now show that this special case coincides with

reduced-form habit models in which Xt is specified as an average of past consumption with weights
that only depend on the time lag. Intuitively, if habit is a linear function of past consumption, it
should be expressible as a linear function of shocks to past consumption as well.
Habit model. Consider a representative agent economy in which external habit preferences are
given by (6), and the habit stock is exogenously determined as
Xth

h

=o

(t)X0h

+

Z

0

t

ζ h (t − s)Csh ds

(10)

with weights ζ h and oh which are exogenous locally integrable functions asymptoting to zero.
Throughout, we follow the convention that the superscript h refers to the representative agent
habit model. We assume that the habit consumer has access to the same stock and bond investment opportunities given in equations (3) and (2).

Our habit model is therefore a variant

of Constantinides (1990). Since the shock processes are identical, we can think of the habit and
commitment models as being defined on the same probability space. It is a direct consequence of
the Euler equation that in the optimum, the “surplus” consumption Cth − Xth for the habit agent
follows the same path as At in the commitments model. Thus, At keeps track of aggregate shocks
to marginal utility in both economies.
Moving average representation. Lemma 5 in the appendix shows that we can rewrite (10) into
a representation in which Xth is a weighted average of past values of As , rather than past values of
14

Cs . This follows essentially because C, X and A are linked by an accounting identity, and hence
any linear representation of X in terms of C can also be written as a linear representation in terms
of A. From that representation, integration by parts yields
h
Xt

=

Z

0

t

h

ξ h (t − s) · dAs + E0 X t

(11)

where ξ h (u) is absolutely continuous with respect to the Lebesgue measure. Equation (11) is an MA
representation for the detrended habit stock. The fact that the weights in this MA representation
are state-independent is a consequence of starting from a habit model in which the consumption
weights are state-independent.

3.4

Equivalence Result: A Fixed-Weight Representation in the Commitments
Model

The results above imply that the central difference between the fixed-weight habit and the commitment models comes from the state-dependent nature of impulse-responses in the latter case. We
now show that when the ratio of idiosyncratic to aggregate risk is high, aggregate commitments
evolve approximately according to a fixed weight specification.
We begin by introducing a fixed-weight habit model that generates dynamics which match the
evolution of commitments on average.
Definition 2 A fixed-weight habit model Xth matches the steady state impulse response of commitments if ξ h (t) = ξ (t, f ∗ ) for all t.
In words, we focus on the habit model that has the same impulse responses as the commitment
model in its “unperturbed” steady state f ∗ . This definition pins down all MA coefficients in (11).
We denote the impulse-response weights by ξ ∗ (u) = ξ (u, f ∗ ) and the habit model by Xth∗ .
Main result. Our equivalence result holds when the ratio of idiosyncratic (σ I ) to aggregate (σ A )
consumption risk is large. Since both of these parameters are endogenous, we study sequences of
exogenous parameters such that the implied ratio σ I /σ A goes to infinity. We explain why σ I /σ A
drives the result in the discussion below. Consider a sequence of models Θn such that, as n → ∞,
the following properties hold: 1) σ nI /σ nA → ∞; 2) γ, κ and λi remain fixed; 3) rn stays bounded
away from zero; 4) µnA remains bounded; and 5) rn /ρn is bounded away from zero and infinity. An
example of such a sequence is when π n = 1/n, while all other exogenous parameters stay constant.
In this sequence, σ nA → 0.
15

Aggr commitments / habit stock
Aggr commitments / habit stock

(a) High aggregate, low idiosyncratic risk

(b) High aggregate, high idiosyncratic risk

1.1

1.1

1.05

1.05

1

1

0.95

0.95

0.9

0

50
100
Years
(c) Low aggregate, low idiosyncratic risk

0.9

50
100
Years
(d) Low aggregate, high idiosyncratic risk

1.1

1.1

1.05

1.05

1

1

0.95

0.95

0.9

0

50
Years

100

0.9

0

0

50
Years

100

Figure 3: Ratio of aggregate commitments and habit in four environments.
Theorem 1 For any sequence of models Θn specified above and any p ≥ 1,
Xt − Xth∗
lim sup
At
t

=o
p



σA
σI



.

The left hand side of the expression measures the distance between aggregate commitments
Xt and habit in the matching fixed-weight model Xth∗ , rescaled by a measure of the aggregate
economy At .

Since these quantities are stochastic, we use the Lp norm to measure distance,

defined as kY kp = [EY p ]1/p for any random variable Y . The small order o (.) on the right hand
side shows the accuracy of the approximation: the distance between the two models becomes an
arbitrarily small share of σ A /σ I when this ratio goes to zero.

The interpretation is that fixed-

weight habit provides a highly accurate, “better than first-order” approximation.

For example,

along a sequence where σ A → 0, the difference between commitments and the fixed-weight model
goes to zero even relative to σ A : when the size of aggregate shocks shrinks, the approximation
error becomes small compared to these shocks. Similarly, when the magnitude of idiosyncratic risk
grows, the distance between the two models goes to zero at a faster rate than the growth in σ I .
Simulations presented in Figure 3 illustrate the theorem. The figure uses a calibration to plot
the evolution of Xth∗ /Xt in four environments, in which σ I and σ A equal either 5% or 10%. The
16

figure shows that the ratio is close to one in most periods, particularly when idiosyncratic risk is
high (right panels) and when aggregate risk is low (bottom panels).
The intuition underlying Theorem 1 is that when most of the uncertainty comes from idiosyncratic risk, the cross-sectional distribution is usually close to its steady state. Hence aggregate
shocks generate the same pattern of adjustment in most periods, resulting in impulse response
weights that are almost constant over time.
cal steps, but the basic logic is intuitive.

The proof of the theorem involves several techniThe key is to analyze both models using their MA

representations. Differencing (9) and (11) yields
Xt −

h∗
Xt

h

− E0 X t −

h∗
Xt

i

=

Z

t

[ξ ∗ (t − s) − ξ (t − s, f (s))] · dAs

0

=

Z

t

[ξ ∗ (t − s) − ξ (t − s, f (s))] · σ A · As dzs

0

where we use dAs = As σ A dzs .

Focusing on the final integral, consider a sequence of models

Θn along which the level of aggregate risk σ A → 0.

Since the integrand involves σ A , its value

goes to zero as σ A → 0: as aggregate shocks become small, both models will stay close to their
unconditional expectation. But the equation also reveals an additional effect. As σ A /σ I becomes
small, much of the shock each household experiences is idiosyncratic. This pushes the cross-sectional
distribution f close to its unperturbed steady state f ∗ , because the force pushing for convergence,
determined by σ I , becomes stronger relative to the force of divergence, determined by σ A .9 As a
result, f and f ∗ are usually close. This in turn implies that ξ ∗ (t − s) − ξ (t − s, f (s)) is typically
small: when the system is close to the steady state, its impulse response is also close to the steady
h

state impulse response. Thus X − X is on average small even relative to σ A .
The mechanism described here is illustrated in the bottom panel of Figure 1. As noted above,
there is much more “variance” in the evolution of the cross-sectional distribution in the left panel
(low σ I /σ A ), because the forces of divergence are stronger. This creates fluctuations in the impulseresponse across periods, producing behavior that diverges from a fixed-weight habit model. In
contrast, the cross-sectional density varies much less in the right panel. As a result, the impulseresponses are approximately constant, creating approximately linear aggregate dynamics.
The case where σ I /σ A is large is the most empirically relevant scenario, since idiosyncratic
consumption risk is generally much larger than economy-wide risk (e.g., Deaton, 1991, Carroll,
Hall, and Zeldes 1992). This suggests commitments can potentially account for behavior typically
9

This mechanism is labeled the “attractor effect” by Caballero (1993).

17

attributed to habit formation.

4

Comparing Consumption Commitments and Habit Formation

In addition to replicating the patterns previously attributed to habit formation models in a commonlystudied environment, the commitments model also yields new predictions in other settings. In this
section, we illustrate these predictions using three applications. We discuss how existing evidence
and future empirical work can distinguish between the commitment and habit models and derive
welfare implications which show why distinguishing the two models is important.

4.1

Consumption Dynamics

Two well-documented features of consumption behavior–both in the aggregate and at the micro
level–are excess sensitivity and excess smoothness to shocks (see Japelli and Pistaferri (2010)
for a review).

One major reason for using habit preferences in applied macroeconomic models

is that they generate such delayed consumption responses (Fuhrer 2000). In this subsection, we
show that the commitments model not only produces these patterns but also matches additional
microeconometric evidence on how excess sensitivity depends on the size of the shock and varies
across types of consumption.
Fix a date t0 and history up to t0 . For any t1 > t0 consider the following regression specification
for consumption growth:

log (Ct1 ) − log (Ct0 ) = α1 + β 1 · [log At1 − log At0 ] + ε.

(12)

This regression builds on the interpretation developed in Section 2.3 that adjustable consumption–
because it immediately and fully responds to shocks–can be thought of as a measure of permanent
income for an individual or a group of households.

Thus the regression evaluates the extent to

which consumption responds to contemporaneous shocks affecting lifetime income. To make explicit
its dependence on t1 , we denote the regression coefficient by β 1 (t1 ). The neoclassical permanent
income model predicts β 1 (t1 ) = 1 for all t1 > t0 . Following Flavin (1981), we say that consumption
is excessively smooth if β 1 (t1 ) < 1 for some t1 > t0 , i.e., if consumption does not fully respond to
contemporaneous shocks.

18

Next, let t3 > t2 > t1 and consider the regression
log Ct3 − log Ct2 = α2 + β 2 [log At1 − log At0 ] + ε.

(13)

This regression evaluates the extent to which consumption adjusts to income shocks with a delay.

Using the notation (t1 , t2 , t3 ) = t, we denote the regression coefficient by β 2 t . The neoclassical

permanent income model implies β 2 t = 0 for all t because consumption responds fully at the
time of the shock. We say that consumption is excessively sensitive if current consumption does

respond to past shocks to permanent income, i.e., if there exists t such that β 2 t > 0.

Proposition 5 (Excess smoothness and sensitivity) In the commitments model, consumption is
both excessively smooth and excessively sensitive.
Excess smoothness follows because commitments respond slowly to the shock. Therefore initially (for t1 close to t0 ) β 1 (t1 ) ≈ At0 /Ct0 < 1 in regression (12). Excess sensitivity is an implication

of the fact that eventually, households do adjust their commitments, and hence β 2 t approximates
Xt0 /Ct0 > 0 when t2 → t0 and t3 → ∞. The shape of delayed adjustment is illustrated in Figure

2, which plots the normalized steady-state impulse response of commitments. Our model suggests
that both the sluggishness and sensitivity of consumption may be consequences of adjustment costs
that delay updating.
Large shocks. We now show that excess sensitivity and smoothness vanish for large shocks in
the commitments model, but not in the habit model. We first introduce a notion of large shocks.
Because our model does not feature jumps, we focus on the (unlikely) events in which At changes
rapidly during a short interval after t0 .

Formally, consider the events in which log At1 reaches

either log At0 + ∆ or log At0 − ∆ by date t1 . These events correspond to a positive (respectively
negative) shock, and ∆ measures the size of the shock, i.e., the percentage change in At . We denote
the former event by S (+, t1 , ∆), the latter event by S (−, t1 , ∆), and their union by S (t1 , ∆).10
We now compare the commitment model with its matching habit specification introduced in
Definition 2 during and after these large shocks.

Consider estimating the regression (12) con-

ditional on the shock event S (t1 , ∆). We denote the regression coefficients by β 1 (t1 , ∆) in the
commitments model and β h1 (t1 , ∆) in the habit model. Note that because these coefficients are
estimated conditional on the low-probability shock events, they need not match the unconditional
coefficients β 1 (t1 ) and β h1 (t1 ) introduced earlier.
10

The formal way to model these events is to assume that a Brownian bridge drives log At between t0 and t1 .

19

Proposition 6 (Excess smoothness for large shocks) The following statements hold:
(i) In the commitments model excess smoothness vanishes for large shocks. Formally, there
exists K > 0 such that for all t1 > t0 , β 1 (t1 , ∆) > 1 − K/∆.
(ii) In the habit model excess smoothness remains for large shocks. Formally, there exists K ′ < 1
such that for all ∆ large enough, we can find t1 for which β h1 (t1 , ∆) < K ′ .
Part (i) shows that in the commitments model the correlation between consumption and permanent income increases in extreme events.

Because large shocks force people to adjust their

commitments, β 1 (t1 , ∆) approaches 1 as ∆ → ∞. Part (ii) shows that this result does not extend
to the habit model: because in that setting impulse responses do not depend on the size of the
shock, β h1 (t1 , ∆) remains bounded below 1 even for ∆ large.
We now turn to excess sensitivity. Consider estimating the regression (13) conditional on

the shock event S (t1 , ∆). We denote the regression coefficients by β 2 t, ∆ in the commitments

model, and by β h2 t, ∆ in the habit model. To explore the impact of a sudden large shock,
we focus on the limit in which, holding fixed ∆ the size of the shock, t1 → t0 .

We define

the lim sup and lim inf of the regression coefficients to be β 2 (t2 , t3 , ∆) = limt1 →t0 sup β 2 t, ∆

h
and β 2 (t2 , t3 , ∆) = limt1 →t0 inf β 2 t, ∆ in the commitments model, and define β 2 (t2 , t3 , ∆) and

β h2 (t2 , t3 , ∆) analogously for the habit model.

We consider a sequence of models Θn as defined in Section 3. The following result is stated for
the case when n is large enough, that is, when σ A /σ I is small enough. We focus on this case for
the technical reason that it ensures that Xth /Aht remains bounded in Lp norm uniformly in t.
Proposition 7 (Excess sensitivity for large shocks.) Suppose that n is large enough. Then:
(i) In the commitments model, excess sensitivity vanishes for large shocks. Formally, there
exists K > 0 such that for any t3 > t2 , we have β 2 (t2 , t3 , ∆) < K/∆.
(ii) In the habit model excess sensitivity remains for large shocks as well. Formally, there exists
K ′ > 0 such that for all large enough ∆, we can find t2 and t3 for which β h2 (t2 , t3 , ∆) > K ′ .
Part (i) shows that the commitments model does not generate delayed adjustment for large
shocks. As more and more households are pushed over the boundary of their (S,s) bands, fewer and
fewer of them will adjust to the shock with a lag. As a result, β 2 (t2 , t3 , ∆) becomes arbitrarily small
as ∆ grows. Conversely, part (ii) shows that–because impulse responses are state-independent–
the habit model produces delayed responses for large shocks as well.

20

The challenging part of the proof is claim (ii). To establish that result, we need to characterize
Xth3 /At3 as t3 → ∞. Since Xth3 is essentially a weighted sum in which the number of terms grows with
t3 , to obtain a characterization we need to make sure that terms corresponding to the distant past,
even when normalized by At3 , remain bounded. Because σ A governs the variance of the normalizing
term Aht3 , while σ I affects the rate with which the weights in the weighted sum approach zero, this
is ensured when σ A /σ I is small.
Microeconometric evidence for the “magnitude hypothesis.” Summarizing the empirical literature on consumption, Japelli and Pistaferri (2010) write that consumers “tend to smooth consumption and follow the [neoclassical] theory when expected income changes are large, but are less
likely to do so when the changes are small and the cost of adjusting consumption is not trivial.”
Japelli and Pistaferri term this pattern the “magnitude hypothesis.” In what follows, we briefly
summarize this body of evidence and discuss how it is explained by the commitments model.
Several empirical studies have found that the degree of excess sensitivity in consumption–often
measured with the consumption response to anticipated income shocks–depends on the size of the
shock. Hsieh (2003) finds that Alaskan households increase consumption in the quarter in which
they receive their tax refunds (a small income change), but not in the quarter in which they receive
payments from the Alaska Permanent Fund (a large income change). In the same spirit, Browning
and Crossley (2001) note that Parker (1999) finds excess consumption sensitivity to the income
change associated with US households reaching the Social Security payroll cap (a small income
change) while Browning and Collado (2001) find no excess consumption sensitivity of Spanish
workers to anticipated bonus salary amounting to two months’ wages (a large income change). In
support of the idea that the magnitude of the shock may drive these differences, Browning and
Crossley (2001) estimate that the welfare cost of ignoring the Spanish bonus system is equivalent
to an annual loss of a month’s consumption, that of ignoring the Alaska Permanent Fund schedule
is equivalent to a week of consumption, and that of the Social Security cap is equivalent to an
afternoon’s consumption.

Similarly, Souleles (1999) finds excess sensitivity to tax refunds and

Souleles (2002) to the Reagan tax cuts, but Souleles (2000) finds no excess sensitivity to college
expenditures, which are typically larger in magnitude. Finally, Scholnick (2013) shows that the
anticipated income increase associated with a household’s final mortgage payment has a positive
effect on consumption, but the effect is decreasing in the size of the payment.
The commitments model can help explain this body of evidence through Propositions 6 and 7,
which together imply that the delay with which consumption responds to income shocks is smaller
21

for large shocks.11

This result can explain Hsieh’s findings through the logic that consumers

respond slowly to information on tax refunds, because those payments are small. But the same
consumers respond quickly to news about the payment of the Alaska Permanent fund because those
payments are large.

In particular, through Proposition 6 the commitments model predicts that

consumers should not increase consumption when the actual payment of the Alaska Permanent
Fund is made; instead, they should increase consumption earlier, right after the announcement.
This prediction is consistent with Hsieh’s finding that the growth in expenditures on durables is
lower when the Alaska Permanent Fund payment is higher, suggesting that consumers purchase
durables before they receive the Fund payment. Similarly, the commitments model predicts slow
adjustment to the small income change associated with the relatively small tax refunds and with
reaching the social security cap; but like the permanent income model, early adjustment–when
the worker is hired, or when a decision is made that the child will attend college–to the wage
bonuses and to college expenditures. The habit model does not match these predictions because
it produces a state-independent impulse response, as shown in Propositions 6 and 7.12
An important caveat is that both the commitment and habit models predict that consumption
should be unaffected by the timing of income conditional on the announcement date. Both models
simply predict gradual adjustment after the announcement, which results in comovement between
income and consumption.

Thus neither model can explain the findings of Johnson, Parker and

Souleles (2006) that consumption responds to variation in the timing of income tax rebates. Other
factors, such as credit constraints (Agarwal, Liu and Souleles, 2007) or salience effects (Bordalo
et al. 2012, Koszegi and Szeidl 2013) may help explain this behavior.

Despite these caveats, it

is clear that important elements of the evidence on excess sensitivity are more consistent with a
model of adjustment costs than with habits, suggesting that at least part of the behavior previously
attributed to habit formation may in fact be due to consumption commitments.

4.2

Comparative Dynamics

In this subsection, we compare the effects of changes in the environment in the commitment and
habit models. In the habit model, the weights that determine the speed of adjustment are exogenous
11

Here we use the aggregated commitments model to match micro evidence. The interpretation is that the theoretical aggregate corresponds to the group of households who experience the shock.
12
In the commitments model, total consumption Ct exhibits excess sensitivity and smoothness, while adjustable
consumption At does not. Since most consumption goods have both adjustable and fixed components, the more
general empirical prediction is that more adjustable goods exhibit less excess sensitivity and smoothness. This
prediction also accords with empirical evidence. For instance, Chetty and Szeidl (2007) find that consumption of
housing responds much more sluggishly to unemployment shocks than consumption of food.

22

Aggregate Idiosyncratic Riskfree Individ cons
risk
risk
rate
growth
Adjustment cost= 1 x annual consumption
10%
10%
1%
0.87%
5%
10%
2.5%
0.87%
10%
5%
2.5%
0.87%
5%
5%
4%
0.87%
10%
10%
4%
2.37%
Adjustment cost= 5 x annual consumption
10%
10%
1%
0.87%
5%
10%
2.5%
0.87%
10%
5%
2.5%
0.87%
10%
10%
4%
2.37%

How many years till X adjusts pe?
pe = 0.25
pe = 0.5
pe = 0.75
0.5
0.6
0.6
0.8
0.4

1.8
2.2
2.3
3.4
1.6

4.5
5.6
5.7
8.7
4.2

1.1
1.2
1.5
0.7

4.2
4.9
5.7
3.1

10.3
12.8
14
8.4

Table 1: Speed of adjustment of consumption commitments
and unaffected by environmental changes.

In contrast, in the commitments model household

adjustment behavior is endogenous and responds to environmental changes.
To characterize how responses to shocks vary with the environment, let T (e
p, f ) = inf t {ξ (t|f ) ≥ pe · x}

denote the time required for commitments or habit to adjust, in expectation, a share pe to a unit
shock to permanent income.13 This quantity can be interpreted as a measure of excess sensitivity of
consumption. By definition, in a fixed-weight habit model, T (e
p) is pinned down by the exogenous
weights and hence remains constant when other parameters are varied.
We begin with some numerical examples to illustrate the comparative dynamics of the commitments model. Table 1 reports T (e
p|f ∗ ) for the commitments model when pe = 0.25, 0.5 and 0.75

for various parameters. In the top panel, the adjustment cost equals one year’s consumption value

of the commitment good, or 1% of its capitalized value with a riskfree rate of 1%. The first row
shows that when σ A = σ I = 10% and rf = 1%, it takes on average about 1.8 years for 50% of
full adjustment to occur. The next three rows illustrate the effect of reducing σ A or σ I , changing
rf so that expected consumption growth remains unchanged in these comparisons.

The table

shows that reducing either idiosyncratic or aggregate risk results in a slower response to shocks.
The intuition is that higher risk forces consumers to update their commitments more frequently,
allowing aggregate shocks to get absorbed by commitment consumption more quickly. Comparing
the first and last rows in the top panel shows the effect of higher consumption growth generated
by a higher safe return. Faster growth also leads to faster adjustment to shocks, as agents update
commitments more frequently in a growing economy. The bottom panel of the table shows that
13

Here, x denotes the steady state ratio of commitments to adjustables, so that ξ (t) /x asymptotes to one.

23

for a higher adjustment cost (5% of the capitalized value of the commitment good), adjustment is
more sluggish, but the effects of risk and growth remain similar.
To demonstrate that these results are driven by the intuition we describe, we now establish
a formal analog of the preceding numerical examples in a special case of the model. Consider a
n

sequence of economies Θ with n = 1, 2, ... in which π n = π nE = 1/n and r = ρ. This sequence is
a special case of the Θn sequence introduced earlier in which σ I , σ A , µa and µA all go to zero at a
rate of 1/n. When n grows large, this economy converges to an environment in which households
∗

face no risk and have zero consumption growth, which we denote by Θ .

Clearly, in that limit

economy agents either adjust commitments immediately at t = 0 or never do so. The habit model
∗

that matches the consumption pattern of Θ (as given by Definition 2) is one in which the habit
stock remains unchanged at the initial level of commitment x0 forever.
Proposition 8 Fix pe > 0. In the commitments model, T n (e
p|x0 ) is finite but limn→∞ T n (e
p|x0 ) =
∞. In the habit model, T h,n (e
p|x0 ) = ∞ for all n.

In the commitments model, adjustment occurs with positive risk and growth (n finite), but as
n → ∞, it occurs at a vanishingly small rate, so that the expected time to adjustment converges to
infinity. In contrast, in the habit model, the presence of risk and growth does not affect adjustment
of the habit stock, which remains constant permanently.
At the macroeconomic level, Proposition 8 suggests that recessions may be shorter in rapidly
developing economies, in which households change their arrangements frequently because of high
trend growth. Conversely, recessions may be longer in economies with substantial social insurance
against idiosyncratic risk (such as European welfare states) because people have weaker incentives to
change their commitments. Future research testing these predictions would help further distinguish
between the commitments and the habit model as drivers of excess consumption sensitivity.

4.3

Welfare Costs of Shocks

In our final application, we briefly explore the welfare implications of the commitment and habit
models.

To begin, note that the commitments model offers a natural welfare measure based on

expected utility. In contrast, in the habit model, the appropriate measure is open to debate: in
particular, should habit consumption be included in welfare calculations?

Following prior work

(e.g., Ljungqvist and Uhlig 2000, Ljungqvist and Uhlig 2009), we assume that the welfare of the
habit agent is fully determined by surplus consumption, without including the habit stock itself.
24

−5

Lifetime utility

−10

−15

−20

−25

−30
600

800

1000

1200

1400

1600

1800

2000

Wealth
Figure 4: Value (lifetime utility) as a function of wealth of a commitment agent (solid line) and the
matching habit agent (dashed line) in an economy with zero consumption risk and no growth. The
value function of the habit agent is shifted vertically to account for the utility value of commitments.
This assumption fits with the neoclassical tradition of assuming that the agent’s objective is to
maximize his own welfare. It would be useful to examine other welfare measures in future work.
We measure the welfare cost of a one-time, unanticipated wealth shock using a certaintyequivalent approach.

We ask what certain reduction in wealth the agent would accept to avoid

the risk of experiencing the wealth shock in a given instant of time.14 Because this measure is
denominated in units of wealth, it can be used to make welfare comparisons across models.
∗

To build intuition, we first focus on the economy Θ defined earlier, in which there is no
aggregate or idiosyncratic risk and no consumption growth (π = π E = 0 and r = ρ, implying
µa = σ A = σ I = 0). Consider Figure 4, which plots the value functions of the commitment and
habit agents in this environment.

As long as it remains optimal for the commitment agent not

to move, the two value functions are parallel.15 In this range, all changes in wealth are absorbed
by adjustable consumption, and hence the welfare implications of the two models are identical.
However, for large shocks, the commitment agent adjusts on both consumption margins, while
14

Focusing on unanticipated shocks allows us to rule out precautionary behavioral responses, simplifying computations.
15
There is a difference in the level of utility because here we assume that the habit agent does not derive utility
from commitment consumption. The figure abstracts away from this effect by shifting the value function of the habit
agent vertically.

25

adjustment of the habit stock is not permitted. As a result, large shocks have a higher welfare cost
with habits than with commitments.
To establish this intuition in a more general setting, we consider an unanticipated wealth shock
at time t that hits with probability q and reduces total wealth by a share b. Consider the commitment economy in its unperturbed steady state in which all agents face this shock, and contrast
it with the matching habit model where the shock affects the representative agent. We define the
proportional risk premium Π (q, b) in either model as the dollar amount that agents in that model
are collectively willing to give up in excess of the expected value to avoid this risk, normalized by
total wealth in the economy.
Proposition 9 Assume that λ1 = 0 but λ2 > 0. Then:
(i) As b → 1, the proportional risk premium in the fixed-weight habit economy exceeds that in
the corresponding commitment economy: Πh (q, b) > Π (q, b) .
(ii) Consider the sequence of economies Θn . For b > 0 sufficiently small, in the commitment
model the risk premium Πn (q, b) < Π∗ (q, b), while in the habit model Πh,n (q, b) = Πh∗ (q, b).

Part (i) implies that habit agents are more averse to large shocks than are commitment agents.
Commitments adjust immediately to a big shock, mitigating its impact. In contrast, reduced-form
habits adjust sluggishly for all shocks, hence agents suffer relatively more from a large shock.16
Part (ii) explores comparative statics of the welfare cost as risk and growth vanish. With
commitments, risk and growth reduce the risk premium Π (q, b): since agents adjust for other
reasons, a shock can be partly absorbed by commitments. Because this possibility is absent in the
reduced-form habit model, there the risk premium is unaffected by changes in risk or growth.
A policy lesson from (i) is that a habit model that matches observed dynamics of consumption
well may nevertheless yield misleading conclusions about the welfare costs of large shocks.

In

particular, the optimal size of social insurance programs that insure large, long-term shocks such as
disability or job displacement may be smaller than predicted by analyses using habit models such
as Ljungqvist and Uhlig (2000). Result (ii) implies that policies which increase social insurance
or reduce growth can make aggregate fluctuations more costly by slowing households’ response
16

The assumption that λ1 = 0 guarantees that when moving, the commitment agents can get rid of all precommitments. Otherwise, even when moving they would still have promised expenditures of λ1 Xt− , which behave
like sluggish habits. In simulations, we find that unless λ1 is very high, the conclusion of the proposition is unaffected.
Intuitively, moving costs are much smaller than habit expenditures.

26

Behavioral Predictions
1. household consumption jumps on adjustment dates
2. consumption excessively sensitive/smooth for small shocks
3. excess sensitivity/smoothness vanishes for large shocks
4. less excess sensitivity/smoothness for adjustable goods
5. reducing long-term growth can increase excess sensitivity
6. insuring idiosyncratic risk can increase excess sensitivity
Welfare Implications
1. unambiguous welfare measure
2. welfare cost of small shocks amplified
3. welfare cost of large shocks amplified less
4. reducing trend growth can increase cost of aggregate shocks
5. insuring idiosyncratic risk can increase cost of aggregate shocks

commitments

habit

yes
yes
yes
yes
yes
yes

no
yes
no
no
no
no

yes
yes
yes
yes
yes

no
yes
no
no
no

Table 2: The main predictions of the commitments and habit models
to changing circumstances.

These results illustrate the potential importance of distinguishing

between the commitments and habit models.

5

Conclusion

A large literature in macroeconomics has used habit formation in preferences as an explanation
for key properties of consumption dynamics, such as the excess sensitivity and smoothness of
consumption. In this note, we showed that these properties can also be explained by aggregating
a model with adjustment costs at the microeconomic level. We also showed that the commitments
model yields new predictions in other domains. We conclude with Table 2 which summarizes the
key similarities and differences between the models and helps identify directions for future research.
The first four predictions in Table 2, on the dynamics of consumption and its response to
shocks, have been studied in prior empirical research. As discussed above, available evidence on
the predictions where the models differ aligns more closely with the commitments model. It would
be useful to have more evidence on the mechanism underlying these predictions.

For example,

the commitments model predicts that excess sensitivity should be greater for small shocks (such as
lottery winnings) than large shocks, particularly for less adjustable goods like housing or durables.
Standard habit models do not predict such heterogeneity.
Predictions 5 and 6 on the impacts of changes in the economic environment offer new ways to
distinguish between the two models. One way to test prediction 6 at the microeconomic level would

27

be to compare the effect of tax rebates on households who have vs. have not recently experienced
a positive income shock, such as a promotion.

The commitments model predicts that excess

sensitivity of consumption to tax rebates should be lower for those who also had another positive
income shock, because they are more likely to adjust for that reason. At the macroeconomic level,
prediction 6 suggests that countries with more generous welfare systems, such as those in Northern
Europe, should have relatively longer business cycles.17
Differentiating between the commitment and habit models is important because the two models
generate different welfare implications, listed in the second part of Table 2. If commitments are the
root cause of habit-like behavior, then the welfare gains from insuring small or moderate shocks may
be larger than the gains from insuring large shocks, especially in economies with low trend growth
and idiosyncratic risk. In contrast, if consumers have habit formation preferences, then insuring
the largest shocks is most important. More broadly, revisiting existing results on optimal policy
in models featuring consumption commitments would be a useful direction for future research.

References
Ameriks, J., Caplin, A., and Leahy, J. (2003) “Wealth Accumulation and the Propensity
to Plan,” Quarterly Journal of Economics 118: 1007-1047.
Attanasio, O. P. (2000). “Consumer Durables and Inertial Behavior: Estimation and Aggregation of (S,s) Rules for Automobile Purchases,” Review of Economic Studies 67, 667—696.
Bertola, G. and Caballero, R. J. (1990). “Kinked Adjustment Costs and Aggregate Dynamics.” in Oliver J. Blanchard and Stanley Fischer, eds., NBER Macroeconomics Annual, Cambridge,
MA: MIT Press.
Boldrin, M., Christiano, L. J. and Fisher, J. D. M. (2001). “Habit Persistence, Asset
Returns and the Business Cycle,” American Economic Review 91: 149—166.
Bordalo, P., Gennaioli, N. and Shleifer, A. (2012) “Salience Theory of Choice Under
Risk,” Quarterly Journal of Economics,127, 1243—1285.
Caballero, R. J. (1993). “Durable Goods: An Explanation for Their Slow Adjustment,”
Journal of Political Economy 101, 351—384.
Caballero, R. J. and Engel, E. M. R. A. (1993) “Microeconomic Adjustment Hazards and
Aggregate Dynamics.” Quarterly Journal of Economics 108, 359—383.
17

Naturally, this prediction is more speculative because of potential general equilibrium effects and other factors
that may vary across countries that are missing from our stylized model.

28

Caballero, R. J. and Engel, E. M. R. A. (1999) “Explaining Investment Dynamics in U.S.
Manufacturing: A Generalized (S,s) Approach” Econometrica 67, 783-826.
Campbell, J. Y. and Cochrane, J. H. (1999). “By Force of Habit: A Consumption-based
Explanation of Aggregate Stock Market Behavior,” Journal of Political Economy 107, 205—251.
Carroll, C. D., Hall, R.E. and Zeldes, S. P. (1992) “The Buffer-Stock Theory of Saving:
Some Macroeconomic Evidence.” Brookings Papers on Economic Activity 61-156.
Carroll, C. D., Overland, J. and Weil, D. N. (2000). “Saving and Growth with Habit
Formation,” American Economic Review 90: 341—355.
Chetty, R. and Szeidl, A. (2007). “Consumption Commitments and Risk Preferences,”
Quarterly Journal of Economics 122(2): 831-877.
Chetty, R. and Szeidl, A. (2014). “The Effect of Housing on Portfolio Choice,” Working
paper, Harvard University and Central European University.
Christiano, L. J., Eichenbaum, M. and Evans, C. L. (2005). “Nominal Rigidities and
the Dynamic Effects of a Shock to Monetary Policy,” Journal of Political Economy 113: 1-45.
Constantinides, G. (1990). “Habit Formation: A Resolution of the Equity Premium Puzzle,”
Journal of Political Economy 98: 519-543.
Deaton, A. (1987). “Life-cycle models of consumption: is the evidence consistent with the theory?” In: Truman, B. (Ed.), Advances in Econometrics, Fifth World Congress, vol. 2. Cambridge
University Press, Cambridge.
Deaton, A. (1991). “Saving and Liquidity Constraints,” Econometrica 59(5), 1221-1248.
Dybvig, P. H. (1995). “Dusenberry’s Racheting of Consumption: Optimal Dynamic Consumption and Investment Given Intolerance for any Decline in Standard of Living,” Review of
Economic Studies 62: 287—313.
Eberly, J. (1994). “Adustment of Consumers’ Durables Stocks: Evidence from Automobile
Purchases,” Journal of Political Economy 102, 403—436.
Ergin, H. (2003). “Costly Contemplantion,” Working paper, Washington University, St Louis.
Flavin, M. (1981) “The Adjustment of Consumption to Changing Expectations about Future
Income,” Journal of Political Economy, 89, 974—1009.
Flavin, M. and Nakagawa, S. (2008). “A Model of Housing in the Presence of Adjustment
Costs: A Structural Interpretation of Habit Persistence,” American Economic Review 98: 474-495.
Fratantoni, M. C. (2001). “Homeownership, Committed Expenditure Risk, and the Stockholding Puzzle,” Oxford Economic Papers 53: 241—259.
29

Fuhrer, J. C. (2000). “Habit Formation in Consumption and Its Implications for MonetaryPolicy Models,” American Economic Review 90: 367—390.
Gabaix, X. and Laibson, D. (2001). “The 6D Bias and the Equity Premium Puzzle.” NBER
Macroeconomics Annual.
Grossman, S. J. and Laroque, G. (1990). “Asset Pricing and Optimal Portfolio Choice in
the Presence of Illiquid Durable Consumption Goods,” Econometrica 58, 25—51.
Grossman, S. J. and Shiller, R. J. (1982). “Consumption Correlatedness and Risk Measurement in Economies with Non-traded Assets and Heterogeneous Information,” Journal of Financial
Economics 10: 195—210.
Khan, A. and Thomas, J. (2008). “Idiosyncratic Shocks and the Role of Nonconvexities in
Plant and Aggregate Investment Dynamics”, Econometrica 76(2), 395-436.
Koszegi, B. and Szeidl, A. (2013). “A Model of Focusing in Economic Choice,” Quarterly
Journal of Economics
Ljungqvist, L. and Uhlig, H. (2000). “Tax Policy and Aggregate Demand Management
under Catching Up with the Joneses,” American Economic Review 90: 356—366.
Ljungqvist, L. and Uhlig, H. (2009). “Optimal Endowment Destruction under CampbellCochrane Habit Formation” NBER Working paper 14772.
Lynch, A. (1996). “Decision Frequency and Synchronization across Agents: Implications for
Aggregate Consumption and Equity Return.” Journal of Finance 51, 1479—1498.
Marshall, D. A. and Parekh, N. G. (1999). “Can Costs of Consumption Adjustment
Explain Asset Pricing Puzzles?” Journal of Finance 54, 623—654.
Olney, M. (1999). “Avoiding Default: The Role of Credit in the Consumption Collapse of
1930,” Quarterly Journal of Economics 319—335.
Postlewaite, A., Samuelson, L. and Silverman, D. (2008). “Consumption Commitments
and Employment Contracts,” Review of Economic Studies 75: 559-578.
Reis, R. (2006). “Inattentive Consumers,” Journal of Monetary Economics 53: 1761-1800.
Ryder, H. E. and Heal, G. M. (1973). “Optimal Growth with Intertemporally Dependent
Preferences,” Review of Economic Studies 40: 1-31.
Shore, S. and Sinai, T. (2009). “Commitment, Risk, and Consumption: Do Birds of a
Feather Have Bigger Nests?” Review of Economics and Statistics.
Sun, Y. N. (1998) “A theory of hyperfinite processes: the complete removal of individual
uncertainty via exact LLN,” Journal of Mathematical Economics 29, 419-503.
30

Sundaresan, S. M. (1989). “Intertemporally Dependent Preferences and the Volatility of
Consumption and Wealth,” Review of Financial Studies 3: 73—89.

Appendix A: Proof Map
We present a series of Lemmas and arguments that build up to the proof of Theorem 1 and to the
applications. Additional proofs are contained in the online Supplementary Appendix.

A.1 Preliminaries
Two convenient probability measures. Let Q be the probabilty measure which weighs the sample


paths of yt by their share in aggregate adjustable consumption. Then F (y, t) = Pr Q yti < y|A[0,t] .

It follows from the proof (in the Supplementary Appendix) of Proposition 2 that the probability
density associated with Q is


π 2I
ait
πI i
dQ
|t =
= exp
z −
t
dP
At
γσ I t 2γ 2 σ 2I

which is an exponential martingale. By the Cameron-Martin-Girsanov theorem, under Q, the
process dz it = dzti − π I / (γσ I ) t is a Brownian motion.
For our second probability measure note that–as shown in the proof of Proposition 2–At is
an exponential random walk, and hence At = e−µA t At is an exponential martingale. We define
a measure R by letting, for any random variable Zt measurable with respect to Ft , E R [Zt ] =


E Zt At . By the Girsanov theorem, under R, the process dz t = dzt − σ A t is a martingale. The


advantage of this measure is that E0 X t = E0R X t /At . This makes it easier to compute the
mean and the impulse response of X t , because X t /At is a bounded process. We can also write


E0 X t = E0R X t /At = E0QR [xt /at ] where the superscript QR means that we first apply the
transformation associated with R and then the transformation associated with Q. Because the
densities associated with these transformations are driven by independent Brownian motions, QR
is also a probability measure. By applying R, we move to using the mean dynamics of X/A; and
then, by also applying Q, we can focus on the mean dynamics of a single agent, albeit under a
driving process with different drift.
Limits of models. Theorem 1 takes a sequence of models Θn . Below we focus on a sequence
along which σ A → 0. At the end of the proof we show how to convert this result–using a clock
change–to a sequence where σ I → ∞. Along the sequence Θn , endogenous parameters of the
31

model, such as U and L, also change. While we do not always indicate it in notation, we always
understand those changes to be taking place.

A.2 Auxiliary results about the commitments model
We begin with a technical lemma that establishes the smoothness of conditional expectations of
yt . Consider a new process w
et , which is a Brownian motion with some drift µw and variance

σ w reborn at some interior point Mw when hitting the boundaries of the interval [Lw , Uw ]. With

appropriate choice of parameters w
et will have the same distribution as yt under QR. We let
 we

e0 = y . Often we just write h (y, t), in which case we assume
h (y, t, σ w , µw , Lw , Mw , Uw ) = E e t |w
that the other arguments are given by the optimal policy of the commitments model, so that
h (y, t) = E QR E [eyt |y0 = y]. Let L1 < L2 < M1 < M2 < U1 < U2 .

Lemma 1 h (y, t, σ w , µw , Lw , Uw , Mw ) is infinitely many times differentiable in [Lw , Uw ]×(0, ∞)×
(0, ∞) × [L1 , L2 ] × [M1 , M2 ] × [U1 , U2 ].
Thus h and it’s various derivatives in y and t are all continuous and therefore locally bounded in
(µw , σ w , Lw , Mw , Uw ). This is useful because when we take σ A to zero as n → ∞, optimal behavior

changes, and hence the endogenous parameters µy , σ y , L, M, U vary. But these parameters will

all stay in some bounded open set, and due to positive idiosyncratic risk σ y stays bounded away
from zero. Thus along this sequence h (y, t) and its derivatives exist and are all bounded.
Our next Lemma expresses Xt as a moving average with weights determined by h.
Lemma 2 Let ξ (u, y) = h (u, y) − hy (u, y) and ξ (u, f (s)) =
Xt =

Z

0

t

RU
L

ξ (u, y) f (y, s) dy. Then

 
ξ (t − s, f (s)) σAs dzs + E0 X t .

(14)

Proposition 4 follows from this result. We next show that ξ (t, y) converges exponentially fast.
 
Lemma 3 There exists x such that limt→∞ E0 X t = limt→∞ ξ (t, y) = x. There exist K1 , K2 > 0
 
independent of y and σ A so that |ξ (t, y) − x| < K1 e−K2 t and E0 X t − x < K1 e−K2 t for all

(y, σ A ) ∈ [L, U ] × [0, σ A ].

The next result will be used in the proof of Theorem 1 to show that for σ A small, the impulse
responses of the two models are typically close. Let F ∗ denote the invariant distribution of y under
Q, which is also the long run average cross-sectional distribution of the commitments model.
32

Lemma 4 lim supt→∞ supy |F (y, t) − F ∗ (y)|

p

converges to zero as σ A → 0.

A.3 Auxiliary results about the habit model
We first show the link between C-weighted and A-weighted habit models.
Lemma 5 Consider two habit models Xt =

Rt
0

j(t − s)As ds + k(t)X0 and Xt = o(t)X0 +

Rt
0

ζ(t −

s)Cs ds where the weight functions j, k, o and ζ are locally integrable. Then there is a one-to-one
correspondence between these representations, and the weights are linked to each other through the
Ru
Rt
Volterra integral equations ζ(u) = j(u) − 0 ζ(v)j(u − v)dv and o(t) = k(t) − 0 ζ(t − s)k(s)ds

with initial conditions ζ(0) = j(0), o(0) = k(0). In particular, each C-average representation has a
unique equivalent A-average representation.
We next construct the best-fit habit model.
Lemma 6 Let θ (u) = ξ ∗′ (u) · eµA u and θ0 (u) = (x − ξ ∗ (u)) · eµA u , then the habit model Xth =
Rt
∗
0 θ (t − s) As ds + θ 0 (t) A0 generates the impulse response ξ .

A.4 Proof of Theorem 1 when aggregate risk vanishes
We require a technical Lemma bounding the tail of the MA representation in both models.
Lemma 7 Let g (u, s) be progressively measurable with respect to Fs satisfying |g (u, s)| ≤ K1 e−K2 u
Rt
for all u, s, and let Gt = 1/At 0 g (t − s, s) As dzs . For any 1 ≤ p < ∞, for σ A small enough,
there exists M (p) such that kGt kp ≤ M (p).

Consider a sequence along which σ A → 0. We can write
1
Xt − Xth
=
σ A At
At

Z

t

[ξ (t − s, f (s)) − ξ ∗ (t − s)] As dzs +

0

E0 X t − x
.
At σ A

We now break this expression into three pieces. Fix some ε > 0, let k > 0, and consider
1
At
≤

Z

t−k

[ξ (t − s, f (s)) − ξ ∗ (t − s)] As dzs

0

At−k
At

·
2p

1
At−k

Z

p
t

≤ K2p (k, σ A ) · M (2p) · e−K2 k

[ξ (t − s, f (s)) − ξ ∗ (t − s)] As dzs

t−k

2p

where we used Lemma 7. We can chose k large enough so that this entire term is less than ε/3.
33

Given this k, we next bound the term
1
At

Z

t

∗

[ξ (t − s, f (s)) − ξ (t − s)] As dzs

t−k

" Z
≤ K2p (k, σ A ) · K2p (k) · E

 Z
≤ K2p (k, σ A ) · K2p (k) · E

t

t−k

p
t

At−k
≤
At

·
2p

Z

t

[ξ (t − s, f (s)) − ξ ∗ (t − s)]

t−k

As
At−k
t−k
"
1/4p
Z t
4p
∗
[ξ (t − s, f (s)) − ξ (t − s)] ds
· E

2p

[ξ (t − s, f (s)) − ξ ∗ (t − s)]2p

t−k

 Z
≤ K2p (k, σ A ) · K2p (k) · K4p (k, σ A ) · E

t

ds

#1/2p

As
At−k

∗

4p

ds
4p

[ξ (t − s, f (s)) − ξ (t − s)] ds

t−k

As
dzs
At−k

#1/4p

1/4p

where we repeatedly used the Cauchy-Schwarz inequality and a martingale moment bound, and
where all constants are bounded as σ A goes to zero. Next note that
∗

ξ (t − s, f (s)) − ξ (t − s) =

Z

U

ξ (t − s, y) · [f (t − s, y) − f ∗ (y)] dy

L

=−

Z

U

L

∂
ξ (t − s, y) · [F (t − s, y) − F ∗ (y)] dy.
∂y

Here, for any fixed k, by Lemma 1, ∂ξ (t − s, y) /∂y is uniformly bounded in (y, σ A ) ∈ [L, U ]×[0, σ A ].
Denoting this bound by K (k), we have
E [ξ (t − s, f (s)) − ξ ∗ (t − s)]4p < K 4p (k) · E sup |F (t − s, y) − F ∗ (y)|4p .
y

Lemma 4 shows that the limsup over t of the last term goes to zero as σ A → 0. Thus given k and
ε > 0, for all σ A small enough to make the entire term bounded above by ε/3. Finally, consider
E0 X t − x
1
·
σA
At

≤
p

1
1
·
σA
At

· K1 e−K2 t ≤
p

1
2
· eK3 (p)·σA t · K1 e−K2 t .
σA

If σ A is small enough, then the limsup of this as t → ∞ is zero.

A.5 Proof of Theorem 1 when idiosyncratic risk grows large
We next consider a sequence where σ I → ∞. Here the key is to change the “clock,” i.e., the speed
with which we go through the Brownian sample paths. This effectively reduces both σ I and σ A at
the same rate, converting our sequence of models into one in which σ A → 0.

34

2p


Lemma 8 Fix τ > 0, and let e
ait , x
eit denote the optimal solution of a model with deep parameters


τ · ρ, r, π, σ 2 , π I , σ 2i , fixed costs λ = λ1 , λ2 , curvature γ and relative preference κ. Then the


process e
ait , x
eit has the same distribution as τ · aiτ t , xiτ t : rescaling the time dimension acts the
same way as rescaling the parameters of the model.

Consider a sequence of models where σ I → ∞ and let τ = (σ I )−2 . Changing the clock, dynamics


will be identical to a model with parameters τ σ 2I , τ σ 2A , τ r, τ µA , γ, λ1 , λ2 , κ = 1, τ σ 2A , τ r, τ µA , λ1 , λ2 , κ .
Along this sequence aggregate risk goes to zero while other parameters remain bounded. Hence
this model is close to its habit representation; but then so is the original model.

A.6 Proof map for Section 4
These proofs–which build on the ideas described above–are in the Supplementary Appendix.

Appendix B: Simulations
Details are in the Supplementary Appendix. Our strategy is to choose deep parameters to generate
variation in the consumption risk parameters σ I and σ A while holding fixed consumption growth.
In all environments of Figures 1-3, the parameters (γ, κ, λ1 , λ2 , δ) = (2, 1, 1, 0, .0326) are held fixed.
Other parameters and the implied values of σ A , σ I , µa and µA are given below.
π M /σ M

π E /σ E

r

σA

σI

µa

µA

(a) High aggr, low idiosyncr risk

20%

10%

3.24%

10%

5%

1.24%

1.37%

(b) High aggr, high idiosyncr risk

20%

20%

1%

10%

10%

.87%

1.37%

(c) Low aggr, low idiosyncr risk

10%

10%

4.74%

5%

5%

1.24%

1.37%

(d) Low aggr, high idiosyncr risk

10%

20%

2.5%

5%

10%

.87%

1.37%

35

Supplementary Material to “Consumption Commitments and
Habit Formation”1
Raj Chetty
Harvard University and NBER

Adam Szeidl
Central European University and CEPR
September 2015

This material supplements the paper “Consumption Commitments and Habit Formation. We
provide missing proofs for results stated in the main paper and we explain the numerical methods
used to simulate the model.

A-1

Proofs of Propositions 2 and 3

Proof of Proposition 2. Since the only risky assets for household i are S and S i , there exists a
unique state price density associated with the household-specific private market. The following
dynamics for adjustable consumption generates a state price density that prices both risky assets
as well as the safe asset
ait

=

ai0 exp



  2
π 2I
π
πI i
1 π
+
+r−ρ t+
zt +
z
γ 2σ 2 2σ 2I
γσ
γσ I t

(15)

and hence must describe the optimal choice of household i. Because ai0 = A0 for all i, aggregating
across i yields, by the strong law of large numbers for a continuum of agents (Sun, 1998)

  2
Z


π 2I
π
1 π
πI i
+r−ρ t+
At = A0 exp
+
zt
exp
z di
γ 2σ 2 2σ 2I
γσ
γσ I t
i




  2
π 2I
1
π
1 π
1+
+
+r−ρ t+
zt .
= A0 exp
γ 2σ 2 2σ 2I
γ
γσ
1

E-mails: chetty@fas.harvard.edu, szeidla@ceu.edu.

1



Define a new discount rate δ = ρ − 1 + γ1 π 2I /(2σ 2I ). Then the dynamics of aggregate adjustable

consumption is given by



  2
π
1 π
+r−δ t+
zt .
At = A0 exp
γ 2σ 2
γσ
This is exactly the dynamics of adjustable consumption that would obtain for a representative
consumer with power utility over At and discount rate δ who can invest in the publicly traded risky
and safe assets.
Proof of Proposition 3.

We are interested in characterizing the evolution of the conditional

distribution of yti given a realization of the path of A under Q. Using (15) we obtain
d log ait

1
=
γ




π 2I
π2
π
πI
π
πI
+
+ r − ρ dt +
dz +
dz i = θdt +
dz +
dz i
2σ 2 2σ 2I
γσ
γσ I
γσ
γσ I

where
1
θ=
γ




π 2I
π 2I
π2
+
r
−
ρ
+
+
2σ 2 2σ 2I
γ 2 σ 2I

(16)

is the drift under Q. We first show that F (y, t) is absolutely continuous for all t > 0 for almost
all realizations of the path of aggregate shocks. We do this assuming that the initial condition is
ai0 = A0 and xi0 = X0 for all agents i, i.e., that the initial distribution F0 (y) is concentrated on
a single point.

For other initial distributions the density f (y, t) can simply be computed as an

integral of these densities with respect to F0 (y).
Throughout the argument we work with the probability measure Q. Our proof logic is to fix
t = T and the realization of At for t ∈ [0, T ], pick a collection of intervals I ⊂ [L, U ], compute an
upper bound on the probability that yT ∈ I, and then establish that the upper bound goes to zero
as the total length of these intervals, denoted |I|, goes to zero. Our upper bound is obtained by
separately bounding the probabilities of two events.
(1) Reaching I through paths that do not involve “too many” adjustments. Let ye0i = y0 and
de
yti = −θ · dt − σ A · dzt − σ I · dz it .

Given the dynamics of log ait , this specification implies that the evolution of ye is the same as that
of y except for the discrete adjustments. In particular, yeti = yti before the first adjustment occurs.

More generally, if y i experiences nU upward and nD downward adjustments in the interval [0, t],
2

then yti = yeti +nD (M − L)−nU (U − M ). Because yeti is a Brownian motion with a drift, its density
is bounded from above by some constant which depends on the parameters of the process, which

we denote by K (µa , σ A , σ I , T ). As a result, for any given n ≥ 1, the total probability of paths
which involve nU < n upward and nD < n downward adjustments such that yTi ∈ I is at most
K (µa , σ A , σ I , T ) · n2 · |I|.
(2) The total probability of paths that involve at least n adjustments. Let ye0A = y0 and

de
ytA = −θ · dt − σ A · dzt so that yetA represents the aggregate shocks and trend in yet , and let

ye0I,i = 0 and de
ytI,i = σ I · dz it so that yetI,i represents the idiosyncratic shocks. Then yeti = yetA + yetI,i .
The path of yetA contains the same information as the path of aggregate shocks At , hence we are
effectively conditioning on the realization of the path of yetA .

Set ∆y = min (U − M, M − L) /2.

We say that a process ut moves ∆y between s and t if |ut − us | = ∆y . Suppose that s1 < s2 are
two consecutive adjustment dates for household i. Then either yetA or yetI,i must move at least ∆y

between s1 and s2 . Because almost surely the path of yetA is continuous, one can straightforwardly


A
verify that there is an upper bound K ye[0,T
] on the number of non-overlapping time intervals in

[0, T ] over which ytA moves at least ∆y . For ease of notation, in the rest of this proof we will simply


A
denote K ye[0,T
] = K. Then, if household i adjusts at least n times in [0, T ], there must exist

at least n − K non-overlapping intervals in [0, T ] over which yetI,i moves at least ∆y . Assume now
that n > 2K + 1.

At least one of these intervals–denote it by [s1 , s2 ]–cannot be longer than

T / (n − K). Now cover the [0, T ] interval with subintervals of length 2T / (n − K) starting at zero,
and by another set starting at T / (n − K). It is clear that an interval in one of these covers, say
[s0 , s3 ] must fully contain [s1 , s2 ].
The probability that yetI,i moves at least ∆y over [s1 , s2 ] is bounded by the probability that the dif-

ference between the minimum and the maximum of yetI,i in [s0 , s3 ] is at least ∆y . Given that the den-

sity of the running maximum of a standard Brownian motion is (2/ (πt))1/2 e−m /(2t) , this probabil1/2


ity is bounded above by a universal constant times (n − K) / πT σ 2I
exp −∆2 (n − K) / 2T σ 2I .
2

Because the total number of intervals in the two covers we introduced is at most 2 (n − K), the

probability that yetI,i moves at least ∆y over an interval of length at most T / (n − K) is bounded from


above by a constant (which depends on T and σ I ) times (n − K)3/2 exp −∆2 (n − K) / 2T σ 2I .
Recalling the assumption that n > 2K + 1, the last expression can be bounded above by a different


constant (which depends on T and σ 2I ) times exp −∆2 n/ 8T σ 2I .

We now combine these bounds. Given K, which is determined by the path of yetA , and main3

taining n > 2K + 1, the total probability that yTi ∈ I is at most



K (µa , σ A , σ I , T ) · n2 · |I| + K σ 2I , T · exp −∆2 n/ 8T σ 2I .
Setting n = |I|−1/4 , for small enough |I| such that n > 2K + 1 is satisfied, the bound becomes
h

i
K (µa , σ A , σ I , T ) · |I|1/2 + K σ 2I , T · exp −∆2 |I|−1/4 / 8T σ 2I
which goes to zero as |I| goes to zero.
We now turn to the stochastic partial differential equation. Proposition 1 in Caballero (1993)
derives a stochastic partial differential equation, given the path of aggregate shocks, for the conditional density of a double-barrier Brownian motion with rebirth. Caballero’s equation is


∂f (y, t)
∂f (y, t) σ 2T ∂ 2 f (y, t)
+
dt + σ A
dz.
df (y, t) = θ
∂y
2
∂y 2
∂y
Substituting in (16) yields the equation in the text. The boundary conditions follow directly from
Caballero’s proposition.
To derive the dynamics of aggregate commitments, note that Xt =
can use Ito’s lemma to write
dXt = At

Z

U

y

e · df (y, t) · dy + dAt ·

L

Z

U

y

e f (y, t)dy +

L

Z

U

RU
L

ey f (y, t)dy · At and we

y



e · df (y, t) · dy, dAt .

L

We now evaluate each term on the right hand side. The first term is
At

Z

U

L

ey ·

∂f (y, t)
∂y



µ+

π 2I
2γ 2 σ 2I



dt +


Z U
π
∂ 2 f (y, t) σ 2T
dz dy + Ft
ey ·
dt · dy.
γσ
∂y 2
2
L

Integrating by parts, and using the boundary conditions shows that this term equals
−Xt



π2
µ + 2I 2
2γ σ I



π
dt +
dz
γσ



+ At


σ 2T
σ2
· fy (L, t)(eM − eL ) + fy (U, t)(eU − eM ) dt + T Xt dt.
2
2

The second term is
dAt
Xt ·
= Xt
At



π2
µ+ 2 2
2γ σ



π
dt +
dz
γσ



while the third term is simply −π 2 / (γσ)2 Xt dt. Collecting terms gives the result of the proposition.

4

A-2

Proofs of results leading up to Theorem 1

A-2.1

Proofs of auxiliary results about the commitments model including proof
of Proposition 4

Proof of Lemma 1. We start with the case where wt is driven by a standard Brownian motion. Let





ζ y = inf {t ≥ 0 : wt ∈
/ [L, U ] , w0 = y}. Set Fw (t) = Pr ζ y ≤ t and h (y, t) = E ewt · 1 ζ y > t
R t (n)
(1)
(n+1)
be h (y, t) killed at the boundary. Let Fy (t) = Fy (t) and Fy
(t) = 0 Fy∗ (t − τ ) dFy (τ ) =
Rt
(n)
0 FM (t − τ ) dFy (τ ) be the the distribution of the n + 1st exit time. Then
h (y, t) = h (y, t) +

∞ Z
X

n=1 0

t

h (M, t − τ ) dFy(n) (τ ) = h (y, t) +

Z

t

0

h (M, t − τ ) dFy∗ (τ )

(17)

Z

(18)

where
Fy∗ (t) =

∞
X

Fy(n) (t) = Fy (t) +

n=1

Z

0

t

∗
FM
(t − τ ) dFy (τ ) = Fy (t) +

0

t

FM (t − τ ) dFy∗ (τ )

is the expected number of boundary hits until t.


The transition density of the killed diffusion p (y, y ′ , t) = Pr ζ y > t, yt = y ′ can be expressed

as an infinite sum of normal densities (Revuz and Yor, 1992, p 106), and in particular, is infinitely
R ′
many times differentiable in [L, U ] × [L, U ] × (0, ∞). This implies that h (y, t) = ey p (y, y ′ , t) dy ′

is infinitely many times differentiable in [L, U ] × (0, ∞). The density of the first hitting time ζ y

can also be expressed in closed form as an infinite sum (Darling and Sieger, 1953), and is infinitely
many times differentiable in y and t over [L, U ] × (0, ∞). This, combined with (18) implies that
Fy∗ (t) is C ∞ in [L, U ] × (0, ∞). Combining these observations with (17) shows that h (y, t) is also
C ∞ in the [L, U ] × (0, ∞) domain.1
We next show that h is also smooth when driven by any Brownian motion with drift and
variance, and that it is smooth in the other parameters. Changing the clock of yt scales both
the mean and the variance, and is obviously a smooth transformation of h (y, t) as it just scales
the time argument. Shifting and rescaling the vertical axis are smooth operations that shift and
rescale the triple [L, M, U ]. Thus we only need to show smoothness in the drift and in M . The
drift can be dealt with using the Girsanov theorem, which implies that the density of the killed


diffusion under drift can be obtained as pµw (y, y ′ , t) = p (y, y ′ , t) · exp µw (y ′ − y) − µ2w t/2 , which
1

Grigorescu and Kang (2002) compute the transition density of y explicitly.

5

is clearly C ∞ in µw , and hence so is h (y, t). Next, the distribution of the first hitting time is
R
µ
1 − Fy y (t) = pµy (y, y ′ , t) dy ′ is also smooth. The smoothness of h in µy now follows from (17).
Smoothness in M follows easily from (17).
Proof of Lemma 2. We have


 
Es X t = As · EsR X t /At = As · EsQR [xt /at ] = As ·

Z

U

h (t − s, y) f (y, s) dy

L

which is a martingale in s. Computing the Ito-differential
 
ds Es X t = dAs · EsQR [xt /at ] + As ·

Z

U

h (t − s, y) fy (y, s) σ A dzs · dy

L

where we used (7) for the evolution of f (y, s) and collected only the dz terms, since the ds terms
must cancel by the martingale property. Equivalently,

Z
 
QR
ds Es X t = dAs · Es [xt /at ] +

U

h (t − s, y) fy (y, s) dy

L



Z
= dAs ·

U

(h (u, y) − hy (u, y)) f (y, s) dy

L

where we integrated by parts. This equation shows the existence of ξ as well as the desired representation.
Proof of Lemma 3. Ben-Ari and Pinsky (2009) show that yt = log [xt /at ] converges exponentially
fast to a unique invariant distribution. it follows from Ben-Ari and Pinsky (2007) that the rate
of convergence is uniformly bounded if the drift is from a bounded interval. This implies uniform
convergence for all σ A ∈ [0, σ A ] through a clock-change argument. Since


 
E0 X t = E0R X t /At = E0QR [xt /at ] ,

 
it follows that E0 X t converges exponentially fast to the mean x of x/a under the invariant

distribution, and that this is uniform in σ A . Recalling that h (u, y) = E QR [xu /au |x0 /a0 = ey ],
we also have h (u, y) converge at the same rate to x as u → ∞, uniformly in y and σ A . Letting
FtQR [y|y0 ] denote the cross-sectional distribution of yt given initial value y0 , fixing some s < u, we

6

can write
hy0 (u, y0 ) =
=

∂
∂y0
Z U

Z

U

L

h (u − s, y) dFtQR [y|y0 ] =

(h (u − s, y) − x)

∂ 2 FtQR [y|y0 ]

L

∂y0 ∂y

Z

U

L

h (u − s, y)

∂ 2 FtQR [y|y0 ]
dy
∂y0 ∂y

dy

where at the last step we used that ∂ 2 FtQR [y|y0 ] /∂y0 ∂y integrates to zero in y. By the arguments
of Lemma 1, ∂ 2 FtQR [y|y0 ] /∂y0 ∂y is bounded, while h (u − s, y) − x converges exponentially fast to
zero; hence so does the integral.
Proof of Proposition 4. We show that ξ (u, f ) equals the impulse response of Definition 1. Let


∗
A0 be the point at which we want to differentiate E0 X t (A0 , F x (x0 |A∗0 )) . We can write




E0 X t (A0 , F x (x0 |A∗0 )) = A0 · E0R X t (A0 , F x (x0 |A∗0 ))t /At
Z U
= A0 ·
h (t, y − (log A0 − log A∗0 )) dF0 (y) .
L

∗

This is because when A0 = A0 , the mass of people at any point y is given by dF0 (y), and the
conditional expectation given y is summarized by h. When A0 changes, the mass of these people
is unaffected, and hence dF0 (y) is unchanged; but–because commitments are held fixed while A0
changes–their y shifts. Hence we must evaluate h at a point which recognizes this change.
Differentiating this expression in A0 gives
 Z U

Z U
Z U
E0 X t (A0 , F x (x0 |A∗0 ))
=
h (t, y) dF0 (y)−
hy (t, y) dF0 (y) =
[h (t, y) − hy (t, y)] dF0 (y)
∂A0
L
L
L
which is exactly the definition of ξ given above when F0 (y) has a density. This confirms that the
impulse response is well defined, that it is independent of A∗0 , and that the MA representation
claimed in the proposition holds.
Proof of Lemma 4. We know that EF converges to F ∗ uniformly in y. Fix ε > 0 and pick
s so that for all t > s, |EFt − F ∗ | < ε/8 for all initial conditions and for all σ small enough.
Consider the rectangular set [−κ, κ] × [t − s, t], and let Gκ denote the event when the realization of

log Au − log At−s for u ∈ [t − s, t] is in this set. Let F y, t, A[t−s,t] , ys denote the distribution of yt

under Q when started at ys in s, and when the realization of aggregate shocks is given by A[t−s,t] .
n


o

′
′
We then have that supyt ,ys F y, t, A[t−s,t] , ys − F y, t, A[t−s,t] , ys
A[t−s,t] , A[t−s,t] ∈ Gκ goes
7

to zero as κ → 0: two sufficiently close paths of aggregate consumption generate cross-sectional
distributions that are themselves close. This is because the share of people for whom the two
aggregate paths result in sufficiently different behavior goes to zero. Take κ small enough so that


this quantity is less than ε/8. For any fixed κ we can pick σ small enough so that Pr A[t−s,t] ∈ Gκ >

1 − ε/8. This implies that |Es Ft − E [Ft |f (s) , Gκ ]| < ε/4. Combining these bounds, for A[t−s,t] ∈

Gκ we have

F y, t, A[t−s,t] , f (s) − F ∗ (y) ≤

ε
ε ε ε
F y, t, A[t−s,t] , f (s) − E [Ft |f (s) , Gκ ] +|E [Ft |f (s) , Gκ ] − Es Ft |+|Es Ft − F ∗ (y)| < + + = .
8 4 8
2
Using this, we have
p
∗

sup |F (y, t) − F (y)|
y

=
p





p
p
∗
∗
Pr [Gκ ] · E sup (F (y, t) − F (y)) |Gκ + (1 − Pr [Gκ ]) · E sup (F (y, t) − F (y)) | not Gκ ≤
y

y

h ε p
2

+ 2p

εi
< 2p ε.
8

Since this is true for all t > s, it is also true for the lim sup. But ε was arbitrary, and the bound
applies for all σ small enough given ε; hence the desired result follows.

A-2.2

Proofs of auxiliary results about ther habit model

Proof of Lemma 5. Starting with the A-weighted habit model, consider the unique solution of the
integral equations for ζ and o (see Lew, 1972 for existence and uniqueness) and define
et = o(t)X0 +
X

Z

t

ζ(t − s)Cs ds.

0

et = Xt for all t ≥ 0. First note that
We will show that X
et = o(t)X0 +
X
= o(t)X0 +

Z

t

ζ(t − s) [As + Xs ] ds

0

Z

Z

t

s



ζ(t − s)As + ζ(t − s)
j(s − u)Au du + k(s)X0 ds
0


Z t
Z t−s
Z t
= o(t)X0 +
As ζ(t − s) +
j(u)ζ(t − s − u)du ds + X0
ζ(t − s)k(s)ds.
0

0

0

0

8

et holds if
Equating coefficients, Xt = X

j(t − s) = ζ(t − s) +

Z

t−s

j(u)ζ(t − s − u) du

0

or, with t − s = u,
ζ(u) = j(u) −

Z

u

ζ(v)j(u − v)dv

0

and
o(u) = k(u) −

Z

u

ζ(u − v)k(v)dv.

0

Substituting in u = 0 gives ζ(0) = j(0) and o(0) = k(0). The integral equation for ζ(u) then yields
a unique solution, which can be used to determine o(.). By the above argument, a pair of functions
et , which is the desired representation.
that solve these equations also give Xt = X

Proof of Lemma 6. Detrending both sides and integrating by parts (using that ξ ∗ is smooth)

h

Xt =
=

Z

t

0

Z

t


t
ξ ∗′ (t − s) As ds + [x − ξ ∗ (t)] A0 = −ξ ∗ (t − u) Au 0 +

Z

t

ξ ∗ (t − s) dAs + [x − ξ ∗ (t)] A0

0

ξ ∗ (t − s) dAs + xA0 .

0

A-2.3

Proofs of results used in establishing Theorem 1

Proof of Lemma 7. We proceed by induction on t. Fix some k > 0. We show that (i) the desired
bound holds when t ≤ k, and (ii) if the bound holds for some t, it also holds for t + k. We begin
by showing (ii), which is the more difficult part.
We can write
kGt kp ≤

At−k
At

Z

t

g (t − s)

t−k

As
dzs
Au−k

+
p

At−k
At

·
p

1
At−k

Z

0

t−k

g (t − s) As dzs
p

where we used independence of the Brownian increments. Denoting g (u, s) = eK2 k g (u + k, s) we
can rewrite the final term in brackets as
−K2 k

e

·

1
At−k

Z

t−k

g (t − k − s, s) As dzs

0

where |g (u, s)| ≤ K1 e−K2 u by construction. By our induction assumption, this term has p-norm

9

bounded by e−K2 k · M (p). To bound the remaining terms, first observe that by lognormality
At−k
At

≤ Kp (σ A , k)
p

for some Kp (σ A , k) that goes to one in σ A for all k. Next note that
At−k
At

Z

t

As
g (t − s, s)
dzs
At−k
t−k

p

At−k
≤
At

·
2p

Z

t

g (t − s, s)

t−k

As
dzs
At−k

2p

by the Cauchy-Schwarz inequality. Here
At−k
At

≤ K2p (σ A , k)
2p

where K2p (σ A , k) also goes to one in σ A for all k. Finally, using standard bounds (e.,g., Karatzas
and Shreve, 2008) for moments of the Ito integral, we obtain
Z

t

g (t − s, s)

t−k

As
dzs
At−k

2p



≤ K2p 

Z

t

t−k

K12



As
Au−k

2

p

1/2

ds

which is bounded by K2p K1 k · K2p (σ A , k). Combining terms we obtain
2
(σ A , k) · K2p K1 k + Kp (σ A , k) · e−K2 k · M (p) .
kGt kp ≤ K2p

It is easy to see that if
M (p) =

2 (σ , k) · K K k
K2p
2p 1
A
1 − Kp (σ A , k) · e−K2 k

is positive, then the induction step follows. We can make sure that this is the case by first choosing
some k > 0, and then picking σ A small enough so that for all σ A ≤ σ A we have Kp (σ A , k) < eK2 k/2 .
With this choice of M (p), the induction step follows; and (i) can be verified easily from the argument
of the induction step.
Proof of Lemma 8. We verify directly that changing the clock is equivalent to rescaling the
relevant parameters in the setup of the problem. Maximizing the consumer’s problem in the original
model is equivalent to maximizing

E

Z

0

∞

−ρtτ

e

a1−γ
x1−γ
τt
+ µ τt
1−γ
1−γ
10

!

dt

which is proportional to the objective function in the model with new parameters. Similarly, the
budget constraint of the original model implies
dwτ t =





τ r + ατ t τ π + αiτ t τ π I wt − τ ct dt + ατ t wτ t στ 1/2 dzτ t + αiτ t wτ t σ i τ 1/2 dzτi t

on all non-adjustment dates due to the scaling invariance of Brownian motion. Finally, on adjustment dates, dw = λ1 xt− /r + λ2 xt /r = λ1 · τ xt− / (τ r) + λ2 · τ xt / (τ r). Since the optimal policy is
unique, the claim follows.

A-3

Proofs for Section 4.1

A-3.1

Proof of Proposition 5

(1) Excess smoothness. Using a Taylor expression we can write
log Ct1 − log Ct0 =

At0
(log At1 − log At0 ) + εt1
Ct0

(19)

where, because Xt has bounded variation, there exists Kε such that Eε2t1 < Ke (t1 − t0 )2 . Thus
β 1 (t1 ) =

At0 (t1 − t0 )1/2 Kε
At σ A (t1 − t0 )1/2 Kε (t1 − t0 )
cov (log (Ct1 /Ct0 ) , log (At1 /At0 ))
=
≤ 0+
+
var (log (At1 /At0 ))
Ct0
Ct0
σA
σ 2A (t1 − t0 )

and the right-hand side approaches At0 /Ct0 as t1 → t0 .
(2) Excess sensitivity. Let t1 = t2 . From the proof of Lemma 3 we know that log [At3 /Ct3 ]
converges exponentially fast to an invariant distribution. In particular, Et1 [log [At3 /Ct3 ]] converges
exponentially fast to the mean of this invariant distribution, which we denote by ξ, so that we can
write log Ct3 = log At3 + ξ + εt3 where Et1 [εt3 ] converges to zero at a given exponential rate as
t3 → ∞. Using (19) we can write
log Ct3 − log Ct1

= log At3 + ξ + εt3 − log Ct0 −
=

At0
(log At1 − log At0 ) − εt1
Ct0


Xt0
(log At1 − log At0 ) + (log At3 − log At1 ) + log At0 + ξ + (εt3 − εt1 ) .
Ct0

To compute β 2 , we evaluate the covariance of log At1 − log At0 with each of the terms in this
expression. Because log At is a Brownian motion with drift, the covariance with the term in the
second parenthesis is zero. Conditional on the history up to t0 , the terms in the third parenthesis
11

are constants, hence their covariance is also zero. The terms in the fourth parenthesis are error
terms: just like in the proof of (1), ε1 can be made arbitrarily small by choosing t1 small; and εt3
is approximately orthogonal to events before t1 for t3 large.

Thus for t1 small and t3 large the

regression coefficent is determined by the first term, implying that β 2 is approximately Xt0 /Ct0 > 0.

A-3.2

Modeling large shocks

Our approach is to construct, on a single probability space, a set of “shock” processes for each
t1 > t0 , such that the distribution of the process for a given t1 is identical to the distribution of At
conditional on the shock event S (t1 , ∆). This construct will allow us to take limits while holding
fixed the probability space.
et , which agrees with At for t ≤ t0 , and has the
Formally, we introduce the auxiliary process A

et will be driving At after
same distribution as At for t > t0 . The idea is that innovations in A

the shock. We also introduce an independent standard Brownian motion B s defined for s ≥ 0,
which will drive the innovations during the shock. We then model the positive shock as a Brownian
bridge for log At conditioned to start at log At0 at time t0 , and to reach log At0 + ∆ at time t1 .
We denote this process by At (+, t1 , ∆), and construct it as follows: for t0 ≤ t ≤ t1 , we let log

At (+, t1 , ∆) = σ A B t−t0 − (t − t0 ) B t1 + (t − t0 ) ∆, and for t ≥ t1 we let d log At (+, t1 , ∆) =

et . Although the expression for t0 ≤ t ≤ t1 does not make this clear, it is well-known that
d log A

this Brownian bridge is an Ito-processes. We construct At (−, t1 , ∆) analogously. Given that it is a
Brownian bridge between t0 ≤ t ≤ t1 it follows that log At (+, t1 , ∆) has the same distribution as
our original process log At conditional on S (+, t1 , ∆).
The formulas for the dynamics of Xt , Ct , Xth and Cth , once we replace At by At (+, t1 , ∆)
respectively At (−, t1 , ∆), directly extend, and generate the distributions of commitments, habit,
and consumption conditional on the shock event. To clarify which process we have in mind, we
sometimes use notation such as X t (+, t1 , ∆) to refer to aggregate commitments (during or after
a positive shock) on the probability space just constructed. However, when it does not cause
h

confusion we often just write X t and say in words that we work with the “shock” processes.
One key feature of this construction is that instead of considering a sequence of non-overlapping
events S (t1 , ∆), we consider a single probability space and a sequence of processes. The advantage
is that we can use the Lp norm on this common probability space when we take various limits over
t. In particular, throughout the analysis below, we use Lp (conditional on the history up to t0 ) for
all p ≥ 1 as we take the limits t1 → t0 and t2 → t0 .
12

A-3.3

Continuity after large shocks
h

h

We show that X t and C t change continuously around t0 in the limit as t1 → t0 and as t2 → t0 .
h

h

h

h

Lemma 9 We have limt1 →t0 X t1 (+, t1 , ∆) = X t0 and limt1 →t0 X t1 (−, t1 , ∆) = X t0 . Moreover,
h

h

even after taking the limit t1 → t0 the the dynamics of X t continuous at t0 : limt2 →t0 limt1 →t0 X t2 (+, t1 , ∆) =
h

h

h

X t0 and limt2 →t0 limt1 →t0 X t2 (−, t1 , ∆) = X t0 .
Proof. Consider the case when the shock is positive. Suppressing in notation that we work with
Rt
h
the “shock” processes, according to the representation in Lemma 7, X t2 = 0 2 ξ ∗′ (t2 − s) As (+, t1 , ∆) ds+
Rt
[x − ξ ∗ (t2 )] A0 . When t2 = t1 goes to t0 , this expression converges to 0 0 ξ ∗′ (t2 − s) As (+, t1 , ∆) ds+
h

[x − ξ ∗ (t2 )] A0 = X t0 proving, for a positive shock, the first claim. For the second claim, note that
Rt
es · e∆ ds +
as t1 → t0 the last term is constant while the first term converges to t02 ξ ∗′ (t2 − s) A
R t0 ∗′
0 ξ (t2 − s) As ds. Here only the first integral depends on t2 and as t2 → t0 it converges to zero.
The same logic works when the shock is negative.

h
i
h
i
i
h
h
h
h
Lemma 10 We have limt1 →t0 log C t1 (+, t1 , ∆) = log e∆ At0 + X t0 and limt1 →t0 log C t1 (−, t1 , ∆) =
i
h
i
h
i
h
h
h
h
log e−∆ At0 + X t0 . And analogously we have limt2 →t0 limt1 →t0 log C t2 (+, t1 , ∆) = log e∆ At0 + X t0
h
i
h
i
h
h
and limt2 →t0 limt1 →t0 log C t2 (−, t1 , ∆) = log e−∆ At0 + X t0 .
Suppose the shock is positive. Then, supressing in notation that we work with the

Proof.

“shock” processes, using the fact that log (1 + z) ≤ z,

log

h

h
C t2

i

h

− log e∆ At0 +

h
X t0

i

= log
"

"

h

At2 + X t2
h

e∆ At0 + X t0
h

#
h

e∆ At0 + X t0

At2 + X t2

#

− 1,
−1
h
h
e∆ At0 + X t0
At2 + X t2



  h
  h
h
h
∆
∆
At2 − e At0 + X t2 − X t0
e At0 − At2 + X t0 − X t2

,
≤ max 
h
h
e∆ At0 + X t0
At2 + X t2


h
h
h
h
At2 − e∆ At0 + X t2 − X t0 e∆ At0 − At2 + X t0 − X t2
.
,
≤ max 
e∆ At0
At2
≤ max

For the first set of limits we assume t1 = t2 and take them to t0 simultaneously; for the second set
of limits we first take t1 → t0 and then take t2 → t0 . In either case, in both terms of the maximum,
the numerator converges to zero in L2p while the inverse of the denominator is bounded in L2p . By
13

the Cauchy-Schwarz inequality, the terms themselves converge to zero in Lp , hence so does their
maximum. The argument for a negative shock is analogous.

A-3.4

Notation and proof structure


Bounds. We use the notation that K t, ∆ refers to a family of random variables which are

uniformly bounded independently of ∆, in the limit as t1 → t0 , when t2 and t3 are for appropriately chosen.

Formally, we require that there exists a family of constants K (p), such

that given p, for any ∆, we can find t2 (∆, p) small enogh and t3 (∆, p) large enough so that

limt1 →t0 sup kK (t1 , t2 (∆, p) , t3 (∆, p))kp ≤ K (p). Different occurences of K t, ∆ may refer to

different families of random variables and may have a different K (p) values associated with them.
i
h
i
h

h
h
For example, Lemma 10 implies that log C t2 (+, t1 , ∆) = log e∆ At0 + X t0 + K t, ∆ .
Order of limits. The statement of Proposition 7 assumes that n is large enough; this means that

σ A /σ I is small enough, while other parameters of the model, as described in Section 3.4, remain
bounded. We first analyze the case in which σ A becomes small, and then establish the result when
σ I becomes sufficiently large using a clock change.

A-3.5

Long-term behavior

Lemma 11 Suppose that n is large enough and σ A is small enough. Then

lim lim

t3 →∞ t1 →t0

"

h

eh
X
− t3
et
At3 (−, t1 , ∆)
A
3

X t3 (−, t1 , ∆)

#

= 0.

The intuition for the Lemma is that Xt3 is just a weighted sum of past As values, with the
weights for the distant past going to zero exponentially fast. Thus, if As is multiplied by a constant
after date t0 , then for t3 large enough, most of the terms determining Xt3 in this weighted sum will
also be multiplied by that constant, and hence Xt3 /At3 will be approximately the same as it would
be on the no-shock path. The caveat is that the terms in the weighted average corresponding to
the distant past, divided by current At3 , must not blow up. For this we need that 1/At3 does not
become big too quickly relative to the rate with which the weights on the past converge to zero.
These weights go to zero at a given exponential rate, so if the variance of the At process is not too
big, we are fine.
Proof of Lemma 11. Suppressing in notation that we work with the “negative shock” processes,

14

we have
Z t3
1
A0
= lim
ξ ∗′ (t3 − s) As ds + [x − ξ ∗ (t3 )]
lim
t1 →t0 At
t1 →t0 At
At3
0
3
3
Z t3
Z t0
A0
1
es e−∆ ds + 1
ξ ∗′ (t3 − s) A
ξ ∗′ (t3 − s) As ds + [x − ξ ∗ (t3 )]
=
At3 t0
At3 0
At3


Z
t0
eh
 1
X
ξ ∗′ (t3 − s) As ds + [x − ξ ∗ (t3 )] A0
= e−∆ t3 + 1 − e−∆
At3
At3
0


Z t0
eth

 ∗
t0
X
1
−∆
∗
∗
3
+ 1−e
−ξ (t3 − s) As 0 +
=
ξ (t3 − s) dAs + [x − ξ (t3 )] A0
et
et e−∆
A
A
0
3
3


Z t0
eth
 1
X
∗
∗
∗
∆
∗
3
ξ (t3 − s) dAs + [x − ξ (t3 )] A0
+ e −1
−ξ (t3 − t0 ) At0 + ξ (t3 ) A0 +
=
et
et
A
A
0
3
3
Z t0

eh
 1
X
t3
∗
∆
∗
+ e −1
ξ (t3 − s) dAs + xA0 − ξ (t3 − t0 ) At0 .
=
et
et
A
A
0
3
3
h

X t3

Here the last term can be written as
 1
e −1
et
A
∆

3

Z

0

t0


(ξ (t3 − s) − x) dAs + At0 [x − ξ (t3 − t0 )] .
∗

∗

Because, by Lemma 3, |ξ ∗ (t3 − s) − x| ≤ K1 e−K2 (t3 −s) for some constants K1 , K2 independent of n,
it follows from Lemma 7 that, for n large enough, the first term here converges to zero as t3 → ∞.
Also by Lemma 3 the second term converges to zero as t3 → ∞.
Lemma 12 Suppose that n is large enough and σ A is small enough. There exists a constant K2
such that the following holds. For any ∆, we can find t2 and t3 such that for all t1 close enough to
t0 ,

i
h
i
h
h
h
h
h
E log C t3 − log C t2 | S (+, t1 , ∆) − E log C t3 − log C t2 | S (−, t1 , ∆) ≥ ∆ − K2 .
Proof. A key element of the proof is that we bound the left hand side for each realization, that

is, without the expectations operator. However, because S (+, t1 , ∆) and S (−, t1 , ∆) are disjoint
events, we can only do this using the “shock processess”, which have the same distribution as the
original processes conditioned on the shock events, but are defined on a common probability space.
Suppose first that the shock is positive. Supressing in notation that we work with the shock
h
et + ∆. Moreover, by Lemma 10, for t2 close to t0 , we
process, we have log C t3 ≥ log At3 = log A
3

have





h
log C t2 = log e∆ At0 + X t0 + K t, ∆ = log At0 + ∆ + K t, ∆
15

h

where the second equality follows because, given that we condition on the history up to t0 , X t0 /At0
is a constant. We can now write, for a positive shock, that




h
h
et + ∆ − log At + ∆ + K t, ∆ = log A
et − log At + K t, ∆ .
log C t3 − log C t2 ≥ log A
3
0
3
0
Now suppose that the shock is negative. Then, using Lemma 10,








h
log C t2 = log e−∆ At0 + X t0 +K t, ∆ = log At0 +log e−∆ + X t0 /At0 +K t, ∆ ≥ log At0 +K t, ∆
because X t0 /At0 is a constant. Moreover, using the fact that log (1 + z) ≤ z,
h

log C t3

h
i
h
i
h
h
= log At3 + X t3 = log At3 + log 1 + X t3 /At3
h

et − ∆ + X t /At = log A
et − ∆ + X
eth /A
et + K t, ∆
≤ log A
3
3
3
3
3
3



where at the last step we used Lemma 11. It follows that for a negative shock


h
h
et − ∆ + X
e h /A
et − log At + K t, ∆ .
log C t3 − log C t2 ≤ log A
t3
3
3
0

Combining the inequalities for the positive and the negative shocks yields, for the shock processes,
the bound
h

i h
i
h
h
h
h
log C t3 (+, t1 , ∆) − log C t2 (+, t1 , ∆) − log C t3 (−, t1 , ∆) − log C t2 (−, t1 , ∆) ≥



et − log At − log A
et − ∆ + X
eth /A
et − log At + K t, ∆
log A
3
0
3
0
3
3


e h /A
et + K t, ∆ .
=∆−X
t3
3

Finally,

Z t3
Z t3
e0
et
1
A
1
X
3
∗
e
es
=
ξ (t3 − s) dAs + x
=x+
[ξ ∗ (t3 − s) − x] dA
et
et 0
et
et 0
A
A
A
A
3
3
3
3

and by Lemma 7 the last term is bounded in Lp for all t3 . Thus the above difference is ∆ plus a
term bounded in Lp , and the claim of the Lemma follows.

16

A-3.6

Proofs of Propositions 6 and 7

Proof of Proposition 6. (i) Taking expectations in the regression equation (12) conditional on the
shock being positive respectively negative, and differencing, we obtain




E log C t1 − log C t0 | S (+, t1 , ∆) − E log C t1 − log C t0 | S (−, t1 , ∆) = 2β 1 (t1 , ∆) · ∆

(20)

which gives an expression for β 1 (t1 , ∆). An analogous formula expresses β h1 (t1 , ∆). Because Xt /At


is bounded from below by L and from above by U , we have log C t1 /C t0 − log At1 /At0 ≤

log (1 + U ) − log (1 + L) = K1 and therefore





E log C t1 − log C t0 | S (+, t1 , ∆) − E log C t1 − log C t0 | S (−, t1 , ∆)






≥ E log At1 /At0 | S (+, t1 , ∆) − E log At1 /At0 | S (−, t1 , ∆) − 2K1 = 2 (∆ − K1 ) .
Hence β 1 (t1 , ∆) ≥ 1 − K1 /∆.
(ii) Lemma 10 implies that for any positive K2 , we can choose t1 close enogh to t0 such that
h
i
h
i




h
h
E log C t1 | S (+, t1 , ∆) − E log C t1 | S (−, t1 , ∆) ≤ log e∆ At0 + X t0 − log e−∆ At0 + X t0 + K2 .
The right-hand side can be bounded as

log

"

h

e∆ At0 + X t0
h

e−∆ At0 + X t0

#

= log

"

h

e∆ + X t0 /At0
h

e−∆ + X t0 /At0

#

≤ log

"

h

e∆ + X t0 /At0
h

X t0 /At0

#

≤ ∆+log

"

h

1 + X t0 /At0
h

X t0 /At0

#

= ∆+K3

where–given that we condition on the history up to t0 –K3 is a constant. It then follows from (20)
that, for a given ∆, we can choose t1 close enough to t0 such that β h1 (t1 , ∆) < 1/2 + (K2 + K3 ) /∆.
Proof of Proposition 7. (i) Taking expectations in (13) and differencing, we obtain





E log C t3 − log C t2 | S (+, t1 , ∆) − E log C t3 − log C t2 | S (−, t1 , ∆) = 2β 2 t, ∆ · ∆

(21)



which gives an expression for β 2 t, ∆ . An analogous formula expresses β h2 t, ∆ . Because Xt /At


is bounded from below by L and from above by U , we have log C t3 /C t2 − log At3 /At2 ≤

17

log (1 + U ) − log (1 + L) = K1 and therefore




E log C t3 − log C t2 | S (+, t1 , ∆) − E log C t3 − log C t2 | S (−, t1 , ∆)






≤ E log At3 /At2 | S (+, t1 , ∆) − E log At3 /At2 | S (−, t1 , ∆) + 2K1 = 2K1 .
Using (21) we obtain β 2 (t1 , t2 , t3 , ∆) ≤ K1 /∆.
(ii) Using Lemma 12 we can find t2 and t3 , and t1 close enough to t0 , such that β h2 (t1 , t2 , t3 , ∆) ≥
1 − K2 /∆. This gives the proof along a sequence Θn in which σ A → 0. Finally we discuss the
case when as n → ∞, we have σ I → ∞. The only step we need to verify is that Lemma 12 also
holds for n large enough. To show this, just like in the proof of our main result, we change the
clock. Using the transformation introduced in Lemma 8, we let τ = 1/σ 2I and slow down the model
by rescaling deep parameters with τ . In the habit representation of that “rescaled” model, for n
large enough Lemma 12 holds, because all the assumptions, in particular, the requirement that σ A
is small enough, are satisfied. And because the habit representation of the model after the clock
change is the same as changing the clock in the habit representation of the original model, it follows
that–with appropriately unscaled values for t2 and t3 –Lemma 12 also holds in the original model.

A-4

Proofs for Sections 4.2 and 4.3
∗

p|x0 ) = ∞.
Proof of Proposition 8. In Θ , agents in the interior of the band never adjust, hence T∗ (e
For n finite, agents does adjust eventually, but since the drift and variance of y goes to zero,
the expected time to adjustment approaches infinity. In the habit model, x never changes, hence
T h,n (e
p|x0 ) = ∞.
Proof of Proposition 9. (i) Our first goal is to compute the value function of the habit agent. Let
ψ be defined so that the value function of the Merton consumption problem in the environment of
the representative habit consumer, but without habit, is ψW 1−γ / (1 − γ). By the envelope theorem,
this Merton agent has consumption policy c = ψ −1/γ W . The surplus consumption of our habit
agent is identical to the consumption of a Merton agent, because they solve the same maximization
problem. Hence, if the habit consumer sets his initial surplus consumption to be A0 , the dollar cost
of his lifetime surplus consumption expenditure is A0 ψ 1/γ .
To proceed, we now evaluate the lifetime budget constraint of the habit consumer. Each dollar
of consumption spending in a period also creates future expenditure in the form of increased habit.
18

Suppose 1 + B dollars is the present value of these future expenditures for a dollar of consumption
spending today, where B = 0 with no habits. Then B must satisfy
B=

Z

∞

θ (u) e−ru du · (1 + B)

u=0

because each dollar of consumption creates θ (u) habit spending u periods ahead, which has a total
cost of θ (u) (1 + B) in period u dollars, which we must then discount back at the riskfree rate
because these payments are certain. Solving yields
B=

1
.
1 − u=0 θ (u) e−ru du
R∞

At any time t, our habit consumer also has pre-existing habit created by his past consumption.
The dollar value of the expenditures generated is
Zt = (1 + B) ·

Z

t

Ct−s

s=0

Z

∞

−r(u−s)

θ (u) e

du ds +

s

Z

∞

−ru

θ0 (u) X0 e

s=t

du



where the term in parenthesis measures future consumption expenditures created by habits established before t, discounted back at the riskfree rate because these are certain; and the factor 1 + B
is included because each dollar of consumption spending has this total expenditure cost.
The consumer’s lifetime budget constraint must then satisfy
Wt = At · ψ 1/γ (1 + B) + Zt
and his lifetime utility from surplus consumption, by the Merton value function, is simply ψ 1/γ A1−γ
/ (1 − γ).
t
Combining these equations yields
Vthabit (Wt , Xt )

ψ
=
1−γ



Wt − Zt
1+B

1−γ

.

The welfare of an individual commitment agent for a move-inducing negative wealth shock is
proportional to (w − λ1 x)1−γ / (1 − γ).
Now compare the welfare cost of shocks in the commitment and the habit economies. As wealth
falls to zero, if Zt > 0 then the marginal utility of the habit agent will be driven to infinity even
with a finite shock. In contrast, when λ1 = 0, the marginal utility of the commitment agent only
blows up when all his wealth is taken. It follows that for large finite shocks, Π (q, b) is higher for
19

the habit agent than in the commitment economy.
(ii) Begin with the commitment model. The agent in the limit economy never moves, and
hence his value function is proportional to (W − x/r)1−γ / (1 − γ). It follows that the coefficient
of relative risk aversion CRRA∗ (W0 , x0 ) = γW0 / (W0 − x0 /r). Now consider an agent in economy
n. Let p0 denote the total dollar value at date zero of his total commitment expenditures on
his current home. Given positive risk and growth, this agent does move eventually, implying
p0 < x0 /r. One policy available to this consumer at any wealth W is to maintain his spending
and moving patterns on current commitments, and adjust spending proportionally on all other
goods relative to the optimal policy with initial wealth W0 . Given that λ1 = 0, this policy yields
lifetime utility Vn (W0 , x0 ) (W − p0 )1−γ / (W0 − p0 )1−γ . This is a lower bound for the agent’s true
value function, and the both equal Vn (W0 , x0 ) at W0 . It follows that the lower bound has higher
curvature at W0 . As a result, CRRAn (W0 , x0 ) ≤ γW0 / (W0 − p0 ). Since p0 < x0 /r, we have
CRRAn (W0 , x0 ) < CRRA∗ (W0 , x0 ). Hence for b small, the Arrow-Pratt approximation implies
Πn (q, b) < Π∗ (q, b) uniformly in n.
In the habit model, the value function in every economy is proportional to (W − x/r)1−γ / (1 − γ),
and hence Πh,n (q, b) = Πh∗ (q, b).

A-5

Simulations

Solving the commitments model. In the simulations we use an ODE characterization of the optimal
policy that builds on a similar characterization for the one-good model by Grossman and Laroque.
To develop this ODE, we must study the Bellman equation of the commitment agent.

By the

mutual fund theorem the agent will combine the risky assets available to him in fixed proportions,
effectively sharing his wealth between the mutual fund and the riskfree asset. Let π r and σ r denote
the mean and standard deviation of the mutual fund’s excess return.2 Denote the value function
by V (W, x), then the Bellman equation between adjustment dates is
 1−γ

a
x1−γ
1
ρV (W, x) = max κ
+
+ V1 (W, x) EdW + V11 (W, x) V ar (dW ) .
α,α
1−γ 1−γ
2
2

In our setting we
π r / π M /σ 2M + π M /σ 2M .

can

use

πr

=



 

(π M /σ M )2 + (π M /σ M )2 / π M /σ 2M + π M /σ 2M

20

and

σ 2r

=

Following Grossman and Laroque, let y = W/X − λ1 and define h (y) = x−1+γ V (W, x) =
V (W/x, 1). Dividing through by x1−γ in the Bellman equation we obtain
#
1
1
(a/x)1−γ
+
+ h′ (y) Edy + h′′ (y) V ar (dy)
ρh (y) = max κ
a,α
1−γ
1−γ
2
"

and the budget constraint yields
dy = ((y + λ1 ) (r + απ r ) − 1 − a/x) dt + (y + λ1 ) ασ r dz.
Maximizing in α, the optimal portfolio satisfies
α (y + λ1 ) =
and adjustable consumption is

−h′ (y) π r
h′′ (y) σ 2r

 ′

h (y) −1/γ
a
=
.
x
κ

Substituting back into the Bellman equation we obtain
ρh (y) = h′ (y)1−1/γ κ1/γ

1
1 h′ (y)2 π 2r
γ
+
+ h′ (y) [(y + λ1 ) r − 1] −
.
1−γ 1−γ
2 h′′ (y) σ 2r

This is an ordinary differential equation for h (y). To obtain boundary conditions, note that on an
adjustment date the value function equals

1
V (W, x)
= 1−γ max
V W − λ1 x − λ2 x′ , x′
1−γ
′
x
x
x


1−γ



W − λ1 x
x′
W − λ1 x 1−γ
· max
·V
− λ2 , 1
=
x′
x
W − λ1 x
x′


W − λ1 x 1−γ
· max (y + λ1 + λ2 )−1+γ h (y) .
=
y
x
Define
M = max (y + λ1 + λ2 )−1+γ h (y)
y

then by the above reasoning, at the edges of the inaction band, denoted y1 and y2 we have
h (yi ) = M yi1−γ

21

moreover, smooth pasting implies
h′ (yi ) = M (1 − γ) yi−γ .
Finally, the target value of y satisfies
y ∗ = arg max (y + λ1 + λ2 )−1+γ h (y) .
To numerically solve the ODE subject to these conditions, we follow the approach outlined by
Grossman and Laroque. We first pick some M , pick y1 , solve the ODE with initial conditions as
given above. If there is no y2 for which the boundary conditions are satisfied, then we start with
a different y1 . If the boundary conditions do hold for some y2 , then we check if M satisfies the
equation above; if not, we start with a different M .
Simulating dynamics. We simulate the dynamics of an economy populated by a continuum of
commitment agents using the partial differential equation of Proposition 3. We discretize the differential equation following the approach presented in Caballero (1993). We use this methodology
to compute the steady state density f ∗ , to compute the impulse response (Definition 1), and to
simulate dynamics along a sequence of aggregate shocks. We compute the matching consumption
habit weights using Lemma 5 of this Appendix, and simulate the dynamics of the habit model using
equation (10) of the main text.

References to the Supplementary Appendix
Ben-Ari, I. and Pinsky, R. (2007) “Spectral analysis of a family of second-order elliptic operators with nonlocal boundary condition indexed by a probability measure”, Journal of Functional
Analysis 251, 122-140.
Ben-Ari, I. and Pinsky, R. (2009). “Ergodic behavior of diffusions with random jumps from
the boundary,” Stochastic Processes and Applications 119, 864—881.
Grigorescu I. and Kang, M. (2002). “Brownian Motion on the Figure Eight”, Journal of
Theoretical Probability, 15(3), 817—844.
Karatzas, I. and Shreve, S. (2008). “Brownian Motion and Stochastic Calculus,” Springer
Verlag, 2nd edition.
Krylov, N. V. and Rozovski, B. L. (1977). “On the Cauchy Problem for Linear Stochastic
Partial Differential Equations.” Math. USSR Izvestija 12: 336-356.
22

Krylov, N. V. and Rozovski, B. L. (1978). “On Conditional Distributions of Diffusion
Processes.” Math. USSR Izvestija 11: 1267—1284.
Lew, J. (1972). “On Linear Volterra Integral Equations of Convolution Type.” Proceeedings
of the American Mathematical Society 35(2): 450-456.
Revuz, D. and Yor, M. (1994). “Continuous Martingales and Brownian Motion,” 2nd edition.
In: Grundlehren der Mathematischen Wissenschaften [Fundamental Principles of Mathematical
Sciences], vol. 293. Springer-Verlag, Berlin.

23

