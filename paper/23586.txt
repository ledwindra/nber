NBER WORKING PAPER SERIES

OPTIMAL REGULATION OF FINANCIAL INTERMEDIARIES
Sebastian Di Tella
Working Paper 23586
http://www.nber.org/papers/w23586

NATIONAL BUREAU OF ECONOMIC RESEARCH
1050 Massachusetts Avenue
Cambridge, MA 02138
July 2017

I’d like to thank Andres Schneider, Andy Skrzypacz, Peter DeMarzo, Pablo Kurlat, Yuliy
Sannikov, Bob Hall, Martin Schneider, Monika Piazzesi, V.V. Chari, Chad Jones, Chris Tonetti,
Florian Scheuer, Eric Madsen, Alex Bloedel, Javier Bianchi, Fernando Alvarez, Takuo Sugaya,
Victoria Vanasco, Mike Harrison, and Peter Kondor. e- mail: sditella@stanford.edu. A previous
version of this paper circulated with the title “Optimal Financial Regulation and the
Concentration of Aggregate Risk”. The views expressed herein are those of the author and do not
necessarily reflect the views of the National Bureau of Economic Research.
NBER working papers are circulated for discussion and comment purposes. They have not been
peer-reviewed or been subject to the review by the NBER Board of Directors that accompanies
official NBER publications.
© 2017 by Sebastian Di Tella. All rights reserved. Short sections of text, not to exceed two
paragraphs, may be quoted without explicit permission provided that full credit, including ©
notice, is given to the source.

Optimal Regulation of Financial Intermediaries
Sebastian Di Tella
NBER Working Paper No. 23586
July 2017
JEL No. E44,G01
ABSTRACT
I characterize the optimal financial regulation policy in an economy where financial
intermediaries trade capital assets on behalf of households, but must retain an equity stake to
align incentives. Financial regulation is necessary because intermediaries cannot be excluded
from privately trading in capital markets. They don’t internalize that high asset prices force
everyone to bear more risk. The socially optimal allocation can be implemented with a tax on
asset holdings. I derive a sufficient statistic for the externality/optimal policy in terms of
observable variables, valid for heterogenous intermediaries and asset classes, and arbitrary
aggregate shocks. I use market data on leverage and volatility of intermediaries’ equity to
measure the externality, which co-moves with the business cycle.

Sebastian Di Tella
Stanford University
Graduate School of Business
655 Knight Way
Stanford, CA 94305
and NBER
sditella@stanford.edu

Optimal Regulation of Financial Intermediaries
Sebastian Di Tella⇤
Stanford GSB
June 2017

Abstract
I characterize the optimal financial regulation policy in an economy where financial intermediaries trade capital assets on behalf of households, but must retain an equity stake to align
incentives. Financial regulation is necessary because intermediaries cannot be excluded from
privately trading in capital markets. They don’t internalize that high asset prices force everyone
to bear more risk. The socially optimal allocation can be implemented with a tax on asset
holdings. I derive a suﬃcient statistic for the externality/optimal policy in terms of observable
variables, valid for heterogenous intermediaries and asset classes, and arbitrary aggregate shocks.
I use market data on leverage and volatility of intermediaries’ equity to measure the externality,
which co-moves with the business cycle.

1

Introduction

Financial intermediaries trade capital assets on behalf of households. However, excessive risk taking
by financial intermediaries can create macro instability and lead to financial crises. As a result, there
is a great interest in the regulation of financial intermediaries, especially after the financial crisis in
2007. But what are the right policy instruments, and what is the optimal way to use them? In this
paper I propose a model of optimal financial regulation. I show that the optimal allocation can be
implemented with a tax on asset holdings and I derive a simple formula that allows us to use market
data to guide policy.
I use a macroeconomic model of financial crises based on Brunnermeier and Sannikov (2014),
He and Krishnamurthy (2012), and Di Tella (2013), where financial intermediaries trade capital on
behalf of households but must retain an equity stake to align incentives. The main contribution
of this paper is to characterize the optimal financial regulation policy in this environment. The
equity constraint is derived from a moral hazard problem with hidden trade: intermediaries can
⇤
I’d like to thank Andres Schneider, Andy Skrzypacz, Peter DeMarzo, Pablo Kurlat, Yuliy Sannikov, Bob Hall,
Martin Schneider, Monika Piazzesi, V.V. Chari, Chad Jones, Chris Tonetti, Florian Scheuer, Eric Madsen, Alex
Bloedel, Javier Bianchi, Fernando Alvarez, Takuo Sugaya, Victoria Vanasco, Mike Harrison, and Peter Kondor. email: sditella@stanford.edu. A previous version of this paper circulated with the title “Optimal Financial Regulation
and the Concentration of Aggregate Risk”.

1

divert investment returns. Hidden trade is an important feature of the environment. Because an
intermediary’s job is precisely to buy and sell capital assets, he cannot be excluded from privately
trading in this market. This is the ultimate source of ineﬃciency in this economy.1 In contrast
to previous papers, I don’t put any constraints on private contracts. I compare the competitive
equilibrium where agents can write complete long-term contracts, with the best allocation that
can be achieved by a social planner facing the same informational frictions. An advantage of this
mechanism design approach is that I don’t need to commit to an arbitrary set of policy instruments
– I let the model guide the choice of policy instrument.
Hidden trade creates an externality because the private benefit of diverting investment returns
depends on the market value of capital assets. Intermediaries don’t internalize that by demanding
capital and bidding up its price, they worsen the moral hazard problem for everyone else. As a result,
asset prices are too high and intermediaries must take too much idiosyncratic risk. A social planner
would rather reduce asset prices, even at the cost of less investment, in order to reduce intermediaries’
exposure to risk. The socially optimal allocation can be implemented as a competitive equilibrium
with a tax on asset holdings that internalizes the externality without distorting other decisions (e.g.,
debt/equity margin).
A central concern of financial regulation policy is preventing the excessive concentration of aggregate, or systemic, risk on financial intermediaries. I allow for arbitrary aggregate shocks, and show
that the unregulated competitive equilibrium may indeed feature a financial amplification channel,
with financial losses concentrated on the balance sheets of intermediaries. In contrast to a large
part of the literature, this is not the result of incomplete markets: intermediaries optimally choose
this risk exposure. In the empirically relevant case with relative risk aversion greater than one,
the competitive equilibrium concentrates financial losses on intermediaries after aggregate shocks
that reduce the cost of delivering utility to them, relative to households. Essentially, intermediaries
are willing to take large financial losses when they expect large excess returns looking forward, i.e.
during downturns or financial crises. However, private contracts correctly measure the cost of delivering utility to intermediaries, so the allocation of aggregate risk is eﬃcient. A planner who could
only regulate intermediaries’ exposure to aggregate risk would choose not to interfere. He can only
improve the allocation by dealing with the externality. This is a feature of long-term contracts that
does not hold with short-term contracts. Of course, the allocation of aggregate risk in the unregulated competitive equilibrium and the planner’s allocation might very well be diﬀerent. In this
sense intermediaries might be excessively exposed to aggregate risk, creating an ineﬃcient financial
amplification channel.2 But there is no need to regulate intermediaries’ exposure to aggregate risk.
Once the tax on asset holdings internalizes the externality, there is no need for further regulation
(e.g. bailouts, stress tests, etc.).
1

It is well known that hidden trade can be a source of ineﬃciency (see for example Farhi et al. (2009) and Kehoe
and Levine (1993)). The contribution in this paper is to characterize the optimal financial regulation policy in a
widely used and policy-relevant model of financial crises.
2
In Section 7 I show that this is indeed the case for uncertainty shocks, for example.

2

excess return on assets Α and externality Η

excess return on equity !Α $ leverage"
14!

4!
12!
10!

3!

8!
2!

6!
4!

1!

2!
0!

0!
1980

1990

2000

2010

1980

1990

2000

2010

Figure 1: Left: intermediaries’ risk-adjusted expected excess return on assets ↵ (dashed) and
externality ⌘ (solid); Right: intermediaries’ risk-adjusted expected excess return on equity ↵ ⇥
leverage.
We can use market data to measure the externality and guide optimal policy. The unregulated
competitive equilibrium has Marginal cost of capital = Marginal value of capital, as usual. However,
because of the externality produced by hidden trade, the planner’s FOC for investment is actually
Marginal cost of capital ⇥ (1 + ⌘t ) = Marginal value of capital. Higher investment requires higher
asset prices, which worsen the moral hazard problem. The externality ⌘t

0 measures this additional

marginal cost of capital, and admits a simple suﬃcient statistic representation in terms of equilibrium
observables
⌘t = ↵t ✏ t

(1)

Here ↵t is intermediaries’ equilibrium risk-adjusted expected excess return on assets, and ✏t the
technologically given elasticity of the cost of capital. This expression is true for any equilibrium
allocation (not just the optimal allocation), after any history and for any type of aggregate shock
hitting the economy. It has a simple interpretation. If we want to raise investment, asset prices
(equal to the marginal cost of capital) will have to increase by ✏t percent. As a result, intermediaries
will have to increase the value of their asset holdings, exposing them to more idiosyncratic risk. In
equilibrium, the excess return ↵t compensates intermediaries for the idiosyncratic risk they must
take when holding capital, so ⌘t = ↵t ✏t measures the additional marginal cost of capital coming from
intermediaries’ larger exposure to idiosyncratic risk. We can implement the optimal allocation by
setting the present value of the tax on asset holdings (relative to the market value of assets) equal
to the externality, Tt /qt = ⌘t .3 Intuitively, this reduces the market price of capital, internalizing the
externality.
Expression (1) allows us to measure the externality using market data without having to specify
many structural features of the model. The model also provides a simple endogenous formula for
the excess return ↵t in terms of intermediaries’ leverage and idiosyncratic risk, which may be easier
3
The optimal policy will in general require a time-varying tax rate, but it can be implemented by continuously
adjusting the tax rate to target the present value Tt .

3

to measure and allows us to understand how the externality is aﬀected by aggregate shocks. As we
would expect, the equilibrium excess return ↵t is large when intermediaries’ idiosyncratic risk and
leverage are high, or when financial constraints are tight, e.g., during financial crises.
I build a time series for the model-predicted excess return ↵t and the externality ⌘t using
CRSP/Compustat data. Figure 1 shows the resulting time series for the baseline calibration. The
average externality is 1.36%, and it can go up to 4.39% during downturns when the excess return
on assets ↵t is large. To put this in context, a 1.36% reduction in the marginal cost of capital corresponds to a reduction in the investment share of GDP of roughly 1.36 percentage points (e.g. from
20% to 18.64% of GDP). The model also yields an average excess return on equity (leveraget ⇥ ↵t )

for financial intermediaries of 4.26%, which also spikes during downturns – up to 13.88% at the peak
of the financial crisis.4
An important practical question for regulators is how diﬀerent intermediaries and diﬀerent asset
classes should be treated (e.g. how should we risk-weight diﬀerent assets?). To address this issue, I
extend the baseline model to incorporate heterogenous intermediaries and asset classes. The optimal
allocation can still be implemented with taxes on asset holdings. Each asset class has its own tax,
but we do not discriminate between intermediaries. The suﬃcient statistic (1) is true for each asset
class, and tells us how each class should be treated. Regulators should not be directly concerned
with the risk of each asset class, or even their systemic risk. Rather, for each asset class j, the
average excess return ↵j,t contains all the relevant information (along with the elasticity ✏j ), and
reflects both the asset class’ risk and the place it occupies on intermediaries’ balance sheets.
Finally, it is worth contrasting the tax on assets with capital requirements, which are a common
component of financial regulation policy in practice. The tax makes assets less attractive, but doesn’t
aﬀect the debt/equity margin. Intermediaries have private reasons for preferring a certain debt and
equity mix, related to insiders’ incentives, and the planner doesn’t need to interfere. In contrast,
capital requirements penalize the use of debt, so they unnecessarily interfere in this margin. To the
extent that distorting the debt/equity margin is costly for intermediaries, capital requirements also
act as a tax on assets, but only indirectly. As a result, while capital requirements could be used
in a welfare improving way by a social planner, they are not the optimal policy instrument in this
environment.5
I use a continuous-time setup with Epstein-Zin preferences and arbitrary aggregate shocks that
allows me to connect results with asset pricing literature. A methodological contribution of the
paper consists of characterizing optimal dynamic contracts in this environment with recursive EZ
preferences and arbitrary prices or exogenous shocks. The competitive equilibrium and the social
planner’s allocation can be characterized with a system of PDEs. I illustrate all the theoretical
results with a fully solved numerical example. I show the procedure in the Online Appendix.
4

This is the gross alpha on equity, before fees. In the model outside investors don’t get any excess return.
Capital requirements may be justified if government bailouts create incentives for banks to take too much risk
(Chari and Kehoe (2013)). In this environment there is no reason for bailouts, however.
5

4

1.1

Literature review

I use an environment similar to Brunnermeier and Sannikov (2014), Di Tella (2013), He and Krishnamurthy (2012), and He and Krishnamurthy (2013), where financial intermediaries trade capital on
behalf of households but must retain an equity stake for incentive reasons.6 Whereas these papers’
main contribution is a positive explanation of financial crises, the main contribution of this paper
is the characterization of the optimal regulation policy in this environment. In order to understand
the eﬃciency of the competitive equilibrium and the scope for financial regulation, it is important
that we don’t impose any ad-hoc constraints on the contract space. In contrast to this literature, I
allow private agents to write complete, long-term contracts with full commitment. While technically
more involved, long-term contracts play an important role in the welfare and policy analysis. In
contrast, most of these papers feature incomplete short-term contracts, where intermediaries are not
allowed to share aggregate risk. A planner can therefore improve the competitive allocation by either
completing the market, or by redistributing wealth through asset prices. However, financial markets
provide ample opportunities for financial intermediaries to hedge aggregate risk. Di Tella (2013)
does allow contingent contracts and shows that the competitive equilibrium may nonetheless feature
a financial amplification channel. The mechanism behind the financial amplification channel here is
a generalized version of the mechanism in that paper. However, Di Tella (2013) still looks only at
short-term contracts, and this turns out to be crucial for the purpose of financial regulation, which
is the focus of this paper. Private short-term contracts do not internalize that giving intermediaries
more wealth can relax the risk sharing problem, so a planner that can only regulate intermediaries’
exposure to aggregate risk can improve the competitive allocation, even though private agents are
free to share aggregate risk. Long-term contracts eliminate this source of ineﬃciency. In addition,
as it turns out, optimal long-term contracts are renegotiation-proof.
The ultimate source of ineﬃciency in this environment is that financial intermediaries’ activity
in capital markets cannot be easily monitored. It is well known that hidden trade has the potential
to introduce ineﬃciency into a competitive equilibrium, as in Farhi et al. (2009) or Kehoe and
Levine (1993), because a social planner may be able to indirectly aﬀect the equilibrium price in the
hidden market and relax the incentive constraints.7 The contribution of this paper is to characterize
the resulting externality and optimal policy in a widely used and policy-relevant class of models of
financial crises.
A diﬀerent strand of the literature emphasizes incomplete markets as a source of ineﬃciency (see
Hart (1975), Geanakoplos and Polemarchakis (1986), Stiglitz (1982), Geanakoplos et al. (1990)). In
Lorenzoni (2008) and Korinek (2012), more productive agents are unable to obtain enough insurance
6

More generally, this paper fits into the literature on financial amplification channel going back to Kiyotaki and
Moore (1997) and Bernanke et al. (1999).
7
It is worth clarifying the role of decentralized contracts: if all agents in the economy could get together and write
one large contract, we would obtain eﬃciency – this is in fact the planner’s problem. The competitive equilibrium is
ineﬃcient in the sense that the planner’s allocation cannot be decentralized with a competitive market without any
policy intervention.

5

against downturns, so the marginal rates of substitution don’t equalize. Raising the equilibrium
price of assets that more productive agents hold is a way of transferring resources to them. He and
Kondor (2014) and Davila et al. (2012) also feature this source of ineﬃciency. Here I assume complete
contracts/markets, so this source of ineﬃciency is absent. In this line, Rampini and Viswanathan
(2010) study an economy with borrowing constraints derived from a limited commitment problem,
but allow complete financial markets. Credit constrained firms may decide to forgo insurance against
aggregate shocks in order to obtain more funds to invest up front. Since financial markets are
complete, however, this aggregate risk sharing is eﬃcient. Alvarez and Jermann (2000) derive
borrowing constraints from a limited commitment problem. Since there is no restriction on contracts,
and no hidden trade, the competitive equilibrium is eﬃcient.
Ineﬃciency can also arise when financial frictions have prices in them, since private agents may
not internalize how their actions aﬀect those constraints through prices, such as in Bianchi (2011) and
Bianchi and Mendoza (2011), and Gersbach and Rochet (2012). Farhi and Werning (2013) instead
look at economies with nominal rigidities, where prices are fixed but Keynesian aggregate demand
eﬀects create a scope for regulation. In most of this literature the planner’s policy instruments
are restricted. In contrast, here I characterize the best allocation that can be achieved by a social
planner facing the same informational frictions. This allows me to use the model to guide the choice
of policy instrument. In general, when the ineﬃciency is caused by a price, ideally we would want
to use an instrument that aﬀects the price and as few other things as possible, to the extent such
an instrument is available.
The contractual setting is related to the partial equilibrium settings in Sannikov (2008), DeMarzo
and Sannikov (2006), He (2011), DeMarzo et al. (2012), and Biais et al. (2007). In particular, I use
the same contractual setting as in Di Tella and Sannikov (2014) who characterize optimal contracts in
a stationary environment where agents have access to hidden savings. A methodological contribution
of this paper consists of characterizing optimal dynamic contracts in this environment with recursive
EZ preferences and arbitrary prices or exogenous shocks. I rule out hidden savings, but the impact
of hidden savings on the optimal financial regulation policy seems like a fruitful avenue for future
research.

2

The model

I build on the models of financial crises in Brunnermeier and Sannikov (2014), Di Tella (2013), He
and Krishnamurthy (2012), and He and Krishnamurthy (2013). The main diﬀerence is that I allow
agents to write fully contingent long-term contracts, and I consider arbitrary aggregate shocks that
can aﬀect any feature of the environment.

6

2.1

Setting

Technology. The economy is populated by a continuum of households and financial intermediaries,
identical in every respect except that intermediaries can trade capital on behalf of households. There
are two goods, consumption and capital. Denote by kt the aggregate “eﬃciency units” of capital in
the economy, and by ki,t the individual holdings of intermediary i, where t 2 [0, 1) is time. Capital

can be costlessly reallocated between intermediaries, so ki,t will be a choice variable. However,
capital is exposed to both aggregate and intermediary-specific idiosyncratic risk. If an intermediary
holds ki,t units of capital, he gets a “capital quality” shock8
d

i,t

=

t ki,t dZt

+ ⌫t ki,t dWi,t

where Z is an aggregate d-dimensional brownian motion, and Wi is an idiosyncratic brownian motion
for each intermediary i.9 Here Z represents an aggregate TFP shock, and Wi the outcome of
intermediary i’s idiosyncratic activity.10
Capital produces a flow of consumption goods akt . In addition, competitive investment firms use
capital to produce a flow of new capital gt kt at a cost ◆t (gt )kt in consumption goods, where ◆0t
and

◆00t

motion

0

0. As a result of investment and shocks, the aggregate capital stock k follows the law of
dkt
= gt dt +
kt

t dZt

where the idiosyncratic shocks Wi have been aggregated away.
We can let several features of the environment, such as

t,

⌫t , ◆t (.), or

t

introduced below,

depend on the history of aggregate shocks Z. To this end introduce an exogenous aggregate state
of the economy Yt 2 Rn , with law of motion
dYt = µY (Yt )dt +

Y (Yt )dZt

We can later specify how this aggregate state aﬀects the economy, e.g. ⌫t = ⌫(Yt ) for uncertainty
shocks, or ◆t (g) = ◆(g; Yt ) for shocks to investment technology. Notice that Y is driven by the same
Z we called a TFP shock above, but this is wlog because Z and Y can be multidimensional. TFP
shocks to k may or may not be correlated with shocks to other features of the environment.
8

In other words, while ki,t is´ a choice variable, the cumulative change in the capital stock for which intermediary
t
i is responsible up to time t is 0 d i,t .
9
Z and {Wi }i2I are all mutually independent and admit an exact law of large numbers. See Sun (2006) for details.
10
For example, if two intermediaries invest $1 they will obtain diﬀerent returns depending on their precise investment
strategies.

7

Preferences.

Both intermediaries and households have Epstein-Zin preferences with the same

discount factor ⇢, risk aversion , and elasticity of intertemporal substitution
Ut = Et

ˆ

1

:
(2)

f (cu , Uu )du

t

where the EZ aggregator takes the form
8
<
1
c1 1/
f (c, U ) =
1 1/ : [(1
)U ]

1/

⇢(1

)U

1

I will focus on the case where relative risk aversion is larger than log:
intertemporal substitution is larger than two:
Markets and investment.

>

9
=
;

> 1, and elasticity of

2.11,12

There is a complete financial market with risk-free rate r and price ⇡

for aggregate risk Z. Idiosyncratic risks Wi are tradable but have zero price in the financial market
since they can be aggregated away. Let Q be the equivalent martingale measure associated with r
and ⇡.
There is a competitive market for capital with price q > 0 with law of motion
dqt
= µq,t dt +
qt

q,t dZt

Investment firms rent capital from intermediaries to produce new capital. Their profit maximization
yields Tobin’s Q
◆0t (gt ) = qt
and a rental price for capital rtk = qt gt

◆t (gt ).13

Prices q, r, ⇡ depend on the history of aggregate shocks Z and are determined in equilibrium.
Tax on asset holdings.

I will later show that the planner’s optimal allocation can be imple-

mented with a tax on assets, so it is useful to introduce it at this point. An intermediary who holds
capital worth qt ki,t must pay a tax flow ⌧tk qt ki,t , where ⌧ k may depend on the history of aggregate
shocks Z. As a result the government raises a flow ⌧tk qt kt , which can be distributed back to agents
11

It is natural to focus on the case with elasticity of intertemporal substitution greater than 1, especially when
studying economies with stochastic volatility. The further restriction to EIS > 2 is required to ensure the existence
of the competitive equilibrium. See the discussion below on hidden savings. The empirical literature on the EIS is
mixed. Several authors find an EIS less than 1 (Hall (1988), Vissing-Jorgensen (2002)) while others an EIS of 1.5, 2,
or even larger (Campbell and Beeler (2009), Bansal et al. (2014), Gruber (2013), Mulligan (2002)).
12
For applications it might be useful to introduce retirement among intermediaries, which arrives with Poisson
intensity ✓, in order to obtain a stationary distribution. I allow for this in the Online Appendix. For simplicity we
can focus on ✓ = 0.
13
Investment firms choose k and g to maximize profits, maxg,k qt g ◆t (g) rtk k. Constant returns to scale imply
zero profits in equilibrium, so it doesn’t matter who owns them.

8

via lump-sum transfers. The present value of transfers is Tt kt
1
Tt = E Q
kt t

ˆ

1

´u

e

t

t

rm dm k
⌧u qu ku du

(3)

These transfers are part of private agents’ aggregate wealth (qt + Tt )kt . In the unregulated economy,
we simply take ⌧ k = 0 and therefore T = 0. It should be stressed that I am not restricting the
planner to this policy instrument, but rather finding that the optimal allocation can be implemented
this way.
Households’ problem. Households are all identical and have homothetic preferences, so we may
consider the problem faced by a representative household. It starts with some wealth w0 (derived
from its initial ownership of capital and government transfers) and chooses a stream of consumption
ch to maximize utility subject to the budget constraint
V0 = max U (ch )
ch

st :

EQ

ˆ

1

0

e

´t
0

rm dm

ch,t dt  w0

This is equivalent to choosing ch and the exposure of wealth to aggregate risk

w

to maximize utility

subject to a dynamic budget constraint
dwt
= (rt +
wt
and a solvency constraint wt

w,t ⇡t

c̃h,t )dt +

w,t dZt

0, where c̃h,t = ch,t /wt .14 Implicit in the second formulation is the

fact that since idiosyncratic risks Wi have price zero in equilibrium, it is wlog that households will
never choose to be exposed to them.
Intermediaries’ contracts. Each intermediary would like to borrow from and share risk with the
market, but he faces a moral hazard problem with hidden trade: he can secretly steal capital for a
private benefit. The contractual environment is developed in detail in the Online Appendix. In this
section I drop the i subindex to avoid clutter.
Formally, the intermediary starts with net worth n0 > 0 which he gives up in exchange for a
full commitment contract C = (c, k) that specifies his consumption stream c and the capital he will
manage k. Both can depend on the history of aggregate shocks Z and his observable return R.15
Faced with a contract C, the intermediary privately chooses a stealing plan s
h´

1
t

´u

i

0, also contingent

14

The link is wt = EQ
t

15

In principle the contract could also depend on other intermediaries’ returns, but this is never optimal.

e

t

rm dm

ch,u du and

w,t wt

9

is the loading on Z of wt thus defined.

on the history of Z and R. As a result, the observed return per dollar qt kt invested in capital is16
dRt =

⇣a

◆t (gt )
+ gt + µq,t +
qt

0
t q,t

⌘
st dt + (

⌧tk

t

+

q,t )dZt

+ ⌫t dWt

The principal doesn’t observe the stealing s, so he doesn’t know if bad returns R are due to stealing
or just bad luck W .
The intermediary keeps a fraction

t

2 (0, 1) of the stolen funds

t qt k t s t ,

which can also depend

on the history of aggregate shocks Z. He adds them to his consumption (he doesn’t have access to
hidden savings) so his utility is U (c + qks). Hidden trade is playing a crucial role here, allowing the
intermediary to transform stolen capital into consumption goods through markets.17 Buying and
selling capital assets is essential for what intermediaries do, so it’s diﬃcult to monitor their activity.
Stealing can represent a variety of misbehavior. For example, an intermediary can undersell assets,
hurting the principal and benefiting a third party who then shares the spoils (this is the essence of
“late trading”). In Section 2.3 I provide concrete examples of the type of intermediary misbehavior
that stealing is meant to capture.
In this environment it is always optimal to implement no stealing in equilibrium, s = 0.18 A
contract C = (c, k) is incentive compatible if
(4)

0 2 arg max U (c + qks)
s

Let IC be the set of incentive compatible contracts. An incentive compatible contract is optimal if
it minimizes the cost of delivering utility to the agent:
J0 (u0 ) = min E

Q

(c,k)2IC

ˆ

1

´t

e

0

0

s.t. U (c)
where ↵t ⌘

a ◆t (gt )
qt

+ gt + µq,t +

return on capital (determined in

0
t q,t

⌧tk

rt

equilibrium).19

(

rm dm

(ct

qt kt ↵t ) dt

u0
t

+

q,t )⇡t

is the risk-adjusted expected excess

We pin down the initial utility with a break even

condition. An intermediary with net worth n0 can buy a contract with cost J0 (u0 ) = n0 , and get
utility u0 . At any point in time t, denote by Jt the continuation cost of the contract.
Implementation with an equity constraint. The optimal contract can by implemented as
a constrained portfolio problem with nt = Jt as the intermediary’s net worth. The intermediary
16

Notice the total dividend flow from holding capital is the output a plus the rent rtk = qt gt ◆t (gt ).
If the intermediary didn’t have access to hidden trade, stealing capital wouldn’t give him any private benefit, and
there wouldn’t be a moral hazard problem.
18
The standard argument applies: if the agent is stealing in equilibrium it’s better to just give him what he steals
and have him not steal instead. See DeMarzo and Sannikov (2006) or DeMarzo and Fishman (2007) for example.
19
In the context of investment funds, this is the “gross alpha” on assets. Here in equilibrium intermediaries appropriate all the excess returns, so outside investors only get the market rate of return (zero “net alpha” on equity). See
Berk and Green (2004). Other financial institutions also have an implicit “alpha”.
17

10

raises outside equity et and debt dt to invest in capital: qt kt = nt + et + dt . He must keep at least a
t
fraction ˜t = ntn+e
of the total equity for incentive reasons (i.e. “skin in the game”), and the contract
t
specifies his compensation c̃t = ct /nt , but he is free to choose how much to invest in capital k and the
exposure to aggregate risk

n,t .

Since he wants to minimize his exposure to idiosyncratic risk, and

he can get aggregate risk in other ways, the retained equity constraint is always binding. Debt yields
the risk-free rate r and outside equity yields a return r +

n,t ⇡t

and volatility

n,t dZt

kt
+ nqtt+e
⌫t dWt .
t

As a result the intermediary’s net worth follows the dynamic budget constraint
dnt = (rt nt + qt kt ↵t
The intermediary chooses k and

n

ct +

n,t nt ⇡t )dt

+

n,t nt dZt

+ ˜t qt kt ⌫t dWt

to maximize U (c̃n) subject to (5) and nt

(5)
0. Lemma 3 in

Section 1.4 of the Online Appendix formalizes implementation and shows this scheme implements
the optimal contract.

2.2

Competitive Equilibrium

Take as given the initial capital stock k0 and the initial distribution of wealth for intermediaries
´
{✓i > 0}i2I , such that I ✓i di < 1 (the rest belongs to the representative household).
Definition. A competitive equilibrium is a set of aggregate processes: price of capital q, value of
transfers T , risk-free interest rate r, price of aggregate risk ⇡, growth rate g, and the aggregate
capital stock k; a contract Ci = (ci , ki ) for each intermediary; and a consumption stream ch for the
representative household, such that

i. The representative household’s consumption and intermediaries’ contracts are optimal, with
´
initial wealth ni,0 = ✓i (q0 + T0 )k0 and w0 = (q0 + T0 )k0 (1
I ✓i di)
ii. Investment is optimal ◆0t (gt ) = qt
iii. The value of transfers T satisfies (3)
iv. Market clearing

ˆ

I

ci,t di + ch,t = (a
ˆ

I

◆t (gt ))kt

ki,t di = kt

v. Aggregate capital satisfies the law of motion
dkt
= gt dt +
kt

11

t dZt

2.3

Discussion of assumptions

Financial intermediaries should be interpreted as the insiders who run financial institutions that
invest capital on behalf of households, and who must retain an equity stake for incentive reasons.
They could represent diﬀerent types of financial intermediaries such as hedge funds, PE or VC
funds, broker/dealers. Commercial banks are sui generis. To the extent that they are involved in
extending credit (mortgages, business loans, etc.), they fit into the framework in this paper. However,
commercial banks are also in the business of providing liquidity and enjoy deposit insurance or
implicit bailouts. This is not included in the model and might require specific regulation (Chari and
Kehoe (2013)). As is common in the literature, in the model intermediaries hold physical capital,
while in reality they hold financial claims on firms and households that actually hold capital. The
focus here is on the relationship between these intermediaries and their outside investors, so I
abstract from the relationship between intermediaries and final users of capital. In the baseline
model I consider only a single type of financial intermediary and homogenous capital, but a central
concern for regulators is how to treat diﬀerent types of financial institutions and diﬀerent asset
classes. In Section 6 I extend the framework to address these issues.
Equity stakes for insiders are a common financial arrangement designed to align insiders’ incentives with outside investors’. He and Krishnamurthy (2013) report an average equity ownership of
oﬃcers and directors in the finance, insurance, and real estate sectors of 17.4%. Hedge funds, PE and
VC typically charge a management fee of 2% on assets under management (AUM), plus a “carried
interest” of 20% of capital gains (above a watermark or hurdle rate).20 Mutual fund directors and
managers usually have their own wealth invested in the fund or bonuses that depend on the fund
performance (Chen et al. (2008) and Ma et al. (2015)).
The private diversion of funds can represent several forms of misbehavior. Churning, frontrunning, market timing, late trading, and bid-ask spread manipulation are important concerns for
mutual and hedge funds. PE and VC funds may overpay or undersell firms, and they also charge
large and obscure portfolio-company fees. They all involve benefiting some privileged investors,
insiders, or third parties at the cost of investors, usually by letting them trade at stale prices or with
inside information, in exchange for a quid pro quo (for example, fee-generating “sticky assets”).21
20

Notice even the 2% already embodies an equity stake, because good returns increase AUM and therefore fees. The
20% is designed to provide strong incentives. Ackermann et al. (1999) finds that this does indeed improve performance,
raising the Sharpe ratio by 0.15.
21
The 2003 mutual fund scandal is a salient example. BoA’s Nations Fund allegedly allowed late trading by
privileged investors. Mutual funds shares are priced at 4pm, but these privileged investors were allowed to buy after
4pm at those stale prices. This allowed them to buy fund shares when the value of the assets was higher than the
price, hurting the other investors. They then shared the spoils with the mutual fund management by depositing
“sticky assets” in fee-generating funds from the same family. See Zitzewitz (2003) for a more detailed explanation of
late trading and an empirical analysis of its relevance.
The same scandal involved accusations of front-running (allowing privileged clients or partners to benefit from the
price impact of large movements in the fund portfolio) that led to the resignation of the chairman of Strong Mutual
Funds. Fund families may also favor some funds at the expense of others; see Gaspar et al. (2006). Lack (2012)
describes how hedge funds may manipulate the bid-ask spread.
Portfolio-company fees account for transactions, advisory and monitoring, consulting, etc. They are levied directly
on the acquired firms, so the fund investors never see them. They only notice lower returns on their investment. In

12

Hidden trade is essential in all these examples. Since financial intermediaries’ job is to buy
and sell capital assets, it is diﬃcult to determine if they are doing the right trades or at the right
prices.22 In the model intermediaries steal capital and trade it for consumption goods. If they
couldn’t trade capital there wouldn’t be a moral hazard problem (they don’t value capital by itself,
only consumption). Contrast this with a factory worker who may also use or manage very valuable
capital, like a forklift. He too may have a moral hazard problem that may impact the value of
the capital. But since their job does not involve buying and selling capital, there is no hidden
trade problem. Note that while intermediaries ability to trade capital for consumption goods is very
important, the presence of spot markets vs. futures markets is not. Everything in this model fits
into an Arrow-Debreu intertemporal framework.
I allow agents to write complete, long-term contracts. It is important that we don’t impose
any ad-hoc constraints on private contracts in order to understand the eﬃciency properties of the
competitive equilibrium. In particular, contracts can be made contingent on all observable variables, including all aggregate shocks. This is also realistic – in practice financial markets provide
ample opportunities for intermediaries to hedge aggregate risk. Long term contracts make sense
when thinking of contracts between financial institutions and their insiders. In addition, they provide a clean contractual environment which makes comparisons with the social planner’s allocation
straightforward. As it turns out, optimal long-term contracts are renegotiation-proof, and the distinction between short- and long-term contracts is important for the eﬃciency of the competitive
equilibrium.
Finally, an intermediary’s idiosyncratic risk Wi represents the risk associated with their specific
investment activity. For example, if two hedge funds invest a dollar in stocks, they will obtain
diﬀerent returns depending on their specific trading strategy. The idiosyncratic risk Wi,t is not the
risk in each of the assets they buy, since they may diversify or hedge, but rather the idiosyncratic
risk in their overall investment strategy which reflects their skill, information, or luck. Likewise, PE
or VC funds must pick some firms/startups to invest in based on their business analysis or private
information, and are therefore exposed to idiosyncratic risk. Commercial banks that issue mortgages
and business loans are very diversified with respect to the risk of each of those loans. But they are
exposed to idiosyncratic risk that reflects their business strategy: e.g. some banks may have a large
exposure to the Miami real estate market, others to the auto industry, or they may diﬀer in their
securitization strategies, etc., so that two banks will generally get diﬀerent returns.
addition, PE and VC funds have incentives to postpone shutting down worthless investments to continue collecting
management fees. See Ang (2014), pages 610-612 and Phalippou (2009).
22
It may seem surprising then that in the model k is contractible. While the contract knows that the intermediary
has assets worth qt kt , it can’t tell exactly what trades the intermediary is doing, or if these trades are the right ones.
In addition, as it turns out, under the optimal contract the intermediary has no incentives to deviate on the k margin,
so there is no need to actually monitor him there (see Lemma 3 in the Online Appendix).

13

3
3.1

Solving the competitive equilibrium
Recursive formulation
Intermediaries’ optimal contracts are recursive in their continuation utility

Optimal contracts.

Ui,t . Drop the i subscript to simplify notation. We can use Lemma 1 in the Online Appendix to
write the law of motion of an intermediary’s continuation utility
dUt =

f (ct , Ut )dt +

U,t dZt

(6)

+ ˜U,t dWt

This can be interpreted as a promise keeping constraint. If the intermediary has been promised utility
U , this must be delivered by consumption c, either today or in the future. His continuation utility
can be exposed to both aggregate risk Z and idiosyncratic risk W . Exposing the intermediary to
idiosyncratic risk W is costly because he is risk averse and the market doesn’t price idiosyncratic risk
(the first best has full insurance against idiosyncratic risk), but it is necessary for incentive reasons.
If the intermediary steals, he adds qks to his consumption, but bad returns are more likely to be
observed, conditional on the observable aggregate shock. To deter him from stealing, the optimal
contract must give him lower continuation utility after bad outcomes are observed. Lemma 2 in the
Online Appendix shows that, for the parameter values

> 1 and

incentive compatible if and only if
0 2 arg max f (ct +
s 0

t qt kt s, Ut )

˜U,t

s
⌫t

> 1, the contract C = (c, k) is

f (ct , Ut )

Taking FOC we obtain
˜U,t

ct

@c f (ct , Ut ) t qt kt ⌫t =
((1

1/

)Ut )

1/

t qt k t ⌫ t

0

(7)

1

The IC constraint will be binding in the optimal contract. We can also verify that if contract
C = (c, k) is incentive compatible, so is a scaled up version of it C 0 = (c, k). In consequence, the
cost function of the optimal contract takes the form
Jt = ⇠t (1

)Ut

1
1

(8)

Thanks to homothetic preferences, the optimal contract is linear in the utility of the intermediary
measured in consumption units xt = ((1

)Ut ) 1

1

(up to a constant). The endogenous process ⇠

captures the stochastic investment opportunities facing the intermediary, and tells us what is the
cost of delivering utility x to him. It depends only on the history of aggregate shocks Z and follows
the law of motion

d⇠t
= µ⇠,t dt +
⇠t

14

⇠,t dZt

(9)

which must be determined in equilibrium. The HJB equation associated with the optimal contract
is
qt k↵t )dt + EQ
t [dJt ]

rt Jt dt = min (c
c,k,

U

(10)

We can use Ito’s lemma together with (6) and (9) to expand the last term. Since expectations
´t
are taken under the equivalent martingale measure Q, it is useful to write Zt = ZtQ
0 ⇡u du,
where Z Q is a Brownian motion under Q. We can normalize the controls ct = ĉt xt , kt = k̂t xt , and
U,t

=

x,t (1

)Ut . Intermediaries get consumption and capital proportional to their continuation

utility measured in consumption units x, i.e. they all get the same ĉ, k̂, and
then takes the following

x.

The HJB equation

form23

rt ⇠ t =

min ĉ
ĉ,k̂,

qt k̂↵t + ⇠t

x

+µ⇠,t

⇠,t ⇡t

+

⇢

1
2

1
1

1
2
x

+

ĉ1

⇢

1 ⇣
ĉ
2

1/

1/

(11)

x ⇡t

t qt k̂⌫t

⌘2

+

⇠,t x

It is easy to see from (10) that the intermediary’s net worth nt = Jt = ⇠t xt follows the law of motion
(5). In fact, Lemma 3 in the Online Appendix shows that the optimal contract can be implemented
with a constrained portfolio problem. The intermediary must retain an equity stake nt = ˜t ,
nt +et

and his compensation out of his net worth is specified by c̃t = ct /nt . Both depend on the history of
returns R and aggregate shocks Z. The intermediary is free to choose how much to invest in capital
k and his exposure to aggregate shocks n . The retained equity stake ˜t is given by
˜t = ⇠t ĉ
t

1/

t

1 1/

= ⇠t

(

ct
)
nt

1/

t

(12)

The intermediary’s equity stake provides incentives to deter misbehavior, but forces him to keep a
fraction ˜t of the idiosyncratic risk from his capital. Note that with long-term contracts the principal
can relax the equity constraint, ˜t <

t,

and improve the idiosyncratic risk sharing problem by front

loading the agent’s consumption. A large ĉt reduces the private benefit of stealing, as shown in the
IC constraint (7). This allows private contracts some flexibility on the equity constraint, and is also
the reason why the intermediary cannot be allowed to choose his compensation on his own.24
Finally, notice that the optimal contract is renegotiation-proof. After any history, the continuation contract is the cheapest way of delivering the promised utility to the intermediary. If there was a
cheaper incentive compatible contract that delivered at least as much utility, we could scale it down
to deliver the same utility, at an even lower cost. And because it delivers the same utility, it would
23
Existence of the optimal contract requires > 2. This is related to the assumption of no hidden savings. Once
we assume this, the objective function in the HJB is convex, and the FOC are suﬃcient for optimality. The Online
Appendix provides a verification theorem.
24
In the setting with short-term contracts in Di Tella (2013), we get the same characterization with ˜t = t because
contracts cannot front-load the intermediary’s consumption. If we further assume that aggregate risk cannot be
traded, we get the contractual setting in Brunnermeier and Sannikov (2014) or He and Krishnamurthy (2012), where
n,t nt = qt kt t ( t + q,t ).

15

not aﬀect incentives. Lemma 4 in the Online Appendix formalizes this result. The counterpart of
this result is that the planner’s allocation will also be renegotiation proof, as we’ll see in Section 4.
Households’ problem. Households have a value function
(⇣t wt )1
1

Vt (wt ) =

where ⇣ captures their endogenously stochastic investment possibilities. It depends only on the
history of aggregate shocks Z with law of motion
d⇣t
= µ⇣,t dt +
⇣t

(13)

⇣,t dZt

which we must find in equilibrium. Analogously to intermediaries, we can interpret ⇣
of delivering utility ht = ((1

)Vt ) 1

1

1

as the cost

measured in consumption units to households.

After some algebra, the associated HJB equation for ⇣ is
⇢
1 1/

1 1/

c̃
1/
= max h
⇣
c̃h , w 1
1/ t

Value of transfers.

1

+ rt +

w ⇡t

c̃h + µ⇣,t

2

2
⇣,t

2

2
w

+ (1

)

⇣,t w

(14)

Since T only depends on the history of aggregate shocks Z, we can write
dTt
= µT,t dt +
Tt

(15)

T,t dZt

In equilibrium T must satisfy a no-arbitrage pricing equation
qt ⌧tk
+ µT,t + gt +
Tt

0
t T,t

rt = (

T,t

+

t )⇡t

(16)

Recursive equilibrium. Since contracts are linear in xi,t , and the economy is scale invariant to
the level of capital kt , we can use
Xt =

´

I xi,t di

kt

as an endogenous aggregate state variable. Xt captures the aggregate utility promised to intermediaries (normalized by kt ), and is the same endogenous aggregate state variable that the planner’s
problem will use, which makes comparisons straightforward. Market clearing conditions can be
written:
c̃h (qt + Tt

⇠t Xt ) + ĉt Xt = a
k̂t =

1
Xt

◆t (gt )
[capital]

16

[consumption goods]

(17)
(18)

Using Ito’s lemma and the equilibrium conditions k̂t Xt = 1 and qt = ◆0t (gt ), we get a law of motion
for Xt

dXt
= µX,t dt +
Xt
µX,t

⇢
=
1 1/

1 1/

ĉt
1 1/

+

2

2
x,t
X,t

+
=

2

(ĉt

(19)

X,t dZt

1/

x,t

t

◆0t (gt )⌫t 2
)
Xt

gt

t x,t

+

2
t

t

We look for an equilibrium with state variables Xt and Yt , where equilibrium objects such as q, T ,
⇠, ⇣ are functions of (X, Y ). Recall that several features of the environment, such as ⌫t ,
or

t

t,

◆t (g),

are already functions of the exogenous state variable Yt . In addition, for this to work it must

be the case that taxes also share the same state variables, i.e. ⌧tk = ⌧ k (Xt , Yt ). This will be the
case both for the unregulated competitive equilibrium and for the implementation of the optimal
allocation. We can then use Ito’s lemma to transform equilibrium conditions into a system of second
order PDEs. The Online Appendix shows the solution method in detail.

3.2

Asset prices and financial amplification channel

Intermediaries’ FOC with respect to k̂, together with nt = ⇠t xt , and the market clearing condition
for capital gives us a pricing equation for capital
a
|

◆t (gt )
+ gt + µq,t +
qt

0
t q,t

(rt + ⌧tk )

(

+

q,t )⇡t

{z
risk-adjusted expected excess return ⌘ ↵t

}

t

=

qt k t ˜ 2
( t ⌫t )
nt
|
{z
}
id. risk premium

(20)

Although the market price of idiosyncratic risks {Wi } is zero (they can be aggregated away), capital

must pay a premium for this risk. Because of the moral hazard problem, intermediaries must be
exposed to idiosyncratic risk proportionally to the value of capital they manage, as in (7). This is
costly because intermediaries are risk averse, so they will demand a premium for holding capital.25
A large excess return ↵t implies a low price of capital, and therefore low investment and growth
through ◆0t (gt ) = qt .26
Financial conditions aﬀect the economy through equation (20). During periods of instability
with high idiosyncratic risk ⌫t , or when financial frictions are tight (high ˜t ), capital must yield a
large excess return ↵t . In addition, if after a bad aggregate shock financial losses are concentrated
on the balance sheets of intermediaries (nt falls proportionally more than qt kt ), intermediaries will
require an even larger excess return on capital ↵t . This creates a financial amplification channel
that further depresses investment and asset prices.
25
As we would expect, the premium on idiosyncratic risk vanishes if there is no moral hazard ( t = 0, which implies
˜t = 0) or no idiosyncratic risk (⌫t = 0).
26
This is the case with EIS > 1, which we focus on. With EIS<1 an income eﬀect dominates: agents feel poorer
in certainty equivalent terms, so they try to accumulate more capital, leading to high qt (the risk-free rate r falls to
satisfy (20)). In the special case with EIS=1, the price of capital is constant to clear the consumption goods market.

17

But why would financial losses be concentrated on the balance sheets of intermediaries? Since
agents are perfectly free to share aggregate risk, the market equalizes the ratio of marginal utility of
wealth between intermediaries and households, i.e. the volatility of

⇠t
⇣t1

1

nt
wt

is zero. To understand

what this implies about how financial gains or losses are shared between households and intermediaries, consider the marginal rate of substitution between intermediaries’ and households’ utilities
(measured in consumption units)
⇤t = ⇠t ⇣t
with endogenous law of motion

d⇤t
⇤t

= µ⇤,t dt +

⇤,t dZt .

If we increase an intermediary’s utility by

x, the cost of his contract increases by ⇠t x. With this money a household could obtain utility
ht = ⇠t ⇣t x. The MRS ⇤t is therefore the cost of intermediaries’ utility in terms of foregone utility
by households, both measured in consumption units. The only diﬀerence between intermediaries and
households is that intermediaries can obtain an excess return ↵t by investing in capital and taking
on idiosyncratic risk. The cost of intermediaries’ utility ⇤t is therefore low when they expect large
excess returns on capital ↵t looking forward.
We can now use the FOCs for

x

and

w,

as well as nt = ⇠t xt to obtain an expression for the

exposure to aggregate risk of intermediaries relative to households:
n,t

w,t

1

=

⇤,t

(21)

Here we have two opposing eﬀects. On the one hand, there is a substitution eﬀect: intermediaries
should have more net worth when the cost of intermediaries’ utility ⇤t is low in order to get more
“bang for the buck”. But there is also an income eﬀect: intermediaries need more net worth in order
to achieve any given utility level when the cost of their utility ⇤t is high. In the empirically relevant case with risk aversion

greater than one, financial losses are concentrated on intermediaries’

balance sheets after aggregate shocks that reduce the cost of providing utility to them ⇤. Essentially,
intermediaries are willing to take large financial losses up front if they expect large excess returns
↵t looking forward (so ⇤t is low). This is the same mechanism as in Di Tella (2013), but for general
aggregate shocks.
We can also think of aggregate risk sharing in terms of utility. Using nt = ⇠t xt , and wt = ⇣t 1 ht ,
we obtain
x,t

h,t

=

1
⇤,t

(22)

Utility losses are concentrated on households after aggregate shocks that reduce the cost of intermediaries’ utility ⇤t . This means that for the relevant case with

> 1, if financial losses are

disproportionally concentrated on the balance sheets of intermediaries, e.g. during a financial crisis,
it is households who suﬀer disproportionate losses in utility terms.
Of course, ↵t and ⇤t are endogenous equilibrium objects whose behavior depends on the type
of aggregate shocks hitting the economy. In Section 7 I show that uncertainty shocks that raise
idiosyncratic risk ⌫t create a financial amplification channel with financial losses concentrated on
18

the balance sheets of intermediaries.27 In general, the economy might be hit by several diﬀerent
types of aggregate shocks at the same time. Equations (21) and (22) allow us to understand why
aggregate risk may be concentrated even if there are no limits to aggregate risk sharing, and to study
the welfare and policy implications for arbitrary aggregate shocks.
Since ⇤ plays an important role in the allocation of

Understanding the MRS ⇤t better.

aggregate risk, it is worth studying in more detail. ⇤ correctly measures the marginal rate of
substitution between intermediaries’ and households’ utility (in consumption units), taking into
account that giving consumption to intermediaries helps relax the IC constraint (7). To understand
this better, look at the FOC for intermediaries’ consumption ĉ
⇠t ĉt

1/

2/

+ ⇠t ( qt k̂t ⌫t )2 ĉt
|
{z
front-loading

1

(23)

=1

}

The first term captures the standard intertemporal tradeoﬀ, while the second term captures the
fact that by front-loading the intermediary’s consumption, we can reduce the marginal utility of
consumption and therefore make stealing less attractive, as shown in the IC constraint (7). This is
1/
reflected in the expression for the intermediary’s equity stake ˜t = ⇠t ĉt
t < t . If we ignored
˜
the second term, we would get t = t . In contrast, the FOC for households’ consumption
1/

c̃h,t

1/

⇣t

1

(24)

=1

features only the standard consumption smoothing tradeoﬀ. Putting the FOC for ĉ and c̃h together,
and using ĉh,t = ct /ht (analogous to ĉt = ct /xt for intermediaries), we obtain:
1/

⇤t =

ĉh,t
ĉt

1/

⌫t 2
+ ( t ◆t (gt ) X
) ĉt
t

2/

(25)

1

The numerator is the marginal utility of households’ consumption (in consumption units), ĉh
@ch ht . The denominator captures the marginal utility for intermediaries consumption ĉ

1/

1/

=

plus

the benefit of relaxing the IC constraint. This implies that while the ratio of marginal utility of
wealth

⇠t
⇣t1

1

nt
wt

of consumption

is equalized across aggregate states, this is not true for the ratio of marginal utility
@c f (ct ,Ut )
@c f (ch,t ,Vt ) ,

as would be the case in a standard model with complete markets. This

is because incentives to distort the consumption smoothing margin to improve idiosyncratic risk
sharing depend on the aggregate state of the economy (if they were invariant to aggregate shocks,
@c f (ct ,Ut )
@c f (ch,t ,Vt )

would actually be equalized across aggregate states). This feature of long term contracts

plays an important role in the welfare analysis, since private contracts internalize the relative value
of relaxing the IC constraints across aggregate states.
27

This coincides with results in Di Tella (2013).

19

4

Planner’s Problem

In this section I characterize the best allocation that can be achieved by a social planner who faces
the same informational frictions as the market. Hidden trade creates an externality: intermediaries
don’t internalize that by demanding capital and bidding up its price, they force others to bear more
idiosyncratic risk. The socially optimal allocation can be implemented by a tax on assets.

4.1

Setting

Consider a social planner who faces the same informational frictions as private agents in the market.
He can a) control households’ consumption; b) give consumption and capital to intermediaries to
manage, but they can secretly divert it; c) give capital and consumption goods to investment firms
and order them to deliver a flow of new capital. As in the competitive equilibrium, intermediaries
and firms have access to hidden trade in capital.28 An intermediary with a flow of stolen capital
ki,t si,t can sell it to a firm at a competitive black market price q̃t . The firm will produce less new
capital and present the stolen capital to the planner, so that the hidden trade is not detected.
To formalize this, consider an investment firm that receives an order to use kt units of capital
and ◆t (gt )kt consumption goods to deliver a flow of new capital gt kt . It can instead buy a flow of
stolen capital kt s and do actual investment kt ◆t (g̃) in order to maximize its surplus consumption
(that it rebates to its owners)
max ◆t (gt )kt

◆t (g̃t )kt

s,g̃

st :

q̃t skt

(g̃ + s) kt = gt kt

Optimality implies q̃t = ◆0t (g̃), so to implement investment rate gt and no stealing in equilibrium,
st = 0, the black market price of capital must be
q̃t = ◆0t (gt )

(26)

Notice this is precisely the equilibrium price of capital in the competitive equilibrium, which is
consistent with this environment.
A plan P = (ch , g, k, {ci , ki }i2[0,1] ) is a consumption stream for the representative household ch

and a growth rate g and aggregate capital k, which can depend on the history of aggregate shocks Z;
and consumption and capital (ci , ki ) for each intermediary i, which can depend also on his history
of idiosyncratic outcomes. Faced with a feasible plan P, each intermediary chooses a stealing plan

si and gets consumption c̃i = ci + q̃ki si . As in the private problem, it is optimal to implement no
stealing always, si = 0. A plan P is feasible if it satisfies the aggregate consistency conditions
ch,t +
28

ˆ

I

ci,t di = (a

See Farhi et al. (2009) or Kehoe and Levine (1993).

20

◆t (gt ))kt

(27)

ˆ

I

(28)

ki,t = kt

and aggregate capital follows the law of motion
dkt = gt kt dt +

(29)

t kt dZt

A feasible plan is incentive compatible if choosing si = 0 is optimal for every intermediary:
0 2 arg max U (ci + ◆0 (g)ki s)

(30)

s

This IC constraint is the same as the IC in private contracts (4), except that the planner internalizes
that by controlling g he can relax the moral hazard problem. This is the source of ineﬃciency in
this model. Let ICP be the set of incentive compatible plans. Given initial utility levels for each
intermediary {u0i }i2[0,1] , an incentive compatible plan P is optimal if it maximizes households’ utility
subject to delivering utility u0i to each intermediary:

max U (ch )

P2ICP

Ui (ci ) = u0i

st :

4.2

A recursive formulation of the planner’s problem

Just as in the competitive equilibrium, we look for an optimal mechanism that is recursive in the
continuation utility of intermediaries {Ui }i2I and the aggregate state variables. Each intermediary’s
utility still follows the law of motion given by (6), and the IC constraint is like (7) with qt replaced
by q̃t = ◆0t (gt )
1/

˜U,i,t

fc (ci,t , Ui,t )

0
t ◆t (gt )ki,t ⌫t

ci,t

=
((1

)Ui,t )

1/

0
t ◆t (gt )ki,t ⌫t

(31)

0

1

and it will be binding in the optimal allocation.
Introduce xi,t = ((1
and

U,i,t

=

x,i,t (1

Ui,t ) 1

1

as in the private contract, with ci,t = ĉi,t xi,t and ki,t = k̂i,t xi,t ,

)Ui,t . We can verify that, just as in the private contract, the planner will

choose the same ĉi,t = ĉt , k̂i,t = k̂t , and

x,i,t

=

x,t

for all intermediaries. The planner’s problem
´

must be recursive in the same endogenous state variable as the competitive equilibrium Xt =

I

xi,t di
kt

which captures the aggregate continuation utility of intermediaries, and the exogenous state variable
Y . From the consistency conditions (27) and (28) we obtain ch,t = (a ◆t (gt ) ĉt Xt )kt and k̃t = Xt 1 .
Thanks to homothetic preferences and the linear technology, the planner’s value at time t then takes
the following power form

(St kt )1
1
21

for some process St which depends only on the history of aggregate shocks Z. St captures the planner’s value (households’ utility) in consumption units, normalized by capital: St =
It is analogous to intermediaries’ continuation utilityXt =

´

I

xi,t di
.
kt

((1

)Vt ) 1
kt

1

=

ht
kt .

Likewise, define ĉh,t = ch,t /ht ,

analogous to ĉt = ct /xt for intermediaries. We look for a value function S and the policy functions
ĉ, g, and

x,

all functions of (X, Y ), and the law of motion of X is given by (19). The HJB equation

associated to the planner’s problem is
⇢
1 1/
where µS and

= max
g,ĉ,

S

(a

x

◆(g) ĉX)1
1 1/

1/

S 1/

1

+ µS + g

2

2
S

2

2

+ (1

)

S

(32)

are obtained from Ito’s lemma on S(X, Y ). The planner’s problem boils down to

solving a second order PDE for S(X, Y ). The Online Appendix describes the procedure in detail.
The planner’s allocation is renegotiation-proof. The only way of delivering more utility to intermediaries is to reduce the utility of the household, conditional on the exogenous aggregate state Y . In
0 (X, Y ) < 0 for all (X, Y ). Intuitively, the planner can always reduce intermediaries’
other words, SX

consumption and increase households’. This gives more utility to households (the planner’s objective
0 (X, Y ) > 0 the planner
function), and increases intermediaries’ promised utility X (see (19)). If SX

would benefit from this deviation.29 This is the planner’s counterpart of the renegotiation-proofness
of private contracts.

4.3

Externality

Hidden trade creates an externality in the competitive equilibrium. Because intermediaries cannot
be prevented from trading capital, the private benefit of stealing depends on the value of capital,
qt = ◆0t (gt ). The social planner is willing to give up investment/growth gt in order to reduce the
private benefit of stealing and therefore relax the constraints on idiosyncratic risk sharing. This is
reflected in the FOC for g:
1/

ĉh,t ◆0t (gt ) (1 + ⌘t ) = St + ⇤t Xt
| {z }
| {z }

@ch (Sk)

with

⌘t =
Here ⇤ =

(33)

@k (Sk)

⇤t Xt
1/
ĉh,t

(ĉt

1/

t

⌫t 2 00
) ◆ (g)
Xt t

(34)

SX is the MRS between intermediaries’ and households’ utility (recall in the competitive

equilibrium we had ⇤ = ⇠⇣). The rhs of (33) captures the marginal benefit of having more capital, as
we would expect. The first term on the lhs captures the marginal utility cost of reducing households’
consumption to increase investment. The second term ⌘t captures the externality. Higher investment
29

0
As we’ll see below, the FOC (37) establishes SX
=

1/

⇤=

22

ĉh,t
ĉt

1/

+

(

2/
⌫t 2
0
t ◆t (gt ) X ) ĉt
t

1

> 0.

increases the marginal cost of capital ◆0t (gt ) and therefore raises the private benefit of stealing.
The planner realizes that if he wants to raise investment, he must expose intermediaries to more
idiosyncratic risk, as in (31). Since they must be compensated for the risk, households need to
give up more consumption. As a result, the actual marginal cost of producing more capital (in
consumption units) is ◆0t (gt )(1 + ⌘t ).
Private agents in the competitive equilibrium don’t internalize this tradeoﬀ between investment
and idiosyncratic risk sharing. They don’t realize that when they demand capital and bid up its
price, they create a moral hazard problem for everyone else. We can obtain an analogous equation
for the competitive equilibrium from ◆0t (gt ) = qt , St = ⇣t (qt + Tt
1/
ĉh,t
1/

The rhs St +⇤t Xt = ĉh,t

◆0t (gt )

✓

Tt
1+
qt

◆

⇠t Xt ), and the FOC for c̃h :
(35)

= St + ⇤ t X t

(qt +Tt ) correctly measures the marginal value of capital in the competitive
1/

equilibrium allocation30 @k (Sk), and ĉht

measures the marginal utility of households’ consumption

@ch (Sk), so eﬃciency requires Tt /qt = ⌘t . Notice that if the function ◆t (gt ) was linear, the planner
wouldn’t be able to aﬀect the price of capital by distorting gt , so there would be no externality,
⌘t = 0.31
The externality captured in equation (33) is the only source of ineﬃciency. The FOC for
yields after some algebra
x,t

h,t

=

1

x

(36)

⇤,t

as in the competitive equilibrium, and from the FOC for ĉ we obtain32
1/

⇤t =

ĉh,t
ĉt

1/

⌫t 2
+ ( t ◆0t (gt ) X
) ĉt
t

2/

1

(37)

>0

which coincides with equation (25) in the competitive equilibrium. Private contracts internalize that
giving intermediaries more consumption relaxes the equity constraint and improves idiosyncratic risk
sharing. This means that the debt/equity margin is eﬃcient, and private contracts evaluate the MRS
between intermediaries’ and households’ utility ⇤ correctly. As a result, the allocation of aggregate
30

If we integrate (20) and use (3), we get
ˆ 1 ´
s
qt + T t = E Q
e t ru du (a
t

◆s (gs )

⇠s (ĉs 1/

t

s ⌫ s qs )

2

k̂s )e

´s
t

(gu

1
2

´s
2
u )du+ t

2
u dZu

Suppose we get an extra unit of capital and want to keep the whole process for g and x unchanged. The extra capital
produces consumption net of investment a ◆s (gs ). However, since intermediaries hold more capital, they must be ex1/
2
posed to more idiosyncratic risk. To keep x unchanged, we need to give them more consumption ⇠s (ĉs
s ⌫s qs ) k̂s ,
where ⇠s already takes into account that the extra consumption also helps to partially oﬀset the increase in idiosyncratic risk. What remains can be added to households’ consumption, and the discounted expectation under Q correctly
evaluates it in terms of current consumption.
31
The intuition is the same as in Kehoe and Levine (1993).
32
0
⇤t > 0 implies SX
< 0, so the planner’s optimal allocation is renegotiation proof: we can only give more utility
to households by giving less utility to intermediaries.

23

risk is eﬃcient: if we fix the process for investment in the competitive equilibrium and we allow
the planner to only modify consumption ĉ and the allocation of aggregate risk

x,

he would choose

not to. This is an important feature of the competitive equilibrium with long term contracts. In
models with incomplete aggregate risk sharing, the MRS is not equalized across aggregate states,
and the allocation of aggregate risk is ineﬃcient.33 Even with complete aggregate risk sharing,
short term contracts, such as in Di Tella (2013), don’t internalize how giving intermediaries more
wealth/consumption can improve idiosyncratic risk sharing, so they evaluate the MRS between
1/

intermediaries’ and households’ utility ⇤ as the ratio of marginal utility of consumption ĉh,t

/ĉt

1/

.

If the wedge between this and the correct MRS is correlated with aggregate shocks, the allocation
of aggregate risk is ineﬃcient and the competitive equilibrium can be improved by a planner who
only regulates the allocation of aggregate risk.34
Of course, if we compare the competitive equilibrium with the planner’s optimal allocation, we
will in general find diﬀerent MRS ⇤, simply because the allocations are diﬀerent, i.e. for the same
states (X, Y ) there is a wedge ⇤SP /⇤CE 6= 1. If this wedge is correlated with aggregate shocks, the
allocation of aggregate risk in the competitive equilibrium and planner’s allocation will be diﬀerent:
(

h)

x

CE

(

x

h)

SP

=

1

CE
⇤

SP
⇤

. We can interpret this as an ineﬃcient financial

amplification channel, e.g. intermediaries are taking too much aggregate risk in the competitive
equilibrium compared to the planner’s allocation. In Section 7 I show this is in fact the case for
uncertainty shocks that increase idiosyncratic risk ⌫t . However, the analysis in this section shows
that even in this case there is no ineﬃciency in the FOC for aggregate risk sharing. The planner
can only improve the allocation by dealing with the externality in (33), and once this is done there
is no need to further regulate intermediaries’ risk taking decisions.

4.4

Optimal policy

We can implement the optimal allocation as a competitive equilibrium with a tax on assets.35 If an
intermediary holds qt ki,t in capital, he must pay a tax flow ⌧tk qt kt to the government.36
Proposition 1. The planner’s optimal allocation P can be implemented as part of a competitive
equilibrium with a tax on asset holdings ⌧ k . To implement the optimal allocation, we need to set the
present value of taxes relative to the market value of capital Tt /qt = ⌘t .
The tax ⌧ k reduces the equilibrium price of capital, as seen in the pricing equation (20). The
planner is in fact using the tax ⌧ k to force agents to internalize the externality, so the planner’s FOC
(33) and the competitive equilibrium condition (35) align. This requires Tt /qt = ⌘t , where Tt kt is the
33

This is the case, for example, in Brunnermeier and Sannikov (2014), He and Krishnamurthy (2012, 2014).
This means that even if price of capital is technologically fixed, ◆0t = q̄, the competitive equilibrium with short-term
contracts is still ineﬃcient.
35
Notice that while trading in capital markets cannot be controlled by the planner, intermediaries’ asset holdings
are observable and contractible.
36
The policy instrument is not unique: we could also implement the optimal allocation with other instruments that
reduce asset prices without distorting other private incentives.
34

24

present value of taxes. Intuitively, the present value of future taxes reduces the equilibrium market
value of capital qt , internalizing the externality ⌘t . To balance the budget, the planner distributes
the tax proceeds via lump-sum transfers, which are part of private agents’ total wealth (qt + Tt )kt
(with complete markets this is equivalent to giving agents a government asset worth Tt kt ). The
next section provides a suﬃcient statistic representation of the externality ⌘t in terms of equilibrium
observables.
Policy intervention vs. financial amplification channel. It may seem surprising that the
optimal policy intervention consists of taxing capital to reduce its equilibrium price, when lower
asset prices are typically considered part of the financial amplification channel that creates financial
crisis (e.g. fire sales). In fact, the setting here features precisely this type of financial amplification
channel, as explained in Subsection 3.2. The resolution to this puzzle lies in the endogenous response
of intermediaries’ net worth.
To fix ideas, consider a reduced-form equity constraint that restricts idiosyncratic risk sharing.
Intermediaries’ are otherwise free to raise debt and share aggregate risk. Since intermediaries must
retain at least a ˜t equity share, their exposure to idiosyncratic risk is
˜i,n,t

˜t qt ki,t ⌫t
ni,t

(38)

The essence of the financial amplification channel in this environment is as follows. Suppose a bad
aggregate shock hits the economy and the value of assets qt ki,t falls; and suppose these financial
losses are disproportionately concentrated on the balance sheets of intermediaries. As a result,
intermediaries’ net worth ni,t falls proportionally more than qt ki,t , and the constraint tightens.
Intermediaries must be exposed to more idiosyncratic risk for the same capital, which drives up
the required excess return on capital ↵t (see equation (20)), further reducing asset prices qt and
tightening the constraint even more in a feedback loop.
In contrast, the social planner is taxing capital to reduce its equilibrium price qt , but rebates
the tax proceeds to agents. This allows him to reduce qt kt without aﬀecting nt . This clearly relaxes
the constraint – intermediaries are exposed to less idiosyncratic risk. The price of capital is still
lower, so in both cases investment will fall. But here instead of tighter constraints that increase
idiosyncratic risk, we get relaxed constraints and less idiosyncratic risk. It is this tradeoﬀ between
investment and risk sharing that the externality ⌘t in equation (33) captures.
The previous argument also shows how robust the intuition is. As long as intermediaries face
an equity constraint that forces them to retain idiosyncratic risk as in (38), and the planner is able
to use a tax or other such instrument to reduce the equilibrium price of capital qt independently of
intermediaries’ net worth nt , it will be advantageous to do so. This is true even if the equity stake
˜t is an endogenous object (in fact, this is the case in this paper).37 Of course, if we just assume
37
Here the contract can relax the equity stake ˜t by distorting the intertemporal consumption path, as discussed in
Subsection 3.1 and equation (12) in particular. Reducing the price of capital qt while keeping nt constant improves

25

the reduced-form equity constraint we can’t be sure that the policy intervention is consistent with
the underlying contractual environment (is it a valid intervention?) or that it is optimal. The
mechanism design approach in this paper allows us to see that it is indeed a valid intervention, and
it is optimal.
In many models aggregate risk sharing is incomplete, so in addition to the externality studied
here the MRS doesn’t equalize across aggregate states. The planner may therefore also wish to
somewhat raise the price of capital in states of the world where the constraint is very tight, as
a way of transferring wealth to intermediaries in those states (indirectly improving aggregate risk
sharing).38 But with complete aggregate risk sharing this is never necessary. If the planner wants to
aﬀect how aggregate risk is shared, he can simply regulate intermediaries’ exposure to aggregate risk
without distorting the price of capital. As it turns out, there is no reason to do this here because
long-term contracts correctly evaluate the MRS ⇤, as explained in Section 4.3.
Tax on assets vs. capital requirements. It is useful to distinguish the tax on asset holdings
from capital requirements, which are a common component of financial regulation policy in practice.
The tax on assets penalizes intermediaries for large asset holdings, but doesn’t aﬀect the equity vs.
debt margin. Intermediaries have private reasons to prefer debt or equity, and the planner doesn’t
need to interfere. Capital requirements, instead, impose minimum equity levels proportional to
asset holdings: (nt + et )

t qt k t .

They impose a penalty on issuing debt, but not equity, so they

distort the debt/equity margin. To the extent that distorting this margin is costly, they also act as
a penalty on assets, but only indirectly. In this environment, however, there is no reason to distort
the debt/equity margin, so capital requirements are not optimal.
Capital requirements are often justified on the grounds that debt creates incentives for riskshifting behavior by equity holders. However, outside equity holders don’t have any moral hazard
problem in this environment, so their incentives are not important. What matters is insiders’
incentives, and private contracts correctly take them into account. The ineﬃciency in this economy
does not arise from privately ineﬃcient contracts, but rather from an externality that makes privately
optimal contracts socially ineﬃcient. Alternatively, if the government cannot commit to not bailout
financial institutions such as banks, this creates incentives for excessive risk taking and may justify
the use of capital requirements. This is the case in Chari and Kehoe (2013) for example. In this
environment there is no need for bailouts, either ex-ante or ex-post.
Time-consistency of optimal policy. We established in Section 4.2 that the planner’s allocation
is renegotiation-proof in the sense that the only way of delivering more utility to households is
to reduce intermediaries’ utility, conditional on the exogenous aggregate state Y (in other words,
0 < 0). This means optimal policy is time-consistent. The planner cannot obtain a Pareto
SX

risk sharing for a given equity stake ˜t , or we can reduce the distortions in intertemporal consumption and still get
the same idiosyncratic risk (or a little bit of both).
38
See Lorenzoni (2008) and Davila (2015).

26

improvement from deviating from his plan after any history. Of course, if he prefers households over
intermediaries, he has incentives to expropriate them and transfer their wealth to households. But
he can’t deviate and make everyone better oﬀ.

5

A suﬃcient statistic for the externality and optimal policy

We can obtain a simple suﬃcient statistic for the externality in terms of equilibrium observables.
Proposition 2. For any competitive equilibrium, the externality satisfies the following expression:
⌘t = ↵t ✏ t
where ✏t =

◆00
t (gt )
◆0t (gt )

(39)

is the semi-elasticity of the price of capital with respect to investment/growth.

The formula (39) is true after any history, for any type of aggregate shocks, and it has a simple interpretation. The externality comes about from an un-internalized tradeoﬀ between investment/growth and idiosyncratic risk sharing. The planner realizes that if he wants more investment
he must raise the price of capital, and this results in worse idiosyncratic risk sharing. The semielasticity ✏t captures the marginal eﬀect of increasing g on the price of capital ◆0 (g), while ↵t measures
the marginal cost of exposing intermediaries to more idiosyncratic risk. Recall that ↵t is the riskadjusted expected excess return on capital, which compensates intermediaries for the idiosyncratic
risk they must retain if they invest an extra dollar in capital. Taking them together we obtain the
marginal cost of increasing g coming from idiosyncratic risk, in terms of reduced consumption for
households. Expression (39) uses endogenous objects which may of course be aﬀected by policy.
However, it is always correctly measuring the size of the externality for any competitive allocation
(for example, without taxes ⌧ k = 0, or for the optimal taxes).
The model also provides an expression for the risk-adjusted expected excess return on capital
↵t . From the pricing equation for capital (20) we obtain
↵t =

qt k t ˜ 2
( t ⌫t )
nt

(40)

We can use this expression to understand how the externality (and optimal policy) responds to
aggregate shocks. If we take ✏ as technologically fixed, the externality is larger after aggregate shocks
that endogenously lead to weaker balance sheets for intermediaries (larger qk
n ), tighter financial
˜
frictions , or more idiosyncratic risk ⌫t - or equivalently, aggregate shocks that raise the riskadjusted expected excess return ↵t , e.g. downturns and financial crises. Optimal policy should
therefore respond with higher taxes on assets after these aggregate shocks.
Do we really want to raise the tax on assets (and reduce their price qt ) precisely during a financial
crisis? This is not as counterintuitive as it may sound at first. We use the tax to improve risk sharing,
and we definitely want to improve risk sharing during a crisis. The main problem during a crisis
27

excess return on assets Α and externality Η

excess return on equity !Α $ leverage"
14!

4!
12!
10!

3!

8!
2!

6!
4!

1!

2!
0!

0!
1980

1990

2000

2010

1980

leverage !assets#equity"

1990

2000

2010

id. vol of intermediary equity
45!

18

40!
35!

14

30!
10

25!
20!

6
1980

1990

2000

2010

1980

1990

2000

2010

Figure 2: Top left: risk-adjusted expected excess return on assets ↵ (dashed) and externality ⌘
(solid); Top right: risk-adjusted expected excess return on equity ↵⇥leverage; Bottom left: leverage;
Bottom right: Idiosyncratic volatility of intermediary equity.
is that risk is very high; low asset prices merely reflect this. Keep in mind that under the optimal
policy capital is only a fraction of total wealth (1 + T /q)qk; while qk may go down with higher taxes,
T /q goes up to compensate. In the numerical example in Section 7 the volatility of total wealth is
lower under the implementation of the planner’s allocation. In addition, a time varying tax fixes
incentives for the allocation of aggregate risk. By improving risk sharing and reducing excess returns
during downturns, it corrects incentives for excessive exposure to aggregate risk ex-ante. Intuitively,
intermediaries are not that interested in taking large financial losses during downturns if their excess
returns are going to be taxed away in that state. Raising the tax on assets during a financial crisis
can help avoid the crisis in the first place.39

5.1

Quantitative analysis

We can use market data to get a sense of the size of the externality. Since equation (39) is true
after any history, and for any type of aggregate shocks, we can use it to compute the time varying
externality if we have a time series for the risk adjusted expected excess return on assets ↵t . Alternatively, equation (40) gives us an expression for ↵t within the model, in terms of observables. Fix
39
But remember that the optimal allocation is renegotiation-proof. The planner is not going out of his way to
punish intermediaries ex-post to provide the right incentives ex-ante: it is always fixing incentives looking forward.

28

CRRA
equity stake ˜
elasticity ✏
assets
leverage total
equity
id. vol. intermediary eq.
excess return ↵
↵ ⇥ leverage
externality ⌘

baseline
model
3
20%
3
10.8
25.95%
0.45%
4.26%
1.36%

high CRRA
10
20%
3

tight equity
constraint ˜
3
50%
3

high elasticity
of investment cost ✏
3
20%
6

1.51%
14.21%
4.52%

1.13%
10.65%
3.39%

0.45%
4.26%
2.71%

Table 1: Average values for the baseline and alternative specifications
the semi-elasticity of the cost of capital ✏ = 3 and a constant insiders’ equity stake ˜ = 20%, both
from He and Krishnamurthy (2014). The calibration of insider’s retained equity stake ˜ = 20% is
based on the common 2/20 compensation scheme for hedge funds, PE, and VC funds; and from the
fact that the average equity ownership of oﬃcers and directors in the finance, insurance, and real
estate sectors is 17.4%.40 Set the relative risk aversion

= 3. We can extend the analysis in He et

al. (2015) to measure leverage in the financial sector at market values
leveraget =

P

equityi,t + book debti,t )
i market equityi,t

i (market

P

I use CRSP/Compustat data with SIC codes 60-67, and use quarterly data from 1975q1 to 2015q1.
kt
Notice that in the model leveraget = nqtt+e
= qnt kt t ˜t . Figure 2 shows the resulting time series.
t
The average leverage in the data is 10.8, and goes up during downturns. It was also relatively low
between 1993 and 2006, and spiked during the financial crisis in 2008.
For the idiosyncratic risk of financial intermediaries I follow Herskovic et al. (2016). I run the
regression
ln(market equityi,t ) =

0

+

1 F F1,t

+

2 F F2,t

+

3 F F3,t

+ "i,t

for every year, using monthly data (again for SIC codes 60-67), where F Fn are the Fama-French
factors (market, HML, SMB). Idiosyncratic volatility is then computed as the standard deviation
of residuals for each quarter, and annualized to obtain a series ⌫equity,t for the volatility of equity.
Notice that in the model the volatility of total equity corresponds to ⌫equity,t = leveraget ⇥ ⌫t . Figure

2 shows the resulting time series. The average volatility in the data is 25.95%. It goes up during
downturns, especially during the financial crisis in 2008.
I compute the risk-adjusted expected excess return on assets ↵ predicted by the model, ↵t =

2
˜ ⌫equity,t ,
leveraget

and the size of the externality ⌘t .41 Figure 2 shows the results. The average excess

40
The retained equity stake is unlikely to be constant. In fact, the model predicts that it should become smaller
during periods of financial distress. With more data we could in principle build a time series for insiders’ equity stake
˜t and incorporate it into the analysis in a straightforward way.
41
In the next Section I extend the framework to incorporate heterogenous intermediaries and asset classes.

29

return on assets ↵t is 0.45%, and the average externality ⌘t is 1.36%. They were particularly high
during the dot com boom and spiked during the crash, reaching 1.46% and 4.39% respectively. They
then came down and spiked up again during the financial crises in 2007, reaching roughly 0.8% and
2.39%, and remained elevated since then. It is striking that, according to the model, the externality
was higher during the dot com crash than during the financial crisis. The reason is that although the
idiosyncratic volatility on equity was higher during the crisis, so was the financial sectors’ leverage.
The unlevered idiosyncratic volatility on assets ⌫, which matters for the excess return ↵, was actually
higher during the dot com crash. I also compute the excess return on equity, leveraget ⇥ ↵t , with

an average of 4.26%. It goes up during downturns and spikes during the financial crisis, reaching
13.88% in 2008. This is the result of not only a high excess return on assets ↵, but also very high
leverage. Table 1 summarizes results and reports alternative specifications for high CRRA , tight
equity constraints ˜, and high elasticity of the cost of investment ✏.
Is an average externality of 1.36% large or small? To put it in context, consider the required
reduction in the investment share of GDP, I/Y , to reduce the marginal cost of capital by 1.36%.
Assuming K/Y = 3 (Jones (2015)) and ✏ = 3, we can use Tobin’s q to obtain a reduction in
I/Y of 1.36 percentage points (e.g. from 20% to 18.64% of GDP). The externality computed here
corresponds to an average across all asset classes. It is useful to get a sense of the overall quantitative
importance of the mechanism. However, the externality is likely to vary significantly across asset
classes. Some assets may require very high taxes, while others barely anything. Section 6 extends
the framework to heterogenous intermediaries and asset classes.

5.2

Implementation of the optimal allocation.

To implement the optimal allocation we must set Tt /qt = ⌘t . Intuitively, the present value of future
taxes Tt reduces the equilibrium market value of capital qt . This makes investment less attractive
and internalizes the externality, equating the planner’s FOC (33) and the CE equilibrium condition
(35). While Proposition 2 provides a simple expression for the externality in terms of observable
variables, it does not specify exactly how the tax on assets ⌧tk or capital requirements should be set.
In general, a time-varying tax ⌧tk will be required. We can recover the optimal tax ⌧tk from equation
(16)
⌧tk

✓

= ⌘ t rt
= ⌘t ((rt +

EQ
t



d(⌘t qt kt )
⌘t qt k t

t ⇡t

In a steady state (µ⌘ = µq =

gt )
⌘

=

◆

(41)

µ⌘,t
q

µq,t

⌘,t q,t

+ (⇡t

t )( ⌘,t

+

= 0) we would get a constant tax

Here I am assuming a common idiosyncratic volatility on equity ⌫equity , so we can write ↵ =
2
P ˜
⌫equity,t
market equityi,t
market equityi,t +book debti,t
P
⌫2
= ˜ leverage
.
i
market equity +book debti,t equity,t
market equity +book debti,t
i,t

i

(42)

q,t ))

i,t

t

30

P

i

↵i

qt ki,t
qt kt

=

⌧ k = ⌘(r + ⇡

g)

If we have a structural model that gives us the stochastic process for r, ⇡, q, g, and ↵, we can use
(41) to actually set the optimal tax ⌧tk . For example, if we calibrate r + ⇡ = 7% to match the
average stock market return, g = 2%, and ⌘ = 1.36%, we obtain a tax ⌧ k ⇡ 7 bp.

In practice, however, it may be easier to follow a market based approach. The planner can

securitize the revenue from the tax on assets ⌧ k qk, and let financial markets price it at Tt kt . It can
then measure T , q, and ⌘, and adjust ⌧tk continuously to make sure Tt /qt = ⌘t as measured by (39).

6

Heterogenous assets and intermediaries

A practical concern for regulators is how to treat diﬀerent asset classes (e.g. appropriate risk
weighting), and diﬀerent intermediaries. To address this issue, we can extend the model to incorporate heterogenous asset classes and intermediaries. The main conclusions in the baseline model
go through. The suﬃcient statistic formula (39) is valid for each asset class, and can be used to
determine regulation policies at a more desegregated level. I develop the setting in detail in the
Appendix.
Suppose there are F

1 types of intermediaries, and J

1 asset classes. Assets may diﬀer in

their investment technology ◆j,t (gj,t ) or their exposure to aggregate risk

j,t .

Each type of interme-

diary may be able to deal with each asset class diﬀerently, i.e. they get diﬀerent idiosyncratic risk
⌫i,j,t , moral hazard

i,j,t ,

or output flow ai,j,t . Intermediary i gets observable return Ri,j,t per dollar

invested in asset j
dRi,j,t =

⇣a

◆j,t (gj,t )

i,j,t

qj,t

+ gj,t + µq,j,t +

0
j,t q,j,t

⌘
si,j,t dt + (

k
⌧j,t

j,t

+

q,j,t )dZt

+ ⌫i,j,t dWi,j,t

where Wi,j is an intermediary and asset class-specific idiosyncratic shock. Because the intermediary
q k
can secretly divert returns for asset class j, he must keep an exposure ˜n,i,j,t = ˜t ⌫i,j,t j,t i,j,t to
ni,t

1/
Wi,j , with ˜i,j,t = ⇠i,t ĉi,t

i,j,t

.42

As a result, we obtain the following asset pricing equation for

each asset class j:
ai,j,t
|

◆j,t (gj,t )
qj,t

+ gj,t + µq,j,t +

0
j,t q,j,t

k
(rt + ⌧j,t
)

{z
risk-adjusted excess return ⌘ ↵i,j,t

(

j,t

+

q,j,t )⇡t

}

=

qj,t ki,j,t ˜
( i,j,t ⌫i,j,t )2
ni,t
|
{z
}
id. risk premium

for all (i, j) pairs such that ki,j,t > 0. Intermediaries will invest more heavily in assets for which they
qj,t ki,j,t ˜
are better suited (low i,j,t and ⌫i,j,t , or high ai,j,t ). Reorganizing, we get ai,j,t
( i,j,t ⌫i,j,t )2 qj,t
ni,t

42

Notice that because the asset specific risks
is some
P
⌘ diversification. The total
qP {Wi,j } are independent⇣ there
j qj,t ki,j,t
˜i,j,t ⌫i,j,t Pqj,t ki,j,t )2
(
, so that even if ˜i,j,t = ˜i,t
j
qj,t ki,j,t
j⇣
P
⌘ ni,t
q
k
j j,t i,j,t
and ⌫i,j,t = ⌫i,t , we get less idiosyncratic volatility than ˜i,t ⌫i,t
.
ni,t
idiosyncratic volatility for intermediary i is

31

constant for all intermediaries who hold the asset. The market allocates assets to equalize the
marginal benefit from output net of the cost of idiosyncratic risk. This is exactly what the planner would do, so there is no ineﬃciency in the allocation of assets across intermediaries. This also
k which treat all
means that we can implement the optimal allocation with asset specific taxes ⌧j,t

intermediaries the same.
But how should diﬀerent asset classes be treated? The externality now takes into account how
increasing the marginal cost of capital of class j, ◆0j,t (gj ), tightens the idiosyncratic risk sharing
problem of every type of intermediary:
(43)

⌘j,t = ↵j,t ✏j,t
where ↵j,t =

P

qj,t ki,j,t
i ↵i,j,t qj,t kj,t

is the value-weighted average risk-adjusted expected excess return on

asset class j across all intermediaries, and ✏j,t =

◆00
j,t (gj,t )
◆0j,t (gj,t )

the semi-elasticity of qj,t with respect to

gj,t . The excess return ↵j,t measures the cost, from idiosyncratic risk, of raising the value of assets
of class j, while ✏j,t measures how much we must raise asset values to increase the growth rate
gj,t . Expression (43) measures the externality for any competitive equilibrium, even if we are not
implementing the planner’s optimal allocation. The optimal policy must set the value of the tax on
each asset class equal to the externality in that class, Tj,t /qj,t = ⌘j,t .
Proposition 3. With heterogenous assets classes and intermediaries, the planner’s optimal allocation P can be implemented with an asset-specific tax on asset holdings {⌧jk } that treats all inter-

mediaries the same. The optimal tax internalizes the externality Tj,t /qj,t = ⌘j,t satisfying (43) in
equilibrium.
Equation (43) tells us how regulators should treat diﬀerent asset classes. Regulators don’t need
to concern themselves with the riskiness of each asset class, or even their systemic risk. Instead, the
average excess return ↵j,t contains all the relevant information, and reflects both the riskiness of the
asset class and the place it occupies on intermediaries’ balance sheets.
k , and use the same
We can use an appropriately modified version of equation (41) to set ⌧j,t

market based implementation in Section 5. To measure the externality on all capital, analogous to
expression (39) in the previous section, we need to take into account the correlation between the
excess return ↵j,t and the semi-elasticity ✏j,t :
P
where ↵t =

P

X
j ⌘j,t qj,t kj,t
P
= ↵t ✏t +
(↵j,t
j qj,t kj,t

q

k

j

P

P
q k
Pj j,t i,j,t
j qj,t kj,t

↵t )(✏j,t

qj,t kj,t
✏t ) P
j qj,t kj,t

is the value-weighted excess return on all capital
P
q k
(which can be measured across asset classes or across intermediaries), and ✏t = j ✏j,t P j,tqj,tj,tkj,t is
P j,t j,t
j ↵j,t
qj,t kj,t =
j

i ↵i,t

j

the value-weighted semi-elasticity of the price of capital with respect to growth. The first term
on the rhs corresponds to the one in equation (39). The second term captures the value-weighted

covariance between excess return ↵j,t and semi-elasticity ✏j,t . In the special, but salient, case where
32

↵j,t and ✏j,t are uncorrelated, we recover expression (39).

7

A numerical example

We can illustrate the theoretical results with a numerical example. The economy is hit only by
uncertainty shocks that increase idiosyncratic risk ⌫t , which is the only exogenous state variable,
Yt = ⌫t , and follows an autoregressive process
p
d⌫t = (¯
⌫ ⌫t ) dt + ⌫t ⌫ dZt
|{z} | {z }
| {z }
dYt

As a convention, I will take

⌫

µY (Yt )

Y

(Yt )

< 0, so that we may think of Z as a “good” shock that drives

idiosyncratic risk ⌫t down.
Parameter values: Preferences:
◆(g) = (exp(✏(g + ))
= 0.1, ⌫¯ = 0.25,

⌫

1)/✏,
=

= 5,

= 5, ⇢ = 0.1, ✓ = 0.01; technology: a = 1,

= 0.1, ✏ = 3,  = 4 ; moral hazard :

= 0,

= 0.25; uncertainty shock :

0.17.

Competitive equilibrium vs. social planner Figure 3 shows that the social planner can deliver
more utility to households S for any level of utility for intermediaries X. He achieves this by reducing
asset prices q, which improves idiosyncratic risk sharing ˜n . This allows him to deliver utility to
intermediaries at a lower cost, but requires lower investment and growth (investment has the same
shape as q). In both the unregulated competitive equilibrium and the planner’s allocation, asset
prices q (and therefore investment) are lower when experts’ continuation utility X is low, and when
idiosyncratic risk ⌫ is high. It is costly to provide incentives to intermediaries when capital is very
risky relative to their continuation utility, so capital is less attractive. With EIS > 1, it is optimal
to reduce investment. Notice that we can always relax the retained equity share ˜ and improve
idiosyncratic risk sharing by distorting the intertemporal consumption margin, and this is more
attractive when X is low and ⌫ high. But the planner already improves risk sharing by reducing the
price of capital, so his incentives to distort intertemporal consumption are weaker. As a result, ˜ is
larger under the planner’s allocation, and intermediaries’ exposure to idiosyncratic risk ˜n doesn’t
fall as much as it would had we kept the retained equity share ˜ unchanged.
Figure 4 shows the externality ⌘ produced by hidden trade. It is larger when idiosyncratic
risk ⌫ is large and intermediaries’ utility X is low. When intermediaries are highly exposed to
idiosyncratic risk the marginal cost of further increasing this exposure by raising investment and
the price of capital is very large. The externality ⌘ can be computed both for the unregulated
competitive equilibrium and the social planner’s allocation; it is a local concept that measures the
wedge between the private and social FOC at any allocation (in the implementation of the planner’s
allocation it is internalized by a tax on assets). The suﬃcient statistic (39), ⌘ = ↵✏, is valid in both
33

S

S
7.0

6

6.5

5
4

6.0

3
5.5

2
1
1

0

2

3

4

5

6

5.0

X

7

0.1
q

0.3

0.4

0.5

v

q

5

5

4

4

3

3

2

2

1

1

0

1

2

3

4

5

6

7

X

0

0.1

σn
1.0

σn
1.0

0.8

0.8

0.6

0.6

0.4

0.4

0.2

0.2

0.0

0.2

0

1

2

3

4

5

6

X

7

0.0
0.0

ϕ
0.25

0.2

0.1

0.2

0.1

0.2

0.3

0.4

0.5

0.3

0.4

0.5

v

v

ϕ
0.22
0.20

0.20

0.18
0.15

0.16

0.10

0.14
0.12

0.05
1

2

3

4

5

6

7

X

0.3

0.4

0.5

v

Figure 3: Households’ utility S, price of capital q, intermediaries’ idiosyncratic risk ˜n , and the
retained equity share ˜, as functions of X for a fixed ⌫ = 0.25 (left), and as functions of ⌫ for a
fixed X = 1.29 (right). Solid line is the CE, dashed line is the SP.

34

allocations. Since ✏ is constant, intermediaries’ excess return ↵ has the same shape as ⌘. In this
numerical solution, it is remarkable how similar ⌘ and ↵ are in both allocations. To understand
this, it is useful to write ↵ = ˜n ˜⌫. While intermediaries’ idiosyncratic risk ˜n is smaller in the
planner’s allocation, the retained equity stake ˜ is larger, as explained above. As a result, while
idiosyncratic risk sharing improves, ↵ is roughly unchanged.
Figure 4 also shows the MRS between intermediaries’ and households’ utility ⇤. In the unregulated competitive equilibrium it is larger when intermediaries’ utility X is higher and idiosyncratic
risk ⌫ lower. To understand this, recall from expression (25) for ⇤ that giving more consumption
to intermediaries gives them more utility both directly, ĉt
constraints and improving idiosyncratic risk sharing,

1/

, and indirectly by relaxing the IC

⌫t 2
( t ◆t (gt ) X
) ĉt
t

2/

1

. This second eﬀect is

small when X is large and ⌫ low, because risk sharing is already relatively good. As a result, the
MRS ⇤ is larger under these conditions.
This is also the reason why ⇤ is larger under the social planner’s allocation. Since the planner
already relaxes the IC constraint by distorting investment, the benefit of giving intermediaries more
consumption is smaller, and the cost of giving them more utility is therefore larger. In fact, this
also explains why the diﬀerence between the MRS ⇤ along the unregulated competitive equilibrium
and the social planner’s allocation is larger when idiosyncratic risk ⌫ is high, a fact that will play an
important role in the allocation of aggregate risk. Intuitively, when intermediaries are more exposed
to idiosyncratic risk the planner’s intervention is more potent. If idiosyncratic risk is very small,
the planner’s intervention barely matters, so the MRS ⇤ is similar. It is important to remember
that we are dealing with “slopes”, rather than “levels”. Households do get more utility under the
social planner’s allocation as can be seen in Figure 3. But the marginal cost of giving more utility
to intermediaries is larger.
Figure 4 also shows how uncertainty shocks produce a financial amplification channel. After
idiosyncratic risk ⌫ goes up, the price of capital q falls and financial losses are concentrated on the
balance sheets of intermediaries,

n

w

> 0. As explained in Section 3.2, this drives the required

excess return on capital ↵ further up, depressing asset prices and investment even more.
To understand why financial losses are concentrated on intermediaries, look at the behavior of
the MRS ⇤. With

> 1, the FOC for aggregate risk sharing (21) says that financial losses are

concentrated on intermediaries after aggregate shocks that reduce the cost of providing utility to
them (shocks that reduce ⇤). This happens after a bad uncertainty shock, as can be seen in Figure
4 and was explained above.
Although there is no externality associated with the FOC for aggregate risk sharing, this concentration of aggregate risk is excessive. In the social planner’s allocation, financial losses are less
concentrated on the balance sheets of intermediaries, (

n

w)

CE

> (

n

w)

SP .

The reason

for this is that the marginal cost of delivering utility to intermediaries ⇤ doesn’t go down as much
after an uncertainty shock in the planner’s allocation. As explained above, the planner responds to
higher risk ⌫ by lowering the price of capital q to relax the IC constraint and improve idiosyncratic

35

η

η

0.20

0.4

0.15

0.3

0.10

0.2

0.05

0.1

1

2

3

4

5

6

7

X

0.0

Λ

v

0.1

0.2

0.3

0.4

0.5

0.1

0.2

0.3

0.4

0.5

0.1

0.2

0.3

0.4

0.5

0.1

0.2

0.3

0.4

0.5

Λ

0.8

0.6

0.6
0.4
0.4
0.2

0.2
0.0

1

2

3

4

5

6

7

X

0.0

v

σn -σw

σn -σw
0.10

0.10

0.08

0.08

0.06

0.06

0.04

0.04

0.02

0.02
1

2

3

4

5

6

7

X

v

vol(qk+Tk)

vol(qk+Tk)

0.07

0.05

0.06

0.04

0.05

0.03

0.04
0.03

0.02

0.02
0.01
0.00

0.01
1

2

3

4

5

6

7

X

v

Figure 4: Externality ⌘, MRS between intermediaries’ and households utility ⇤, concentration of
financial risk n
w , and volatility of total wealth vol(qk + T k), as functions of X for a fixed
⌫ = 0.25 (left), and as functions of ⌫ for a fixed X = 1.29 (right). Solid line is the CE, dashed line
is the SP.

36

risk sharing. Giving them more consumption still improves their risk sharing (by distorting their
intertemporal consumption smoothing), but this is less valuable because idiosyncratic risk sharing is
better than in the competitive equilibrium. As a result, the financial amplification channel is weaker
in the implementation of the planner’s problem. Finally, notice that while the value of capital q is
more sensitive to uncertainty shocks in the planner’s allocation, the volatility of total wealth qk + T k
is smaller. The larger taxes are rebated lump-sum to households, and go up in value when the value
of capital falls, attenuating total financial losses.

8

Conclusion

In this paper I propose a model of optimal financial regulation where financial intermediaries trade
capital assets on behalf of households, but must retain an equity stake for incentive reasons. This is
a commonly observed financial arrangement, and widely used in models of financial crises. Financial
regulation is necessary in this environment because intermediaries cannot be excluded from privately
trading in capital markets. Private intermediaries don’t internalize that when they demand assets
and bid up their price they force others to bear more idiosyncratic risk. A social planner would
prefer to reduce asset prices, even at the cost of less investment, in order to improve risk sharing
and reduce the cost of providing incentives to intermediaries.
The socially optimal allocation therefore requires a tax on assets. In fact, the externality admits
a simple suﬃcient statistic representation that allows us to measure it using market data. I find the
externality represents 1.36% of the market value of assets on average, but it spikes during downturns
and financial crises, where it can reach 4.39%. While these are average values across all assets, the
formula is valid for each asset class, and can be used to determine how diﬀerent asset classes should
be treated.
The competitive equilibrium may feature an ineﬃcient financial amplification channel, in the
sense that intermediaries may have an excessive exposure to aggregate risk compared to the socially optimal allocation. However, there is no need to directly regulate intermediaries’ exposure
to aggregate risk. Once the hidden trade externality is internalized, privately optimal contracts
correctly allocate aggregate risk. Likewise, while the planner wants to tax intermediaries for their
asset holdings, it doesn’t want to distort the equity/debt margin (e.g. doesn’t want to use capital
requirements).

37

References
Ackermann, Carl, Richard McEnally, and David Ravenscraft, “The Performance of Hedge
Funds: Risk, Return, and Incentives,” The Journal of Finance, 1999, 54 (3), 833–874.
Alvarez, Fernando and Urban J Jermann, “Eﬃciency, equilibrium, and asset pricing with risk
of default,” Econometrica, 2000, 68 (4), 775–797.
Ang, A., Asset Management, Oxford University Press, 2014.
Bansal, R., D. Kiku, I. Shaliastovich, and A. Yaron, “Volatility, the Macroeconomy, and
Asset Prices,” Journal of Finance, 2014.
Berk, J. and R. Green, “Mutual Fund Flows and Performance in Rational Markets,” Journal of
Political Economy, December 2004, 112 (6), 1269–1295.
Bernanke, B., M. Gertler, and S. Gilchrist, “The Financial Accelerator in a Quantitative
Business Cycle Framework,” in J.B. Taylor and M. Woodford, eds., Handbook of Macroeconomics,
Vol. 1, Elsevier, 1999, chapter 21, pp. 1341–1393.
Biais, B., T. Mariotti, G. Plantin, and J.C. Rochet, “Dynamic security design: convergence to
continuous time and asset pricing implications,” Review of Economic Studies, 2007, 74, 345–390.
Bianchi, J., “Overborrowing and Systemic Externalities in the Business Cycle,” American Economic
Review, December 2011, 101 (7).
Bianchi, Javier and Enrique G Mendoza, “Overborrowing, Financial Crises and ‘MacroPrudential’Policy?,” IMF Working Papers, 2011, pp. 1–53.
Brunnermeier, M. and Y. Sannikov, “A Macroeconomic Model with a Financial Sector,” American Economic Review, 2014, 104 (2), 379–421.
Campbell, J. and J. Beeler, “The Long-Run Risks Model and Aggregate Asset Prices: An
Empirical Assessment,” NBER, 2009.
Chari, Varadarajan V and Patrick J Kehoe, “Bailouts, time inconsistency, and optimal regulation,” Technical Report, National Bureau of Economic Research 2013.
Chen, QI, ITAY GOLDSTEIN, and WEI JIANG, “Directors’ Ownership in the U.S. Mutual
Fund Industry,” The Journal of Finance, 2008, 63 (6), 2629–2677.
Davila, E., “Dissecting Fire Sale Externalities,” April 2015. working paper - NYU Stern.
Davila, J., J. Rios-Rull, J. Hong, and P. Krusell, “Constrained eﬃciency in the neoclassical
growth model with uninsurable idiosyncratic shocks,” Econometrica, November 2012, 80(6), 2431–
2467.
38

DeMarzo, P. and M. Fishman, “Optimal Long Term Financial Contracting,” Review of Financial
Studies, 2007, 20, 2079–127.
and Y. Sannikov, “Optimal Security Design and Dynamic Capital Structure in a ContinuousTime Agency Model,” The Journal of Finance, 2006, 61 (6), pp. 2681–2724.
, Z. He, M. Fishman, and N. Wang, “Dynamic Agency Theory meets the Q-Theory of
Investment,” 2012. forthcoming.
Farhi, E., M. Golosov, and A. Tsyvinski, “A Theory Liquidity and Regulation of Financial
Intermediation,” The Review of Economic Studies, 2009, 76, 973–992.
Farhi, Emmanuel and Iván Werning, “A theory of macroprudential policies in the presence of
nominal rigidities,” Technical Report, National Bureau of Economic Research 2013.
Gaspar, JOSÉ-MIGUEL, Massimo Massa, and Pedro Matos, “Favoritism in mutual fund
families? Evidence on strategic cross-fund subsidization,” The Journal of Finance, 2006, 61 (1),
73–104.
Geanakoplos, J. and H Polemarchakis, “Existence, regularity, and constrained suboptimality
of competitive allocations when the asset market is incomplete,” Essays in honor of Keneth J.
Arrow, 1986.
Geanakoplos, John, Michael Magill, Martine Quinzii, and Jacques Dreze, “Generic ineﬃciency of stock market equilibrium when markets are incomplete,” Journal of Mathematical
Economics, 1990, 19 (1-2), 113–151.
Gersbach, Hans and Jean-Charles Rochet, “Aggregate investment externalities and macroprudential regulation,” Journal of Money, Credit and Banking, 2012, 44 (s2), 73–109.
Gruber, J., “A Tax-Based Estimate of the Elasticity of Intertemporal Substitution,” Quaterly
Journal of Economics, June 2013, 3 (1).
Hall, B., “Intertemporal Substitution in Consumption,” Journal of Political Economy, 1988, 96 (2).
Hart, O., “On the optimality of equilibrium when the market structure is incomplete,” Journal of
Economic Theory, 1975, 11 (3), 418–443.
He, Z., “Dynamic compensation contracts with private savings,” Review of Financial Studies, 2011.
and A. Krishnamurthy, “A Model of Capital and Crises,” Review of Economic Studies, 2012,
79 (2), 735–777.
He, Z and A. Krishnamurthy, “A Macroeconomic Framework for Quantifying Systemic Risk,”
January 2014. working paper.
39

and P. Kondor, “Ineﬃcient Investment Waves,” 2014. NBER working paper.
He, Zhiguo and Arvind Krishnamurthy, “Intermediary asset pricing,” The American Economic
Review, 2013, 103 (2), 732–770.
, Bryan T Kelly, and Asaf Manela, “Intermediary Asset Pricing: New Evidence from Many
Asset Classes,” Available at SSRN 2662182, 2015.
Herskovic, Bernard, Bryan Kelly, Hanno Lustig, and Stijn Van Nieuwerburgh, “The
common factor in idiosyncratic volatility: Quantitative asset pricing implications,” Journal of
Financial Economics, 2016, 119 (2), 249–283.
Jones, Charles I, “The facts of economic growth,” Technical Report, National Bureau of Economic
Research 2015.
Kehoe, T. and D. Levine, “Debt-Constrained Asset Markets,” The Review of Economic Studies,
1993, 60, 865–888.
Kiyotaki, N. and J. Moore, “Credit Cycles,” Journal of Political Economy, 1997, 105, 211–248.
Korinek, A., “Systemic Risk-Taking: Amplification Eﬀects, Externalities, and Regulatory Responses,” May 2012. Working Paper, University of Maryland.
Lack, Simon, “The Hedge Fund Mirage: The Illusion of Big Money and Why It’s Too Good to Be
True,” CFA Institute Conference Proceedings Quarterly, 2012, 29 (4), null.
Lorenzoni, G., “Ineﬃcient Credit Booms,” Review of Economic Studies, July 2008, 75(3), 809–833.
Ma, Linlin, Yuehua Tang, and Juan-Pedro Gómez, “Portfolio manager compensation in the
US mutual fund industry,” Finance Down Under 2014 Building on the Best from the Cellars of
Finance, 2015.
Mulligan, C., “Capital, Interest, and Aggregate Intertemporal Substitution,” December 2002.
NBER Working Paper 9373.
Phalippou, Ludovic, “Beware of venturing into private equity,” The Journal of Economic Perspectives, 2009, 23 (1), 147–166.
Rampini, A. and S. Viswanathan, “Collateral, risk management, and the distribution of debt
capacity,” Journal of Finance, 2010, 65, 2293–2322.
Sannikov, Y., “A Continuous- Time Version of the Principal: Agent Problem,” The Review of
Economic Studies, 2008, 75 (3), pp. 957–984.
Stiglitz, Joseph E, “The ineﬃciency of the stock market equilibrium,” The Review of Economic
Studies, 1982, 49 (2), 241–261.
40

Sun, Yeneng, “The exact law of large numbers via Fubini extension and characterization of insurable risks,” Journal of Economic Theory, 2006, 126 (1), 31–69.
Tella, S. Di, “Uncertainty Shocks and Balance Sheet Recessions,” Forthcoming Journal of Political
Economy, August 2013.
and Y. Sannikov, “Optimal asset management contracts with hidden savings,” Feb 2014. Working paper, Stanford GSB and Princeton University.
Vissing-Jorgensen, A., “Limited Asset Market Participation and the Elasticity of Intertemporal
Substitution,” Journal of Political Economy, 2002, 110 (4), 825–853.
Zitzewitz, Eric, “How widespread is late trading in mutual funds?,” 2003.

41

Appendix
In the first part of this Appendix I provide proofs for Propositions 1 and 2, which correspond to
the baseline model. In the second part I extend the baseline model to include heterogenous asset
classes and intermediaries, as in Section 6, and I provide the proof of Proposition 3. For simplicity
I don’t consider retirement, as in the baseline model in the paper. Proofs can be easily extended to
incorporate retirement.

Omitted proofs in the baseline model
Proof of Proposition 1
Consider an optimal plan P and the associated value function S and policy functions ĉ, g,
the law of motion of the endogenous state, µX and

X,

and

x

all functions of (X, Y ). We can build a

recursive equilibrium using the same law of motion µX and

X.

From the FOC for growth we get

q = ◆0 (g)

(44)

⇣
⌘ 1/
1/
ĉX
From the FOC for households’ consumption we get ⇣ = a ◆(g)
= ĉh
and from intermeS
⇣
⌘ 1
diaries’ FOC for ĉ we get ⇠ = ĉ 1/ + ( Xq⌫ )2 ĉ 2/ 1
, where we have used k̂ = X 1 . Notice
that we get by construction ⇠⇣ = ⇤ =
S = ⇣(q + T

⇠X) we get T =

S
⇣

SX , from the planner’s optimality condition (37). From

q + ⇠X.

We can use the representative households’ HJB to pin down r, and from the FOC for
pin down ⇡, as follows. Define w = (q + T
⇡=

(1

w

⇡ so that (a

)

⇣,

⇠X)k, and obtain an expression for

w.

w

we

We then set

and r so that households’ HJB is satisfied. We are in eﬀect choosing r and

ĉX)k = ch is the optimal choice of consumption for the household, and their

◆(g)

wealth w = (q + T

⇠X)k. Intermediaries’ FOC for

x

will be satisfied automatically, because

the planner’s optimality condition for aggregate risk sharing (36) coincides with the competitive
equilibrium’s (22). Since the FOC for ĉ is satisfied by construction, we just need to set ⌧ k so that
the FOC for k̂ is satisfied:
a

◆(g)
+ µq + g +
q

0

q

(r + ⌧ k )

⇡( +

q)

= ⇠(ĉ

1/

⌫)2

q
X

(45)

Now we want to prove that ⇠ will satisfy intermediaries’ HJB equation. For this we will use the
planner’s HJB equation (32). Multiply by S on both sides, take the derivative with respect to X
using the envelop theorem, and divide throughout by SX to obtain
⇢
1

1

=

(a

◆(g)
1

ĉX)
1

1

1

1

S

1

1

(a

◆(g)

ĉX)
SX

42

1

S

1

ĉ + (g

2

2

)

SXY
SXX
µY +
µX X
SX
SX
1
◆0 (g) 2 1 SXY Y 2
1 SXXX
SXX 2
SXXY
(ĉ
⌫) +
( X X)2 +
XX Y
Y +
XX +
X
2 SX
2 SX
SX
SX
✓
◆
SXY
SXX
SXY
+
+
(1
)
X
+
+ (1
) X
X Y
X
Y
SX
SX
SX
✓
◆✓
◆
✓
◆2
SX
SY
SXX
SXY
SX
SY
X
+
X
+
+
+
X
+
(46)
X
Y
X
Y
X
X
Y
S
S
SX
SX
2
S
S
+

+ µX

Now use

⇠⇣ = SX to obtain
SXX
⇠X
⇣X
=
+
,
SX
⇠
⇣

SXY
⇠Y
⇣Y
=
+
,
SX
⇠
⇣

SXY Y
⇣Y Y
⇣Y ⇠Y
⇠Y Y
=
+2
+
,
SX
⇣
⇣ ⇠
⇠

SXXX
⇣XX
⇠X ⇣X
⇠XX
=
+2
+
,
SX
⇣
⇠ ⇣
⇠

SXXY
⇣XY
⇠Y ⇣X
⇠X ⇣Y
⇠XY
=
+
+
+
SX
⇣
⇠ ⇣
⇠ ⇣
⇠

Now plug this into (46), use the definition of µX and the FOC for ĉ in the private contract (which
we already know holds), and simplify to obtain
1

0=

1
1 c̃h

1

1

⇣

1

1

+

+ µ⇠ + µ⇣

⇠ ⇣

+

X

Now from household’s HJB and using
1

⇢
1

1

1 c̃h
=
1

(

⇠

S

(

w

=

⇠

1

1 ĉ
1

1

+

⇣)

+

+

1

⇣

2

2
X

+ (1
+

S

⇣

X)

) (
+

x,

+⇠

ĉ
r+
1

1

1

1

1

+

1

◆0 (g) 2
⌫)
X

⇣)

we get

+

⇣

1

1

+r+

2

(

S

⇣

+ ) 2 + µ⇣

S

=

X+

1

2
(

2
⇣

⇠ + ⇣)

and

1

2

(ĉ

1

1

◆0 (g) 2
⌫)
X

⇠(ĉ

=

◆0 (g) 2
⌫)
X

ĉ

µ⇠ +

x⇡

+

⇠⇡

2

2
x

⇠ x

)

Because ⌧ k is chosen so that the pricing equation for capital holds we get
1

x

we get

⇢
1

⇠

1/ )(ĉ

1

⇠(ĉ
(

1
2

2
S

2

which we plug into our expression. After some algebra using
as well as the FOC for ĉ and

(

◆0 (g) 2
q
⌫) =
X
X

✓

a

◆(g)
+ µq + g +
q

and plugging this in, we obtain experts’ HJB.
43

0

q

k

(r + ⌧ )

⇡( +

q)

◆

=0

X+

,

Finally, we just need to check that the pricing equation for taxes is satisfied. First, use the
planner’s HJB and households’ HJB to obtain a version of the dynamic budget constraint of the
household. Write S = ⇣(q + T
qµq + T µT
= r(q + T

⇠X(µ⇠ + µX +
⇠X) + ⇡(q

⇠X)k, and then

⇠X), w = (q + T

q

+T

⇠ X)

+ g(q + T
⇠X(

T

+

⇠

⇠X) + (q
X)

q

+ (q + T

+T

⇠X(

T

⇠X))

⇠

+

c̃h (q + T

X ))

⇠X)

Multiply experts’ HJB by X to obtain
a
+⇠X

(

r+

1
1

1

◆(g)
(ĉ

1

1

ĉX + q(g + µq +
⇢)

2
x

2

2

(r + ⌧ k )

q

1

(ĉ

◆(g) 2
v) +
X

( +
x (⇡

Combining these two expressions, and using the definition of µX ,

q )⇡)

⇠)

X,

µ⇠ +

and c̃h =

⇠⇡

)

=0

a ◆(g) ĉX
q+T ⇠X

we get

the pricing equation for taxes.
Comparing the planner’s optimality condition for g (33) with the equilibrium condition (35) we
obtain Tt /qt = ⌘t . This completes the proof.

Proof of Proposition 2
Use expression (34) for ⌘
⌘t =
1/

Use ⇣t = ĉh,t

⇤t Xt
1/
ĉh,t

(ĉt

1/

t

⌫t 2 00
) ◆ (g)
Xt t

and ⇤t = ⇠t ⇣t to get
⌘t = ⇠t Xt (ĉt
⌘t =

Now use ˜t = ⇠t ĉt

1/

t,

1/

1
(⇠t ĉt
⇠t Xt

1/

t

⌫t 2 00
) ◆ (g)
Xt t
t ⌫t )

2 00
◆t (g)

and multiply and divide by ◆0t (gt ) to get
◆0t (gt ) ˜ 2 ◆00t (g)
( t ⌫t ) 0
⇠t Xt
◆t (gt )

⌘t =
Now recall qt = ◆0t (gt ), and Xt =

´

I xi,t di,

so ⇠t Xt = nt /kt . Plug this in to get

⌘t =

qt kt ˜ 2 ◆00t (g)
( t ⌫t ) 0
nt
◆t (gt )

44

Finally, recall ↵t =

qt kt
nt

( ˜t ⌫t )2 and the definition ✏t =

◆00
t (g)
◆0t (gt )

to get

⌘t = ↵t ✏ t
This completes the proof.

Heterogenous asset classes and intermediaries
Each intermediary has continuation utility
dUi,t =

f (ci,t , Ui,t )dt +

U,i,t dZt

+

X

(47)

˜U,i,j,t dWj,t

j

The incentive compatibility constraint requires that we expose the intermediary to idiosyncratic risk
in each of his asset classes
1/

˜U,i,j,t

@c f (ci,t , Ui,t )

ci,t

i,t qj,t ki,j,t ⌫i,j,t =

((1

1/

)Ui,t )

i,j,t qj,t ki,j,t ⌫i,j,t

0

(48)

1

The process ⇠i depends on intermediary i’s type (we get one process ⇠ for each intermediary type).
The HJB equation must then be adjusted slightly
rt ⇠i,t =

min ĉ
ĉ,k̂,

x

+µ⇠,i,t

X

qj,t k̂j ↵i,j,t + ⇠i,t

j

⇠,i,t ⇡t +

1
2

2
x

+

⇢

1
1

X1 ⇣
j

2

ĉ1

⇢

1

ĉ

1/

1/

(49)

x ⇡t

i,j,t qj,t k̂j ⌫i,j,t

⌘2

+

⇠,i,t x

The FOC for each k̂j gives us the asset pricing equation for capital for all (i, j) such that k̂i,j,t > 0,
ai,j,t
|

◆j,t (gj,t )
qj,t

0
j,t q,j,t

+ gj,t + µq,j,t +

k
(rt + ⌧j,t
)

(

j,t

+

q,j,t )⇡t

{z
risk-adjusted excess return ⌘ ↵i,j,t

1/
where ˜i,j,t = ⇠i,t ĉi,t

i,j,t .

stakes for each asset class. If

}

=

qj,t ki,j,t ˜
( i,j,t ⌫i,j,t )2
ni,t
|
{z
}
id. risk premium
(50)

Note that now the intermediary might have to keep diﬀerent equity
i,j,t

=

i,t

for all j, the equity stake is common across asset classes, and

we can implement the optimal contract with an equity constraint. Otherwise, we need an incentive
scheme that treats the returns on diﬀerent asset classes diﬀerently.
The FOC for investment in each asset class is
◆0j,t (gj,t ) = qj,t
1/

=) ĉh,t

1/

◆0j,t (gj,t )(1 + Tj,t /qj,t ) = ĉh,t
45

(qj,t + Tj,t )

(51)

Since front-loading consumption can relax the equity constraint across asset classes, the FOC
for ĉ is now
1/

⇠i,t ĉi,t

+ ⇠i,t

X

(

i,j,t qj,t k̂i,j,t ⌫i,j,t )

2

2/

ĉi,t

1

(52)

=1

j

Since households’ FOC for consumption is unchanged, we get the MRS ⇤i,t = ⇠i,t ⇣t
1/

⇤i,t =

1/

ĉi,t

+

P

ĉh,t
(

j

i,j,t ◆j,t (gj,t )k̂i,j,t ⌫i,j,t )

2 ĉ 2/
i,t

(53)

1

and the FOC for aggregate risk sharing yields
x,i,t

h

1

=

(54)

⇤i,t

The logic is the same as in the baseline model; optimal contracts give more utility to an intermediary
when the cost of his utility ⇤i,t is low.
It is still the case that every intermediary of each type gets the same policy function ĉf , k̂f,j
and

x,f

for each f = 1...F . We´ now have more endogenous state variables: for each intermediary
I

xi,t di

type f = 1...F we have Xf,t = f kt ; and for each asset class j = 1...J we have ✓j,t =
P
kt = j kj,t is the total capital stock:

kj,t
kt ,

where

X
dkt X
=
gj,t ✓j,t dt +
j,t ✓j,t dZt
kt
j
j
| {z }
| {z }
gt

t

Each intermediary type has aggregate wealth nf,t = ⇠f,t Xf,t kt , and the representative households’
P
P
wealth is wt = ( j (qj,t + Tj,t )✓j,t
f ⇠f,t Xf,t )kt . Total output from each asset class is aj,t kj,t =
⌘
P ⇣
f af,j,t k̂f,j,t Xf,t kt . Market clearing conditions must be adjusted
c̃h,t wt +

X

X

ĉf,t Xf,t =

((aj,t

(55)

◆j,t (gj,t ))✓j,t )

j

f

X

(56)

k̂f,j,t Xf,t = ✓j,t

f

The law of motion of each Xf must be adjusted:

µX,f,,t

⇢
=
1 1/

1 1/

ĉf,t
1

1/

+

2

2
x,f,t

+

X
j

X,f,t

1/

2

(ĉf,t

=

x,f,t

46

0
2
f,j,t k̂f,j,t ◆j,t (gj,t )⌫f,j,t )

t

gt

t x,f,t

+

2
t

and the law of motion of each ✓j is
d✓j,t = ✓j,t (gj,t

gt +

t ( j,t

t )) dt

+ ✓j,t (

t ) dZt

j,t

The social planner has the same laws of motion. His value function takes the form

(S(X,✓,Y )k)1
1

.

We must adjust his HJB equation, and also allow him to choose how to allocation assets to intermediaries:
⇢
1 1/

=

max
gj ,ĉf ,k̂f,j ,

x,f

⇣P

j ((aj,t

+µS + g
where µS and

S

1
2

P

◆j,t (gj,t ))✓j,t )

2
S

2

2

1/

+ (1

)

f ĉf Xf

⌘1

1/

S 1/

1

(57)
(58)

S

are obtained from Ito’s lemma on S(X, ✓, Y ).

The FOC for ĉf and
and (54), where ⇤f,t =
1/

ĉh,t

f,t are the same as in the
0 . The FOC for g is
SX
j
f

◆j,t (gj,t )(1 + ⌘j,t ) = St +

| {z }

@ch (Sk)

⌘jt =

X ⇤f,t Xf,t
f

ĉh

1/

X
f

|

⇤f,t Xf,t + S✓0 j
{z

X

✓m,t S✓0 m

m

1/

f,j,t k̂f,j,t ⌫f,j,t )

(59)
}

@kj (Sk)

(ĉf,t

✓j,t

competitive equilibrium. We get equations (53)

2 00
◆j,t (gj,t )

(60)

Comparing this FOC with (51) we see that ⌘j,t captures the externality related to asset class j,
analogous to the case with homogeneous capital and intermediaries. Here when the planner raises
the marginal cost of capital, it aﬀects idiosyncratic risk sharing for all intermediaries that hold that
asset.
The FOC for k̂f,j is
1/

ĉh,t
where

af,j,t

1/

⇤f,t (ĉf,t

0
2
f,j,t ◆j,t (gj,t )⌫f,j,t ) k̂f,j,t

=

j,t
1/

is the Lagrange multiplier on the constraint (56). Using ⇤f,t = ⇠f,t ⇣t = ⇠f,t ĉh,t , the
definition of ˜f,j,t and qj,t = ◆j,t (gj,t ) in the competitive equilibrium, we get that all intermediaries
j,t

who hold asset of class j must have the same
ai,j,t

qj,t ki,j,t ˜
( i,j,t ⌫i,j,t )2 qj,t
ni,t

which is exactly what the competitive equilibrium does according to the pricing equation (50). So
we see that ⌘j,t is still the only source of ineﬃciency in the economy. All other optimality conditions
for the planner are satisfied.

47

Proof of Proposition 3
The proof follows the same lines as the proof of Proposition 1. To establish that each intermediary’s
HJB holds, we now take derivatives on the planner’s HJB equation with respect to each Xf (instead
of a single X as before). Notice that St = S({Xf }, {✓j }, Y ), so the law of motion of the ✓0 s must
be taken into account when computing µS and

S.

Also, now we don’t have k̂ = X

1.

Instead, k̂f,j

are controls for the planner, so the envelope theorem allows us to ignore
it when taking
⌘ derivatives
P ⇣
with respect to Xf ; but Xf appears in the formula for aj,t ✓j,t = f af,j,t k̂f,j,t Xf,t and each of

the (56) constraints (for each j). Once this is taken into account, we obtain essentially the same
formulas, extended to account for heterogenous asset classes and intermediaries.

To establish the validity of the suﬃcient statistic (43) for each asset class, we follow the proof of
Proposition 2. but using expression (60):
X ⇤f,t Xf,t

⌘j,t =

ĉh

f

1/

Use ⇣t = ĉh,t

1/

1/

✓j,t

(ĉf,t

f,j,t k̂f,j,t ⌫f,j,t )

2 00
◆j,t (gj,t )

and ⇤f,t = ⇠f,t ⇣t to get
⌘j,t =

X ⇠f,t Xf,t
✓j,t

f

⌘j,t =

X Xf,t k̂f,j,t
⇠f,t ✓j,t

f

⌘j,t =

X Xf,t
✓j,t

f

1/
Now use ˜f,j,t = ⇠f,t ĉf,t

1/

(ĉf,t

f,j,t k̂f,j,t ⌫f,j,t )

1/
(⇠f,t ĉf,t

f,j,t ⌫f,j,t )

1/

f,j,t ⌫f,j,t )

k̂f,j,t (⇠f,t ĉf,t

2

2 00
◆j,t (gj,t )

◆00j,t (gj,t )
0
k̂f,j,t ◆j,t (gj,t ) 0
◆j,t (gj,t )

k̂ ◆0 (g ) ◆00 (g )
2 f,j,t j,t j,t j,t j,t
⇠f,t
◆0j,t (gj,t )

f,j,t ,

⌘j,t =

X kf,j,t
f

kj,t

( ˜f,j,t ⌫f,j,t )2

qj,t kf,j,t ◆00j,t (gj,t )
nf,t ◆0j,t (gj,t )

Notice that for any f such that k̂f,j,t > 0 we have ↵f,j,t = ( ˜f,j,t ⌫f,j,t )2
by qj,t =

◆0j,t (gj,t )

to get:
⌘j,t =

X qj,t kf,j,t
f

where ↵j,t =

P

qj,t kf,j,t
f qj,t kj,t ↵f,j,t

qj,t kj,t

qj,t kf,j,t
nf,t .

Multiply and divide

↵f,j,t ✏j,t = ↵j,t ✏j,t

is the value-weighted risk-adjusted expected excess return that inter-

mediaries obtain on assets of class j.

48

