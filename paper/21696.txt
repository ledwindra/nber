NBER WORKING PAPER SERIES

SIZE DISCOVERY
Darrell Duffie
Haoxiang Zhu
Working Paper 21696
http://www.nber.org/papers/w21696

NATIONAL BUREAU OF ECONOMIC RESEARCH
1050 Massachusetts Avenue
Cambridge, MA 02138
November 2015

For helpful discussions and comments, we thank Bruno Biais, Pierre Collin-Dufresne, Songzi Du,
Michael Fleming, Benjamin Junge, Eiichiro Kazumori, Pete Kyle, Emmanuel Moench, Sophie
Moinas, Giang Nguyen, Romans Pancs, Adriano Rampini, Mark Ready, Anders Trolle, Dimitri
Vayanos, and Robert Wilson, as well as participants at the American Economics Association
annual meeting, University of Bonn, University of Geneva, INSEAD, University of Zurich, Swiss
National Bank, HEC Paris, Federal Reserve Board, CFTC, University of Lugano, European
University Institute, Toulouse School of Economics, Wilfred Laurier University, EIEF (Banca
d'Italia), the Deutsche Bundesbank, AQR, Yale School of Management, Rice University, Georgia
State University, CKGSB (Beijing), Imperial College, London Business School, PaulWoolley
Conference, and SEC.We are especially grateful for research assistance by Jun Yan of the
Stanford Statistics Department and Hyungjune Kang of the MIT Sloan School of Management.
The views expressed herein are those of the authors and do not necessarily reflect the views of the
National Bureau of Economic Research.
NBER working papers are circulated for discussion and comment purposes. They have not been
peer-reviewed or been subject to the review by the NBER Board of Directors that accompanies
official NBER publications.
© 2015 by Darrell Duffie and Haoxiang Zhu. All rights reserved. Short sections of text, not to
exceed two paragraphs, may be quoted without explicit permission provided that full credit,
including © notice, is given to the source.

Size Discovery
Darrell Duffie and Haoxiang Zhu
NBER Working Paper No. 21696
November 2015
JEL No. D47,D82,G14
ABSTRACT
Size-discovery trade mechanisms allow large quantities of an asset to be exchanged at a price that
does not respond to price pressure. Primary examples include “workup” in Treasury markets,
“matching sessions” in corporate bond and CDS markets, and block-trading “dark pools” in
equity markets. By freezing the execution price and giving up on market-clearing, size-discovery
mechanisms overcome concerns by large investors over their price impacts. Price-discovery
mechanisms clear the market, but cause investors to internalize their price impacts, inducing
costly delays in the reduction of position imbalances. We show how augmenting a pricediscovery mechanism with a size-discovery mechanism improves allocative efficiency.

Darrell Duffie
Graduate School of Business
Stanford University
Stanford, CA 94305-7298
and NBER
duffie@stanford.edu
Haoxiang Zhu
MIT Sloan School of Management
100 Main Street, E62-623
Cambridge, MA 02142
and NBER
zhuh@mit.edu

1

Introduction

This paper characterizes equilibrium behavior in size-discovery mechanisms, by which
large transactions can be quickly arranged at fixed prices. We show that size discovery
can significantly improve allocative efficiency in markets with imperfect competition and
private information over latent supply or demand imbalances.
The issue of market liquidity has received intense attention in the last few years. The
Securities and Exchange Commission (2010) and the U.S. Department of the Treasury
(2016) raise important questions and concerns about the liquidity and design of markets
for U.S. equities and Treasuries. The “Flash Crash” on May 6, 2010 in U.S. equity and
futures markets and the “Flash Rally” on October 15, 2014 in U.S. Treasury markets were
wake-up calls that even deep liquid markets may experience extreme price movements
without obvious fundamental news (Joint CFTC-SEC Advisory Committee, 2011; Joint
Staff Report, 2015). There are widespread concerns that dealers are less willing or likely
to absorb large trade flows onto their balance sheets (Adrian, Fleming, Shachar, and Vogt,
2015).
An important aspect of market liquidity is the ability to quickly buy or sell large
quantities of an asset with a small price impact. By definition, price impact is primarily a
concern of large strategic investors—such as mutual funds, pension funds, and insurance
companies—and not of small or “price-taking” investors. Price impact is a particular concern of major financial intermediaries such as broker-dealers, who often absorb substantial
inventory positions in primary issuance markets or from their client investors, and then
seek to offload these positions in inter-dealer markets. Duffie (2010) surveys widespread
evidence of substantial price impact around large purchases and sales, even in settings
with relatively symmetric and transparent information.
To mitigate price impact, investors often split large orders into many smaller pieces
and execute them slowly over time. Order splitting is done by computer algorithms in
electronic markets and manually in voice markets. As we explain shortly, such piecemeal
execution is inefficient from an allocative perspective, given the associated costly delay
in reducing undesired positions. Investors could alternatively pass a large position to a
dealer at a price concession, but this strategy has become more costly in recent years, as
bank-affiliated dealers are subject to tighter capital and liquidity regulation.
We show that size discovery is an effective way to mitigate the allocative inefficiency
caused by strategic avoidance of price impact. Size discovery is therefore a valuable source
of block liquidity that can complement order-splitting execution strategies and marketmaking services by major dealers. Examples of size-discovery mechanisms used in practice
include:
• Workup, a trading protocol by which buyers and sellers successively increase, or

1

“work up,” the quantities of an asset that are exchanged at a fixed price. Each
participant in a workup has the option to drop out at any time. In the market for
U.S. Treasuries, Fleming and Nguyen (2015) find that workup accounts for 43% to
56% of total trading volume on the largest U.S. Treasuries trade platform, BrokerTec,
on a typical day.
• “Matching sessions,” a variant of workup found in markets for corporate bonds
and credit default swaps (CDS). For the most actively traded CDS product, CollinDufresne, Junge, and Trolle (2016) find that matching sessions or workup account
for 38% of trade volume on GFI, a major swap execution facility.
• Block-crossing “dark pools,” such as Liquidnet and POSIT, which are predominantly
used in equity markets. In a typical “midpoint” dark pool, buyers and sellers match
orders at the midpoint of the best bid price and best offer price shown on transparent
exchanges. Dark pools account for about 15% of trading volume in the U.S. equity
markets (Zhu, 2014). Certain dark pools offer limited price discovery. Others do not
use price discovery at all.
Despite some institutional differences discussed in Section 2, these various forms of
size discovery share the key feature of crossing orders at fixed prices, thus without price
impact. Although aware of the trade price, market participants conducting size discovery
are uncertain of how much of the asset they will be able to trade at that price, which is not
sensitive to their demands. One side of the market is eventually rationed, being willing to
trade more at the given price. Thus, a size-discovery mechanism cannot clear the market,
and is therefore inefficient on its own. Size discovery stands in sharp contrast to “price
discovery” trading mechanisms, which find the market-clearing price that matches supply
and demand. Nevertheless, precisely by giving up on market clearing, a size-discovery
mechanism reduces investors’ strategic incentives to dampen their immediate demands.
We show, as a consequence, that a market design combining size discovery and price
discovery offers substantial efficiency improvement over a market that relies only on price
discovery.
Our modeling approach and the intuition for our results can be roughly summarized
as follows. An asset pays a liquidating dividend at a random future time. Before this
time, double auctions for the asset are held among n strategic traders at evenly spaced
time intervals of some length ∆. Thus, the auctions are held at times 0, ∆, 2∆, and so
on. Before the first of these auctions, the inventory of the asset held by each trader has an
undesired component, positive or negative, that is not observable to other traders. Each
trader suffers a continuing cost that is increasing in his undesired inventory imbalance.
In each of the successive double auctions, traders submit demand schedules. The market
operator aggregates these demand schedules and calculates the market-clearing price, at
which total demand and supply are matched.

2

If traders were competitive “price-takers,” each would express her true demand or
supply at any given price. A double auction in this case would achieve the efficient
allocation (the First Welfare Theorem). But because traders are strategic and there are
only finitely many of them, each trader “shades” her demand schedule in order to mitigate
her own impact on the market-clearing price. For example, each trader who wishes to sell
submits a supply schedule that expresses, at each price, only a fraction of her actual
trading interest in order to reduce her own downward pressure on the market-clearing
price. The unique efficient allocation is that giving each trader the same magnitude of
undesired inventory. At each successive double auction, however, traders’ inventories
adjust only gradually toward the efficient allocation. As a result, traders with large
unwanted positions, whether short of long, may bear significant costs, relative to the
efficient allocation. These excess costs are not reduced by holding more frequent auctions.
As shown by Vayanos (1999) and Du and Zhu (2015), even if trading becomes infinitely
frequent, convergence to the efficient allocation is not instantaneous. As the time between
trading rounds become smaller, strategic incentives to avoid price impact actually become
stronger.
In summary, because of strategic bidding behavior and imperfect competition, the
sequential-double-auction market is slow in reducing allocative inefficiencies. This point
is well recognized in prior work, including the static models of Vives (2011), Rostek and
Weretka (2012), and Ausubel, Cramton, Pycia, Rostek, and Weretka (2014), as well as the
dynamic models of Vayanos (1999), Rostek and Weretka (2015), and Du and Zhu (2015).
Figure 1 illustrates the time paths of expected inventories of a buyer and a seller for
a parametric case of our sequential-double-auction market that we present later in the
paper. The two thin-line plotted curves in Figure 1 illustrate the convergence over time
of the expected inventories to those of the efficient allocation.
Now, consider an alternative market design in which traders have the opportunity
to conduct a size-discovery session, say a workup, before the first double auction. For
simplicity of exposition, we first solve the equilibrium for the special case of bilateral
workups. Any active bilateral workup session involves a trader with a negative inventory
imbalance, the “buyer,” and a trader with a positive inventory imbalance, the “seller.”
Any trader who does not enter a workup participates only in the subsequent double
auctions.
The fixed workup price is set at some given level. (We show that our results are
robust to the choice of workup price.) As mentioned, the quantity to be exchanged by
the workup’s buyer and seller is raised continually until one of the two traders drops
out. That dropout quantity of the asset is then transferred from the seller to the buyer
at the fixed workup price. Because the workup price is fixed, neither the buyer nor the
seller is concerned about price impact. They are therefore able to exchange a potentially

3

Inventory

Large buyer, no workup
Large buyer, add workup
Large seller, no workup
Large seller, add workup
Efficient inventory

Time

Figure 1: Inventory paths with and without a workup. The thin-line plots are the equilibrium inventory paths
of a buyer and a seller in sequential-double-auction market. Plotted in bold are the equilibrium inventory paths
of the same buyer and seller in a market with a workup followed by the same sequential-double-auction market.
This example is plotted for the continuous-time limit of the double-auction market.

large block of the asset immediately, leading to a significant reduction in the total cost of
maintaining undesired inventory over time.
Specifically, facing the opportunity to trade an additional unit, each workup participant chooses between (i) trading that unit immediately in the workup and (ii) exiting the
workup immediately and reserving the additional unit for later execution in the double
auctions. The optimal choice depends on two considerations. On one hand, each trader
wishes to minimize the unwanted inventory that is carried into the sequential-doubleauction market. These leftover inventories take time to optimally liquidate, involve priceimpact costs, and in the meantime are accompanied by holding costs. On the other hand,
each trader in a workup faces a “winner’s curse” regarding the subsequent double auction
price. For example, if the buyer’s offer to trade an additional unit is accepted by the seller,
the buyer will have learned that the seller has more to sell than had been expected. The
buyer would in that case have missed the chance to buy that unit in subsequent double
auctions at a price whose conditional expectation is lowered by the seller’s agreement to
continue the workup. That is, the buyer’s additional unit is more likely to be accepted
by the seller precisely if the double auction price is more likely to be lower. This winner’s
curse implies that, at some point in the workup (if the seller has not already dropped

4

out), the buyer should withhold the next additional unit from the workup and reserve
it for execution in the double-auction market at a more favorable conditional expected
price. In equilibrium, these two effects—inventory costs and winner’s curse—determine a
unique inventory threshold for dropping out of workup, which we calculate explicitly.
The two thick lines in Figure 1 illustrate the effect of augmenting the market design
with an initial workup, which causes an instant reduction in inventory imbalances. In a
simple parametric setting examined later in the paper, we show that buyers and sellers
participating in bilateral workup eliminate between 27.6% and 62.7% of the inefficiency
costs they bear from the effect of imperfect competition and the avoidance of price impact.
Variation in the cost savings within this range is determined primarily by the number of
active price-discovery market participants.
Comparative statics reveal that bilateral workups are more likely to occur and generate
higher trading volumes if the double auctions are run more frequently, if the arrival of
payoff-relevant information is less imminent, or if there are fewer traders in the market.
Under any of these conditions, traders are more sensitive to price impact because they
will liquidate their inventories more gradually, implying higher inventory holding costs.
These conditions therefore increase the welfare improvement allowed by workup.
The economic mechanism and intuition of bilateral workups also apply to a multilateral
workup, in which arbitrarily many buyers and sellers form two queues and trade at the
same fixed price, consecutively. The multilateral workup session begins (if at all) with a
workup between the first buyer and seller in their respective queues. Eventually, either
the currently active buyer or seller drops out. If, for example, the seller is the first to
drop out, it is then revealed whether there is at least one more trader remaining in the
seller’s queue, and if so whether that seller wishes to continue selling the asset at the
same price. Based on this information, the buyer may continue the workup or may choose
to drop out and be replaced by another buyer, if there is one, and so on. This process
continues until there are no more buyers or no more sellers, whichever happens first. The
equilibrium is solved in terms of the dropout threshold for the remaining inventory of an
active workup participant, which is updated as each successive counterparty drops out and
is replaced with a new counterparty. For example, when a new seller arrives and begins
to actively increase the workup quantity, the current buyer’s conditional expectation of
the total market-wide supply of the asset jumps up, and this causes the buyer’s dropout
threshold to jump up at the same time by an amount that we compute and that depends
on the history of prior workup observations. That is, with the arrival of a new active
replacement seller, the buyer infers that the conditional expected double-auction price
has become more favorable, and holds back more inventory from the workup, reserving a
greater fraction of its trading interest for the double-auction market.
For tractability reasons, our work does not address the endogenous timing of size-

5

discovery trading. Indeed, we are able to solve for equilibria with only an initializing round
of size discovery. In practice, size discovery occurs with intermittent timing, presumably
whenever position imbalances are sufficiently large on both sides of the market. Our
equilibrium solution methods, however, rely on parametric assumptions for size-discovery
prices and for the probability distribution of inventory levels entering into size discovery.
Replacing these parametric initial conditions with endogenously determined size-discovery
conditions is intractable in our framework, and we know of no tractable approaches for a
useful equilibrium analysis of intermediate-timed size discovery.
This research is positive rather than normative. Size discovery has existed in Treasury
and equity markets for decades. More recently, trade platform operators have introduced
size-discovery mechanisms for corporate bonds, CDS, and interest rate swaps. Motivated
by their wide use in practice, we solve the equilibrium behaviors in size discovery and find
that adding size discovery to conventional price-discovery markets leads to a potentially
large welfare improvement. Traders who execute a positive quantity in size discovery
strictly benefit from it; traders who participate only in the price-discovery market are not
harmed by the use by others of size-discovery mechanisms. Size-discovery mechanisms do
not, however, achieve first-best allocations. For example, traders drop out of workups prematurely from a social-welfare viewpoint, based on their equilibrium inference of expected
future pricing advantages that are merely transfers.
An alternative research goal would be a normative design of the optimal dynamic
mechanism for asset allocation, subject to incentive compatibility and budget balancing.
If the inventory-allocation problem were static, a first-best allocation could, under conditions, be achieved by the “AGV” mechanism1 of Arrow (1979) and d’Aspremont and
Gérard-Varet (1979). In a dynamic market with imperfect competition and the stochastic
arrival of new inventory shocks, static mechanisms such as AGV are no longer optimal.
Solving for an optimal dynamic mechanism is difficult, and well beyond the scope of this
paper.2
As far as we are aware, our paper is the first to explicitly model how a size-discovery
mechanism reduces allocative inefficiency caused by strategic demand reduction in pricediscovery markets. We are also the first to solve for equilibrium behavior in multilateral
workups and matching-session markets.
The only prior theoretical treatment of workup, to our knowledge, is by Pancs (2014),
who focuses on the entirely different issue of “front-running.” In Pancs’ workup model,
the seller has private information about the size of his desired trade (“block”), whereas
1

In a side communication, Romans Pancs has shown us the explicit AGV mechanism for a simple variant of
our model, based on iid original inventory positions and the assumption of no subsequent re-trade opportunities.
In the Bayes-Nash equilibrium induced by this direct mechanism, each agent truthfully reports his original excess
inventory as his type. Agents are assigned balanced-budget payments, based on their reported types.
2
In a conversation, Bruno Biais suggested the mechanism-design problem of re-allocating inventory at a given
point in time, taking as given the subsequent double-auction market.

6

the buyer is either a “front-runner” or a dealer. If the seller cannot sell his entire position
in the workup, he liquidates the remaining positions by relying on an exogenously given
outside demand curve. At any point during the workup, the front-runner may decide
to front-run the seller in the same outside demand curve. A dealer does not front-run
by assumption. Under parametric conditions, Pancs (2014) characterizes an equilibrium
in which each step of the workup transacts the smallest possible incremental quantity.
This equilibrium minimizes the front-runner’s payoff since it reveals as little information
about the seller’s block as possible. The key idea of our paper—that by freezing the price,
workup mitigates strategic avoidance of price impact in price-discovery markets—is not
considered by Pancs (2014).
Block-trading dark pools used in equity markets are also size-discovery mechanisms.
The small and parallel literature on dark pools focuses instead on the effect of dark trading
on price discovery and liquidity. Relevant papers include Hendershott and Mendelson
(2000), Degryse, Van Achter, and Wuyts (2009), Zhu (2014), and Buti, Rindi, and Werner
(2015), among others. In these models, each investor’s trading interest is one unit, two
units, or an infinitesimal amount. By characterizing allocative efficiency in the presence of
arbitrarily large trading interests, our model goes substantially beyond existing research
on the role of dark pools.
Empirical analyses of workup include those of Boni and Leach (2002, 2004), Dungey
and McKenzie (2013), Fleming and Nguyen (2015), and Huang, Cai, and Wang (2002).
Empirical studies of dark pools include Buti, Rindi, and Werner (2011), Ready (2014),
and Menkveld, Yueshen, and Zhu (2016), among many others.

2

Size Discovery in Practice

In current market practice, size discovery shows up most prominently in three forms
of trade mechanisms: workups, matching sessions, and block-crossing dark pools. This
section summarizes the institutional settings of these respective mechanisms.
Workup was introduced in the last decades of the 20th century by interdealer voice brokers3 for U.S. Treasury securities, and is now heavily used on platforms for the electronic
trading of Treasuries. The most active of these platforms are BrokerTec and eSpeed. On
BrokerTec, for example, workup is fully integrated with central limit order book trading.
Once a trade is executed on the limit order book at some price p, a workup session is
opened for potential additional trading at the same price. The original buyer and seller
and other platform participants may submit additional buy and sell orders that are executed by time priority at this workup price. Trade on the central limit order book is
meanwhile suspended. The workup session ends if either (i) the workup session has been
3

One of us was told that workup was invented at Cantor Fitzgerald, but we have not verified this.

7

idle for some specified amount of time, which has been successively reduced in recent
years and is now three seconds, or (ii) a new aggressive limit order arrives that cannot
be matched immediately at the workup price p but can be matched immediately against
a standing limit order deeper in the book. In Case (ii), the new order establishes a new
price, at which point a new workup process may begin. In Case (i), order submission
on the limit order book resumes and continues until another limit-order-book trade is
executed, kicking off another potential workup trade. This process repeats. A key feature
is the integration of workup with the limit order book; when one of these two protocols is
in process, the other is interrupted. For more details on BrokerTec’s workup protocol, see
Fleming and Nguyen (2015), Fleming, Schaumburg, and Yang (2015), and Schaumburg
and Yang (2016).
Matching sessions use a trade protocol that is a close variant of workup, and appear
most prominently on electronic platforms for trading corporate bonds4 and credit default swaps (CDS). The markets for corporate bond and CDS are distinguished by much
lower trade frequency than those for Treasuries and equities. Matching sessions, correspondingly, are less frequent and of longer duration. For example, matching sessions on
Electronfie, a corporate bond trade platform, have a duration of 10 minutes.
A distinctive feature of matching sessions is that the fixed price is typically chosen by
the platform operator. Given the incentives of the platform operator to maximize total
trading fees, the fixed price seems likely to be designed to maximize expected trading
volume. GFI, for example, chooses a matching-session price that is based, according to
SIFMA (2016), on “GFI’s own data (input from the internal feeds), TRACE data, and
input from traders.” On the CDS index trade platform operated by GFI, the matching
price “shall be determined by the Company [GFI] in its discretion, but shall be between the
best bid and best offer for such Swap that resides on the Order Book.” Collin-Dufresne,
Junge, and Trolle (2016) find that matching sessions or workup account for 38% of trade
volume for the most popular CDS index product, known as CDX.NA.IG.5yr, a composite
of 5-year CDS referencing 125 investment-grade firms, and 33% of trade volume for the
corresponding high-yield index product.
Trade platforms for interest-rate swaps also commonly incorporate workup or matchingsession mechanisms, as described by BGC (2015), GFI (2015), Tradeweb (2014), and Tradition (2015). The importance of workup for the interest-rate swap market is discussed
by Wholesale Markets Brokers’ Association (2012) and Giancarlo (2015).
Block-trading dark pools operate in equity markets in parallel to stock exchanges,
which are also referred to by market participants as “lit” venues. The dominant trade
mechanism of stock exchanges is a central limit order book. Lit venues provide the latest
4

According to SIFMA (2016), matching sessions are provided on the following corporate bond platforms:
Codestreet Dealer Pool (pending release), Electronifie, GFI, Latium (operated by GFI Group), ICAP ISAM
(pending release), ITG Posit FI, Liquidity Finance, and Tru Mid.

8

bid-ask prices continuously. Dark pools match orders at a price between the most currently
obtained bid and ask. Block-trading dark pools such as Liquidnet or POSIT typically use
the midpoint of the prevailing bid-ask prices. Most dark pools operate continuously, in
that buy and sell orders can be submitted anytime, and matching happens by time priority
when both sides are available. When dark pools are executing orders, exchange trading
continues. In current U.S. equity markets, only a few dark pools have execution sizes that
are substantially larger than those on exchanges. Most dark pools have execution sizes
similar to exchanges. For more details on dark-pool trading protocols, see Zhu (2014) and
Ready (2014).

3

Dynamic Trading in Double Auctions

This section models dynamic trading in a flexible-price market consisting of a sequence of
double auctions. Allocative inefficiency in dynamic double auction markets has already
been shown by Vayanos (1999), Rostek and Weretka (2015), and Du and Zhu (2015).5
This section merely reproduces the key thrust of their contributions in a simpler model.
(We use a simple variant of the model of Du and Zhu (2015).) We claim no significant
contribution here relative to these three cited papers. Our objective in this section is
instead to set up a price-discovery market with imperfect competition as a benchmark.
The rest of the paper then analyzes the effect of adding a size-discovery mechanism. Once
we have solved for equilibrium in this price-discovery market, the associated indirect
utilities for pre-auction inventory imbalances serve as the terminal utility functions for
the prior size-discovery stage, which is modeled in the next section.
We fix a probability space and the time domain [0, ∞). Time 0 may be interpreted as
the beginning of a trading day. The market is populated by n ≥ 3 risk-neutral traders
trading a divisible asset. The economy ends at at a random time T that is exponentially
distributed with parameter r (thus mean 1/r). At time T , the asset pays a random perunit amount π with mean v. Before time T , no information relevant to π is revealed to
any trader.
The n traders’ respective asset inventories at time 0, before any trading, are given
by a vector z0 = (z10 , z20 , . . . , zn0 ) of random variables that have non-zero finite variances. While the individual traders’ inventories may be correlated with each other, there
is independence among the asset payoff π, the revelation time T , and the vector z0 of
inventories.
At each nonnegative integer trading period k ∈ {0, 1, 2, . . . } a double auction is used to
reallocate the asset. The trading periods are separated by some clock time ∆ > 0, so that
5

Equilibrium models of static demand-schedule-submission games under imperfect competition include those
of Wilson (1979), Klemperer and Meyer (1989), Kyle (1989), Vives (2011), and Rostek and Weretka (2012).

9

the k-th auction is held at time k∆. As the first double auction begins, the information
available to trader i includes the initial inventory zi0 , but does not include6 the total
P
inventory Z0 =
i zi0 . This allows that some traders may be better informed about
Z0 than others, and may have information about Z0 going beyond their own respective
inventories.
Right before auction k + 1, trader i receives an incremental inventory shock wi,k+1 .
The random variables {wik } are i.i.d. with full support on R, mean zero, and variance
2 ∆. Besides realism, these incremental inventory shocks eliminate multiple equilibria in
σw

double auctions after time 0.
At the k-th auction, trader i submits a continuous and strictly decreasing demand
schedule. The information available to trader i at period k consists7 of the trader’s initial
information, the sequence p0 , . . . , pk−1 of prices observed in prior auctions, as well as the
trader’s current and lagged inventories, zi0 , . . . , zik . Suppressing from our notation the
dependence of the agent’s demand on the trader’s information, the demand schedule of
trader i in the k-th auction is of the form xik ( · ) : R → R, which is an agreement to buy
xik (pk ) units of the asset at the unique market-clearing price pk . Whenever it exists, this
market clearing price pk is defined by
X

xik (pk ) = 0.

(1)

i

The inventory of trader i thus satisfies the dynamic equation
zi,k+1 = zik + xik (pk ) + wi,k+1 .
The total inventory in the market right before auction k is Zk =

(2)
P

i zik .

The periodic

inventory shocks make it impossible to perfectly infer the current total inventory from
past prices. Hence, the double-auction game always has incomplete information.
This double-auction mechanism is typical of those used at the open and close of the
day on equity exchanges.8 The double-auction model captures the basic implications of
a flexible-price market in which traders are rational and internalize the equilibrium price
impacts of their own trades. In practice, participants in a multi-unit auction submit a
package of limit orders rather than a demand function. An arbitrary continuous demand
function can be well approximated with a large number of limit orders at closely spaced
6

Fixing the underlying probability space (Ω, F, P ), trader i is endowed with information given by a sub-σalgebra Fi0 of F. The inventory zi0 is measurable with respect to Fi0 , whereas the total inventory Z has a
non-zero variance conditional given Fi0 .
7
That is, the σ-algebra with respect to which the demand schedule of trader i in the k-th auction must be
measurable is the join of the initial σ-algebra Fi0 and the σ-algebra generated by {p0 , . . . , pk−1 }, {zi1 , . . . , zik },
and {wi1 , . . . , wik }.
8
See, for example, http://www.nasdaqtrader.com/content/ProductsServices/Trading/Crosses/fact sheet.pdf.

10

limit prices.
When choosing a demand schedule in period k, each trader maximizes his conditional
mean of the sum of two contributions to his final net payoff. The first contribution is
trading profit, which is the final payoff of the position held when π is revealed at time
T , net of the total purchase cost of the asset in the prior double auctions. The second
contribution is a holding cost for inventory. The cost per unit of time of holding q units of
inventory is γq 2 , for a coefficient γ > 0 that reflects the costs to the trader of holding risky
inventory.9 For simplicity, we normalize the discount rate to zero. This is a reasonable
approximation for trader inventory management in practice, at least if market interest
rates are not extremely high, because traders lay off excess inventories over relatively
short time periods, typically measured in hours or days.
In summary, for given demand schedules xi1 ( · ), xi2 ( · ), . . ., the ultimate net payoff to
be achieved by trader i, beginning at period k, is
K(T )

Uik = πzi,K(T ) −

X

Z

T

pj xij (pj ) −
k∆

j=k

2
γzi,K(t)
dt,

(3)

where K(t) = max{k : k∆ ≤ t} denotes the number of the last trading period before time
t. For given demand schedules, the continuation utility of trader i at the k-th auction,
provided it is held before the time T at which the asset payoff is realized, is thus




Vik = E Uik

Fik ,

(4)

where Fik represents the information of trader i just before the k-th auction.
Therefore, the continuation utility of trader i satisfies the recursion
Vik = −xik pk − γη(xik + zik )2 + (1 − e−r∆ )(xik + zik )v + e−r∆ E(Vi,k+1 | Fik ),

(5)

where we have used the shorthand xik for xik (pk ), and where η is the expected duration
of time from a given auction (conditional on the event that the auction is before T ) until
the earlier of the next auction time and the payoff time T :
Z
η=

∆

rt e−rt dt + e−r∆ ∆ =

0

1 − e−r∆
.
r

(6)

9
Even though they do not have direct aversion to risk, broker-dealers and asset-management firms have
extra costs for holding inventory in illiquid risky assets. These costs may be related to regulatory capital
requirements, collateral requirements, financing costs, agency costs related to the lack of transparency of the
position to higher-level firm managers or clients regarding true asset quality, as well as the expected cost of
being forced to raise liquidity by quickly disposing of remaining inventory into an illiquid market. Our quadratic
holding-cost assumption is common in models of divisible auctions, including those of Vives (2011), Rostek and
Weretka (2012), and Du and Zhu (2015).

11

The four terms on the right-hand side of (5) represent, respectively, the payment made
in the k-th double auction, the expected inventory cost to be incurred in the subsequent
period (or until the asset payoff is realized), the expectation of any asset payment to be
made in the next period multiplied by the probability that T is before the next auction, and
the conditional expected continuation utility in period k + 1 multiplied by the probability
that T is after the next auction.
In each period k, trader i selects a demand schedule xik ( · ) that maximizes the righthand side of (5), subject to the dynamic equation (2), taking as given the other traders’
demand functions from period k onward. The following proposition summarizes the resulting stationary linear equilibrium.
Proposition 1. In the game associated with the sequence of double auctions, there exists
a stationary and subgame perfect equilibrium, in which the demand schedule of trader i in
the k-th auction is given by

xik (p) = a∆
where
a∆ =

r
2γ (n − 1) +


2γ
zik ,
v−p−
r

2e−r∆
1−e−r∆

2(n − 2)
q
+ (n − 1)2 +

(7)

4e−r∆
(1−e−r∆ )2

.

(8)

The equilibrium price in auction k is
pk = v −

2γ
Zk .
nr

(9)

The bidding strategies of this equilibrium are ex-post optimal with respect to all realizations
of inventory histories. That is, trader j would not strictly benefit by deviating from the
equilibrium strategy even if he were able to observe the history of other traders’ inventories,
{zim : i 6= j, m ≤ k}.
The ex-post optimality property of the equilibrium arises from the fact that each
trader’s marginal indirect value for additional units of the asset depends only on his own
current inventory, and not on the inventories of other traders. This property will be useful
in solving the workup equilibrium.
The slope a∆ of the equilibrium supply schedule is increasing in ∆. That is, trading
is more aggressive if double auctions are conducted at a lower frequency. We also have
lim a∆ =

∆→∞

r(n − 2)
r
<
.
2γ(n − 1)
2γ

(10)

Moreover, as ∆ goes to 0, a∆ converges to 0.
The market-clearing price pk reveals the total inventory Zk at the moment of the k-th

12

auction. Because the total inventory process {Z0 , Z1 , Z2 , . . .} is a martingale, the price
process {pk } is also a martingale.
Although traders have symmetric information about the asset fundamental, uncertainty about the total inventory Zk generates uncertainty about the market-clearing price.
As we will see in the next section, uncertainty over the initial inventory Z0 is an important
determinant of the optimal strategy in the workup stage of the model.
By symmetry and the linearly decreasing nature of marginal values, the efficient allocation immediately assigns each trader the average inventory Zk /n. The double-auction
market, however, merely moves the allocation toward this equal distribution of the asset.
Specifically, by substitution, we have




2γ
Zk
2γ
zik = −a∆
zik −
,
xik = a∆ v − pk −
r
r
n


2γ
Zk
zi,k+1 = zik + xik + wi,k+1 = zik − a∆
zik −
+ wi,k+1 .
r
n

(11)
(12)

At auction k, the equilibrium trade xik eliminates only a fraction ϕ = a∆ 2γ/r of
the “excess inventory” zik − Zik /n of trader i. This partial and inefficient liquidation
of unwanted inventory is caused by imperfect competition. From (10), we have ϕ ≤
(n − 2)/(n − 1), and this bound is achieved in the limit as ∆ → ∞. As ∆ → 0, we have
a∆ → 0, and the fractional reduction ϕ of the mis-allocation of inventory converges to
zero.
Since our ultimate objective is to characterize the workup strategy at time 0, we spell
out the continuation value of each trader, evaluated at time 0, in the following proposition.
Proposition 2. Let Vi,0+ = E(Ui0 | zi0 , p0 ) denote the initial utility of trader i, evaluated
at time 0 after conditioning on the initial market-clearing price p0 , which reveals the initial
total inventory Z ≡ Z0 . We have:
"

Vi,0+

Z
γ
= v −
n
r

 2 # 



γ 
Z
Z
γ 1 − 2a∆ r
Z 2
γZ
+ v−2
zi0 −
−
zi0 −
+ Θ,
n
rn
n
r n−1
n
(13)

where Θ < 0 is a constant whose expression is provided in Appendix A.2.
The first term of (13) is the total utility of trader i in the event that trader i already
holds the initial efficient allocation Z/n. The second term of (13) is the amount that
could be hypothetically received by trader i for immediately selling the entire excess
inventory, zi0 − Z/n, at the market-clearing price, v − 2γZ/(rn). But this immediate
beneficial reallocation of the asset does not actually occur because traders strategically
shade their bids to reduce the price impact of their orders. This price-impact-induced drag
on each trader’s expected ultimate net payoff, or “utility,” is captured by the third term

13

of (13), which is the utility loss caused by the fact that the demand schedule of trader
i in each auction is decreasing in a∆ . The constant Θ captures the additional allocative
2 = 0, then Θ = 0.) The loss of
inefficiency caused by periodic inventory shocks. (If σw
P
welfare associated with the initial inventory allocation is proportional to i (zi0 − Z0 /n)2 ,

a natural welfare metric formalized in Appendix C.
Moreover, because a∆ is increasing in ∆, each trader’s utility loss gets larger as ∆
gets smaller. The basic intuition is as follows. (See Du and Zhu (2015) for a detailed
discussion.) Although a smaller ∆ gives traders more opportunities to trade, they are
also strictly less aggressive in each trading round. A smaller ∆ makes allocations less
efficient in early rounds but more efficient in late rounds. Traders value early-round
efficiency more because of the effective “time discounting” e−r∆ . The net effect is that
allocative efficiency is worse if ∆ is smaller.
Appendix B provides the continuous-time limit of the discrete-time double auction
model, and shows that this limit matches the equilibrium of the continuous-time version
of the double-auction model.

4

Introducing Workup for Size Discovery

We saw in the previous section that successive rounds of double auctions move the inventories of the traders toward a common level. This reduction in inventory dispersion is
only gradual, however, because at each round, each trader internalizes the price impact
caused by his own quantity demands, and thus “shades” his demand schedule so as to
trade off inventory holding costs against price impact.
We now examine the effect of introducing at time 0 a size-discovery mechanism, taken
for concreteness to be a workup session, that gives traders the opportunity to reduce
the magnitudes of their excess inventories without concern over price impact. It would
be natural in practice to run a workup session whenever traders’ inventories have been
significantly disrupted. In the U.S. Treasury market, for example, primary dealers’ positions can be suddenly pushed out of balance by unexpectedly large or small awards in a
Treasury auction. Individual dealers’ inventories could also be disrupted by large surges
of demand or supply from their buy-side clients. We show that workup immediately reallocates a potentially large amount of inventory imbalances, which improves allocative
efficiency relative to the double-auction market without a workup.

4.1

A model of bilateral workup

As in the previous section, the inventories of the n traders at time 0, before any trading,
are given by {zi0 }. For expositional simplicity, we first consider a setting in which each
of an arbitrary number of bilateral workup sessions is conducted between an exogenously

14

matched pair of traders, one with negative inventory, “the buyer,” and one with positive
inventory, “the seller.” Any trader not participating in one of the bilateral workup sessions
is active only in the subsequent double-auction market. Information held by a pair of
workup participants regarding participation in other workup sessions plays no role in our
model. That is, the equilibrium for the bilateral workup sessions and the subsequent
double auctions is unaffected by information held by the participants in a given workup
regarding how many other workup sessions are held and which traders are participating in
them. For simplicity, we do not model the endogenous matching of workup partners. In
Section 5, we generalize the model to cover a more realistic multilateral workup session.
Without loss of generality, in a given bilateral workup session, the seller is Trader 1,
with initial inventory S s = z10 > 0, and the buyer is Trader 2, with initial inventory
S b = z20 < 0. These two absolute inventory magnitudes, S s and |S b |, are assumed to be
iid exponential variables with parameter µ, or mean 1/µ. In order to characterize equilibrium in a bilateral workup, it is enough to assume that the sum of the initial inventories
z30 , . . . , zn0 of the other n − 2 traders has mean zero and is independent of S s and S b .
However, for a convenient welfare analysis, we also assume that these initializing inventories have magnitudes with the same exponential distribution. Specifically, z30 , . . . , zn0
are iid with the density function f ( · ) given by
1
f (z) = µe−µ|z| ,
2

z ∈ (−∞, ∞).

(14)

The workup price p̄ is set without the use of information about traders’ privately
observed inventories, and therefore at some deterministic level p̄. We will provide an
interval of choices for p̄ that is necessary and sufficient for interior equilibrium workup
dropout policies. We will also show that the allocative efficiency improvement of workup
is invariant to changes in the workup price p̄ within this interval. A natural choice for
p̄ is the unconditional expectation of the asset payoff v, which can be interpreted as the
expectation of the clearing price in the subsequent double-auction market, or as the price
achieved in a previous round of auction-based trade, before new inventory shocks instigate
a desire by traders to lay off their new unwanted inventories.
After each of a given pair of participants in a workup privately observes his own
inventory, the workup proceeds in steps as follows:
1. The workup operator announces the workup price p̄.
2. The workup operator provides a continual display, observable to buyer and seller,
of the quantity Q(t) of the asset that has been exchanged in the workup by time t
on the workup “clock.” The units of time on the workup clock are arbitrary, and
the function Q( · ) is any strictly increasing continuous function satisfying Q(0) = 0
and limt→∞ Q(t) = ∞. For example, we can take Q(t) = t. The workup clock can

15

run arbitrarily quickly, so workup can take essentially no time to complete. This
mechanism is essentially the “button mechanism” described in Pancs (2014).
3. At any finite time Tb on the workup clock, or equivalently at any quantity Qb =
Q(Tb ), the buyer can drop out of the workup. Likewise, the seller can drop out at
any time Ts or quantity Qs = Q(Ts ). The workup stops at time T ∗ = min(Ts , Tb ),
at which the quantity Q∗ = Q(T ∗ ) = min(Qb , Qs ) is transferred from seller to buyer
at the workup price p̄, that is, for the total amount p̄ Q∗ .
After the bilateral workups terminate, all traders enter the sequence of double auctions
described in Section 3.
As mentioned in the introduction, the workup procedure modeled here is similar to
the matching mechanism used by certain dark pools, such as Liquidnet and POSIT, that
specialize in executing large equity orders from institutional investors. In a dark-pool
transaction with one buyer and one seller, each side privately submits a desired trade
size to the dark pool, understanding that the dark pool would execute a trade for the
minimum of the buyer’s and seller’s desired quantities. In a bilateral setting, workup and
dark-pool matching are thus equivalent.

4.2

Characterizing the workup equilibrium

This section characterizes the equilibrium behavior of the two traders in a given bilateral
workup session.
Any trader’s strategy in the subsequent double-auction market, solved in Proposition 1,
depends only on that trader’s inventory level. Thus any public reporting, to all n traders,
of the workup transaction volume plays no role in the subsequent double-auction analysis.
Moreover, the potential learning of a trader during the workup of information about
other trader’s inventory does not affect either trader’s subsequent strategies in the double
auctions.
We conjecture the following equilibrium workup strategies. The buyer allows the
workup transaction size to increase until the time Tb at which his residual inventory size
|S b + Q(Tb )| is equal to some threshold Mb ∈ R+ . The seller likewise chooses a dropout
time Ts at which his residual inventory size S s − Q(Ts ) reaches some Ms ∈ R+ . One
trader’s dropout is of course preempted by the other’s. A threshold equilibrium is a pair
(Mb , Ms ) ∈ R2+ with the property that Mb maximizes the conditional expected payoff of
buyer given the seller’s threshold Ms and conditional on the buyer’s inventory S b , and
vice versa. We emphasize that, given Ms , the buyer is not restricted to a deterministic
threshold, and vice versa. The dropout thresholds (Mb , Ms ) are illustrated below.
Buyer’s inventory

−Mb

Ms
0

16

Seller’s inventory

The equilibrium is stated in the following proposition.
Proposition 3. We define
1 − 2a∆ γ/r
,
n−1
1
n−1
.
M=
2
n + n C/(1 − C) µ
C=

(15)
(16)

Suppose that the workup price p̄ satisfies
|p̄ − v| ≤

2γM [C + (1 − C)(3n − 2)/n2 ]
.
r

(17)

The workup session has a unique equilibrium in deterministic dropout-inventory strategies.
The buyer’s and seller’s dropout levels, Mb and Ms , for residual inventory are given by
n−1
1
+ δ = M + δ,
n + n2 C/(1 − C) µ
1
n−1
− δ = M − δ,
Ms =
2
n + n C/(1 − C) µ
Mb =

(18)
(19)

where M is the dropout quantity for the unbiased price p̄ = v, and where
δ=

r
p̄ − v
.
2γ C + (1 − C)(3n − 2)/n2

(20)

That is, in equilibrium, the buyer and seller allow the workup quantity to increase until
the magnitude of their residual inventories reach Mb or Ms , respectively, or until the other
trader has dropped out, whichever comes first.
Proposition 3 shows that as long as the workup price is not too biased, the two workup
participants do not generally attempt to liquidate all of their inventories during the workup
(in that Mb > 0 and Ms > 0). Their optimal target inventories are determined by two
countervailing incentives. On one hand, because of the slow convergence of a trader’s
inventory to efficient levels during the subsequent double-auction market, each trader has
an incentive to execute large block trades in the workup. On the other hand, a trader
faces winner’s curse regarding the total inventory Z and the double-auction prices. For
example, if the buyer’s expectation of the future auction price is lower than the workup
price p̄, the buyer would be better off buying some of the asset in the subsequent auction
market, despite the associated price impact. This incentive encourages inefficient “selfrationing” in the workup. A symmetric argument holds for the seller. Depending on a
trader’s conditional expectation of the total market excess inventory Z, which changes as
the workup progresses, the trader sets an endogenous dropout inventory threshold such
that the two incentives are optimally balanced. In setting his optimal target inventory,

17

a trader does not attempt to strategically manipulate the other trader’s inference of the
total inventory Z, because optimal auction strategies do not depend on conditional beliefs
about Z.
It is intuitive that a biased workup price causes asymmetric dropout behavior. If
p̄ > v, the buyer views the workup price to be less favorable than the expected double
auction price, but the seller views the workup price to be more favorable. Thus, the buyer
is more cautious than the seller in the workup, in that the buyer’s dropout level is higher
than the seller’s. The opposite is true if p̄ < v.
Figure 2 illustrates the impact of the workup on the undesired inventory levels of the
two traders. In this simple example, there are n = 5 traders and one bilateral workup
session. The workup price is p̄ = v. The two workup participants have mean inventory
size 1/µ = 1. We calculate the equilibrium outcome of the workup when the outcome of
the workup buyer’s pre-workup inventory S b is −2, the outcome of the workup seller’s preworkup inventory S s is 1.5, and the outcomes of all of the other traders’ initial inventories
are zero. The outcome for the efficient allocation of all traders is Z/n = −0.1. We focus on
the continuous-time sequential-double-auction market. The equilibrium workup dropout
threshold is in this case M = 0.3. Because we have the outcome that |S b | > |S s |, the
seller exits the workup first, after executing the quantity 1.5 − 0.3 = 1.2. The seller’s
inventory after the workup is 0.3, whereas the buyer’s inventory after the workup is
−(2 − 1.2) = −0.8.
Workup enables a quick and significant reduction in inventory imbalances. No trader
suffers a loss in expected net benefit, relative to a market without workup, whether or not
the trader participates in workup, as can be checked from (13). Thus, adding workup is
a Pareto improvement, and is a strictly positive ex ante utility benefit to any trader with
access to workup. Of course, adding any voluntary exchange mechanism in advance of the
sequential double auction market is at least a weak Pareto improvement. Comparisons
among alternative mechanisms can be based on whether traders strictly benefit, and by
how much. In the next subsection, we show that workup provides a gain in efficiency that
can be quite substantial.
By comparison, suppose we replace the workup step in our model with a special initializing double auction, whose equilibrium bidding strategies are not restricted to be
of the same form as those in subsequent double auctions.10 We show in Appendix D
that this initial double auction generates no trade at all (under symmetric linear strategies). Intuitively, in equilibrium, traders are unwilling to incur any price-impact costs in
the initializing double auction because there is no subsequent period of time over which
inventory costs can be reduced by trade before the regular opening of the stationary sequential double auction market. A price-discovery mechanism, such as this initializing
10

We thank Pete Kyle for suggesting this experiment, in order to provide a comparison with workup.

18

1.5
Large buyer, no workup
Large buyer, add workup
Large seller, no workup
Large seller, add workup
Efficient inventory

1

Inventory

0.5
0
-0.5
-1
-1.5
-2
0

2

4

6

8

10

12

14

16

18

20

Time

Figure 2: Immediate inventory imbalance reduction by workup. Parameters: n = 5, µ = 1, r = 0.1, γ = 0.05,
∆ = 0, S b = −1.5, S s = 2. The outcomes of the inventories of traders not entering workup are zero.
double auction, always has price impact—the market-clearing price must be adjusted to
match demand and supply. In contrast, augmenting with a size-discovery mechanism like
workup avoids price impact, and so can generate a substantial volume of beneficial trade,
because the price is fixed. Thus, while adding any voluntary exchange mechanism held
before the sequential double auction offers at least a weak improvement in allocative efficiency, obtaining a non-trivial improvement requires at least some care with the design of
the mechanism. Size-discovery mechanisms have some appeal over price-discovery mechanisms, in this context. We do not, however, rule out the existence of yet other mechanism
designs that would strictly improve over workup in terms of efficiency gain. Our focus on
size discovery is especially motivated by its widespread use in practice.

4.3

Equilibrium outcomes of the workup equilibrium

Now we discuss the outcomes of the bilateral workup equilibrium, including the probability of active workup participation, the expected trading volume, and welfare improvement
between the buyer and the seller. Not only do these equilibrium outcomes help to quantify
the potential efficiency improvement brought by size discovery, they also lead to empirically testable predictions.

19

Between a randomly selected buyer and a randomly selected seller, the probability of
triggering an active bilateral workup between them is
P ≡ P (S s > Ms , |S b | > Mb ) = e−µ(M +δ) e−µ(M −δ) = e−2µM ,

(21)

which is decreasing in M and does not depend on p̄, within the range of interior solutions.
Moreover, by substituting (16), we calculate that

P = exp −

2(n − 1)
n + n2 C/(1 − C)


.

(22)

That is, the probability of having an active workup between a given buyer-seller pair does
not depend on the average inventory sizes in the market. This probability P of active
workup depends instead on the competitiveness of the double-auction market (which is
captured by the number n of traders), the mean arrival rate r of price-relevant information,
and the auction-market frequency (1/∆). We will discuss these comparative statics in
detail shortly.
Within the range of workup prices at which dropout thresholds are interior, the expected workup trade volume is given by11
Q≡E





b

s

min |S | − Mb , S − Ms

+ 

=

1 n+n−2(n−1)
e−2µM
=
e 2 C/(1−C) ,
2µ
2µ

(23)

which is decreasing in M and is invariant to δ in the interval [0, M ].
Appendix C shows that for δ ∈ [0, M ] and assuming zero inventory shocks after time
0, the total welfare improvement achieved by workup between the buyer and the seller is
2e−2M µ (1 + M µ)
,
µ2

(24)

which is also decreasing in M and invariant to the workup price p̄.
Further, based on calculations shown in Appendix C, the fraction of the total inefficiency costs of the buyer and the seller that is eliminated by their participation in the
11

The expected workup volume is expressed as
Z ∞
Z ∞
µe−µx µe−µy min(x − (M + δ), y − (M − δ)) dx dy.
x=M +δ

y=M −δ

By the change of variables u = x − M − δ and w = y − M + δ, the integral is re-expressed as
Z ∞ Z ∞
Z ∞ Z ∞
−µ(u+M +δ)
−µ(w+M −δ)
−2µM
µe
µe−µu µe−µw min(u, w) du dw.
µe
min(u, w) du dw = e
u=0

w=0

u=0

The expected workup volume is thus obtained by direct calculation.

20

w=0

bilateral workup is
R=

n
e−2M µ (1 + M µ).
2(n − 1)

(25)

(Here again, R is derived assuming zero inventory shocks after time 0.) Because e−2M µ (1+
M µ) is decreasing in M , which in turn is increasing in n, this proportional cost reduction
R decreases with the number n of market participants. That is, in terms of its relative
effectiveness in eliminating inventory-cost inefficiencies caused by imperfect competition
in price-discovery markets, workup is more valuable for markets with fewer participants.
For the continuous-time version of the double-auction market (or in the limit as ∆
goes to zero), we have simply
R=

3n − 2 −(n−2)/n
e
.
4(n − 1)

(26)

For n = 3, this cost-reduction ratio is R = 0.627. As n gets large, R → 0.75e−1 = 0.276.
So, buyers and sellers participating in bilateral workup eliminate between 27.6% and 62.7%
of the inefficiency costs caused by imperfect competition and avoidance of price impact.

Welfare cost reduction R

Figure 3 shows how R declines with the number n of market participants.
0.7
0.6
0.5
0.4
0.3
0.2
0

5

10

15

20

25

30

35

40

45

50

n

Figure 3: The proportional welfare improvement of traders participating in workup. The plot shows the fraction
R of the total inefficiency cost of the buyer and the seller that is eliminated by their participation in bilateral
workup.

4.4

Comparative statics and empirical implications

We have just shown that the probability of triggering an active workup and the expected
workup trading volume are decreasing in the workup inventory dropout threshold M .
Now, we discuss how this threshold M varies with changes in the primitive parameters

21

∆, r, and n. These comparative statics reveal how the attractiveness of the size-discovery
workup mechanism varies with market conditions.
First, we can show that the inventory threshold M is strictly increasing12 in ∆. That
is, the smaller is ∆ (the more frequent the double auctions), the smaller is M , and the
more active is workup. Intuitively, reducing ∆ discourages aggressive auction trading
because of the increased frequency of trading opportunities, leading to a slower rate of
convergence to efficient inventory levels. This welfare cost of frequent trading is also
discussed by Vayanos (1999) and Du and Zhu (2015).
As the double auctions become more frequent, that is as ∆ goes to zero, we know
that a∆ → 0 and thus C → 1/(n − 1). In this case, M converges downward to the
continual-auction limit

n−21
,
2n µ

(27)

and the probability of triggering a workup becomes maximal, at e−(n−2)/n . At this
continuous-time limit, which is the same as the behavior of the corresponding continuousauction model shown in Appendix B, the probability of triggering a workup decreases
in n. Intuitively, the double auction market becomes more efficient as the number n of
participants grows, getting closer and closer to price-taking competitive behavior. Hence,
as n grows, there is less allocative benefit from size discovery. In fact, we can show that
M increases with n regardless of the model parameters. (For details, see Appendix A.4.)
For example, in a market with n = 20 traders, if workup is preceded by a continuoustime auction market, the probability of active workup is e−18/20 ≈ 0.41. With only n = 5
traders, this active-workup probability increases to e−3/5 ≈ 0.55.
We also have

γ
d 
1 − 2a∆
< 0.
dr
r

(28)

That is, the lower is the mean arrival rate of the final asset payoff, the smaller is M , and
12

To this end, let
γ
ζ(∆) ≡ 1 − 2a∆ =
r

p

(n − 1)2 (1 − e−r∆ )2 + 4e−r∆ − (n − 1)(1 − e−r∆ )
.
2e−r∆

By Proposition 2, ζ(∆) is the fraction of excess inventory that remains after each successive double auction.
The smaller is ζ(∆), the more aggressive are traders’ submitted demand schedules. The constant γ that scales
the quadratic inventory cost does not in itself affect ζ(∆) or M . This is perhaps surprising, but follows from
the fact that the aggressiveness of demand schedules fully offsets the effect of γ, causing a∆ γ to be invariant to
γ. By calculation,
r



1
2 (er∆ − 1)2 + 4er∆ − 4 1 −
(n
−
1)
(n−1)2

rer∆ (n − 1) 

p
ζ 0 (∆) =
− 1

 < 0.
2
(n − 1)2 (er∆ − 1)2 + 4er∆
Thus, because M is strictly decreasing in C = ζ(∆)/(n − 1), M is strictly increasing in ∆.

22

the more likely it is that an active workup is triggered. Intuitively, the more delayed is the
final determination of asset payoffs, the less aggressive are traders in their double-auction
demand schedules, which in turn increases the attractiveness of using workup to quickly
reduce inventory imbalances.
These comparative statics are summarized as follows.
Proposition 4. All else equal, for a given buyer-seller pair, the probability of having a
positive-volume workup and the expected workup volume are higher (that is, M is lower)
if:
1. The frequency of subsequent double auctions is higher (∆ is smaller).
2. The number n of traders is lower.
3. The mean arrival rate of asset payoff news r is lower.
The results of Proposition 4 can be formulated as empirical predictions. For that
purpose, one would want reasonable proxies for ∆, n, and r. A proxy for ∆ is the mean
inter-trade time. A speed “upgrade” corresponds to a smaller ∆. The number n of
traders could be estimated by the number of active (or sufficiently active) participants on
a particular electronic trading platform. Alternatively, n could be proxied by the concentration of trading activity among the top participants (higher concentration corresponds
to smaller n). Thus, bond markets and OTC derivatives markets, which remain largely
dealer-centric today, have a smaller effective n than equity markets and exchange-traded
derivatives markets. Finally, the mean rate r of payoff arrival information may be proxied
by the arrival rate of important news, even scheduled news such as a scheduled press
release of the Federal Open Market Committee (FOMC), a macroeconomic data release,
or an earnings announcement.
To the best of our knowledge, these predictions are new to the literature. The only
other theory paper on workup we are aware of, Pancs (2014), emphasizes the benefit of
workup in reducing information leakage and front-running, but does not make predictions
linking workup activity and market conditions.
The comparative statics of workup volume in Proposition 4 are based on a bilateral
workup between a randomly selected buyer and a randomly selected seller, but we can
also consider the implications for the total expected volume of all bilateral workups. For a
fixed number n of traders, the expected number of buyer-seller pairs arising from random
matching is
K(n) ≡

n
X
j=0

 
n −n
min(j, n − j)
2 .
j

(29)

Thus, Parts 1 and 3 of Proposition 4 predict that, all else equal (in particular, fixing
n), the expected volume in all bilateral workups, K(n)e−2µM /2µ, is decreasing in ∆ and

23

r. However, the comparative statics of total workup volume with respect to n could be
ambiguous because K(n) is generally increasing in n.
Our theory may also be useful in interpreting the evidence of Fleming and Nguyen
(2015), who analyze workup trading on BrokerTec, the largest electronic trading venue
for U.S. Treasury securities, from 2006 to 2011. An obvious caveat here is that our model
does not capture some important institutional aspects of the BrokerTec platform. For
instance, the sequential double auction setting of our model is not the same as a limit
order book in practice. Moreover, our model has a single workup, whereas workups happen
frequently on BrokerTec. Given these caveats, in order to stay as closely to the theory
as possible, we focus on the evidence presented by Fleming and Nguyen that is related
to workup probability and volume. Specifically, Fleming and Nguyen (2015) find that
workups are more frequent and involve a larger total dollar volume if: (i) pre-workup
inside depth on the limit order book is higher, (ii) pre-workup trading reveals hidden
depth (iceberg orders), or (iii) pre-workup price volatility is higher.13
Information regarding the depth of the pre-workup order book may be relevant in two
ways, and these two channels turn out to generate opposite empirical predictions. On
one hand, to the extent that the behavior of a practical limit order book is captured by
double-auction theory, a deeper limit order book is associated in our model with higher
levels of n, ∆, or r. The number n of active market participants and the market trading
frequency 1/∆ are unlikely to change significantly during a given trading day. However,
the intensity r of news arrival is likely to be associated in practice with an urgency to
trade, which could easily change during a trading day. Thus, other things equal, a deeper
order book may be associated with a higher mean rate r of news arrival, and thus, through
our model, with less active workup.
On the other hand, greater pre-workup order-book depth is likely to reveal a greater latent trading interest among market participants. Pre-workup information is not captured
in our theory because our model commences with a workup. Nevertheless, the effect of
revealing trade interest in advance of the workup could be approximated in our model by
holding the unconditional mean absolute sizes of inventories of individual traders constant
while lowering the unconditional variance of Z. Specifically, rather than exponential with
mean 1/µ, suppose that the pre-workup absolute inventory size of trader i is of the form
α + Si , where α is a positive constant and Si is exponential with mean 1/ν = 1/µ − α, so
that the unconditional mean is invariant to α. We can thus interpret a larger α as a setting
with more information concerning the pre-workup order book and latent trading interest.
13

Fleming and Nguyen (2015) also find that workups are more frequent and generate a larger total dollar
volume if workup likelihood or volume is higher in the previous 5 minutes and when trade is during U.S. trading
hours. The relationship between workup probability and volume, on one side, and pre-workup order book spread
or volume, on the other side, varies with the maturity of the underlying treasuries. For more details, see their
Table 9.

24

Suppose, too, that the workup price is unbiased, in that p̄ = v. In this extended model,
the buyer and the seller in the bilateral workup would effectively begin their workup by
executing α for sure. As for the remaining undesired inventory quantities S1 and S2 , the
dropout thresholds are of the same form shown in (18)–(19), but with 1/µ replaced with
1/ν and δ replaced with zero. The expected bilateral workup volume is thereby raised
from the level Q given by (23) for the base-case model to14


1
2(n − 1)
α+
> Q.
exp −
2ν
n + n2 C/(1 − C)

(30)

In effect, revealing information about trade interest in the pre-workup order book reduces
the effect of the winner’s curse during the workup, and thus increases workup volume.
In summary, on the basis of our model, a deeper pre-workup order book may represent
either a higher urgency to trade that is predictive of lower workup activity, or alternatively,
could be predictive of higher subsequent workup activity due to a reduction in winner’s
curse related to a reduction in inventory uncertainty. While both channels may be at
play, the data sample examined by Fleming and Nguyen (2015) is more consistent with
the latter effect.
The positive relationship between workup probability (or volume) and pre-workup
volatility may be interpreted similarly. Volatility may represent illiquidity, or price discovery, or both. To the extent that greater volatility is related to less liquidity, which may
be represented in our model with a smaller mean rate r of arrival of payoff information,
the impact indicated by the model is a higher workup probability and volume. If greater
volatility is instead representative of a higher amount of price discovery, which in our
model corresponds to information about total inventory, then the argument given above
suggests that a higher pre-workup volatility reduces the winner’s curse during workup and
thus increases workup probability and volume. In other words, the two channels associated with a higher volatility—lower liquidity and more information about latent trading
interest—are associated through our model with the same predicted impact on workup
activity, and agree in this regard with the evidence in the data.

5

Multilateral Workups

In Section 4 we solved the equilibrium for bilateral workup sessions, and showed that
workup provides size-discovery welfare benefits. This section extends our results to dynamic multilateral workups, which are more commonly used in practice, for example on
electronic trading platforms. The intuition for the allocative efficiency benefits of sizediscovery is similar to that for the simpler case of bilateral workup. Moreover, additional
14



The inequality applies because α = 1/µ − 1/ν and exp − n+n2(n−1)
< 1.
2 C/(1−C)

25

insights are gained from the equilibrium dynamic dropout policies in multilateral workups.
We take the numbers Nb of buyers and Ns of sellers to be initially unobservable, independent, and having the same geometric distribution. Specifically, for any non-negative
integer k,
P (Nb = k) = P (Ns = k) = f (k) ≡ q k (1 − q),

(31)

for some q ∈ (0, 1). We have E(Nb ) = E(Ns ) = q/(1 − q). The interpretation is that after
each buyer exits the workup, there is a new buyer with probability q, and likewise for
sellers. (The multilateral workup model is difficult to solve with a deterministic number
of traders.15 )
Although it is natural that the number of institutional investors and financial intermediaries seeking to trade large positions is unobservable and stochastic, as we have
assumed here, we are forced for reasons of tractability to assume that once trading in the
double-auction market begins, the total number of market participants is revealed to all.
(Otherwise, the analysis of the double auction market would be overly complicated.)
Pre-workup inventories are positive for sellers and negative for buyers. For both buyers
and sellers, the absolute magnitudes of pre-workup inventory sizes are iid exponentially
distributed, with parameter µ, thus with mean 1/µ. The numbers of buyers and sellers
and the pre-workup inventory sizes are independent. Before participating in workup, each
trader observes only his own inventory.
It follows from the independence assumptions and the memoryless property of the
geometric distribution that, conditioning on all information available to a trader during
his turn at workup, the conditional distribution of the numbers of buyers and sellers that
have not yet entered workup retain their original independent geometric distributions.
As in Section 4, the workup session takes place before the start of the double-auction
market. The workup begins by pairing the first buyer and first seller. During the workup,
the exit from workup of the i-th buyer causes the (i + 1)-st buyer to begin workup,
provided Nb > i. The (i + 1)-st buyer can then choose whether to begin actively buying
or to immediately drop out without trading. Similarly, when seller j exits, he is replaced
with another seller if Ns > j. The exit of a trader, whether a buyer or a seller, and
the replacement of the trader is observable to everyone when it occurs. (The identities
of the exiting traders are irrelevant, and not reported, beyond whether they are buyers
or sellers.) The quantities executed by each departing trader are also observable. In
particular, the event that a trader drops out of workup without executing any quantity
is also observable. The workup ends when buyer number Nb exits or when seller number
Ns exits, whichever is first.
Throughout this section, we assume for simplicity that the workup price p̄ is set at the
15

The bilateral workup model can be solved if the number of buyers and the number of sellers are geometrically
distributed. The explicit calculations are more involved but available upon request.

26

expectation of the subsequent auction price p0 , which is v.
At any given point during the workup, the state vector on which the equilibrium
strategies depend is of the form (m, X, y), where:
m is the total number of buyers and sellers that have already entered workup, including
the current buyer and seller.
X is the total conditional expected inventory held by previously exited participants,
given all currently available information. Given our information structure, this conditional expectation is common to all workup participants.
y is the quantity that the current workup pair has already executed. We emphasize
that y = 0 corresponds to a state in which the current workup pair have yet to
execute any trade, allowing for the positive-probability event that at least one of
them may drop out of workup without executing any quantity.
We let Mb (m, X) > 0 and Ms (m, X) > 0 be the conjectured dropout thresholds
of the current buyer and seller, respectively, in a workup state (m, X, y) that is active,
meaning y > 0. That is, when the workup state is active, the current buyer drops out
once the absolute magnitude of his remaining inventory has been reduced to Mb (m, X).
We conjecture and later verify an equilibrium in which these thresholds depend only on
(m, X), and not on a trader’s current inventory or on other aspects of the observable
history of the game. We call any equilibrium of this form an “equilibrium in Markovian
threshold dropout strategies.”
The distinction between an active workup pair (y > 0) and a matched but currently
inactive pair (y = 0) is important to the equilibrium policies. Suppose, for example, that
we are in an active state for the first buyer and first seller. That is, the first buyer and
the first seller have executed a positive quantity y in the workup, and nothing else has
yet happened. As we will show later, because X = 0, the buyer and the seller use a
common dropout threshold, say M0 . If, for example, the buyer exits, then every workup
participant infers that the buyer’s residual inventory level is −M0 . By contrast, at an
inactive state, if the buyer immediately exits, then everyone else learns that the buyer’s
inventory size is at most M0 , and in particular is distributed with a truncated exponential
distribution, with the conditional expectation ν(M0 ), where, for any positive number y,
Ry
ν(y) ≡

−µx dx
x=0 xµe
1 − e−µy

< y.

(32)

Thus, whether a trader exits without trading a strictly positive amount affects the inference of all traders.
The dropout thresholds in the multilateral workup depend on the same tradeoff as in
bilateral workups. On the one hand, a trader with a sufficiently large inventory size wishes

27

to liquidate some inventory in the workup. On the other hand, the trader tries to avoid
liquidating “too much” in the workup because the conditional expectation of subsequent
double auction prices may move in his favor. In the bilateral workup, this tradeoff leads
to dropout inventory thresholds that are constants. In multilateral workup, the dropout
thresholds depend on the state (m, X), as summarized in the following proposition.
Proposition 5. Suppose that p̄ = v. A necessary condition for a Markov equilibrium
is that the inventory dropout thresholds of the buyer and the seller in the current active
workup are, respectively:
Mb (m, X) = M ∗ (m) + L(m)X

(33)

Ms (m, X) = M ∗ (m) − L(m)X,

(34)

where, letting g(k) = (k + 1)q k (1 − q)2 and n = m + k,
P∞
n−1
1
k=0 g(k)(1 − C(n)) n2


M (m) =
µ P∞ g(k) C(n) + 1−C(n)

(35)

P∞
g(k) 1−C(n)
n
k=0
.
L(m) = P
(1−C(n))(3n−2)
∞
g(k)
C(n)
+
k=0
n2

(36)

∗

k=0

and

n

The symmetric and opposite roles of X for the buyer and the seller thresholds is
intuitive. In a multilateral workup, the role of the conditional expected total inventory
X of those traders who have already exited workup is similar to the role of the workup
price “bias” p̄ − v in the bilateral workup equilibrium described by Proposition 3. For
example, as X increases, the conditional expected market-clearing price of the subsequent
double auctions falls. This encourages the current buyer to reserve more of her planned
amount of buying for the subsequent double-auction market (a larger Mb (m, X)), and
encourages the seller to reserve less inventory for sale in the double-auction market (a
smaller Ms (m, X)). The opposite is true for a decrease in X.
In order for the above conjectured strategies to be consistent, we need to prove that the
thresholds of incumbents are weakly increasing with each dropout, and that the thresholds
are always nonnegative. That is, we need to show that
Mb (m + 1, X 0 ) ≥ Mb (m, X),

(37)

Ms (m + 1, X 0 ) ≥ Ms (m, X),

(38)

Mb (m, X) ≥ 0,

(39)

Ms (m, X) ≥ 0,

(40)

28

for any possible successive outcomes X and X 0 of the conditional expected inventory of
departed workup participants (before and after a dropout).
The monotonicity of the thresholds, (37)–(38), means that after the exit of a trader,
his counterparty’s dropout threshold (weakly) increases. For example, if the current seller
j exits before the current buyer i, then X goes up, so the new threshold M ∗ (m) + L(m)X
of buyer i goes up. Likewise, after each exit of a buyer, X goes down, and the dropout
threshold of the seller who remains in the workup increases. Thus, after the exit of a counterparty, the incumbent either drops out immediately because of his increased threshold,
or he stays in despite his new higher threshold. Conditional on the latter event, for other
traders, the incumbent’s remaining inventory in excess of his new, increased threshold
is again an exponentially-distributed variable with mean 1/µ. The non-negativity of the
thresholds, (39)–(40), implies that no trader wishes to “overshoot” across the zero inventory boundary. These properties ensure stationarity and are in fact needed for tractability
of this general approach to solving for equilibria.
If any one of the conditions (37)–(40) fails, a trader’s optimal dropout threshold may
depend on his current inventory or the past threshold of his counterparty, perhaps among
other variables. These complications would render the problem intractable.
As it turns out, the monotonicity and positivity properties of (37)–(40) are satisfied
if

e−r∆

> 1/2, which is the relatively unrestrictive condition that, at the time any double

auction, the probability that the asset will not pay off before the subsequent auction is
at least 1/2. For example, taking a day as the unit of time, if payoff-relevant information
arrives once per day (r = 1) and the double auctions are held at least twice per day
(∆ ≤ 0.5), we would have e−r∆ ≥ e−0.5 ≈ 0.61 > 0.5, and (37)–(40) are satisfied.16 This
condition is also sufficient for the Markov workup equilibrium.
Proposition 6. The coefficients M ∗ (m) and M ∗ (m)/L(m) are always weakly increasing
in m for m ≥ 2. If e−r∆ > 1/2, then L(m) is also weakly increasing in m for m ≥ 2.
Thus, if e−r∆ > 1/2, the monotonicity and nonnegativity conditions of (37)–(40) are
satisfied, and the strategies given in Proposition 5 constitute the unique Markov workup
equilibrium.17
16

We have also checked that if ∆ is large enough, then L(m) is not monotone increasing in m. Although the
non-monotonicity of L(m) for large ∆ blocks our particular proof method when ∆ is sufficiently large, it does
not necessarily rule out other approaches to demonstrating equilibria in threshold strategies for large ∆.
17
Because of the continuum of agent types and actions, we cannot formally apply the standard notion of perfect
Bayesian equilibrium for dynamic games with incomplete information, because that would call for conditioning
on events that have zero probability, such as a counterparty dropping out of workup after executing a trade of
a specific size. In our setting, actions are commonly observable and there is no issue concerning off-equilibriumpath conjectures, so almost any natural extension of simple perfect Bayesian equilibrium to our continuum action
and type spaces leads to our equilibrium. For example, we could apply the notion of open sequential equilibrium
of Myerson and Reny (2015). For our purposes, “equilibrium” applies in the sense that every agent optimizes
when appying Bayes’ Rule based on a regular version of the conditional distribution of Z given the observed
variables, in order to compute its optimal threshold strategy, given the threshold strategies of other agents. As

29

The property that M ∗ (m) and L(m) are increasing in m is intuitive. As more traders
drop out (that is, as m increases), the expected total number of traders in the subsequent
double-auction market goes up, by the memoryless property of the geometric distribution.
Since the double-auction market becomes more competitive as more traders participate,
and the associated inefficiency related to price impact thus becomes smaller, there is less
advantage to using workup, so M ∗ (m) goes up.
In addition, traders who have already exited the workup will enter the double-auction
market with their residual inventories, causing a predictable shift in the double-auction
price relative to the workup price. For example, if the conditional expected inventory X of
past workup participants is positive, then the double-auction price is expected to be lower
than v, a favorable condition for the workup buyer. Again, because a larger number m of
past and current workup participants makes the double-auction market more competitive
in expectation, those who have already exited the workup will be more aggressive in
liquidating their residual inventories, thus front-loading their sales in the relatively early
rounds. The workup buyer, therefore, expects to purchase the asset in the double-auction
market sooner and at more favorable prices. Consequently, the buyer will set an even
higher dropout threshold. By a symmetric argument, conditional on X > 0, a higher m
means that the seller sets an even lower threshold. That is, a higher m means a higher
L(m), the sensitivity of the thresholds Mb and Ms to X.
Appendix E provides a summary statement of the existence of the equilibrium as well
as a simple algorithm for updating the state (m, X, y) as the workup progresses.

6

Concluding Remarks

This paper demonstrates the equilibrium behavior and welfare benefit of size discovery
and adds to a general understanding of how market designs have responded in practice to
frictions associated with imperfect competition.
Price-discovery markets are efficient in an idealized price-taking competitive market,
for example one in which traders are infinitesimally small, as in Aumann (1964). The First
Welfare Theorem of Arrow (1951), by which market clearing allocations are efficient, is
based on the price-taking assumption. In many functioning markets, however, price taking is a poor approximation of trading behavior because of traders’ awareness of their own
price impact, and efficiency is lost. For instance, in inter-dealer financial markets, there
are often heavy concentrations of inventory imbalances among a relatively small set of
market participants. These are large dealers, hedge funds, and other asset managers that
stated, there is a unique such equilibrium in threshold strategies because: (i) given the other traders’ threshold
strategies, a given trader’s threshold strategy is uniquely determined by its first order necessary condition for
optimality (which is sufficient because of concavity), and (ii) there is a unique solution for the pair of first-order
conditions for the equations for the threshold strategies Mb and Ms .

30

are extremely conscious of their potential to harm themselves by price impact. In the case
of U.S. Treasury markets, for instance, government auctions often leave a small number of
primary dealers with significant position imbalances. Some dealers are awarded substantially more bonds in the auction than needed to meet their customer commitments and
desired market-making inventories. Some receive significantly less than desired. Fleming
and Nguyen (2015) explain how dealers exploit workups to lay off their imbalances.
We have shown that under imperfect competition, adding a size-discovery mechanism such as workup significantly improves allocative efficiency over a stand-alone pricediscovery mechanism, such as sequential double auctions. Precisely because a workup
freezes the transaction price, it avoids the efficiency losses caused by the strategic avoidance of price impact in price-discovery mechanisms. Workup participants are therefore
willing to trade large blocks of an asset almost instantly, leading to a quick reduction of
inventory imbalances and improvement in allocative efficiency.
We have also shown that equilibrium optimal workup strategies trade off the benefit
of quickly eliminating large undesired positions against the winner’s curse associated with
subsequent double auction prices. As a result, only traders with large inventory imbalances
actively participate in workups, whose participants set an endogenous threshold for the
level of remaining inventory at which they drop out.
We emphasize that the welfare benefit of size discovery is higher if it is used in combination with a price-discovery mechanism. In fact, if size discovery were the only available
trading mechanism, it would be even less efficient than a price-discovery-only market.
Appendix F shows that, in terms of ex-ante expected social surplus, the three possible
market structures can be ranked as follows:
workup + double auctions  double auctions only  workup only,

(41)

where “” means “more efficient than,” in the sense of total social surplus.
It would be natural to extend our model so as to incorporate more general workup
timing and an endogenous workup price. In our current model, a single multilateral
workup (or multiple bilateral workups) is added before the opening of the sequentialdouble-auction market. A natural interpretation is that the workup occurs at the beginning of each trading day, say at the closing price of the previous day. We have shown
that this form of “low-frequency” size discovery improves welfare. A useful extension
would allow “higher-frequency size discovery,” for example a multilateral workup before
each double auction, at the previous double-auction price. (The first workup could be
done at the closing price of the previous day.) An extension of this sort is likely to be
extremely complex to analyze. For instance, this timing introduces an incentive for each
large trader to “manipulate” double-auction prices in order to profit from subsequent
workups. Indeed, the same challenge may apply to any extension in which the workup

31

price is endogenously “discovered” by strategic traders. Another technical difficulty of
having workup after double auctions is that the continuation value before the workup
is no longer linear-quadratic, since the workup volume is the minimum of two random
variables. In sum, although it would be interesting and useful to characterize equilibrium
behavior with frequent interim size-discovery, we have not yet found a tractable way to
do so.

Appendix
A

Proofs

This appendix contains proofs of results stated in the main text.

A.1

Proof of Proposition 1

As in the text, we simplify the notation by writing “xik ” in place of “xik (pk ; zik ),” and
conjecture an equilibrium strategy of the form
xik = av − bpk + dzik .

(42)

Under this conjecture, and because the inventory shocks have mean zero, the equilibrium
price pk is a martingale because the total inventory Zk is a martingale.
Trader i in round k effectively selects the optimal execution price pk . Adapting the
method of Du and Zhu (2015), we write the first-order optimality condition of trader i as


"
∞
X

2γ
2γ
(n − 1)b 1 − e−r∆ v −
(xik + zik ) +
e−rj∆ (1 + d)j (v −
Ek (zi,k+j + xi,k+j ))
r
r
j=1
#
∞
X
− pk −
e−rj∆ (1 + d)j−1 d E(pk+j ) − xik = 0,
(43)
j=1

where Ek ( · ) denotes conditional expectation given zik and pk .
By the evolution equation for the inventory {zik }, we have, for all j ≥ 1,
zi,k+j + xi,k+j = (1 + d)j (zik + xik ) +

j−1
X

(av − bpk+l + wi,k+l+1 )(1 + d)j−l

(44)

l=1

+ (av − bpk+j ) + wi,k+1 (1 + d)j .
Since all shocks have mean zero and the prices are martingales, we have


(1 + d)j
1
j
Ek (zi,k+j + xi,k+j ) = (1 + d) (zik + xik ) + (av − bpk )
−
.
d
d

32

(45)

(46)

The above equation is linear in xik , v, pk , and zik . Matching the coefficients with those
of the conjectured strategy xik = av − bpk + dzik and solving the three equations, we have
b = a,
d=−

(47)
2γ
a,
r

a = a∆ ≡

A.2

(48)

r
2γ

1+

(n − 1)(1 − e−r∆ ) −

p

(n − 1)2 (1 − e−r∆ )2 + 4e−r∆
2e−r∆

!
.

(49)

Proof of Proposition 2

Our proof strategy consists of two steps. First, we calculate Vi,0+ under the assumption
that σw = 0 (that is, no periodic inventory shocks after time 0). This gives the first three
terms in the expression of Vi,0+ . Then, we calculate the last term Θ, the contribution of
periodic inventory shocks to the indirect utility.

Step 1: No periodic inventory shocks. With wik = 0 for all i and k ≥ 1, and
given the equilibrium price p∗ , we can write the law of motion of the inventory of trader
i as


2γ
zi,k+1 = zik + a∆ v − p∗ −
zik
r


2γ
Z
= zik − a∆
zik −
,
(50)
r
n
which implies that
Z
zi,k+1 − =
n




2γ
Z
1 − a∆
zik −
.
r
n

(51)

We let
Vi,0+ =

∞
X

e

−r∆k

k=0




γ
E −xik p∗ + (1 − e−r∆ ) v(xik + zik ) − (xik + zik )2
r


zi0 , Z . (52)

The inventories evolve according to
Z
zi,k+1 − =
n



 



2γ
Z
2γ k+1
Z
1 − a∆
zik −
= 1 − a∆
zi0 −
.
r
n
r
n

(53)

It follows that, in equilibrium,
xik

2γ
= a∆
r



Z
− zik
n



2γ
= a∆
r

33



2γ
1 − a∆
r

k 


Z
− zi0 .
n

(54)

The price-related term in (52) is
∞
X
k=0

e

−r∆k ∗

p xik

∞
X


 



2γ k Z
2γ
2γ
1 − a∆
Z a∆
− zi0
=
v−
e
nr
r
r
n
k=0



a∆ 2γ
2γ
Z
r
= v−
Z
− zi0
.
nr
n
1 − e−r∆ (1 − a∆ 2γ
r )
−r∆k

In (52), the term that involves v is
"


#

∞
X
 −r∆k Z
Z
2γ k+1
−r∆
zi0 −
+ 1 − a∆
v
1−e
e
n
r
n
k=0



−r∆
(1 − a∆ 2γ
Z
Z
r ) 1−e
=v +
.
v zi0 −
n
n
1 − e−r∆ (1 − a∆ 2γ
r )

(55)

(56)

In (52), the term that involves γ is
"

k+1 
#2
∞

γX
2γ
Z
Z
−
1 − e−r∆ e−r∆k
+ 1 − a∆
zi0 −
r
n
r
n
k=0

 2



2γ 
−r∆
(1 − a∆ 2γ
2γZ
Z
γ 1 − a∆ r
Z 2
γ Z
r ) 1−e
−
zi0 −
−
zi0 −
.
=−
r n
nr
n
r n−1
n
1 − e−r∆ (1 − a∆ 2γ
r )
(57)
Adding up the three terms, we get the first, second, and third term in the expression
for Vi,0+ .

Step 2: Add the effect of periodic inventory shocks. We now calculate the
terms in the indirect utility caused by the extra terms {wik }, where k ≥ 1.
For any integer t ≥ 0, we let st be the coefficient of wil in the expression of zi,l+t and
let ut be the coefficient of wjl in the expression of zi,l+t , where j 6= i. Clearly, s0 = 1 and
u0 = 0.
For simplicity of expressions, write c∆ = a∆ 2γ
r .
We can write (12) more explicitly as
P
zik + j6=i zjk
zi,k+1 = (1 − c∆ ) zik + c∆
+ wi,k+1 .
(58)
n
Thus, we get recursive equations of {ut } and {st }:

 
n−1
1
c∆ 
c∆
ut + st = 1 −
ut +
st ,
ut+1 = (1 − c∆ )ut + c∆
n
n
n
n

(59)

and

st+1 = (1 − c∆ )st + c∆

n−1
1
ut + st
n
n



34

=



(n − 1)c∆
(n − 1)c∆
1−
st +
ut . (60)
n
n

These recursive equations have the solution (using s0 = 1 and u0 = 0):
st =

1 + (n − 1)(1 − c∆ )t
,
n

ut =

1 − (1 − c∆ )t
.
n

(61)

Fixing i: Let’s first calculate the difference caused by the w terms in the expression
of E [−xik pk | zi0 , Z]. From (61) and the recursive equations for ut and st , we see that the
coefficient of wil (l ≤ k) in the expression of xik is


sk−l + (n − 1)uk−l
n−1
− c∆ sk−l −
= c∆
(uk−l − sk−l ),
(62)
n
n
and the coefficient of wjl (l ≤ k) in the expression of xik is


sk−l + (n − 1)uk−l
1
= c∆ (sk−l − uk−l ).
− c∆ uk−l −
n
n

(63)

Similarly, the coefficient of wil and wjl (l ≤ k, j 6= i) in the expression of pk is
−

2γ sk−l + (n − 1)uk−l
.
r
n

(64)

Since each w term has (conditional and unconditional) mean of zero, all expectation
terms linear in wil or wjl are zero. Moreover, because the inventory shocks are independent
2 , where m ∈ {1, 2, ..., n}
of each other, all quadratic terms—expect those of the form wml
and l ≤ k—are also zero. These imply that the contribution of the periodic inventory
shocks to E [−xik pk | zi0 , Z] is:
k
X







n−1
2γ sk−l + (n − 1)uk−l
− c∆
(uk−l − sk−l )
−
E wil2 | zi0 , Z
n
r
n
l=1



k X
X

 2
1
2γ sk−l + (n − 1)uk−l
+
− c∆ (sk−l − uk−l )
| zi0 , Z
−
E wjl
n
r
n
l=1 j6=i

=

2
σw
∆


 k 

2γ sk−l + (n − 1)uk−l X
n−1
1
−
−c∆
(uk−l − sk−l ) − (n − 1) · c∆ (sk−l − uk−l )
r
n
n
n
l=1

= 0.

(65)

Obviously, the w terms make no difference to the term E [(xik + zik ) | zi0 , Z] because
the inventory shocks have mean zero.


Now let’s turn to the difference caused by the w terms in the expression of E (xik + zik )2 | zi0 , Z .
From (62), the coefficient of wil (l ≤ k) in the expression of xik + zik is
c∆

n−1
(uk−l − sk−l ) + sk−l ,
n

and from (63), the coefficient of wjl (l ≤ k) in the expression of xik + zik is
1
c∆ (sk−l − uk−l ) + uk−l .
n

35

Again, because the w terms have mean zero and
independent,
the difference
 are mutually

2
caused by the w terms in the expression of E (xik + zik ) | zi0 , Z is:
k 
X

2


n−1
c∆
(uk−l − sk−l ) + sk−l E wil2 | zi0 , Z
n
l=1
2
k X
X
 2

1
+
c∆ (sk−l − uk−l ) + uk−l E wjl
| zi0 , Z
n
l=1 j6=i

=

2
σw
∆

k−1 
X
t=0

n−1
c∆
(ut − st ) + st
n

2
+ (n − 1)

k−1 
X
t=0

1
c∆ (st − ut ) + ut
n

2 !
.

Thus, the difference caused by the w terms in the expression of Vi,0+ is
γ
2
Θ ≡ −σw
∆ (1 − e−r∆ )
(66)
r
!
2
2
k−1 
k−1 
∞
X
X
X
n−1
1
−r∆k
c∆
(ut − st ) + st + (n − 1)
c∆ (st − ut ) + ut
·
e
,
n
n
k=1

t=0

t=0

which is a constant that does not depend on {zi0 } or Z.

A.3

Proof of Proposition 3

We first characterize the buyer’s dropout strategy. For any y > 0, let Fy be the event that
the buyer’s candidate requested quantity y > 0 is filled. That is,
n
o
Fy = 0 ≤ −(S b + y) − Mb , 0 ≤ S s − y − Ms .
(67)
The remaining inventory of the buyer, −(S b + y), is weakly larger than the dropout
quantity Mb , for otherwise the buyer would have already dropped out. Similarly, the
remaining inventory of the seller, S s − y, is weakly larger than his dropout quantity Ms ,
for otherwise the seller would have already dropped out.
With the conjectured equilibrium dropout strategies, the memoryless property of the
exponential distribution implies that, for the buyer, the seller’s inventory in excess of the
dropout quantity, which is W ≡ S s − y − Ms , is Fy -conditionally exponential with the
same parameter µ. Thus, recalling that Z is the aggregate inventory of the traders, we
have
1
(68)
E(Z | Fy , S b ) = S b + y + Ms + ,
µ
using the fact that the expected total inventory of all traders not participating in this
workup is zero.

36

By a similar calculation,

E(Z 2 | Fy , S b ) = E (S b + y + Ms + W )2 +

n
X

!2 
zi0 

i=3
b

2

= (S + y + Ms ) + E(W ) + 2(S b + y + Ms )E(W ) + θ
2
1
= (S b + y + Ms )2 + 2 + 2(S b + y + Ms ) + θ,
µ
µ
where


θ =E

2

n
X

(69)

!2 
zi0  .

i=3

On the other hand, given the initial inventory S b and the candidate quantity y ≥ 0 to
be acquired in the workup, the buyer’s conditional expected ultimate value, given {Z, S b },
is
U b = −p̄y + V(S b + y),
(70)
where, based on Proposition 2,
Z
γ
V(z) = v −
n
r

 2 




Z
γZ
Z
γ 1 − 2a∆ γ/r
Z 2
+ v−2
z−
−
z−
.
n
rn
n
r
n−1
n

(71)

Organizing the terms, we get
E(Z | Fy , S b )
γ
γ
C(S b + y)2 + 2 (C − 1) (S b + y)
r
r
n
E(Z 2 | Fy , S b )
γ
− (C − 1)
,
(72)
r
n2

E(U b | Fy , S b ) = −p̄y + v(S b + y) −

where
C=

1 − 2a∆ γ/r
.
n−1

(73)

Substituting the expressions that we have shown above for E(Z | Fy , S b ) and E(Z 2 | Fy , S b )
into this expression for E(U b | Fy ), we get


dE(U b | Fy , S b )
γ
γ
1
1
b
b
= v − p̄ − 2 C(S + y) + 2 (C − 1)
2(S + y) + Ms +
g(y) ≡
dy
r
r
n
µ


γ
1
2
− (C − 1) 2 2(S b + y + Ms ) +
.
(74)
r
n
µ
The derivative g(y) is everywhere strictly decreasing in y. Following the conjectured
equilibrium, an optimal dropout quantity Mb for the buyer’s residual inventory, if the
optimum is interior (which we assume for now and then validate), is obtained at a level

37

of y for which this derivative g(y) is equal to zero, and by taking S b + y = −Mb . That is,


γ
1
γ
1
0 = v − p̄ − 2 C(−Mb ) + 2 (C − 1)
2(−Mb ) + Ms +
r
r
n
µ


2
γ
1
.
(75)
− (C − 1) 2 2(−Mb + Ms ) +
r
n
µ
By completely analogous reasoning, the first-order conditions for the seller’s optimal
dropout threshold Ms is given by


γ
1
γ
1
0 = p̄ − v + 2 CMs + 2 (C − 1)
−2Ms + Mb +
r
r
n
µ


2
γ
1
.
(76)
− (C − 1) 2 −2(Ms − Mb ) +
r
n
µ
The unique solution to the two first-order necessary and sufficient conditions (75) and
(76) is given by (18)–(19). As long as the workup price p̄ satisfies (17), we have Mb ≥ 0
and Ms ≥ 0. This completes the proof.

A.4

Proof of Proposition 4

The comparative statics of M with respect to r and ∆ are provided in the text. The only
item left is to show that M increases in n.
Define
2e−r∆
,
1 − e−r∆
4e−r∆
B≡
,
(1 − e−r∆ )2
A≡

(77)
(78)

αn = (n − 1) + A +

p

(n − 1)2 + B.

(79)

Then, we can write
1
C(n) =
n−1



2(n − 2)
1−
.
αn

To show that M increases in n, it is equivalent to show that




nC(n)
n 1 + 1−C(n)
(n + 1) 1 + (n+1)C(n+1)
1−C(n+1)
>
,
n−1
n

(80)

(81)

which, after simplification, is equivalent to
(n + 1)2
1
n−1 1+ α2

−

n2
1
< 1.
n − 2 1 + α2

(82)

n

n+1

Note that αn is increasing n, fixing other parameters. So,
αn+1 − αn = 1 +

p

n2 + B −

p

(2n − 1)
4n − 3
(n − 1)2 + B < 1 + p
<
. (83)
2
2(n − 1)
2 (n − 1) + B

38

Using the above inequality, we can show that
1
1+

2

−

αn+1

4n − 3
1
1
2 < (α + 2)2 n − 1 .
1 + αn
n

(84)

Applying the above inequality, we can show that the left-hand side of (82) satisfies:
(n + 1)2
1
n−1 1+ α2

n+1

<

−

n2
1
n − 2 1 + α2

n

n2

− 3n − 2
αn
1
(n + 1)2 (4n − 3)
≡ ψ(αn ).
+
(n − 1)(n − 2) αn + 2
(n − 1)2
(αn + 2)2

(85)

We have
 2

n − 3n − 2
2
1 (n + 1)2 (4n − 3)
ψ (αn ) =
−
.
(αn + 2)2 (n − 1)(n − 2) αn + 2
(n − 1)2
|
{z
}
0

(86)

λ(∆)

We now fix n and r, and consider changes in αn through the changes in ∆ > 0. For
any fixed n and r, αn and λ(∆) decrease in ∆. In particular, as ∆ → 0, we have αn → ∞,
and λ(0) > 0. But as ∆ → ∞, we have αn ↓ 2(n − 1), and λ(∆) converges to
n2 − 3n − 2
1 (n + 1)2 (4n − 3)
−
< 0.
(n − 1)(n − 2) 2n
(n − 1)2

(87)

Therefore, as a function of αn and in the domain [2(n − 1), ∞), ψ(αn ) first decreases
in αn and then increases in αn . To show that ψ(αn ) < 1, it suffices to verify that
limαn →∞ ψ(αn ) < 1 and ψ(2(n − 1)) < 1. As αn → ∞, the second term of ψ(αn ) vanishes
n2 −3n−2
and the first term converges to (n−1)(n−2)
< 1. At αn = 2(n − 1),
n2 − 3n − 2 n − 1 (n + 1)2 (4n − 3) 1
+
(n − 1)(n − 2) n
(n − 1)2
4n2


1 (n + 1)2 (4n − 3) n + 2
=1+
−
n
4n(n − 1)2
n−2




2
1 (n + 1)
n+2
1
4n
4
<1+
−
=1+
−
< 1.
n (n − 1)2 n − 2
n (n − 1)2 n − 2

ψ(2(n − 1)) =

This completes the proof.

A.5

Proof of Proposition 5

We first consider the problem of the current active buyer, whose initial inventory is S b ,
on the event that the buyer has to this point executed some quantity y > 0 and the active
seller has not yet exited. Let nb and ns denote the number of buyers and the number of
sellers yet to enter the workup, respectively, excluding the current pair. We will calculate
the first-order optimality conditions by artificially including the residual queue sizes nb
and ns in the buyer’s conditioning information, and then later averaging with respect to
the conditional distribution of (nb , ns ). By the same logic used in Section 4, the buyer

39

has conditional mean and variance18 of aggregate market-wide inventory given by
E(Z | S b , m, X, y, nb , ns ) = S b + y + Ms (m, X) +

1
1
+ X + (ns − nb ) ,
µ
µ

E(Z 2 | S b , m, X, y, nb , ns ) = (S b + y + Ms (m, X))2 + 2(S b + y + Ms (m, X))
+ Γb (nb , ns ),

(88)
1
µ
(89)

where Γb (nb , ns ) is a quantity that does not depend on y. Relative to the calculation
(68) for the case of bilateral workup, the conditional mean E(Z | m, X, y, nb , ns ) includes
the extra terms X and (ns − nb )/µ. The exact level of the second moment E(Z 2 |
m, X, y, nb , ns ) does not affect the equilibrium threshold, because it plays no role in the
first-order optimality condition for the choice of y at which the buyer drops out.
Omitting the arguments of Ms and Mb , we have
dE(U b | S b , m, X, y, nb , ns )
γ
= v − p̄ − 2 C(n)(S b + y)
dy
r


γ
1
1
1
b
+ 2 (C(n) − 1)
2(S + y) + Ms + + X + (ns − nb )
r
n
µ
µ


γ
1
2
− (C(n) − 1) 2 2(S b + y + Ms ) +
,
r
n
µ

(90)

where n = m + nb + ns and where
C(n) =

1 − 2a∆ γ/r
.
n−1

(91)

By the law of iterated expectations, we can average with respect to the product distribution of (nb , ns ), to obtain
∞

∞

XX
γ
dE(U b | S b , m, X, y)
f (k)f (`)2 C(n)(S b + y)
= v − p̄ −
dy
r
k=0 `=0


∞ X
∞
X
1
1
1
γ
b
+
f (k)f (`)2 (C(n) − 1)
2(S + y) + Ms + + X + (` − k)
r
n
µ
µ
k=0 `=0


∞ X
∞
X
γ
1
2
b
−
f (k)f (`) (C(n) − 1) 2 2(S + y + Ms ) +
,
r
n
µ

(92)

k=0 `=0

where n = m + k + `.
The first-order condition for optimal y should hold with equality if S b + y = −Mb ,
18

The event of executing y units has probability zero, but the stated conditional moments make sense when
applying a regular version of the conditional distribution of Z given the executed quantity and given X.

40

that is,
dE(U b | S b , m, X, y)
dy
S b +y=−Mb
∞
∞
XX
γ
= v − p̄ −
f (k)f (`)2 C(n)(−Mb )
r
k=0 `=0


∞ X
∞
X
1
1
1
γ
2(−Mb ) + Ms + + X + (` − k)
+
f (k)f (`)2 (C(n) − 1)
r
n
µ
µ
k=0 `=0


∞ X
∞
X
2
1
γ
,
(93)
−
f (k)f (`) (C(n) − 1) 2 2(−Mb + Ms ) +
r
n
µ

0=

k=0 `=0

where n = m + k + `.
By a completely analogous calculation, the seller, whose initial inventory is S s , stays in
workup until the buyer has exited or the workup quantity has reached a level y satisfying
the seller’s first-order condition, whichever comes first. This occurs when the seller’s
remaining inventory reaches the threshold S s − y = Ms . Thus, the first-order condition
for y takes the form
dE(U s | S s , m, X, y)
dy
S s −y=Ms
∞
∞
XX
γ
= p̄ − v +
f (k)f (`)2 C(n)Ms
r
k=0 `=0


∞ X
∞
X
γ
1
1
1
+
f (k)f (`)2 (C(n) − 1)
−2Ms + Mb + − X − (` − k)
r
n
µ
µ
k=0 `=0


∞ X
∞
X
2
γ
1
,
−
f (k)f (`) (C(n) − 1) 2 −2(Ms − Mb ) +
r
n
µ

0=

(94)

k=0 `=0

where n = m + k + `. As the sum of two iid geometric random variables, nb + ns has the
negative binomial conditional distribution19 with mass function
g(k) = (k + 1)q k (1 − q)2 .

(95)

Substituting in p̄ = v, the pair of linear first-order necessary and sufficient conditions
for optimality, (93) and (94), lead to the unique solutions Mb (m, X) and Ms (m, X) given
in Proposition 5.

A.6

Proof of Proposition 6

Monotonicity of M ∗ (m), L(m), and M ∗ (m)/L(m)
We first prove the following lemma.
Lemma 1. If for positive real numbers {λi , αi , βi : i ≥ 0}, we have
19

This can be shown from the fact g( · ) is the convolution f ∗ f .

41

λi
λi+1

<

λi+1
λi+2

and

αi
βi

<

αi+1
βi+1 ,

then for any positive integer k,
Pk

λi αi
Pi=0
k
i=0 λi βi

Proof. Because

αi
βi

<

αi+1
βi+1

Pk
λi αi+1
< Pi=0
.
k
λ
β
i
i+1
i=0

for i ≥ 0, it is easy to see that

λi αi+1
Pi=0
k−1
i=0 λi βi+1

αi+1
i=0 λi βi+1 βi+1
Pk−1
i=0 λi βi+1

Pk−1

Pk−1

=

Pk−1

αk
αk
i=0 λi βi+1 βk
≤ Pk−1
=
,
β
k
λ
β
i
i+1
i=0

which implies
Pk−1
λi αi+1
αk
αk+1
.
>
≥ Pi=0
k−1
βk+1
βk
i=0 λi βi+1

(96)

From (96) we have
λi αi+1
Pi=0
k
i=0 λi βi+1

αk+1
i=0 λi αi+1 + λk βk+1 βk+1
Pk−1
i=0 λi βi+1 + λk βk+1
Pk−1
Pk−1
i=0 λi αi+1
λ
α
+
λ
β
k k+1 Pk−1 λ β
i=0 i i+1
i=0 i i+1
Pk−1
i=0 λi βi+1 + λk βk+1
Pk−1
λi αi+1
.
Pi=0
k−1
i=0 λi βi+1

Pk−1

Pk

=

≥
=

(97)

Similarly, we can prove that
Pk

λi αi
Pi=0
k
i=0 λi βi

Pk

≤ Pi=1
k

λ i αi

i=1 λi βi

.

(98)

Equations (97) and (98) imply that in order to prove Lemma 1 we only need to show that
Pk

λ i αi
Pi=1
k
i=1 λi βi

Pk−1
λi αi+1
< Pi=0
,
k−1
λ
β
i
i+1
i=0

which is equivalent to
Pk

λi αi
Pi=1
k
i=1 λi βi

Pk

< Pi=1
k

λi−1 αi

i=1 λi−1 βi

.

(99)

Notice that
Pk

Pi=1
k

λi−1 αi

i=1 λi−1 βi

Pk

− Pi=1
k

λ i αi

i=1 λi βi

P
=

k
i=1 λi−1 αi

 P

P
 P

k
k
−
λ
α
λ
β
i
i
i−1
i
i=1
i=1
P
 P

.
k
k
i=1 λi−1 βi
i=1 λi βi
(100)
k
i=1 λi βi

42



So it suffices to prove the numerator of (100) is positive. By expansion we have
! k
!
! k
!
k
k
X
X
X
X
λi−1 αi
λi βi −
λi αi
λi−1 βi
i=1

X

=

i=1

i=1

(λs−1 αs λt βt + λt−1 αt λs βs ) +

X

(λs αs λt−1 βt + λt αt λs−1 βs ) −

X

k
X

λi−1 βi λi αi

i=1

1≤s<t≤k

=

λi−1 αi λi βi

i=1

1≤s<t≤k

−

i=1
k
X

(λs−1 αs λt βt + λt−1 αt λs βs − λs αs λt−1 βt − λt αt λs−1 βs ) .

(101)

1≤s<t≤k

Because, for all s < t,
λs−1 αs λt βt + λt−1 αt λs βs − λs αs λt−1 βt − λt αt λs−1 βs


λs−1 αs λt−1 αt λt−1 αs λs−1 αt
+
−
−
= λs λt βs βt
λs βs
λt βt
λt βs
λs βt



λs−1 λt−1
αs αt
= λs λt βs βt
−
−
λs
λt
βs
βt
> 0,

(102)

the right side of (101) is positive, and the proof of the Lemma is complete.
Letting k → ∞ in Lemma 1, we get
P∞
P∞
λi αi
λi αi+1
Pi=0
≤ Pi=0
.
∞
∞
λ
β
i=0 i i
i=0 λi βi+1

(103)

Letting λi = g(i) = (i + 1)q i (1 − q)2 , we have
λi
(i + 1)
(i + 2)
λi+1
=
<
=
.
λi+1
(i + 2)q
(i + 3)q
λi+2

(104)

Monotonicity of M ∗ (m). Given Lemma 1, to show that M ∗ (m) ≤ M ∗ (m + 1), it
suffices to show that

(1 − C(n)) n−1
n2
C(n) +

1−C(n)
n

(105)

is increasing in n for n ≥ 2.
In the continuous-time double-auction market of Appendix B, we have ∆ = 0 and
C(n) = 1/(n − 1), so the ratio (105) simplifies to
n−2
,
2n
which is increasing in n.

43

For ∆ > 0, we denote
D(n) = 2 −
(n − 1) +

2e−r∆
1−e−r∆

2(n − 2)
q
+ (n − 1)2 +

4e−r∆
(1−e−r∆ )2

.

(106)

It is easy to see that D(n) is decreasing in n. Using C(n) = (1 − 2a∆ γ/r)/(n − 1), we
have
(1 − C(n)) n−1
1 − D(n)/n
1
1
n2
=
=
− .
(107)
1−C(n)
D(n)
D(n) n
C(n) +
n

Since D(n) is decreasing in n, the right-hand side of the above expression is increasing in
n, and the proof for the monotonicity of M ∗ (m) is complete.

Monotonicity of L(m) if e−r∆ > 1/2. Given Lemma 1, to show that L(m) ≤
L(m + 1), it suffices to show that

C(n)

1−C(n)
n
+ (1−C(n))(3n−2)
n2

(108)

is increasing in n for n ≥ 2.
In the continuous-time double-auction market, with ∆ = 0 and C(n) = 1/(n − 1), the
ratio (108) simplifies to
(n − 2)n
,
4(n − 1)2
which is indeed increasing in n.
For ∆ > 0, we define
t=
and

2e−r∆
,
1 − e−r∆

s
R(n) =

(n − 1)2 +

(109)

4e−r∆
− (n − 1).
(1 − e−r∆ )2

(110)

Now we can write
C(n) =

1
n−1


1−

2(n − 2)
n − 1 + t + n − 1 + R(n)


.

(111)

We claim that
0 ≤ R(n) ≤ t, and R(n) decreases in n.

(112)

It is obvious that R(n) is non-negative and decreases in n. To see that R(n) ≤ t, we can
directly calculate
4e−r∆
(1−e−r∆ )2

q

(n − 1)2 +

4e−r∆
(1−e−r∆ )2

≤
+n−1

44

4e−r∆
(1−e−r∆ )2

q

1+

4e−r∆
(1−e−r∆ )2

= t.
+1

Using (109) and (110), we can write
(1−C(n))
(n)



C(n) +

(1−C(n))(3n−2)
(n)2

=

(n − 2)n(2n + t + R(n))
.
2(n − 1)(3n2 + 2n(t − 2) − 2t + 2(n − 1)R(n))

(113)

We denote the numerator and denominator of the right-hand side of (113) by Y1 (n) and
Y0 (n), respectively. To show monotonicity, it is enough to prove that
Y1 (n + 1)Y0 (n) − Y1 (n)Y0 (n + 1) > 0.
After expansion, we get
Y1 (n + 1)Y0 (n) − Y1 (n)Y0 (n + 1)
= 2(R(n) − R(n + 1))n5 + 2(t − 2 + R(n + 1))n4
+ (24 − 4t − 6R(n) + 2R(n + 1)) n3 + 2(6 + 13t + 6R(n) + 7R(n + 1))n2
+8(−2 + t2 + (t − 1)R(n + 1) + R(n)(t + 1 + R(n + 1)))n
−4(t + R(n))(t + 2 + R(n + 1)).

(114)

Using (112), lower bounds on the coefficients of each term in the polynomial on the
right-hand side are as follows:
n5 :

2(R(n) − R(n + 1)) ≥ 0.

(115)

4

2(t − 2 + R(n + 1)) ≥ 2(t − 2).

(116)

3

24 − 4t − 6R(n) + 2R(n + 1) ≥ 24 − 10t.

(117)

2

2(6 + 13t + 6R(n) + 7R(n + 1)) ≥ 2(6 + 13t).

(118)

n:

8(−2 + t2 + (t − 1)R(n + 1) + R(n)(t + 1 + R(n + 1))) ≥ 8(t2 − 2). (119)

n :
n :
n :
Constant :

− 4(t + R(n))(t + 2 + R(n + 1)) ≥ −8t(2t + 2).

(120)

With the above inequalities, we get
Y1 (n + 1)Y0 (n) − Y1 (n)Y0 (n + 1)
4

(121)

3

2

2

≥ 2(t − 2)n + (24 − 10t) n + 2(6 + 13t)n + 8(t − 2)n − 8t(2t + 2)
= 2(t − 2)n2 (n2 − 5n + 6.5) + 4n3 + (38 + 13t)n2 + 8(t2 − 2)n − 8t(2t + 2)

= 2(t − 2)n2 (n − 2.5)2 + 0.25 + 4n3 + 38n2 − 16n + t2 (8n − 16) + t(13n2 − 16).
Under the condition e−r∆ >
(121) is positive for n ≥ 2.

1
2,

we have t > 2. It is easy to see the right-hand side of

Monotonicity of M ∗ (m)/L(m). We can write
M ∗ (m)
L(m)

=

1
µ

P∞

n−1
k=0 g(k)(1 − C(n)) n2
P∞
1−C(n)
k=0 g(k)
n


(1−C(n))(3n−2)
C(n)
+
k=0
n2
 .

· P
1−C(n)
∞
g(k)
C(n)
+
k=0
n

45

P∞ 

(122)

Given Lemma 1, to show that M ∗ (m)/L(m) increases in m, it suffices to show that
(1 − C(n)) n−1
n2

and

1−C(n)
n

(1−C(n))(3n−2)
n2
1−C(n)
C(n) + n

C(n) +

are both increasing in n.
Monotonicity in n of the first expression is obvious, for
(1 − C(n)) n−1
n2
1−C(n)
n

=1−

1
.
n

The second expression can be expressed as
(1−C(n))(3n−2)
n2
1−C(n)
C(n) + n

C(n) +

=1+2

(1 − C(n)) n−1
n2
C(n) +

1−C(n)
n

.

(123)

The last term in the above expression is increasing in n, as shown in the proof of monotonicity of M ∗ (m).

Proof of (37)–(40)
Suppose that e−r∆ > 1/2. We have shown that in this case M ∗ (m), L(m) and M ∗ (m)/L(m)
are all increasing in m for m ≥ 2. We now prove (37)–(40) by induction. We let Xi,j
denote the X element of the state vector (m, X, y) that applies for buyer i and seller j.

At i = j = 1 and X1,1 = 0. Clearly, both thresholds are equal to M ∗ (2) and are
positive at this initial state. Moreover, if the buyer exits, then X2,1 < 0, and
Ms (3, X2,1 ) = M ∗ (3) − L(3)X2,1 > M ∗ (2) = Ms (2, X1,1 ).

(124)

If the seller exits, then X1,2 > 0, and
Mb (3, X1,2 ) = M ∗ (3) + L(3)X1,2 > M ∗ (2) = Mb (2, X1,1 ).

(125)

At generic (i, j) and Xi,j . By symmetry, it suffices to prove these inequalities for
the exit of seller j. By the conjectured update rule,
(
M ∗ (i + j) − L(i + j)Xi,j ,
if seller j traded positive quantity
Xi,j+1 − Xi,j =
,
∗
ν(M (i + j) − L(i + j)Xi,j ), if seller j traded zero quantity
where the last line follows from the induction step
Ms (i + j, Xi,j ) = M ∗ (i + j) − L(i + j)Xi,j ≥ 0.
In this case, we want to show that
M ∗ (i + j + 1) + L(i + j + 1)Xi,j+1 ≥ M ∗ (i + j) + L(i + j)Xi,j ,
∗

M (i + j + 1) − L(i + j + 1)Xi,j+1 ≥ 0.

46

(126)
(127)

If established, the first inequality (126) would imply that the incumbent buyer’s new
threshold remains positive if the old threshold is positive. Since it is the seller who exited,
the inequality for the “incumbent seller” is irrelevant.
To show (126), we calculate
M ∗ (i + j + 1) + L(i + j + 1)Xi,j+1 − M ∗ (i + j) − L(i + j)Xi,j
≥ M ∗ (i + j + 1) − M ∗ (i + j) + (L(i + j + 1) − L(i + j))Xi,j
L(i + j + 1)
≥ M ∗ (i + j)
− M ∗ (i + j) + (L(i + j + 1) − L(i + j))Xi,j
L(i + j)
L(i + j + 1) − L(i + j)
=
(M ∗ (i + j) + L(i + j)Xi,j ) ≥ 0,
L(i + j)

(128)

where the last inequality follows from the induction step that Mb (i + j, Xi,j ) ≥ 0 and the
monotonicity of L(m), and the penultimate inequality follows from the monotonicity of
M ∗ (m)/L(m).
To show (127), we calculate
M ∗ (i + j + 1) − L(i + j + 1)Xi,j+1
≥ M ∗ (i + j + 1) − L(i + j + 1) (Xi,j + M ∗ (i + j) − L(i + j)Xi,j )
L(i + j + 1)
≥ M ∗ (i + j)
− L(i + j + 1)M ∗ (i + j) − L(i + j + 1)(1 − L(i + j))Xi,j
L(i + j)
L(i + j + 1)(1 − L(i + j))
=
(M ∗ (i + j) − L(i + j)Xi,j ) ≥ 0,
(129)
L(i + j)
where the last inequality follows from the induction step that Ms (i + j, Xi,j ) ≥ 0 and the
fact20 that L( · ) < 1/2, and the penultimate inequality follows from the monotonicity of
M ∗ (m)/L(m).

B

Continuous-Time Double-Auction Market

This appendix states the continuous-time limit of the discrete-time double auction market,
and independently solves for the equilibrium in the corresponding continuous-time double
auction market. We thereby show that these two settings have identical equilibrium
behavior. Since the periodic inventory shocks after time 0 merely add a constant to
a trader’s indirect utility at time 0 (see Proposition 2), these shocks do not affect the
equilibrium strategies in the workup or double auctions. Consequently, in the calculations
below we will avoid introducing inventory shocks after time zero.
20

The ratio of a pair of terms in the numerator and denominator in the expression of L(m) is
1
n
C(n)
1−C(n)

+

3n−2
n2

<

1
n
3n−2
n2

for any n ≥ 2. Thus, L(m) < 1/2.

47


=

2
3−
n

−1
≤

1
2

Continuous-time limit of the discrete-time double auction market
Corollary 1. Suppose that the inventory shocks are zero after time 0. As ∆ → 0, the
equilibrium of Proposition 1 converges to the following continuous-time limit.
1. The limit demand schedule21 of trader i at time t is


2γ ∞
∞
∞
∞
v−p−
xit (p; zit ) = a
z
,
r it
where
a∞ =

(n − 2)r2
4γ

and where the limiting inventory position of trader i at time t is


Z
Zt
−(n−2)rt/2
∞
zi0 −
.
+e
zit =
n
n

(130)

(131)

(132)

The equilibrium price at time t is
p∗ = v −

2γ
Z.
nr

(133)

2. The limiting expected net payoff of trader i at time 0, conditional on zi0 and the
initial auction price p∗ , is
∞
Vi,0+

Z
γ
=v −
n
r

 2 




Z
2γ Z
Z
γ
Z 2
+ v−
zi0 −
−
zi0 −
. (134)
n
r n
n
r(n − 1)
n

Proof. The only nontrivial part of the proof is the limit of the convergence rate. Because
1 − a∆ 2γ/r is the convergence factor per auction period, the associated convergence factor
per unit of time is


2γ 1/∆
1 − a∆
.
r
Here, we ignore the effect of partial integer periods per unit of time, which is irrelevant
in the limit as ∆ goes to zero. Finally, we have the limiting convergence rate
log(1 − a∆ 2γ
a∆ 2γ
(n − 2)r
r )
r
= − lim
=−
.
∆→0
∆→0 ∆
∆
2
lim

21

(135)

In a continuous-time setting, a demand schedule at time t can be expressed by a demand “rate function”
Dt ( · ), which means that if the time path of prices is given by some function φ : [0, ∞) → R, then the associated
Rt
cumulative total quantity purchased by time t is 0 Ds (φ(s)) ds, whenever the integral is well defined. In our
case, the discrete-period demand schedule xik ( · ; zik ) has the indicated limit demand schedule, as a demand rate
∞
function, because zi,K(t) → zit
and because, for any fixed price p and fixed inventory level z,




a∆
2γ
2γ
lim
v−p−
z = a∞ v − p −
z .
∆↓0 ∆
r
r

48

Continuous-time double auction market
We fix a probability space and the time domain [0, ∞). The setup for the joint distribution
of the exponential payoff time T , the payoff π of the asset, and the initial inventories
z0 = (z10 , z20 , . . . , zn0 ) of the n ≥ 3 of traders is precisely the same as that for the
discrete-time auction model of Section 3. The initial information structure is also as in
Section 3. In our application of this model in Section 5, the number n of traders is an
outcome of the random workup population size Nb + Ns . The outcome of Nb + Ns is
publicly known when workup is complete. So, it is enough to solve the continuous-time
auction model for any fixed trader population size n.
In our new continuous-time setting, a demand schedule at time t can be expressed
by a demand “rate function” D : R × R → R, representing the rate of demand Dt (p)
of asset per unit of time at time t and at price p. This means that if the time path
of prices is given in some state of the world by
R t some function φ : [0, ∞) → R, then by
time t the cumulative quantity purchased is 0 Ds (φ(s)) ds and the total price paid is
Rt
0 φ(s)Ds (φ(s)) ds, whenever these integrals are well defined.
We will consider an equilibrium in which demand Dit (p) of trader i at time t and price
p is continuous in both t and p and strictly decreasing in p, and such that the market
clearing price φ(t) at time t, when well defined, is the solution in p of the market-clearing
equation:
X
Dit (p) = 0.
(136)
i

P
This market clearing price, when well defined, is denoted Φ( i Dit ).
An equilibrium is a collection (D
P1 , . . . , Dn ) of demand functions such that, for each
time t the market-clearing price Φ( i Dit ) is well defined
P and such that, for agent i, the
demand function Di solves the problem, taking D−i = j6=i Dj as given,

Z
sup E ziD (T )π −
D

T





γziD (t)2 + Dt [Φ (Dt + D−i,t )] Φ (Dt + D−it ) dt ,

(137)

0

where γ > 0 is a holding-cost parameter and
Z t
D
zi (t) = zi0 +
Ds [Φ (Ds + D−i,s )] ds
0

is the inventory of agent i at time t.
We will look for an equilibrium in which the initial price p(0) instantly reveals the
total market supply Z and in which the demand function of trader i depends only his
current inventory zit .
We will conjecture and verify the equilibrium given by


2γ
Dit (p) = a v − p −
zit ,
(138)
r
where
a=

(n − 2)r2
.
4γ

49

(139)

The unique associated market-clearing price at any time t is
p∗ = v −

2γ
Z.
nr

From this, the inventory position of trader i at time t can be calculated as


Z
Z
−(n−2)rt/2
zit = + e
.
zi0 −
n
n

(140)

(141)

Given this conjectured equilibrium, for any agent i, the sum D−i,t of the demand
functions of the other agents at time t is

X 
2γ
2aγ
D−i,t (p) = D−i (p; zit , Z) ≡
a v−p−
zjt = (n − 1)a(v − p) −
(Z − zit ).
r
r
j6=i

Based on this calculation, the continuation utility V (z) for the inventory level of any trader
at any time t < T who has the inventory level z satisfies the Hamilton-Jacobi-Bellman
(HJB) equation


0 = sup −D(Φ(D + D−i ( · ; z, Z))Φ(D + D−i ( · ; z, Z)) + V 0 (z)D(Φ(D + D−i ( · ; z, Z))
D

− γz 2 + r(vz − V (z)).

(142)

The first term on the right-hand side of (142) is the rate of cost of acquiring inventory
in auctions, that is, the quantity rate D(Φ(D + D−i ( · ; z, Z)) multiplied by the price
Φ(D + D−i ( · ; z, Z)). The second term is the marginal value V 0 (z) of inventory multiplied
by the rate D(Φ(D + D−i ( · ; z, Z)) of inventory accumulation. The sum of these first two
terms is optimized by choosing some demand function D. The next term accounts for the
rate of inventory holding cost, γz 2 . The final term is the product of the mean rate r of
arrival of the time of the asset payoff and the expected change vz − V (z) in the trader’s
indirect utility if that payoff were to occur immediately.
Because Z is constant and observable after time 0, the HJB equation does not pin
down a unique optimizing demand function D( · ). Instead, the HJB equation makes the
demand problem for agent i equivalent to picking the quantity x the agent wishes to buy,
and then submitting any demand function D( · ) with the property that D(p) = x, where p
solves x + D−i (p; z, Z) = 0. In order to avoid degenerate behavior of this type, we require
that the submitted demand function Di ( · ) must depend only on the inventory zit trader
i and of course the price p. That is, we require that Dit (p) = ft (p, zit ) for some function
ft : R × R → R. Nevertheless, in equilibrium, the resulting demand will turn out to be
optimal even if the class of demand functions is expanded to allow dependence on Z.
We will conjecture and verify that, in equilibrium,
Z
γ
V (z) = v −
n
r

 2 




Z
γZ
Z
γ 1
Z 2
+ v−2
z−
−
z−
.
n
rn
n
r n−1
n

(143)

We use the fact that V is quadratic and concave, thus bounded above.
Proposition 7. Suppose, for a given trader i, that the demand function Dj for any
trader j 6= i is given by (138). The function V given by (143) satisfies the HJB equation
(142). Given this choice for V , the optimization problem posed within the HJB equation

50

is satisfied by the demand function Dit of (138). The optimal demand problem (137) for
agent i is also solved by (138).
We have shown this result by a direct calculation that is available on the authors’ web
sites. Here, in order to save space, the calculation is omitted.
With this verification of the HJB equation as a characterization of each agent’s optimal
strategy given the same conjectured strategy for other agents, we can now summarize with
the main equilibrium result for the continuous-time model.
Proposition 8. An equilibrium of the continuous-time double-auction market is as follows.
1. The demand function Dit of trader i at time t is given by:


(n − 2)r2
2γ
Dit =
v−p−
zit ,
4γ
r
where the equilibrium inventory of trader i at time t is


Z
Z
−(n−2)rt/2
zit = + e
zi0 −
.
n
n

(144)

(145)

The equilibrium price at time t is constant at
p∗ = v −

2γ
Z.
nr

(146)

2. The indirect utility V (z) of any agent i for inventory z at any time t > 0 that is
before the asset payoff time T is given by
Z
γ
V (z) = v −
n
r

C

 2 




Z
2γ Z
Z
γ
Z 2
+ v−
z−
−
z−
.
n
r n
n
r(n − 1)
n

(147)

Welfare and Squared Asset Dispersion

A reallocation of the inventory vector (z10 , . . . , zin ) is an allocation z 0 = (z10 , . . . , zn0 ) with
the same total Z. A reallocation z 0 is a Pareto improvement if, when replacing zi0 with
zi0 , the equilibrium utility E(Vi,0+ ) before entering the sequential-double-auction market
is weakly increased for every i and strictly increased for some i. We have the following
corollary of Proposition 2.
Pn
Corollary 2. The total expected ex-ante utility W (z0 ) =
i=1 E(Vi,0+ ) is one-to-one
and strictly monotone decreasing (in fact linear) in the sum of mean squared excess asset
positions,
 !
n 
X
Z 2
D(z0 ) = E
zi0 −
.
n
i=1

Thus, if a reallocation

z0

=

(z10 , . . . , zn0 )

is a Pareto improvement, then D(z 0 ) < D(z0 ).

This result follows from the fact that W (z0 ) is a constant plus the product of D(z0 )
and a negative constant.

51

Because traders’ preferences are linear with respect to total net pecuniary benefits,
W ( · ) is a reasonable social welfare function. This follows from the fact that for any
allocations z 0 and z with W (z 0 ) > W (z), the allocation z 0 is Pareto preferred to z after
allowing for transfer payments.
The magnitude of welfare improvement offered by the bilateral workup, conditional on
the double auctions, can be calculated explicitly. We focus on the welfare of the buyer and
the seller in the bilateral workup under consideration, and assume zero inventory shocks
after time 0. Start from any pre-workup inventory levels −x < 0 for the buyer and y > 0
for the seller, where x and y are exponentially distributed with mean 1/µ. The workup
volume is V ≡ max(0, min(x − (M + δ), y − (M − δ))), and the post-workup inventories
are −x + V and y − V . By Corollary 2, the ex-ante welfare improvement induced by a
single bilateral workup is proportional to (with multiplier (γ/r)C, by (13)) the reduction
in total mean-squared inventory dispersion for the buyer-seller workup pair, which is


E (−x − Z/n)2 + (y − Z/n)2 − (−x + V − Z/n)2 − (y − V − Z/n)2


= E −2V 2 + 2(x + y)V
Z ∞
Z ∞
=
µe−µx µe−µy (−2V 2 + 2(x + y)V ) dx dy.
(148)
x=M +δ

y=M −δ

A change of variables, taking u = x − M − δ and w = y − M + δ, allows one to re-express
the integral as
Z ∞ Z ∞


µ2 e−2µM e−µ(u+w) −2 min(u, w)2 + 2(u + w + 2M ) min(u, w) du dw. (149)
u=0

w=0

Further simplification reduces this integral to
2e−2M µ (1 + M µ)
,
µ2

(150)

which is decreasing in M and invariant to δ in the interval [0, M ].
On the other hand, without the workup, the expected welfare cost of the buyer and
the seller that arises from strategic avoidance of price impact is proportional to (also with
multiplier (γ/r)C, by (13))
E[(−x − Z/n)2 + (y − Z/n)2 ]

!2
n
X
n
−
1
1
1
=E  −
x− y−
zi0 +
n
n
n
i=3

n

1
n−1
1X
x+
y−
zi0
n
n
n

n−1 4
=
,
n µ2

!2 


i=3

(151)

2 ] = 2/µ2 and that (x, y, {z }) are
where we use the facts that E[x2 ] = E[y 2 ] = E[zi0
i0
mutually independent.
Therefore, the fraction of welfare cost between the buyer and the seller that is eliminated by the bilateral workup is

R=

n
e−2M µ (1 + M µ).
2(n − 1)

52

(152)

D

Adding A Special Opening Double Auction

In order to concretely illustrate the difference between adding a size-discovery mechanism
at time zero and adding a price-discovery mechanism at time zero, in this appendix we
replace our initializing workup step with a single double auction. As with workup, this
“opening auction” is held immediately before the start of the sequential double auction
market, at “time 0−.” We allow bidding strategies to vary from the stationary demand
functions used in equilibrium in subsequent rounds of double auction.
In the initializing double auction at time 0−, we conjecture that traders submit a
demand function xi ( · ) of the form
xi (p) = b(v − p) − dzi0 ,

(153)

for a strictly positive coefficient b and a nonzero coefficient d to be determined.22 The
expected utility in the extended game is
E [−pxi (p) + V(xi (p) + zi0 , Z)] ,

(154)

where p is the market-clearing price and V( · ) is the indirect utility for positions entering
the subsequent sequential double auction markets, given by Proposition 2.
We now solve the problem faced by trader i, taking as fixed the linear demand strategies
of the other traders. Market-clearing implies that
xi (p) + (n − 1)b(v − p) − dZ−i0 = 0,

(155)

where Z−i0 = Z − zi0 is the total inventory of traders other than trader i. Thus, from the
market-clearing price p, trader i can infer Z−i0 . At each outcome of the market-clearing
price, trader i therefore effectively observes Z, so faces the equivalent problem, taking Z
as given and taking into account the impact of xi on the price p = P (xi ),
max
xi

−P (xi )xi + V(xi + zi0 , Z).

(156)

Because the aggregate demand schedule of the other traders is
X
xj (p) = (n − 1)b(v − p) − dZ−i0 ,
j6=i

an increase of xi by one unit pushes up the equilibrium price P (xi ) by
1
dP (xi )/dxi = (n−1)b
. The first order optimality condition of trader i is thus


1
γZ
γ
Z
0 = −P (xi ) − xi
+v−2
− 2C xi + zi0 −
,
(n − 1)b
rn
r
n
where
C=

1 − 2a∆ γr
.
n−1

22

1
(n−1)b .

So

(157)

(158)

If b > 0 and d = 0, then the conjectured strategies would generate a price equal to v and hence zero trading
volume. If b = 0 and d 6= 0, then with probability 1, the market would not clear. If b < 0, then the second-order
condition would be violated. If b = d = 0, then no trade would happen by assumption.

53

Since Z is inferred from p, we need to express Z in terms of p. Market-clearing gives
Z−i0 =

xi + (n − 1)b(v − p)
.
d

(159)

Substituting this into the first order condition, we get




1
γ
γ
γ
1 xi + (n − 1)b(v − p)
0 = v − p − xi
+ 2 C − 2 Czi0 − 2 (1 − C)
+ zi0 ,
(n − 1)b
r
r
r
n
d




1
γ
(n − 1)b
γ
γ
1
= (v − p) 1 − 2 (1 − C)
− xi
+ 2 C + 2 (1 − C)
r
nd
(n − 1)b
r
r
nd


γ
γ
1
.
(160)
− zi0 2 C + 2 (1 − C)
r
r
n
The above equation must be consistent with the conjecture xi (p) = b(v − p) − dzi0 , so we
have
b=

1 − 2 γr (1 − C) (n−1)b
nd
γ
γ
1
1 ,
+
2
C
+
2
(1
− C) nd
r
r
(n−1)b

(161)

d=

2 γr C + 2 γr (1 − C) n1
γ
γ
1
1 .
(n−1)b + 2 r C + 2 r (1 − C) nd

(162)

Solving these two equations, we have
b=

r n − 2 − 1−C
C
,
2γ
n−1

d=

n − 2 − 1−C
C
.
n−1

(163)

But C ≤ 1/(n − 1), so 1−C
C ≥ n − 2, which implies that b ≤ 0 and d ≤ 0, contradicting
the supposition that b is strictly positive. Thus, there does not exist a symmetric linear
equilibrium with positive trading intensity, and the added double auction at time 0− has
zero trading volume.

E

Markovian Multilateral Workup Equilibrium

The following proposition provides a complete description of Markovian multilateral workup
equilibrium. The equilibrium workup strategy of each player depends on that player’s
privately observed pre-workup asset inventory and on the publicly observable Markov
process23 (m, X, y).
Proposition 9. Suppose that e−r∆ > 1/2. The multilateral dynamic workup game associated with workup price p̄ = v has a unique equilibrium in Markovian threshold dropout
strategies. This equilibrium is characterized by the following recursive determination of
the workup state and of traders’ equilibrium dropout strategies. Here, zib and zjs denote
23

Specifically, (m, X, y) = (mt , Xt , yt )(t≥0) is a continuous-time Markov process with state space N × R × R,
where N is the space of natural numbers. To be precise, one can add an artificial independent exponential “wait
time” after each transition to an inactive state. This ensures that the state cannot jump twice at the same time
on the workup clock when making a transition from an inactive state to an inactive state after an immediate
dropout.

54

the pre-workup inventories of the i-th buyer and the j-th seller, respectively. The initial
workup state is (m, X, y) = (2, 0, 0).
1. At any inactive workup state (m, X, 0):
(a) If |zib | ≤ Mb (m, X) and zjs > Ms (m, X), where Mb (m, X) and Ms (m, X) are
given by (33) and (34) respectively, then the buyer, and only the buyer, exits
immediately (that is, without trading any quantity). Unless Nb = i, the workup
state then evolves to (m + 1, X − ν(Mb (m, X)), 0).
(b) If |zib | > Mb (m, X) and zjs ≤ Ms (m, X), then the seller, and only the seller,
exits immediately. Unless Ns = j, the workup state evolves to (m + 1, X +
ν(Ms (m, X)), 0).
(c) If |zib | ≤ Mb (m, X) and zjs ≤ Ms (m, X), then both sides exit immediately,
without trading any quantity. Unless Nb = i or Ns = j, the workup state
evolves to (m + 2, X − ν(Mb (m, X)) + ν(Ms (m, X)), 0).
(d) If |zib | > Mb (m, X) and zjs > Ms (m, X), then the current buyer i and seller j
enter an active workup. That is, the workup state evolves to (m, X, 0).
(e) If, at any of the transitions above, Nb = i or Ns = j, then the workup ends.
2. At any active workup state (m, X, y), the current buyer i and seller j remain in the
workup as their traded quantity rises until the earlier of the two following events (a)
and (b):
(a) The remaining inventory of the buyer (which is negative) rises to the threshold
−Mb (m, X) = −(M ∗ (m) + L(m)X). At this point, the buyer exits. Unless
Nb = i, the workup state evolves to (m + 1, X − (M ∗ (m) + L(m)X), 0).
(b) The remaining inventory of the seller falls to the threshold Ms (m, X) = M ∗ (m)−
L(m)X. At this point, the seller exits. Unless Ns = j, the state evolves to
(m + 1, X + M ∗ (m) − L(m)X, 0).
(c) On the zero-probability event that (a) and (b) occur simultaneously, the state
evolves to (m + 2, X − 2L(m)X, 0) unless Nb = i or Ns = j.
(d) If, at either or both of (a) or (b), we have Nb = i or Ns = j, then the workup
ends.

F

Comparing Various Market Structures

In the main body of the paper we have shown that adding a single workup before the
sequential double auction market improves allocative efficiency. In this appendix, we
solve an alternative market structure with only a size discovery mechanism—bilateral
workups—at time 0. This size-discovery-only market presents an interesting tradeoff: the
lack of future trading opportunities rules out after-workup inventory rebalancing, but it
also encourages traders to execute a greater trade quantity during workup. For simplicity,
we focus on the case with an unbiased workup price, that is, p̄ = v. We also restrict
attention to the case without subsequent inventory shocks. These shocks do not change
traders’ strategies, as shown in Section 3.

55

No trading at all. It is easy to see that without any trading, the welfare of trader i
is given by an expression similar to (13), except that Θ = 0 and the penultimate term is
γ
−
r



Z
zi0 −
n

rather than
γ 1 − 2a∆ γ/r
−
r
n−1

2
,

(164)



Z 2
zi0 −
.
n

(165)

This is our benchmark level of total ex-ante expected social surplus.

Only workup. If there is only a single workup and no double auctions, there would
be no price discovery. This means that the total inventory Z is never disclosed. In this
case, a trader’s expected utility after the workup, from holding inventory z, is
V(z) = vz −

γ 2
z .
r

(166)

In a bilateral workup, the buyer’s utility is simply
U b = −p̄y + V(S b + y) = vS b −

γ b
(S + y)2 ,
r

(167)

where we have used p̄ = v. Note that the total inventory Z is irrelevant here because the
buyer has no further opportunities to trade. Taking the first-order condition with respect
to y and equating it to zero at S b + y = −Mb , we get
Mb = 0.

(168)

By a symmetric calculation, the seller’s dropout threshold is
Ms = 0.

(169)

Zero dropout thresholds imply that the self-rationing workup behavior we saw in Section 4
does not apply because there are no further trading opportunities. Thus, in this alternative
structure, everyone who receives any inventory shock wishes to participate in bilateral
workups.
Next, we calculate the welfare improvement of having a single workup, relative to the
no-trade benchmark. Because the buyer’s absolute inventory size is S b > 0 and the seller’s
inventory size is S s > 0, the workup volume is V = min(S b , S s ). The improvement in
allocative efficiency (relative to the no-trading benchmark) for this pair is
E[(S b )2 + (S s )2 − (−S b + V )2 − (S s − V )2 ].

(170)

Inspecting (148) of Appendix C, we see that the above expectation can be simplified by
taking the special case of Z = 0 and M = δ = 0 in (148), so that the expectation simplifies
to 2/µ2 . Since the coefficient in front of the squared inventory is γ/r, the improvement in
allocative efficiency for each buyer-seller pair is
γ 2
.
r µ2

56

(171)

Since there are n traders, we have at most bn/2c buyer-seller pairs. Thus, if bilateral
workups are the only opportunities to trade, the expected efficiency improvement, relative
to the no-trade benchmark, is at most
γ 2 n
b c.
r µ2 2

(172)

Only double auctions. If we only add the double auctions (and no workup), the
efficiency improvement (relative to the no-trading benchmark) is

 "X 
 #


1 − 2a∆ γ/r
Z 2
γ
1 − 2a∆ γ/r
2
γ
1−
E
zi0 −
=
1−
(n − 1) 2 ,
r
n−1
n
r
n−1
µ

(173)

i

using the fact that 2/µ2 is the variance of zi0 . Since a∆ ≥ 0, the efficiency improvement
achieved by the double auction market, on its own, has a lower bound of
γ 2
(n − 2).
r µ2

(174)

Comparison among market structures. Clearly, for all n ≥ 3, we have n −
2 ≥ b n2 c. Thus, a market structure with only double auctions weakly dominates the
market structure with only a single workup. This inequality is actually strict because in
expectation, n traders generate fewer than bn/2c bilateral workup pairs. Thus, we have
the following ranking of market designs, with respect to total expected social surplus:
workup + double auctions  double auctions only  workup only  no trade. (175)

References
Adrian, T., M. Fleming, O. Shachar, and E. Vogt (2015): “Has U.S. Corporate
Bond Market Liquidity Deteriorated?” Liberty Street Economics, Federal Reserve Bank
of New York.
Arrow, K. (1951): “An Extension of the Basic Theorems of Classical Welfare Economics,” in Second Berkeley Symposium on Mathematical Statistics and Probability,
ed. by J. Neyman, Berkeley: University of California Press, 507–532.
——— (1979): “The Property Rights Doctrine and Demand Revelation Under Incomplete
Information,” in Economics and Human Welfare, ed. by M. Boskin, Academic Press.
Aumann, R. (1964): “Markets with a Continuum of Traders,” Econometrica, 32, 39–50.
Ausubel, L. M., P. Cramton, M. Pycia, M. Rostek, and M. Weretka (2014):
“Demand Reduction, Inefficiency and Revenues in Multi-Unit Auctions,” Review of
Economic Studies, 81, 1366–1400.

57

BGC (2015): “BGC Derivative Markets, L.P. Rules,” Tech. rep.
Boni, L. and C. Leach (2004): “Expandable Limit Order Markets,” Journal of Financial Markets, 7, 145–185.
Boni, L. and J. C. Leach (2002): “Supply Contraction and Trading Protocol: An
Examination of Recent Changes in the U.S. Treasury Market,” Journal of Money,
Credit, and Banking, 34, 740–762.
Buti, S., B. Rindi, and I. M. Werner (2011): “Diving into Dark Pools,” Working
paper, Fisher College of Business, Ohio State University.
——— (2015): “Dark Pool Trading Strategies, Market Quality and Welfare,” Working
paper, University of Toronto.
Collin-Dufresne, P., B. Junge, and A. B. Trolle (2016): “Market Structure and
Transaction Costs of Index CDSs,” Tech. rep., EPFL (to appear).
d’Aspremont, C. and L. Gérard-Varet (1979): “Incentives and Incomplete Information,” Journal of Public Economics, 11, 25–45.
Degryse, H., M. Van Achter, and G. Wuyts (2009): “Dynamic Order Submission
Strategies with Competition between a Dealer Market and a Crossing Network,” Journal
of Financial Economics, 91, 319–338.
Du, S. and H. Zhu (2015): “Welfare and Optimal Trading Frequency in Dynamic Double
Auctions,” NBER working paper 20588.
Duffie, D. (2010): “Presidential Address: Asset Price Dynamics with Slow-Moving
Capital,” Journal of Finance, 65, 1237–1267.
Dungey, Mardi, Ólan. H. and M. McKenzie (2013): “Modelling Trade Duration in
U.S. Treasury Markets,” Quantitative Finance, 13, 1431–1442.
Fleming, M. and G. Nguyen (2015): “Order Flow Segmentation and the Role of Dark
Trading in the Price Discovery of U.S. Treasury Securities,” Working paper, Federal
Reserve Bank of New York.
Fleming, M., E. Schaumburg, and R. Yang (2015): “The Evolution of Workups in
the U.S. Treasury Securities Market,” Liberty Street Economics, Federal Reserve Bank
of New York.
GFI (2015): “GFI Swaps Exchange LLC Rulebook,” Tech. rep.
Giancarlo, J. C. (2015): “Pro-Reform Reconsideration of the CFTC Swaps Trading
Rules: Return to Dodd-Frank,” White paper.
Hendershott, T. and H. Mendelson (2000): “Crossing Networks and Dealer Markets:
Competition and Performance,” Journal of Finance, 55, 2071–2115.
Huang, R. D., J. Cai, and X. Wang (2002): “Information-Based Trading in the
Treasury Note Interdealer Broker Market,” Journal of Financial Intermediation, 11,
269–296.

58

Joint CFTC-SEC Advisory Committee (2011): “Recommendations Regarding Regulatory Responses to the Market Event of May 6, 2010,” Summary Report, Securities Exchange Commission and Commodity Futures Trading Commission, Washington,
D.C.
Joint Staff Report (2015): “The U.S. Treasury Market on October 15, 2014,” Tech.
rep., U.S. Department of the Treasury, Board of Governors of the Federal Reserve
System, Federal Reserve Bank of New York, U.S. Securities and Exchange Commission,
and U.S. Commodity Futures Trading Commission, Washington, D.C.
Klemperer, P. D. and M. A. Meyer (1989): “Supply Function Equilibria in Oligopoly
under Uncertainty,” Econometrica, 57, 1243–1277.
Kyle, A. S. (1989): “Informed Speculation with Imperfect Competition,” Review of
Economic Studies, 56, 317–355.
Menkveld, A. J., B. Z. Yueshen, and H. Zhu (2016): “Shades of Darkness: A
Pecking Order of Trading Venues,” Forthcoming, Journal of Financial Economics.
Myerson, R. and P. Reny (2015): “Sequential Equilibria of Multi-Stage Games with
Infinite Sets of Types and Actions,” Working paper, University of Chicago.
Pancs, R. (2014): “Workup,” Review of Economic Design, 18, 37–71.
Ready, M. J. (2014): “Determinants of Volume in Dark Pool Crossing Networks,” Working paper, University of Wisconsin-Madison.
Rostek, M. and M. Weretka (2012): “Price Inference in Small Markets,” Econometrica, 80, 687–711.
——— (2015): “Dynamic Thin Markets,” Review of Financial Studies, 28, 2946–2992.
Schaumburg, E. and R. Yang (2016): “The Workup, Technology, and Price Discovery in the Interdealer Market for U.S. Treasury Securities,” Liberty Street Economics,
Federal Reserve Bank of New York.
Securities and Exchange Commission (2010): “Concept Release on Equity Market
Structure; Proposed Rule,” Federal Register, 75, 3593–3614.
SIFMA (2016): “SIFMA Electronic Bond Trading Report: US Corporate & Municipal
Securities,” Securities Industry and Financial Markets Association, Technical Report.
Tradeweb (2014): “Market Regulation Advisory Notice – Work-Up Protocol,” Tech.
rep.
Tradition (2015): “Tradition SEF Platform Supplement,” Tech. rep.
U.S. Department of the Treasury (2016): “Notice Seeking Public Comment on
the Evolution of the Treasury Market Structure,” Docket No. TREAS-DO-2015-0013,
Department of the Treasury, Washington, D.C.
Vayanos, D. (1999): “Strategic Trading and Welfare in a Dynamic Market,” The Review
of Economic Studies, 66, 219–254.

59

Vives, X. (2011): “Strategic Supply Function Competition with Private Information,”
Econometrica, 79, 1919–1966.
Wholesale Markets Brokers’ Association (2012): “Comment for Proposed Rule
77 FR 38229,” Tech. rep.
Wilson, R. (1979): “Auctions of Shares,” Quarterly Journal of Economics, 93, 675–689.
Zhu, H. (2014): “Do Dark Pools Harm Price Discovery?” Review of Financial Studies,
27, 747–789.

60

