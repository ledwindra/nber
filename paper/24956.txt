NBER WORKING PAPER SERIES
FRICTIONAL INTERMEDIATION IN OVER-THE-COUNTER MARKETS
Julien Hugonnier
Benjamin Lester
Pierre-Olivier Weill
Working Paper 24956
http://www.nber.org/papers/w24956
NATIONAL BUREAU OF ECONOMIC RESEARCH
1050 Massachusetts Avenue
Cambridge, MA 02138
August 2018
This paper merges and extends three earlier working papers of ours, Hugonnier (2012),
Lester and Weill (2013), and Hugonnier, Lester, and Weill (2014). The present version is
dated August 13, 2018. We thank, for fruitful discussions and suggestions, Gadi Barlevy,
Julien Cujean, Jaksa Cvitanic, Darrell Duffie, Rudi Fahlenbrach, Mahyar Kargar, Shuo Liu,
Semyon Malamud, Thomas Mariotti, Artem Neklyudov, Ezra Oberfield, Remy Praz,
Guillaume Rocheteau, Mengbo Zhang, and seminar participants at the 2012 Gerzensee
workshop on Search and Matching in Financial Markets, the 2012 Bachelier workshop, the
2013 AFFI Congress, EPFL, the University of Lausanne, the Federal Reserve Bank of
Philadelphia, the 2014 SaM Conference in Edinburgh, the 2014 conference on Recent
Advances in OTC Market Research in Paris, Royal Holloway, UCL, CREST, the 2014
KW25 Anniversary conference, the 2014 Summer Workshop on Money, Banking,
Payments and Finance at the Chicago Fed, the Fall 2014 SaM Conference in
Philadelphia, the Wharton macro lunch seminar, the University of Chicago, Yale University,
Carnegie Mellon University, Cornell University, the Desautels Faculty of Management at McGill
University, the McCombs School of Business at UT Austin, the Fall 2014 meeting of the Finance
Theory Group, UC Irvine, the Kellogg School of Management, UNC Kenan-Flagler Business
School, the 2015 Trading and post-trading conference at the Toulouse School of Economics, the
2016 SED Meeting in Toulouse, UC Riverside, UC Davis, Stanford University, Erasmus
University, University of Lugano, and EDHEC. The views expressed here are those of the authors
and do not necessarily reflect the views of the Federal Reserve Bank of Philadelphia or the
Federal Reserve System. This project was started when Pierre-Olivier Weill was a visiting
professor at the Paris School of Economics, whose hospitality is gratefully acknowledged.
Financial support from the Swiss Finance Institute is gratefully acknowledged by Julien
Hugonnier. The views expressed herein are those of the authors and do not necessarily reflect the
views of the National Bureau of Economic Research.
NBER working papers are circulated for discussion and comment purposes. They have not been
peer-reviewed or been subject to the review by the NBER Board of Directors that accompanies
official NBER publications.
© 2018 by Julien Hugonnier, Benjamin Lester, and Pierre-Olivier Weill. All rights reserved.
Short sections of text, not to exceed two paragraphs, may be quoted without explicit permission
provided that full credit, including © notice, is given to the source.

Frictional Intermediation in Over-the-counter Markets
Julien Hugonnier, Benjamin Lester, and Pierre-Olivier Weill
NBER Working Paper No. 24956
August 2018
JEL No. G11,G12,G21
ABSTRACT
We extend Duffie, Garleanu, and Pedersen’s (2005) search-theoretic model of over-the-counter
asset markets, allowing for a decentralized inter-dealer market with arbitrary heterogeneity in
dealers’ valuations or inventory costs. We develop a solution technique that makes the model
fully tractable and allows us to derive, in closed form, theoretical formulas for key statistics
analyzed in empirical studies of the intermediation process in OTC market. A calibration to the
market for municipal securities reveals that the model can generate trading patterns and prices
that are quantitatively consistent with the data. We use the calibrated model to compare the gains
from trade that are realized in this frictional market with those from a hypothetical, frictionless
environment, and to distinguish between the quantitative implications of various types of
heterogeneity across dealers.
Julien Hugonnier
Ecole Polytechnnique Fédérale de Lausanne
Quartier UNIL Dorigny Extranef #212
1015 Lausanne Switzerland
and Swiss Finance Institute
Julien.Hugonnier@epfl.ch
Benjamin Lester
Research Department
Federal Reserve Bank of Philadelphia
10 Independence Mall
Philadelphia, PA 19106
Benjamin.Lester@phil.frb.org

Pierre-Olivier Weill
Department of Economics
University of California, Los Angeles
Bunche Hall 8283
Los Angeles, CA 90095
and NBER
poweill@econ.ucla.edu

1

Introduction

Recent empirical studies have uncovered detailed stylized facts about the intermediation
process in over-the-counter (OTC) markets.1 Notably, assets tend to be reallocated from
one customer to another through a sequence or chain of dealers, and dealers are heterogeneous with respect to their typical positions in these chains, the frequency and direction
with which they trade, and the prices at which they transact. Moreover, the details of this
intermediation process—including the number and types of dealers that are involved
in chains—are related to important market outcomes, such as bid-ask spreads, trading
volume, and other measures of market quality or liquidity.2 These observations pose a
clear challenge to benchmark search-theoretic models of OTC markets, such as Duffie,
Gârleanu, and Pedersen (2005) and Lagos and Rocheteau (2009), in which dealers are
homogenous and the inter-dealer market is frictionless.
In this paper, we develop a search-theoretic framework that is capable of confronting
these facts, and yet tractable enough to provide clear insights into the underlying economic forces, and into the aggregate implications for prices, allocation, and efficiency. As
in Duffie et al. (2005), we assume that there is a measure of customers who periodically
experience shocks that change their flow valuation for an asset, and that these customers
must search for a dealer with whom to trade. Our first key innovation is to model the
dealer sector as a decentralized market, where dealers periodically meet other dealers
who may be willing and able to trade. Our second key innovation is to allow for an
arbitrary, continuous distribution of dealers’ flow valuations (or, equivalently, inventory
costs). Taken together, these assumptions generate intermediation chains of stochastic
lengths and imply that, as in the data, dealers will differ with respect to their typical
position within a chain, the frequency and direction with which they trade, and their
contribution to trading volume.
1 Examples

of assets that trade in OTC markets include corporate and municipal bonds, asset-backed
securities, foreign exchange swaps, and fed funds, to name a few. OTC markets were traditionally
opaque because trades are conducted via private, bilateral negotiations. In recent years, several regulatory
initiatives aimed at promoting transparency in certain prominent OTC markets have produced high quality,
transaction-level data. Examples include the Municipal Securities Rulemaking Board (MSRB) in the
municipal securities market, and the Trade Reporting and Compliance Engine (TRACE) in the markets
for corporate bonds and securitized assets.
2 See, for example, Li and Schürhoff (2014), Hollifield, Neklyudov, and Spatt (2014), and Di Maggio,
Kermani, and Song (2017), among others.

1

While these innovations clearly generate a richer model, they also introduce some
significant technical hurdles, as the reservation values of customers and dealers solve a
system of dynamic programming equations for which the relevant state variable is an
infinite-dimensional object: the joint distributions of flow valuations and asset holdings
across the populations of customers and dealers. However, despite this greater complexity, we are able to establish key properties of equilibrium trading patterns, which
allows for a parsimonious characterization of the equilibrium distributions. As a result,
the model remains fully tractable, which offers three distinct advantages.
First, we can reduce the characterization of equilibrium to a fixed-point problem over a
two-dimensional endogenous variable, which can be used to derive other equilibrium objects in closed-form. This allows us to establish existence of an equilibrium, and provide
sufficient conditions for uniqueness. We also derive necessary and sufficient conditions
for dealers to actively intermediate trades between customers. These intuitive conditions
identify the role of preferences, meeting rates, and bargaining powers in explaining the
size of the dealer sector and, more generally, why the presence of intermediaries varies
across markets.
Second, we explicitly derive and analyze a number of model-implied statistics that
have direct counterparts in the empirical literature that studies the intermediation process
in OTC markets. These derivations include the average time-to-trade for customers and
(all types of) dealers; the distribution over the length of intermediation chains; the volume
of trade generated by customer-dealer and dealer-dealer trades; the concentration of
trading volume across dealers; and the relationship between intermediation chain length
and the bid-ask spread or “markup.” Using these derivations, we argue that the model is
qualitatively consistent with a number of stylized facts.
Third, exploiting our closed-form solutions, we calibrate the model in a simple, transparent fashion. We focus on the market for municipal securities because it shares many
fundamental features with our model, and the available micro-data offers a detailed
description of the prevailing intermediation process.

Our calibration exactly matches

key targets in the data—including turnover, the average inventory duration of dealers,
the average length of intermediation chains, and the average liquidity yield spread—and
reveals the relative importance of the arrival rates of preferences shocks, trading opportunities between customers and dealers, and trading opportunities within the dealer sector.
It also generates predictions that are quite close to several non-targeted moments.
2

However, the quantitative analysis also reveals a tension in the model: it is difficult to
simultaneously match the level and the slope of the empirical relationship between chain
length and markups. More specifically, we find that generating the large level of markups
observed in the data requires endowing dealers with most of the bargaining power when
they trade with customers, which in turn makes it hard to match the steep, positive slope
of the relationship between chain length and markup. Our structural framework allows
us not only to explain this tension in a straightforward manner, but also to formulate a
natural extension of our model to resolve it.
Specifically, we consider an alternative formulation in which dealers do not differ in
their flow valuations, but in their ability to locate customers with high willingness to pay
for the asset. This extension preserves the key qualitative properties of our benchmark
model, but resolves the tension described above. It also illustrates that our solution
techniques extend to other forms of heterogeneity, and that exploring the quantitative
implications of our model can help to distinguish between these different forms of heterogeneity. Finally, we use the calibrated model to perform welfare analysis. We show
that, according to the extended model, the search market achieves about 98% of the total,
frictionless, gains from trade. Of these gains from trade, customers appropriate about 90
percent, and dealers about 10 percent.

Related literature
Our paper contributes to the literature that uses search models to study asset prices and
allocations in OTC markets. Early papers include Gehrig (1993), Spulber (1996), and Rust
and Hall (2003). Most recent papers build on the framework of Duffie et al. (2005).
One strand of the literature, such as Weill (2007), Lagos and Rocheteau (2009), Gârleanu
(2009), Lagos, Rocheteau, and Weill (2011), Feldhütter (2012), Pagnotta and Philippon
(2018), and Lester, Rocheteau, and Weill (2015), have studied semi-centralized markets, in
which customers search for an exogenously designated set of dealers who trade together
in a frictionless market. Unfortunately, while this assumption offers a certain amount
of tractability, it is clearly at odds with the empirical evidence about the intermediation
process that we seek to study. This is why, in the present paper, we assume that dealers
themselves trade in a purely decentralized market.

3

As is well-known, purely decentralized markets are harder to analyze because the
relevant state variable is a distribution. Early models in the literature have reduced the
dimensionality of this state variable by limiting heterogeneity in valuations to a twopoint distribution; see, e.g., Duffie, Gârleanu, and Pedersen (2007), Vayanos and Wang
(2007), Vayanos and Weill (2008), Weill (2008), Afonso (2011), Gavazza (2011, 2016), Praz
(2013), and Trejos and Wright (2014). However, the restriction to two types prevents these
models from addressing many of the substantive issues analyzed in our paper, such as
the reallocation of assets through intermediation chains, the heterogenous roles played
by dealers along these chains, and the implications of this trading process for prices and
allocations. This is why, in the present paper, we assume arbitrary heterogeneity across
dealers’ flow valuations.
One earlier paper that studies a purely decentralized asset market with more than
two types of investors is Afonso and Lagos (2015). While several insights from Afonso
and Lagos feature prominently in our analysis, our work is quite different in a number
of important ways. First, we consider two classes of agents, customers and dealers, who
have access to different matching technologies. This adds realism but creates a two-way
feedback between trading decisions and distributions, making the characterization of
equilibrium more involved.3 Second, while Afonso and Lagos establish many of their
results via numerical methods, we characterize the equilibrium in closed-form for an
arbitrary distribution of dealer types, allowing for a tractable analysis of intermediation
chains, heterogeneity across dealers, and markups. Lastly, Afonso and Lagos use their
framework to study inter-bank trading in the federal funds market, while we analyze the
market for municipal securities.
The present paper merges, replaces, and extends Hugonnier (2012), Lester and Weill
(2013), and Hugonnier et al. (2014), in which we developed the techniques to solve for
equilibrium in the search model of Duffie et al. (2005) with a continuum of types. Related contemporaneous work includes Neklyudov (2012), who considers a model with
two valuations but introduces heterogeneity in trading speed; the online Appendix of
Gavazza (2011), who proposes a model of purely decentralized trade with a continuum
of types, subject to search costs, and focuses on the case in which investors trade only once
3 Afonso and Lagos establish that agents find it optimal to trade according to a fixed, myopic rule.

Hence,
distributions can be calculated in a first step, and do not feed back into trading decisions. This property
breaks down in the present model.

4

between preference shocks; and Cujean and Praz (2013), who study transparency in OTC
markets using a model with a continuum of types and unrestricted asset holdings, where
investors are imperfectly informed about the type of their trading partner. More recent
work includes Shen, Wei, and Yan (2015), who introduce search costs into our framework;
Üslü (2015), who studies heterogenous search intensity, preference shocks, and divisible
asset holdings; Sagi (2015), who calibrates a partial equilibrium model with heterogenous
types to explain commercial real estate returns; Farboodi, Jarosch, and Shimer (2016), who
consider the ex-ante choice of trading speed; Bethune, Sultanum, and Trachter (2016),
who introduce private information into our framework of; Farboodi, Jarosch, and Menzio
(2018), who consider heterogeneous bargaining power; Zhang (2018), who introduces
long-term relationships between customers and dealers; and Liu (2018), who studies the
ex-post privately and socially optimal choice of search effort.
Our paper is also related to the growing literature that studies equilibrium asset pricing in exogenously specified trading networks. Recent work includes Gofman (2010),
Babus and Kondor (Forthcoming), Alvarez and Barlevy (2014), Chang and Zhang (2015),
and Malamud and Rostek (2017). Atkeson, Eisfeldt, and Weill (2015), Colliard and Demange (2014), Neklyudov and Sambalaibat (2017), and Colliard, Foucault, and Hoffmann
(2018) develop hybrid models, blending ingredients from the search and the network
literatures. In these models, intermediation chains arise somewhat mechanically; indeed,
when investors are exogenously separated by network links, the only feasible way to
reallocate assets to those who value them most is to use an intermediation chain. In our
dynamic search model, by contrast, both the existence of intermediation chains and the
distribution of chain lengths are equilibrium outcomes. In particular, even though all
contacts are random in our environment, the endogenous trading patterns are not—and
they are consistent with many observations from OTC markets.4
Finally, phenomena akin to intermediation chains can also arise in centralized limitorder book markets, as in Goettler, Parlour, and Rajan (2005), Goettler et al. (2009), Biais,
Hombert, and Weill (2014), and, notably, Weller (2014). In contrast with this literature,
our model is based on search and bargaining, and so is designed to apply to decentralized
4 See Oberfield (2013) for another example of endogenous network formation through search.

In a recent
paper, Glode and Opp (2016) also examine why intermediation chains are prevalent, but their focus is
different: they postulate that these chains moderate inefficiencies induced by asymmetric information.

5

security markets. This allows to confront, theoretically and quantitatively, evidence that
is specific to these types of asset markets.
The rest of the paper is organized as follows. Section 2 lays out the model. Section
3 derives an explicit characterization of equilibrium, establishes existence, and provides
conditions for both uniqueness and intermediation. Section 4 analyzes the intermediation
process theoretically, and Section 5 offers a calibration. All proofs are in the appendix.

2

The model

Agents, assets, and preferences.

We consider a continuous-time economy populated by

two groups of agents: a continuum of dealers with mass m, and a continuum of customers,
with mass normalized to 1. Dealers and customers are risk-neutral, discount the future
at rate r > 0, and enjoy consuming a numéraire good with marginal utility normalized
to one. Agents can hold either zero or one unit of a durable asset with fixed supply s.
We assume that m < 1, so that the dealer sector is smaller than the customer sector. We
also assume that the asset supply satisfies m < s < 1, so that the customer sector is large
enough to absorb the total supply of assets, but the dealer sector is not.5
As in Duffie et al. (2005), customers receive a utility flow y ∈ {y` , yh } per unit time
when they own the asset, with y` < yh . The utility flows (or types) of customers change,
independently across the population of customers, at Poisson arrival times with intensity
γ > 0. Conditional on a change, the customer’s new utility flow is set to y j ∈ {y` , yh }
with probability π j ∈ (0, 1), where π` + πh = 1.
Differently from Duffie et al. (2005), dealers in our model can hold inventory and are
heterogeneous with respect to the utility flow x ∈ [ x` , xh ] that they receive from holding
the asset.6 We denote the cumulative distribution of utility flows in the cross-section of
dealers by F : [ x` , xh ] → [0, 1]. We assume throughout that F ( x ) is continuous, and that
dealers have stable utility types, i.e., that they keep the same utility flow forever.
5 This restriction simplifies some of our results because it implies that, in any equilibrium, dealers have
opportunities to trade with all customer types. However, importantly, all of our analysis goes through
essentially unchanged in the general case where the masses of agents and the asset supply are only assumed
to satisfy the weaker condition s ≤ m + 1, which is necessary for market clearing.
6 Naturally, this can be interpreted as an inventory cost when x < 0.

6

Switch to yh at rate γπh

D2D Sale

Customers
y = y`

D2C Sale

C2D Sale

Dealers
x ∈ [ x` , xh ]

C2D Sale

D2C Sale

Customers
y = yh

D2D Sale

Switch to y` at rate γπ`

F IGURE 1: Flows of agents and assets. In the picture, D2C is shorthand for dealer-tocustomer, C2D for customer-to-dealer, and D2D for dealer-to-dealer.

Matching and trade. There are two matching technologies that provide opportunities
for trade. First, each dealer contacts another randomly selected dealer with intensity λ >
0. Second, each dealer contacts a randomly selected customer with intensity ρ > 0, which
implies that each customer is contacted by a randomly selected dealer with intensity ρm.
We assume that customers cannot contact each other directly.7
When two agents are matched and there are gains from trade, they bargain over the
price of the asset. We take the outcome to be the generalized Nash bargaining solution. In
a dealer-to-dealer match, the bargaining power of a dealer with asset holding q ∈ {0, 1}
is θq ∈ (0, 1) with θ0 + θ1 = 1. In a customer-to-dealer match, the bargaining power of the
dealer is denoted by θ ∈ (0, 1).
Figure 1 illustrates the flows of assets (the dotted red and dash-dotted black lines) and
agents (the solid blue line) in the model. As is clear from the figure, all trades between
customers must be intermediated by dealers. However, whether or not dealers find it
optimal to intermediate is ultimately an equilibrium outcome.
7 This

assumption is made primarily for simplicity—one could extend the model to allow for customerto-customer trades—but it is also consistent with the observation that, in practice, there are very few direct
customer-to-customer trades in most OTC markets (see, for example, Table 5 in Atkeson, Eisfeldt, and Weill,
2013, for the Credit Default Swaps market ).

7

3

Steady-state equilibrium

In this section, we characterize the steady-state equilibria of our model. Doing so requires
analyzing a two-way feedback between reservation values and distributions: reservation values depend on distributions, since they determine future trading opportunities;
while distributions depend on reservation values, since they determine the trades that
agents find optimal to consummate. Though this feedback induces a potentially highdimensional fixed-point problem, we show that it can be summarized by a pair of endogenous constants representing the measures of dealers who decide to not actively
intermediate. This insight paves the way for the proof of existence of an equilibrium,
and helps provide sufficient conditions for uniqueness. We then use our characterization
to provide necessary and sufficient conditions for active intermediation. These conditions
illustrate the manner in which dealers’ incentives to intermediate depend on preferences,
relative trading speed, and bargaining power.

3.1

Notation

To start, we introduce notation for reservation values and distributions. Because we focus
on the characterization of steady-state equilibria, we naturally omit all time indices for
simplicity of exposition.
Reservation values and transaction prices. Let Vq ( x ) and Wq (y) denote the maximum
attainable utility of a dealer of type x ∈ [ x` , xh ] and of a customer of type y ∈ {y` , yh },
respectively, with asset holding q ∈ {0, 1}. The reservation value of an agent is defined as
the difference between the value of owning and not owning an asset, i.e.,
∆V ( x ) ≡ V1 ( x ) − V0 ( x )
for dealers, and
∆W (y) ≡ W1 (y) − W0 (y)

8

for customers. Given our assumed bargaining protocol and the existence of gains from
trade, the price at which a dealer of type x trades with a customer of type y is

(1 − θ )∆V ( x ) + θ∆W (y).

(1)

Likewise, a dealer owner of type x 0 and a dealer non-owner of type x trade at price
θ0 ∆V ( x 0 ) + θ1 ∆V ( x ).

(2)

provided that the dealer non-owner values the asset more.
Distributions of utility flows and asset holdings.

Let Φq ( x ) denote the measure of

dealers with asset holding q ∈ {0, 1} and utility flow less than x ∈ [ x` , xh ], and let µ jq
denote the measure of customers with utility flow y j ∈ {y` , yh } who hold q ∈ {0, 1} units
of the asset. These distributions will be endogenously determined in equilibrium, subject
to the following consistency conditions:
π j = µ j0 + µ j1 ,
mF ( x ) = Φ0 ( x ) + Φ1 ( x ),

j ∈ {`, h}

(3)

x ∈ [ x` , xh ]

(4)

s = µ`1 + µh1 + Φ1 ( xh ).

(5)

Equations (3) and (4) simply require that the joint distributions of types and asset holdings
in a steady-state equilibrium are consistent with the exogenously given cross-sectional
distributions of types in the populations of customers and dealers, respectively. Equation
(5) is a market-clearing condition which ensures that the total measure of investors who
own the asset is equal to the total supply of assets.

3.2

Characterizing reservation values given distributions

In this section we consider the first leg of the two-way feedback: the determination of
reservation values given distributions. Using the pricing equations (1) and (2), together
with standard dynamic programming arguments, the Hamilton-Jacobi-Bellman equation

9

that governs the optimal behavior of dealers can be written
rVq ( x ) = qx +

∑

ρµ j,1−q θ (2q − 1) ∆W (y j ) − ∆V ( x )

+

j∈{`,h}

+

Z x
h
x`

λθq (2q − 1) ∆V ( x 0 ) − ∆V ( x )

+ dΦ1−q ( x 0 )
,
m

where a+ ≡ max{ a, 0}. This dynamic programming equation is easily interpreted. For
example, a dealer of type x ∈ [ x` , xh ] who owns q = 1 units of the asset enjoys the utility
flow x until one of two events occur. First, with intensity ρµ j0 the dealer owner contacts
a customer non-owner with utility flow y j . If there are gains from trade, then the dealerowner sells to the customer non-owner and receives a fraction θ of the trade surplus,
∆W (y j ) − ∆V ( x ). Second, with intensity λ the dealer owner contacts another dealer, who
is a dealer non-owner of type x 0 with probability dΦ0 ( x 0 )/m. If there are gains from trade,
then the dealer owner sells to the dealer non-owner and receives a fraction θ1 of the total
trade surplus, ∆V ( x 0 ) − ∆V ( x ).
Subtracting the equation with q = 0 from the equation with q = 1 reveals that the
reservation value of a dealer with type x satisfies
r∆V ( x ) = x + ρθ

∑

µ j0 ∆W (y j ) − ∆V ( x )

+

− ρθ

+ λθ1
− λθ0

x`

Z x
h
x`

µ j1 ∆V ( x ) − ∆W (y j )

+

j∈{`,h}

j∈{`,h}

Z x
h

∑

∆V ( x 0 ) − ∆V ( x )

+ dΦ0 ( x 0 )
m

∆V ( x ) − ∆V ( x 0 )

+ dΦ1 ( x 0 )
.
m

(6)

Notice that there are both positive and negative terms on the right-hand side of (6). This
is because the dealer’s reservation value takes into account two search options, with
opposing effects. On the one hand, a dealer who acquires an asset gains the option of
searching for another dealer or a customer who will pay even more for the asset, and this
option increases the dealer’s reservation value. On the other hand, a dealer who acquires
an asset foregoes the option of searching for a dealer or a customer who might sell at an
even lower price, and this decreases the dealer’s reservation value.

10

Similar steps show that the reservation value of a customer with utility type y ∈

{y` , yh } satisfies
r∆W (y) = y +

∑

γπ j ∆W (y j ) − ∆W (y)



j∈{`,h}

+ ρm(1 − θ )
− ρm(1 − θ )

Z x
h
x`
Z x
h
x`

+ dΦ0 ( x 0 )
m
0

+ dΦ1 ( x )
.
∆W (y) − ∆V ( x 0 )
m
∆V ( x 0 ) − ∆W (y)

(7)

There are two key differences between the reservation value of a dealer and that of a
customer, which are evident in equations (6) and (7) above. First, customers may switch
types while dealers do not. Second, customers cannot trade directly with other customers
and, therefore, only have the option to search for dealers.
Our first result establishes fundamental properties of reservation values that hold
regardless of the joint distributions of types and asset holdings.
Proposition 1 There are unique functions ∆V : [ x` , xh ] → R and ∆W : {y` , yh } → R that
solve the system of reservation value equations given by (6) and (7). Furthermore, these functions
are uniformly bounded and strictly increasing.
Notice that the proposition above departs from the usual guess-and-verify approach by
proving properties of the reservation values without imposing a priori assumptions on
the direction of gains from trade. As a result, these are properties that must hold in any
equilibrium—an advantage that will allow us to derive robust properties of equilibrium
and establish conditions for uniqueness.
Implications for trading patterns.

The monotonicity established in Proposition 1 has

two key implications for equilibrium trading patterns. First, in a meeting between a
dealer owner with utility flow x and a dealer non-owner with utility flow x 0 , there are
gains from trade if and only if x 0 > x. Intuitively, since the two dealers face the same
distribution of future trading opportunities, the only relevant difference between them
is the different utility flows they enjoy from holding the asset. Therefore, in the dealer
sector, assets are traded along intermediation chains, from dealers with low utility flows to
dealers with higher utility flows. The second key implication of this monotonicity result
11

is that customers follow a reservation dealer policy: they sell to dealers with sufficiently
high utility flows, and purchase from dealers with sufficiently low utility flows.

3.3

Characterizing the distributions given reservation values

Next, we characterize equilibrium distributions given the trading patterns induced by
reservation values. We provide closed-form solutions for these distributions as functions
of just two endogenous constant, which parsimoniously parameterize the two-way feedback between distributions and reservation values.
Inflow-outflow equations. Given (3) and (4), it is sufficient to solve for two of the four
customer measures, say µ`1 and µh0 , and one of the two distributions functions among
dealers, say Φ1 ( x ). Correspondingly, it is sufficient to state only three inflow-outflow
equations. Namely, the measures of customers must satisfy:


γ (π` µh1 − πh µ`1 ) = ρµ`1 Φ0 {∆V ( x 0 ) > ∆W (y` )} − ρµ`0 Φ1 {∆V ( x 0 ) ≤ ∆W (y` )} , (8)


γ (πh µ`0 − π` µh0 ) = ρµh0 Φ1 {∆V ( x 0 ) ≤ ∆W (yh )} − ρµh1 Φ0 {∆V ( x 0 ) > ∆W (yh )} ,(9)
where, e.g., {∆V ( x 0 ) > ∆W (y` )} denotes the set of x 0 ∈ [ x` , xh ] such that ∆V ( x 0 ) >
∆W (y` ). Likewise, the distribution of types among dealer owners must satisfy

λ
Φ1 ( x ) (Φ0 ( xh ) − Φ0 ( x )) = ∑ ρµ j1 Φ0 { x 0 ≤ x } ∩ {∆V ( x 0 ) > ∆W (y j )} (10)
m
j∈{`,h}

− ∑ ρµ j0 Φ1 { x 0 ≤ x } ∩ {∆V ( x 0 ) ≤ ∆W (y j )}
j∈{`,h}

for all x ∈ [ x` , xh ]. In both (8) and (9), the left-hand side represents the net inflow from
preferences shocks, while the right-hand side represents the net outflow from trading
with dealers, given that customers follow a reservation dealer policy. In (10), the left-hand
side represents the outflow from inter-dealer trades, given that dealers trade together
along intermediation chains. The right-hand side represents the net inflow from trading
with customers, given that customers follow a reservation dealer policy.8
8 Note

that inter-dealer trading generates no net inflow into the group of dealer owners with type less
than x. Indeed, a gross inflow arises when a dealer non-owner of type x 0 ≤ x meets a dealer-owner with an

12

A parsimonious parameterization.

To parsimoniously summarize the dependence of

distributions on reservation values, we derive a key preliminary result.
Lemma 1 In any steady-state equilibrium we have
µh1 Φ0 ({∆V ( x 0 ) > ∆W (yh )}) = µ`0 Φ1 ({∆V ( x 0 ) ≤ ∆W (y` )}) = 0
so that only two types of trades may occur between dealers and customers: dealer non-owners
may buy from customer owners with utility flow y` , and dealer owners may sell to customer nonowners with utility flow yh .
For intuition, suppose that some dealer non-owners are willing to buy from high-type
customers so that {∆V ( x 0 ) > ∆W (yh )} 6= ∅. Since ∆W (yh ) > ∆W (y` ), the dealers in that
set are willing to buy from any customer they meet, but would sell not none. Hence, in
a steady state, these dealers must either all be owners, Φ0 ({∆V ( x 0 ) > ∆W (yh )}) = 0, or
have already run out of asset to purchase, µ`1 = µh1 = 0. In both cases, although there
may be gains from trade, there are no meetings that result in trade.
Building on this insight, we define the measures of active dealers that engage in the
two types of trades identified by Lemma 1 as

m0 ≡ Φ0 {∆V ( x 0 ) > ∆W (y` )} ,

m1 ≡ Φ1 {∆V ( x 0 ) ≤ ∆W (yh )} .

(11a)
(11b)

Correspondingly, we define the complementary measures of dormant dealers who never
trade with customers as k0 ≡ Φ0 ( xh ) − m0 and k1 ≡ Φ1 ( xh ) − m1 .9 Using these objects,
the inflow-outflow equations can be re-written:
γ (π` µh1 − πh µ`1 ) = ρµ`1 m0 ,

(12a)

γ (πh µ`0 − π` µh0 ) = ρµh0 m1 ,

(12b)

λ
Φ1 ( x ) (m0 + k0 − Φ0 ( x )) = ρµ`1 (Φ0 ( x ) − k0 )+ − ρµh0 min {m1 , Φ1 ( x )} .
m

(12c)

even lower type x 00 < x 0 from whom he buys the asset. By trading, the previous owner leaves the set, but
the new owner enters the same set, thus resulting in zero net inflow.
9 In a steady-state equilibrium, the strict monotonicity of the reservation values implies that these
dormant dealers also do not trade with other dealers, and thus remain idle.

13

This simplified system of equations reveals that we can use the measures of dormant
dealers, (k0 , k1 ), to parameterize the two-way feedback between reservation values and
distributions. Namely, we construct an equilibrium in two steps. First, we solve for the
stationary distribution taking the measures of dormant dealers, (k0 , k1 ), as given. Second,
we endogenously determine (k0 , k1 ) by imposing that they correspond to the measure of
dealers who find it optimal to be dormant.
Closed-form solutions.

We conclude this section by completing the first step of the

construction outlined in the previous paragraph: we provide the solution to the system
formed by equations (3), (4), (5), (11), and (12) as a function of a pair (k0 , k1 ) that lies in
the feasible set
n
o
K ≡ k ∈ R2+ : k0 ≤ 1 + m − s, k1 ≤ s, and k0 + k1 ≤ m .
To state the result, we first define the function
1
G (z) ≡ − (m0 − z + σ (µ`1 + µh0 )) +
2

r
σµ`1 z +

1
(m0 − z + σ (µ`1 + µh0 ))2 ,
4

where the constant σ ≡ ρm/λ measures the contact rate of customers relative to that of
dealers in the interdealer market.
Proposition 2 The measures of customers (µ`0 , µ`1 , µh0 , µh1 ), the measures of active dealers

(m0 , m1 ), and the cumulative distributions of types among dealers (Φ0 ( x ), Φ1 ( x )) are continuous
functions of ( x, k) ∈ [ x` , xh ] × K that, when k0 + k1 > 0, are given by
m0 = m − ( m1 + k 0 + k 1 ) ,
γπh π` m1
,
ρm0 m1 + γ(π` m0 + πh m1 )
γπh π` m0
=
,
ρm0 m1 + γ(π` m0 + πh m1 )

µ `1 = π ` − µ `0 =
µh0 = πh − µh1

14

and


0,



Φ1 ( x ) = mF ( x ) − Φ0 ( x ) = G (mF ( x ) − k0 ),



mF ( x ) − (m + k ),
0
0

if mF ( x ) − k0 ≤ 0,
if 0 < mF ( x ) − k0 ≤ m0 + m1 ,
otherwise,

where m1 is the unique solution to the market clearing condition
s = m1 + k 1 + π h +

γπh π` (m1 − m0 )
.
ρm1 m0 + γ(πh m1 + π` m0 )

in the interval [0, m].

3.4

Equilibrium

We now exploit the results above to define an equilibrium. In particular, Proposition
2 establishes that any (k0 , k1 ) ∈ K induces joint distributions of utility flows and asset
holdings. Taking these distributions as given allows agents to compute their reservation
values, and these reservation values in turn determine with whom each agent trades—in
particular, the sets of dealers who find it optimal to be dormant, {∆V ( x 0 ) ≤ ∆W (y` )} and

{∆V ( x 0 ) > ∆W (yh )}. An equilibrium is reached if the measures of these sets coincide
with the measures of dormant dealers that we started with.
Formally, a pair (k0 , k1 ) ∈ K constitutes a steady state equilibrium if and only if it
satisfies the fixed point problem:

( k 0 , k 1 ) = Φ0



∆V ( x 0 ) ≤ ∆W (y` )



, Φ1



∆V ( x 0 ) > ∆W (yh )



where reservation values are implicit functions of distributions, as described in Proposition 1, and distributions are implicit functions of (k0 , k1 ), as described in Proposition 2. In
Appendix C, we show that the functions on the right are continuous in (k0 , k1 ) and then
apply Brouwer’s fixed-point theorem to derive the following result.
Theorem 1 There exists a steady state equilibrium.
The existence of an equilibrium does not imply trade: In our model, whether or not
dealers find it optimal to engage in active intermediation is ultimately an equilibrium
15

outcome. The following proposition fully characterizes the conditions under which at
least some dealers trade with customers.10 To make the conditions easily interpretable, it
is helpful to define a customer’s autarky reservation value:
rA(y) ≡

r
γ
y+
(π y + πh yh ) .
r+γ
r+γ ` `

That is, A(y) is the reservation value of a customer of type y who never trades.
Proposition 3 All steady-state equilibria induce active intermediation if and only if the following
two conditions hold:
0 ≤ rA(yh ) − x` + ρθπ` (s − m) ( A(yh ) − A(y` )) ,

(13a)

0 ≤ xh − rA(y` ) + ρθπh (1 − s) ( A(yh ) − A(y` )) .

(13b)

Conditions (13a) and (13b) are obtained by considering all possible equilibria with no
trades between dealers and customers, and checking whether any dealer has incentive
to intermediate. For example, in the candidate no-trade equilibrium associated with
condition (13b), dealers do not hold any asset and do not purchase from customers.11
We then consider the dealer with strongest incentive to intermediate: a dealer of type xh
who purchases an asset from a customer owner of type y` and then re-sells at the first
opportunity to a customer non-owner of type yh .
Naturally, this dealer has incentive to intermediate if the surplus created, shown on
the right-hand side of (13b), is positive. The first two terms reflect that a dealer of type
xh has incentive to intermediate if his autarky (flow) value is sufficiently large relative to
that of customers. The last term shows that the dealer has incentive to intermediate if he
extracts sufficiently large rents. These rents increase in the speed with which it can resell to high type customer non-owners, ρπh (1 − s); in his bargaining power, θ; and in the
gap between the autarky valuations of high- and low-type customers, A(yh ) − A(y` ). In
10 In addition to shedding light on the dealers’ incentives to intermediate, this result strengthens Theorem

1, since one may be concerned that our application of Brouwer’s fixed-point theorem only picks up
equilibria without active intermediation, which are common in some search theoretic models.
11 Since m < s < 1, it follows that, in any equilibrium, dealers have opportunities to trade with all types of
customers, owners or non-owners, high or low. Therefore, in any equilibrium with no trade between dealers
and customers, there cannot be any dealer with a reservation value such that ∆W (y` ) < ∆V ( x ) < ∆W (yh ).
Otherwise, this dealer would trade when given the opportunity. Thus, either ∆V ( x ) ≤ ∆W (y` ) and no
dealer holds the asset, or ∆V ( x ) ≥ ∆W (yh ) and all dealers hold the asset.

16

particular, even if xh is small, so that the dealer incurs large costs from holding an asset,
the dealer has incentive to intermediate if he meets customers sufficiently quickly and
can bargain sufficiently favorable prices. Intuitively, even if the purchase price is high
relative to the dealer’s own flow valuation, the sale price is even higher, which more than
compensates for the cost of holding the asset in inventory for a short time.
Finally, a natural question is whether the steady state equilibrium is unique. While
we are not able to answer this question in full generality, we provide easily interpretable
sufficient conditions in the proposition below.
Proposition 4 Let x =

R xh
x`

x 0 dF ( x 0 ) denote the average utility type of dealers. If the following

two conditions hold
0 ≤ rA(yh ) − xh − (ρm(1 − θ ) − λθ0 )+ ( xh − x ) /r,

(14a)

0 ≤ x` − rA(y` ) − (ρm(1 − θ ) − λθ1 )+ ( x − x` ) /r,

(14b)

then the steady state equilibrium is unique and such that k0 = k1 = 0. In this case the reservation
values of dealers is given by
∆V ( x ) = ∆V ( x` ) +

Z x
h
x`

dz
λ
r + ρθ (µh0 + µ`1 ) + m
θ0 Φ1 ( z ) +

λ
m θ1 ( m0

− Φ0 (z))

(15)

where the reservation value of low type dealers ∆V ( x` ) and the reservation values of both types of
customers (∆W (y` ), ∆W (yh )) solve a linear system stated in Appendix E.3.1.
Conditions (14a) and (14b) ensure that ∆W (y` ) ≤ ∆V ( x` ) < ∆V ( xh ) ≤ ∆W (yh ) regardless of the distributions. Under these conditions, there are no dormant dealers and
the equilibrium trading patterns are independent of reservation values. Therefore, the
equilibrium distributions can be derived independently of the reservation values, which
clearly ensures the uniqueness of the steady state equilibrium.12 In addition, the proposition reveals that, in this equilibrium, dealers’ reservation values admit a simple integral
representation, (15), which proves very useful to speed up numerical calculations.
12 In

fact, it can be shown that the same conditions are also sufficient to ensure that all dealers choose to
actively intermediate in the non stationary case where the initial distributions of types and asset holdings
differ from their steady state counterpart.

17

4

The intermediation process

Recent empirical studies—such as Li and Schürhoff (2014), Hollifield et al. (2014), and
Di Maggio et al. (2017)—have documented a number of stylized facts about the intermediation process in OTC markets. For one, these studies report that it takes time for dealers to
sell assets that they hold in inventory, and that they often sell to other dealers rather than
customers, thereby creating intermediation chains. Moreover, these studies highlight that
dealers are heterogeneous with respect to the role that they play in these chains; they
tend to differ systematically with respect to their positions within a chain, the frequency
and direction with which they trade with other dealers, and hence their contribution to
overall trading volume. Finally, and most importantly, these studies document that the
details of the intermediation process are related to market outcomes, i.e., that they have
implications for prices, allocations, and efficiency.
Given our closed-form characterization of the equilibrium distributions and trading
patterns, we can derive by hand many of the objects of interest in the empirical literature.
This allows us to explore the qualitative relationships between these endogenous objects
within the context of our model, and to better understand how they are affected by the
preferences of market participants and the technologies that dictate the matching and
bargaining processes. In addition, the simple expressions we derive for these statistics
facilitate the calibration of structural parameters, as well as the quantitative evaluation of
our model, which we turn to in Section 5.
By definition, the characteristics and behavior of dormant dealers are not observable.
Therefore, any steady-state equilibrium with active intermediation and dormant dealers
is observationally equivalent to another in which all dealers are active. In particular,
if we trim out dormant dealers, adjust the contact rates ρ and λ by the share of active
dealers, and remove the assets held by dormant dealers from the total supply, then the
full participation equilibrium of the modified environment delivers the same transactions,
trading probabilities, and prices as the original environment. Given this observation, for
the rest of the paper we will focus on exogenous parameters that are consistent with an
equilibrium in which all dealers are active (e.g., parameters satisfying the conditions of
Proposition 4). Importantly, while this restriction is innocuous for our analysis, it entails
a loss of generality for other interesting questions. For example, analyzing changes in
the size of the dealer sector would require studying regions of the parameter space with
18

max{k0 , k1 } > 0, where the willingness of dealers to intermediate is sensitive to market
conditions.

4.1

The customer sector

We start by deriving the intensity with which customers trade, and the resulting volume.
Note that, since we are focusing on parameters such that k0 = k1 = 0, the measures of
customers (µ`0 , µ`1 , µh0 , µh1 ) and the measures of active dealers (m0 , m1 ) do not depend
on the rate λ at which dealers meet other dealers. Instead, they only depend on the arrival
rate of preference shocks (γ and πh ), the arrival rate ρ of meetings between customers
and dealers, the supply of assets s, and the size of the dealer sector m. This is because,
in an equilibrium without dormant dealers, low-type customer owners and high-type
customer non-owners trade with all dealers.
Trading intensities.

A low-type customer owner sells to a dealer at rate ρm0 , while a

high-type customer non-owner buys from a dealer at rate ρm1 . It follows immediately
that, conditional on not first changing types, the expected amount of time required for a
low type customer to sell is 1/ (ρm0 + γπh ), while the expected amount of time required
for a high type customer to buy the asset is 1/ (ρm1 + γπ` ).
Customer-to-dealer volume. The total volume traded between customers and dealers
is easy to calculate given our equilibrium characterization. It is simply given by
VolCD = ρ (µ`1 m0 + µh0 m1 ) = 2ρµ`1 m0 ,
where the second equality follows from the fact that, in a steady-state equilibrium, the
inflow of assets into the dealer sector, ρµ`1 m0 , must equal the outflow, ρµh0 m1 .

4.2

The dealer sector

Trading intensities.

The rate at which a dealer buys or sells an asset depends on his

type x. In particular, a dealer non-owner buys at rate ρµ`1 + λ0 ( x ), where

λ0 ( x ) = λ

Φ1 ( x )
m



19

denotes the rate at which the dealer buys from other dealers. Since Φ1 ( x ) is increasing
in x, dealers with lower valuations who are looking to buy an asset naturally meet fewer
dealers to trade with, and hence buy less frequently. Similarly, a dealer owner of type x
sells at rate ρµh0 + λ1 ( x ), where

λ1 ( x ) = λ

m0 − Φ0 ( x )
m


(16)

denotes the rate at which the dealer sells to other dealers. Following the logic above,
dealers with higher valuations sell assets at a slower pace. This immediately implies that,
along an intermediation chain, assets are sold to other dealers more and more slowly,
which is qualitatively consistent with the evidence of Li and Schürhoff (2014).
Below, we use these trading intensities, along with the equilibrium distributions derived in Section 3.4, to compute a number of statistics about trading patterns. A key
parameter governing these statistics is the ratio
χ≡

λm0 /m
,
ρµh0

that measures the relative speed with which a dealer owner contacts counterparties among
other dealers and among customers.
Inventory duration.

An important indicator of market liquidity is the average time it

takes a dealer owner to sell an asset or, equivalently, the average inventory duration in
the dealer sector.
Lemma 2 The average inventory duration is
Z x
h
x`

1
dΦ1 ( x )
1
=
ρµh0 + λ1 ( x ) m1
ρµh0



χ
1−
2(1 + χ )


.

(17)

Our formula for the average inventory duration explicitly accounts for two effects.
First, dealer owners are heterogenous: each type x has a different inventory duration,
1
.
ρµh0 +λ1 ( x )

Second, the distribution of their types, Φ1 ( x ), is endogenous: dealers with high

20

utility types and, thus, long inventory durations are over-represented among owners,
relative to the underlying distribution.13
Equation (17) reveals that the average inventory duration is shorter than the average
time it takes to sell to customers,

1
ρµh0 ;

this is natural, since dealers sometimes re-sell to

other dealers before finding customers. Interestingly, average inventory duration does not
go to zero as λ → ∞ and so χ → ∞, which illustrates that the endogenous distribution can
be a crucial determinant of the average inventory duration.14 Indeed, the distribution of
types among dealer owners, as measured by Φ1 ( x ) on the left-hand side of (17), becomes
nearly efficient as search frictions in the inter-dealer market vanish. As a result, even
though there are increasingly more meetings between dealer owners and non-owners,
more and more of these meetings have no gains from trade.15
Intermediation chains.

As Figure 2 illustrates, an intermediation chain starts when an

asset is sold by a low-type customer owner to a dealer. We say that this dealer is the first
dealer in the chain, and denote its type by x (1) . If the first dealer then meets a high-type
customer non-owner, then he sells and the chain stops. Otherwise, the first dealer sells the
asset to another dealer with a higher type, x (2) , and the chain continues. In what follows,
we denote by n the random length of the chain—i.e., the number of dealers who facilitate
the transfer of the asset between a low-type customer owner and a high-type customer
non-owner—and by x (k) the type of the kth dealer in the chain, for k ∈ {1, . . . , n}.
Given the type of the first dealer in the chain, the probability that the asset is sold to a
customer instead of a dealer is


P {n = 1}| { x

(1)



= x} =

ρµh0
.
ρµh0 + λ1 ( x )

13 Precisely,

one can easily show that the likelihood ratio dΦ1 ( x )/dF ( x ) is increasing in x ∈ [ x` , xh ]. See
for example the calculations in Appendix D.4.
14 Notice that for this comparative static we are varying λ while holding ( m , m ) and ( µ , µ ) constant.
0
1
h0 `1
Therefore, we are implicitly assuming that the equilibrium values of these objects do not change with λ,
which is indeed the case as long as all dealers remain active as we vary λ. It is easy to see that this implicit
assumption holds if we choose parameters that satisfy the sufficient conditions of Proposition 4 for some λ,
which then ensure that k0 = k1 = 0 for all λ ≥ λ.
15 This implies that as λ → ∞ the equilibrium in our environment does not converge to that of Duffie
et al. (2005), in which the inter-dealer market is frictionless and inventory duration is zero. This is because
in Duffie et al. (2005), a dealer who purchases an asset from a customer seller can immediately locate a
dealer who is in contact with a customer buyer. In the limit of our model, a dealer who purchases an asset
can almost immediately locate some other dealer, but the probability that this dealer is also in contact with
a customer buyer is equal to zero.

21

C2D Sale

y`

D2C Sale

x (1)

x (2)
D2D Sale

x (3)
D2D Sale

yh

x (4)
D2D Sale

Customer
Buyer

Customer
Seller

x`

Dealer sector

xh

F IGURE 2: Illustration of an intermediation chain of length n = 4.

If instead the asset is sold to another dealer, we can calculate the conditional distribution
of the type x (2) ∈ ( x, xh ] of the next dealer in the chain:
dΦ0 ( x 0 )
λ1 ( x )
ρµh0 + λ1 ( x ) m0 − Φ0 ( x )
−dλ1 ( x 0 )
=
.
ρµh0 + λ1 ( x )



P {n ≥ 2} ∩ { x (2) ∈ dx 0 } { x (1) = x } =

(18)

To understand the first equality in (18), note that the first term in the product is the
probability that the first dealer in the chain trades with another dealer, as opposed to a
customer, while the second term is the conditional probability of selling to a dealer of type
x 0 . To understand the second equality note that (16) implies −dλ1 ( x 0 ) = λdΦ0 ( x 0 )/m.
Proceeding recursively, we can calculate the counterpart of (18) for higher-order links in a
chain; that is, we can derive the distribution of the kth dealer’s type in an intermediation
chain of length n ≥ k conditional on the type of the first dealer.
Lemma 3 If the first dealer in a chain is of type x (1) = x, the probability that the chain has length
greater than k ≥ 2 and that the kth dealer in the chain is of type x 0 ∈ ( x, xh ] is


0

∈ dx } { x

(1)

ρµh0 + λ1 ( x )
ρµh0 + λ1 ( x 0 )



P {n ≥ k} ∩ { x

(k)



= x} =

−dλ1 ( x 0 ) Λ( x, x 0 )k−2
,
ρµh0 + λ1 ( x ) (k − 2)!

where the function
0

Λ( x, x ) ≡ log



is decreasing in x ∈ [ x` , xh ] and increasing in x 0 ∈ [ x, xh ].

22

(19)

Lemma 3 allows us to derive key statistics regarding the length of intermediation chains
and the successive dealer types along a chain. In particular, Bayes’ rule implies that the
unconditional distribution of the chain length is given by
P ({n ≥ k }) =

Z x
h
x`



P {x

(1)

∈ dx }

xh

Z
x



P {n ≥ k} ∩ { x

(k)

0

∈ dx } { x

(1)



= x} .

Direct calculation of the double integral above leads to the following result.
Lemma 4 In equilibrium the length of an intermediation chain follows a zero-truncated Poisson
distribution:
P ({n = k }) =

1 log (1 + χ)k
,
χ
k!

k ≥ 1.

In particular, the average chain length is given by E[n] = (1 + χ1 ) log(1 + χ).
Lemma 4 reveals that the distribution of chain lengths only depends on χ. Hence, if
dealers meet other dealer non-owners more quickly, relative to the rate at which they
meet high-type customer non-owners, then χ increases and the distribution experiences
a first order stochastic dominant shift.
Volume.

The volume generated by inter-dealer trades is equal to

VolDD =

Z x
h
x`


λ

m0 − Φ0 ( x )
m


dΦ1 ( x ).

With a carefully chosen change of variable, one can calculate this integral in closed form.
Lemma 5 The inter-dealer volume is
VolDD = ρµ`1 m0 (E[n] − 1) .
where the average chain length is given in Lemma 4.
The lemma confirms an intuitive relationship between inter-dealer volume and average
chain length. For example, if there is on average two dealers per chain, then every C2D
transaction generates on average one D2D and exactly one D2C transaction, so that the
23

D2D volume equals the C2D volume. The lemma also reveals that an increase in λ, which
results in an increase in χ, will increase the volume of inter-dealer trade.16
Next, we turn to the distribution of volume within the dealer sector. To do so we
define the total volume generated by a dealer of type x by
VolD ( x ) ≡ (ρµh0 + λ1 ( x ))

dΦ1 ( x )
dΦ0 ( x )
+ (ρµ`1 + λ0 ( x ))
,
m dF ( x )
m dF ( x )

(20)

i.e., the sum of the volume of sales (the first term) and the volume of purchases (the
second term) generated by a representative dealer of type x.17 The analysis of this object
leads to the following results.
Lemma 6 The trading volume generated by a dealer of type x, VolD ( x ), is increasing over [ x` , x̂ ]
and decreasing over [ x̂, xh ], where
x̂ ≡ arg min |(ρµ`1 + λ0 ( x )) − (ρµh0 + λ1 ( x ))|
x ∈[ x` ,xh ]

is the dealer type with most balanced buying and selling intensities. Moreover, x̂ = x` if and only
if 1 + χ ≤ m1 /m0 , and x̂ = xh if and only if 1 + χ ≤ m0 /m1 .
The lemma reveals that dealers with more balanced buying and selling intensities
account for more trading volume. In particular, in our model, high volume dealers are
not necessarily the dealers who buy or sell assets the fastest. For example, dealers with
valuation x` are quickest to sell (ρµh0 + λ1 ( x` ) is largest) but they sell rarely because, in
equilibrium, they typically don’t own an asset (dΦ1 ( x` )/dF ( x` ) is smallest). This creates
a strong composition effect in equation (20) and ultimately reduces the share of trading
volume generated by dealers with low utility types.18
In empirical studies, trading volume correlates with other aspects of trading behavior.
For example, looking ahead to the next section, the results of Li and Schürhoff (2014)
particular, if λ → ∞, the inter-dealer volume goes to infinity. Notice however that the speed of
convergence is relatively low: it is in order log(λ) instead of λ. The reason is that, as explained before, the
asset allocation becomes nearly efficient as interdealer contacts become instantaneous.
17 Notice that the integral of Vol ( x ) against m dF ( x ) adds up to more than the aggregate trading volume
D
VolCD + VolDD because each inter-dealer trade is counted twice in the definition VolD ( x ) as it would in
practice if one were to measure the fraction of trades in which each dealer takes part.
18 This effect, of course, depends on the constraint that dealers can only hold positions {0, 1} or, more
generally, that their marginal value for the asset is strongly decreasing.
16 In

24

suggest that dealers towards the end of intermediation chains account for a larger proportion of trading volume. To make our model consistent with this observation, one should
pick parameters such that VolD ( x ) is monotonically increasing over [ x` , xh ]. According to
Lemma 6, this occurs if and only if m0 /m1 ≥ 1 + χ , i.e., if and only if most dealers are
non-owners and λ is not too large. Intuitively, in this case all dealers sell faster than they
buy so that dealers with utility type xh —who are slowest to sell and fastest to buy—have
the most balanced trading intensities and the generate the most volume.
Markups.

To conclude this section, we study the implications of our model for a com-

mon measure of market liquidity: the spread between the price that a dealer pays for an
asset and the price at which a (potentially different) dealer sells it to a customer. Following
Li and Schürhoff (2014), we define the markup on an asset that was initially purchased
from a low-type customer by a dealer of type x (1) = x and eventually sold to a high type
customer by a dealer of type x (n) = x 0 ≥ x by

θ∆W (yh ) + (1 − θ )∆V ( x 0 )
M x, x 0 =
− 1.
θ∆W (y` ) + (1 − θ )∆V ( x )
In an environment with homogeneous dealers, the markup reflects the gains from trade
between customers with low and high valuations, along with the market (or bargaining)
power of the dealers. In our environment, there is an additional force contributing to the
markup because the valuation of the dealer who buys an asset is (at least weakly) smaller
than the valuation of the dealer who sells it. In any trade, the price is increasing in the
valuations of both the buyer and the seller. Hence, the markup increases as the spread
between the valuation of the initial dealer-buyer and the final dealer-seller widens.
Indeed, our model has precise predictions about the expected valuations of the dealers
who buy or sell an asset, and how these valuations depend on the length of intermediation chains. We formalize these predictions in the following lemma.

25

Lemma 7 The distribution over the types of the first and last dealers in a chain, respectively,
conditional on the length of the chain are given by


P {x

(1)


P { x (n)

Λ( x, xh )
≤ x } {n = k} = 1 −
Λ( x` , xh )



Λ( x` , x ) k
≤ x } {n = k} =
.
Λ( x` , xh )




k
,

The lemma reveals that an increase in the length of an intermediation chain, n, creates a
negative first-order stochastic dominance shift in the type of the first dealer, x (1) , and a
positive shift in the type of the last dealer, x (n) . An immediate consequence of Lemma 7 is
that the average valuation of the first dealer in a chain is decreasing in k, while the average
valuation of the last dealer is increasing in k. Hence, our model predicts that assets traded
through longer intermediation chains should be associated with lower bids and higher
asks, on average. This suggests that the markup should be larger in longer intermediation
chains. Unfortunately, this natural ordering is difficult to establish analytically because
the types of the dealers along the chain are statistically related. In particular, if the type
of the first dealer is larger, then that of the last dealer is also larger, and both move the bid
and the ask in the same direction.19

5

Quantitative analysis

In this section, we use our model to conduct a quantitative analysis of an OTC market.
We focus on the market for municipal securities, as it shares many of the fundamental features of our model. Using data from this market, we exploit our equilibrium
characterization to calibrate the structural parameters of our model. This reveals the
relative importance of search frictions, market power, and heterogeneity in preferences
for explaining market outcomes, and offers the opportunity to conduct welfare analysis.
19 In all of the numerical experiments we conducted and, in particular, for the calibrated set of parameters

in Section 5 the effect of the increased chain length dominates that of the direct statistical relation between
the utility types of the first and last dealers in the chain, so that the average markup indeed increases as a
function of the length of the intermediation chain.

26

5.1

The municipal bond market

The market for municipal securities is an ideal laboratory for exploring our model quantitatively. It is a large over-the-counter market where essentially all trade is intermediated
by dealers, who themselves trade in a frictional inter-dealer market. There are many
bonds (more than 1.5 million), many broker-dealers (more than 2 thousand), and the
vast majority of trades continue to be executed in a bilateral fashion, where quotes are
requested one at a time via telephone. As a result, the market is highly fragmented
and search frictions are commonly thought to be significant.20 Markups in the municipal
bond market are notoriously large, and are more likely explained by search frictions than
by asymmetric information.21 Lastly, since broker-dealers have been required to report
their trades to the Municipal Securities Rulemaking Board (MSRB), several empirical
studies (most notably Green et al., 2007; Li and Schürhoff, 2014) have used proprietary,
transaction-level data to provide a highly detailed account of the intermediation process.
We will rely on these studies to calibrate our model.22

5.2

Calibration

The calibration proceeds in two steps. First, we assign values to the parameters that
determine the allocation of assets across customers and dealers and, hence, the frequency
of trade and volume—what we call demographics. Given our closed-form characterization
of the equilibrium, this step is accomplished by hand: we simply use the equilibrium
conditions to back-out the parameter values that correspond to the targets we choose
from the data. Second, we assign values to the parameters that determine prices and
markups. While this step resorts to numerical computations, the closed-form characterization continues to help: it speeds up the integration routines required to calculate the
cross-sectional moments that we target.
20 Another

attractive feature of this market is that municipal bonds tend to trade in large blocks that are
often not split up as they are traded, thus making our assumption of {0, 1} holdings more palatable.
21 Most customers in the municipal bond market are buy-and-hold investors, as opposed to speculators,
and tend to trade for liquidity purposes. Moreover, as Li and Schürhoff (2014) note, more than 75% of
bonds are rated AAA and the historical default rate is less than 0.1 % per year.
22 While data about transaction prices is publicly available, the data identifying the dealers that participate
in each trade is proprietary. Most recently, Li and Schürhoff gained access to this data and provide a fairly
comprehensive analysis. We will rely on several of their descriptive statistics, including the distribution of
intermediation chains and markups.

27

Calibrating parameters to demographics.

The set of parameters {s, m, ρ, λ, γ, πh } com-

pletely determines the model’s demographics. As a first step, we identify a target for
the per-capita supply of asset, s. In the model, agents hold and trade asset “blocks” of
identical size. To map the data to our model, then, we first normalize the total supply
of municipal securities in circulation, A, by the average size of a block, Q. We set Q =
$206, 989, which is the average inter-dealer trade size of seasoned securities reported by
Green, Hollifield, and Schürhoff (2006) for the 2000-2004 period.23 Focusing on the same
time period, we use data from the Flow of Funds to calculate the average par value of
municipal securities held directly or indirectly by households, or held by broker dealers,
which yields an estimate for A of just over $2.3 trillion.24 Finally, to express the number
of asset blocks in per-capita terms, we need to estimate the number of customers, N.
We assume that half of the household population, as measured by the U.S. Census, is a
potential direct or indirect participant in the municipal bond market.25 This implies a
value of N = 54, 187, 500. Using these figures, we obtain s = A/( N × Q) = 0.2058.
Next, we set targets for the rates ρµh0 and λm0 /m at which dealers contact customerbuyers or potential dealer-buyers, respectively. To do so we rely on two moments reported by Li and Schürhoff (2014): the average inventory duration of dealers, 3.3 days,
and the average length of intermediation chains, 1.34. It is intuitive that these targets identify the contact intensities. On the one hand, the average inventory duration depends on
the total arrival rate of potential buyers, i.e., the sum of the two contact rates. On the other
hand, the average length of intermediation chains depends on the relative likelihood of
meeting a customer before a dealer, i.e., on the ratio of the two contact rates, χ. Using the
23 Determining

the appropriate measure of Q is non-trivial for (at least) two reasons: the average trade
size of newly issued securities tends to be different than those of seasoned securities (i.e., more than 90
days after issuance); and the average size of prearranged trades tends to be different than trades in which
dealers hold the asset as inventory for some period of time. For these reasons, we choose to look at seasoned
securities that are traded between dealers.
24 To estimate the supply, we follow the methodology of the U.S. Securities and Exchange Commission
(2012) and focus on the bonds that are either held by broker dealers, directly held by households, or
indirectly held by households (via mutual, money market, closed-end, or exchange traded funds). We
obtain the total from the Flow of Funds Account of the United States, Table L.211 and L.212 (see federalreserve.gov/releases/Z1). Importantly, starting with its 2011-Q3 release, the Flow of Funds adjusted up its
estimate of the bonds held by households by a factor of about two, from 2005 onwards. We make the same
adjustment for the 1998-2004 period.
25 This estimate of financial market participation is motivated by data from the Survey of Consumer
Finance (SCF). In particular, Bricker et al. (2017) show that, during the 2010-2016 period, about half of
U.S. households had direct or indirect holding of publicly traded stocks.

28

closed-form characterizations of average inventory duration and average intermediation
chain length in Lemmas 2 and Lemma 4, we obtain ρµh0 = 58.89 and λm0 /m = 50.75.
Our fourth target is the intensity with which customers meet dealer-buyers, ρm0 .
Unfortunately, since the MSRB only collects data from dealers, we do not have a direct
target from the municipal bond market. Existing studies of the corporate bond market—
which is widely considered to be more liquid than the municipal bond market—also lack
data to identify this parameter and have used a wide range of target values, from as little
as one business day to as many as ten.26 We choose a target of 5 business days, safely in
the middle of the range.
Our fifth target is a measure of turnover in the municipal bond market, calculated as
the total value of sales from dealers to customers divided by the total supply. Again, using
figures from Green, Hollifield, and Schürhoff (2006) for the period 2000-2004 yields27
D2C Sales ($)
ρµ m
= h0 1 = 0.411.
Asset Supply ($)
s
To complete the identification, we impose that πh = s, i.e., that the measure of high type
customers is equal to the asset supply. This choice has several desirable features. First, as
in several numerical examples in the literature (e.g., Duffie, Gârleanu, and Pedersen, 2007;
Vayanos and Weill, 2008), it implies that high type customers are the marginal buyers in
the frictionless benchmark, so that illiquidity creates a price discount and not a premium.
Second, and as noted after Lemma 6, this choice implies that high-volume dealers are
located toward the end of intermediation chains, which is consistent with the empirical
findings of Li and Schürhoff (2014).
We prove in Appendix E.1 that this procedure uniquely identifies the six demographic
parameters {s, m, ρ, λ, γ, πh }.28 The values we obtain are shown in Table 1. They imply,
in particular, that a customer switches from high to low valuation every two years, on
26 Pagnotta

and Philippon (2018) provide stylized facts about trading speed across many markets and
argue that a trading delay of about one day is reasonable for voice-based OTC trading in corporate bonds.
The numerical corporate bond example in Duffie, Gârleanu, and Pedersen (2007) implies a trading delay
of about 2 days. However, Feldhütter (2012) and He and Milbradt (2014) also study the corporate bond
market, with trading times calibrated to approximately two weeks.
27 Green, Hollifield, and Schürhoff (2006) calculate the total value of sales of seasoned securities from
dealers to customers over the period May 1, 2000 to January 10, 2004 to be $3.48 trillion.
28 More precisely, the six targets described above define a system of six non-linear equations, which we
show has a unique solution. Note, however, that one still has to check that the implied parameter values
are admissible within the context of our model

29

Parameter
Supply per customer capita
Relative size of the dealer sector
Type switching intensity
Probability of a switch to high
Intensity of customer-to-dealer contact
Intensity of dealer-to-dealer contact

s
m
γ
πh
ρm
λ

Value
0.2058
0.004166
0.5267
0.2058
76.87
78.04

(per year)
(per year)
(per year)

TABLE 1: Values of demographic parameters.

average; that customers contact dealers approximately every 2.3 days; and that dealers
contact other dealers approximately every 3.4 days.
Though we don’t observe arrival rates of meetings or preference shocks in the data, the
parameter values in Table 1 have implications for certain moments in the data that we do
observe, but that we did not directly target. For example, Figure 3 plots the chain length
distribution in the data and in our model. As one can see, the distributions have similar
shape—with most trades occurring through one dealer, and the frequency then declining
rapidly as the chain length increases—though the empirical distribution is slightly more
dispersed and more positively skewed than the model-implied distribution. The model
also has implications for the fraction of bonds held by dealers, which is reported in the
Flow of Funds. For the period 2000-2004, the data implies that broker-dealers held about
1% of the supply, which is a natural upper bound for m1 /s since broker-dealers may hold
bonds for reasons other than marketmaking. The calibrated model, in comparison, makes
the seemingly reasonable prediction that m1 /s = 0.71%.
Calibrating parameters to prices.

The remaining parameters to calibrate are the bar-

gaining powers, θ and θ0 ; the customer utility flows, {y` , yh }; the distribution of dealer
utility flows F ( x ) over the support [ x` , xh ]; and the agents’ discount rate, r.
To reduce the number of parameters to calibrate, we first impose a few a priori restrictions. First, in keeping with the existing literature, we set r = 5%. Second, we assume
symmetric bargaining power in inter-dealer trades, so that θ0 = θ1 = 0.5. Third, we
normalize the utility flow of high type customers to yh = r, so that the Walrasian asset
price is equal to one, and assume that the utility flow of low type customers is equal to

30

Frequency (percent)

80

Empirical distribution
Model-implied distribution

60

40

20

0

2

1

3

4

5

Intermediation chain length

F IGURE 3: The empirical (blue slanted lines) and the model-generated (solid red)
distribution over chain lengths.

the dealers’ average valuation, so that y` = x. Lastly, we assume that the distribution of
dealers’ flow valuation is uniform.29
After imposing these restrictions, there are three remaining parameters to calibrate:
the mean of the distribution of dealers’ valuations, x; the dispersion of dealers’ valuations,
xh − x` ; and the bargaining power of dealers when they trade with customers, θ. To
calibrate these parameters, we target the liquidity yield spread, the average markup, and
the sensitivity of the markup to chain length. Specifically, we target a liquidity yield
spread of 140bps, the average of the pre- and post-crisis measure documented in Ang,
Bhansali, and Xing (2014). In keeping with the empirical work cited above, we calculate
the liquidity yield spread as yh /P − r, where
P≡

Z x
Z x
h dΦ ( x )
h dΦ0 ( x 0 )
1
x`

m1

x

m0

θ0 ∆V ( x ) + θ1 ∆V ( x 0 )

29 Robustness



checks (not reported in this paper) suggest that these restrictions do not have much impact
on our main quantitative conclusions.

31

is the model-implied average inter-dealer price.30 Next, we target an average markup
of 192bps, the estimate provided by Li and Schürhoff (2014).31 Finally, we target the
relationship between the markup and the length of the intermediation chain: based on
the joint frequency distribution of markup and chain length in Table V of Li and Schürhoff
(2014), we obtain that the beta of a regression of markup on chain length is about 23bps.32
Note that, since we have characterized all the relevant distributions in closed form, the
model-implied counterparts of these three moments can be calculated very quickly via
numerical integration. See Appendix E.3 for details.
The liquidity yield spread and the average markup help identify the utility flow of low
type customers, y` = x̄, and the bargaining power, θ. This is not immediately obvious, as
one might expect that an increase in customers’ distress cost (a lower y` ) or an increase in
dealers’ bargaining power (a higher θ) would reduce measures of market liquidity, and
hence increase both the liquidity yield spread and the markup at the same time. What
delivers identification is the observation that the bargaining power has a greater impact
on the markup than on the yield spread. This is obvious in a simple example: if all dealers
have the same utility flow, and if the bargaining power is zero, then the markup is also
zero. Yet, the yield spread is positive because high-valuation customers who purchase the
asset have to be compensated for not being able to immediately re-sell when they switch
to a low flow valuation. While we are not able formally to establish this result, we can
check local identification numerically, as in Figure 4.33 The figure shows, as suggested by
our intuition, that the locus of pairs (θ, y` ) that match the target markup level is steeper
than the locus of pairs (θ, y` ) that match the observed yield spread.
Finally, to identify the dispersion in dealers’ utility flows, we attempt to match the
beta of markup with respect to chain length, of about 23bps. As noted earlier, as a
consequence of Lemma 7, we expect the model to produce a positive beta that increases
with the dispersion of dealers’ valuation. As an illustration, let us start with no dealer
heterogeneity ( x` = xh = x ) and set (θ, y` ) = (0.9728, 0.3142yh ) so that the model
30 Choosing

yh as the “cash flow” of our asset is a natural choice, as it implies that the liquidity yield
spread is equal to zero in a frictionless market, where P = yh /r.
31 We use Tables III and XII to calculate this average markup for non-split trades.
32 The empirical relationship between markup and chain length is highly non-linear. The advantage of
our beta measure is that it approximates the slope of this relationship for the most prevalent intermediation
chains, which (as we show in Figure 3) are relatively short.
33 The result can be established formally in other cases, though: see for example Appendix E.2 for the
frictionless inter-dealer market of DGP.

32

Low flow valuation y` /yh (percent)

54

iso yield schedule
iso markup schedule

52
50
48
46
44
42
40
0.96

0.97

0.98

Dealer bargaining power θ

F IGURE 4: The iso yield and iso markup schedules, assuming for simplicity that all
dealers have identical valuation.

exactly matches the target liquidity yield spread and the target markup. Starting with
this parameter configuration we then progressively increase the dispersion of dealers’
flow valuation, keeping the mean the same, and re-optimizing only with respect to θ
to match the average markup (we find that the yield spread remains matched almost
exactly). The results, shown in Figure 5, confirm our intuition that the beta of markup
to chain length is positive and increasing in dispersion. However, the magnitude is very
small. Thus, dispersion in the utility flows of dealers fails to generate a quantitatively
and economically significant statistical relationship between the size of the markup and
the length of the intermediation chain.
The economic intuition behind this quantitative finding is clear. Given the demographic parameter values, generating the large average markup found in the data requires
endowing the dealers with almost all of the bargaining power. Recall that the spread
between the first and last price in a chain of length n can be written
h



i
θ [∆W (yh ) − ∆W (y` )] + (1 − θ ) ∆V x (n) − ∆V x (1) .

33

(21)

Beta of markup w.r.t chain length (bps)

Beta of markup wrt. chain length

0.05

0.04

0.03

0.02

0.01

0
0

5

10

15

20

25

30

35

40

Dispersion of dealer utility flows (percent of yh )

F IGURE 5: The beta of markup with respect to chain length as a function of the
dispersion in dealer’s flow valuation.

As θ increases, this difference depends increasingly more on the customers’ reservation
values and less on the dealers’ reservation value. In particular, as θ → 1 the equilibrium
converges to the so-called Diamond (1971) paradox and prices are independent of dealers’
valuations. Therefore, even though longer chains involve dealers with more dispersed
utility flows, the value of θ required to generate a large average markup renders these
differences almost irrelevant, and markups are thus similar across intermediation chains
of different lengths.

5.3

An extended model

Equation (21) suggests that, to create a significant relationship between chain length and
markup, one needs a model in which higher type dealers are matched with customers
with higher utility flows. In this section, we show that this can be achieved within a
minimal extension of our benchmark model. Importantly, beyond improving the model’s
fit, this extension shows that our solution methods can be used to study alternative forms
of heterogeneity.

34

An alternative assumption about heterogeneity.

Suppose that high type customers are

heterogeneous in their valuations: when they switch from the low to the high type, their
utility flow is set to yh + e, where the extra utility e ∈ [e` , eh ] is drawn from a cumulative
distribution function F (e) that is assumed to be continuous and strictly increasing. For
simplicity, we assume that all dealers have the same utility flow—say, y` —but that they
differ in their ability to locate customers with high willingness to pay for the asset. This heterogeneity could arise for a variety of reasons: some dealers could have a more extensive
client list, so that the maximum valuation among a sample of their customer-buyers is
higher, on average; or some dealers could simply have the technology to “cherry pick”
trades with customers that have higher valuations (say, because of lower trading latency).
Formally, denoting the type of a dealer by x ∈ [ x` , xh ], we assume that dealer owners
match assortatively with high-type customer non-owners.34
We guess and verify that trading patterns are the same as in our benchmark model
and that there are no dormant dealers, i.e., that low valuation customers sell to the first
dealer they meet; high valuation customers always buy from dealers; and dealers trade
with each other along intermediation chains, with low x dealers selling to high x dealers.
Given these trading patterns, the distributions Φ1 ( x ) and Φ0 ( x ) remain exactly the same
as before, and the distribution of extra valuation among high-type customer non-owners
is equal to F (e). Therefore, assortative matching between dealers and customers implies
that a dealer owner of type x ∈ [ x` , xh ] only meets high type customer non-owners with
extra valuation e = ε( x ), where the function ε( x ) solves
F (ε( x )) =

Φ1 ( x )
.
m1

(22)

In Appendix E.3.2, we state the HJB equations for the reservation values of dealers and
customers, assuming the trading patterns described above, and confirm that the induced
reservation value of dealers and high-type customers is strictly increasing in type. We
then re-calibrate the model assuming that the distribution of extra utility flows is such that
34 To provide microfoundations for this assumption, one can use the matching protocol in Board and
Meyer-Ter-Vehn (2015, p.502), where we let x ∈ [ x` , xh ] denote the rank of a dealer in a line, and highly
ranked dealers pick their counterparty first.

35

Parameter
Supply per customer capita
Relative size of the dealer sector
Type switching intensity
Probability of a switch to high
Intensity of customer-to-dealer contact
Intensity of dealer-to-dealer contact
Dealer bargaining power
Utility flow of low type customers
Upper bound of extra utility distribution

Symbol
s
m
γ
πh
ρm
λ
θ
y`
eh

Main model
0.2058
0.004166
0.5267
0.2058
76.87
78.04
0.971
0.4570 yh
N/A

Extended model
0.2058
0.004166
0.5267
0.2058
76.87
78.04
0.9006
−0.009632 yh
0.0226

TABLE 2: Calibrated parameters in the main vs. the extended model.

ε( x ) = eh ( x − x` )/( xh − x` ), for some constant eh to be determined, and we numerically
verify that our conjectured trading patterns are optimal.35
Quantitative results.

In our extended model, we now can obtain a perfect match of the

three calibration targets: the average level of markup, the liquidity yield spread, and the
beta of markup with respect to chain length.
Table 2 compares the calibration of our benchmark model to that of the extended
model. The values of the demographic parameters remain the same, by construction, but
one sees that the calibrated values of the dealers’ bargaining power, θ, and the utility flow
of low type customers, y` , change significantly. Intuitively, while the marginal customer
is the same in the two calibrations, the average customer is very different. In the first
calibration, the average customer’s flow valuation is yh , while in the second calibration
Re
it is yh + e h e dF (e). In an OTC market, this difference matters a great deal for dealers,
`

because they are able to sell assets at infra-marginal prices. All else equal, this ability
increases all inter-dealer prices and, hence, reduces the model-implied liquidity yield
spread. Therefore, to match the large liquidity yield spread observed in the data, the
calibration requires customers’ low flow valuation, y` , to be much smaller. To keep
markups from rising too much in response to the decrease in y` , the calibration also
requires a smaller bargaining power for dealers.
35 The

condition that the conjectured trading patterns are optimal restricts the dispersion of extra valuations, controlled by eh , to be sufficiently small. Indeed, if the dispersion of extra valuation is too large, then
dealers do not find it optimal to sell to low-e customers. Instead, they prefer to sell to those dealers who
can locate high-e customers, and our conjectured trading patterns are not optimal.

36

Chain length
n
n
n
n
n
n
n

=1
=2
=3
=4
=5
=6
=7

1
100
54
46
42
39
37
35

Extended model
Dealer rank in chain
2
3
4
5
6
·
·
·
·
·
46 ·
·
·
·
10 44 ·
·
·
8
8 42 ·
·
6
6
6 41 ·
5
5
5
5 43
5
5
5
5
5

7
·
·
·
·
·
·
40

Data
Dealer rank in chain
1
2
3
4
5
100 ·
·
·
·
43 57 ·
·
·
29 23 48 ·
·
22 21 19 39 ·
19
9 25 12 34
17
8 13 24 8
17
6 12 14 12

6
·
·
·
·
·
32
8

7
·
·
·
·
·
·
31

TABLE 3: The distribution of markups within intermediation chains.

While our calibration targets the average markup in chains of different length, it does
not directly target the share of markups received by the different dealers in the chain.
Table 3 shows the predicted (left panel) and actual (right panel) split of markups as
reported by (Li and Schürhoff, 2014, Table 7). The details of the numerical calculations
required to compute the average shares of markup are in Appendix E.4. The table reveals
that, in the extended model, the first and the last dealer appropriate the largest share of
the total markup, similar to what is observed in the data. The share appropriated by
intermediate dealers is, however, smaller than in the data.
We conclude this section with some welfare calculations that we report in Table 4. The
table reveals that, despite the search and bargaining frictions, the OTC market is quite
efficient, attaining about 98 percent of total gains from trade.36 Notice that this efficiency
measure is the same in both calibrations: indeed, since low type customers and dealers
have the same utility flow, this measure only depends on the fraction of mismatched
assets, that is, the fraction of assets in the hand of low type customers or dealers. Since the
distributions are the same in both calibrations, so is the fraction of mismatched asset and
our welfare measure. However, the two calibrations lead to very different conclusions
regarding the distributions of gains from trade.37 In the main model, dealers are inferred
to have a large bargaining power, and so appropriate about 30 percent of gains from
36 The

gains from trade in a given market are defined as the difference between the utilitarian welfare in
that market, and the utilitarian welfare in an autarchic economy without dealers.
37 The gains from trade appropriated by customers is the average of their OTC reservation value, less
their autarchic reservation value. The gains from trade appropriated by dealers is simply the average of
their reservations values. The sum of the customer and dealer gains from trade is, by definition, equal to
the gains from trade created by the OTC market.

37

Frac. of total gains from trade in OTC market
Gains from trade appropriated by customers
Gains from trade appropriated by dealers

Main model
98.0741%
70.52%
29.48%

Extended model
98.0741%
89.37%
10.63%

TABLE 4: Welfare analysis of the main vs. the extended model.

trade.38 In the extended model, dealers are inferred to have a lower bargaining power,
and so appropriate only about 10 percent of gains from trade. This highlights the importance of distinguishing between different forms of heterogeneity in making inference
about dealers’ market power.

6

Conclusion

In this paper, we generalize the benchmark search-theoretic model of OTC markets in
two ways: dealers trade together in a frictional inter-dealer market, and are arbitrarily
heterogenous in terms of their valuation or inventory cost. We show that this generalization entails no loss of tractability and has substantial benefits. In particular, the model is
able to account, qualitatively and quantitatively, for the key stylized facts documented by
empirical studies of the intermediation process in OTC markets. Our methods generalize
to other forms of dealer heterogeneity. The model provide a natural structural framework
to study a number of other important issues such as the effect of trading speed on market
outcomes; the effects of regulation; and the effects of shocks to dealers’ participation in
decentralized markets.

38 Notice

that, while each individual dealer appropriate over 97 percent of the surplus in any bilateral
match, they collectively only appropriate 30 percent of the total gains from trade. This is because, in a
dynamic model, the surplus only represent a fraction of the gains from trade: it represents the benefit of
trading with the current counterparty, rather than searching and waiting for another one.

38

A

Appendix of Section 3.2

This section is devoted to the proof of Proposition 1. To facilitate the presentation we start by
fixing some notation that will be used throughout the appendix. We denote by Dc = {y` , yh } the
set of customer types, by Dd = [ x` , xh ] the set of dealer types, and by D = [δ` , δh ] a closed interval
that contains in its interior the types of all market participants. We extend all the distributions to
this interval by setting
Z
A

dFc =

Z
A

dµq =

Z
B

dF =

Z
B

A ∩ Dc = B ∩ Dd = ∅,

dΦq = 0,

where
µq (δ) ≡ 1{δ≥y` } µ`q + 1{δ≥yh } µhq
denotes the cumulative distribution of utility types among customers who hold q units of the
asset, and Fc ≡ µ0 + µ1 denotes the cumulative distribution of utility types among the population
of customers. Finally, we label each agent by a pair (δ, α) ∈ D × {c, d} that records his current
utility type and whether he is a customer or a dealer. Accordingly, we let
∆U (α, δ) = 1{α=d} ∆V (δ) + 1{α=c} ∆W (y)
denote the reservation value of an agent of type (α, δ). With these notations, we can re-state the
HJB equations (6) and (7) as the fixed-point problem:
r∆U (α, δ) = rR[∆U ](α, δ)

(23)

with the operator defined by
R[∆U ](c, δ) = δ + γ

Z
D


∆U (c, δ0 ) − ∆U (c, δ) dFc (δ0 )

1

+

∑ ρ(1 − θ )(2q − 1)

q =0

R[∆U ](d, δ) = δ +

1

∑ ρθ (2q − 1)

Z

q =0
1

+

∑

q =0

λθq (2q − 1)

D

Z
D

Z
D

(2q − 1)(∆U (d, δ0 ) − ∆U (c, δ))

(2q − 1)(∆U (c, δ0 ) − ∆U (d, δ))

+

(2q − 1)(∆U (d, δ0 ) − ∆U (d, δ))

39

+

dΦ1−q (δ0 ),

dµ1−q (δ0 )

+ dΦ1−q (δ0 )
.
m

Remark A.1 Because we work with the extended set of utility types D , the fixed point equation
produces reservation values for some types that do not belong to the support of the underlying
distributions. This simplifies the presentation and is without loss of generality. Indeed, because a
customer can only meet dealers whose utility types lie in Dd and a dealer can only meet customers
whose utility types lie in Dc we have that the reservation values of customers in D\Dc and of
dealers in D\Dd have no impact on the reservation values of agents whose utility types belong to
the support of the corresponding distribution.
Our first result establishes a set of fundamental properties shared by all solutions to the fixed
point equation (23).
Lemma A.1 Assume that ∆U : {c, d} × D → R solves equation (23). Then the map δ 7→ ∆U (α, δ) is
strictly increasing and satisfies
∆U (α, δ0 ) − ∆U (α, δ)
1
1
≤
≤
,
0
r+a
δ −δ
r + 1{α=c} γ

α ∈ {c, d}, δ 6= δ0 ∈ D 2 .

(24)

with the constant
a ≡ max {λ + ρθ, γ + mρ(1 − θ )} .

(25)

In particular, for each given α ∈ {c, d} the map δ 7→ ∆U (α, δ) is absolutely continuous and, therefore,
uniformly bounded.
Proof of Lemma A.1. Assume that we have ∆U (α, δ0 ) ≤ ∆U (α, δ) for some α ∈ {c, d} and δ0 > δ.
Using the assumption of the statement in conjunction with the fact that the evaluation R[∆U ](α, δ)
is non increasing in ∆U (α, δ) we deduce that
r∆U (α, δ) = rR[∆U ](α, δ) ≤ δ − δ0 + rR[∆U ](α, δ0 )

= δ − δ0 + r∆U (α, δ0 ) < r∆U (α, δ0 )
which contradicts our assumption. To establish (24) let δ < δ0 be arbitrary. Since ∆U (α, δ) <
∆U (α, δ0 ) the same arguments as above imply that


r ∆U (α, δ0 ) − ∆U (α, δ) = r R[∆U ](α, δ0 ) − R[∆U ](α, δ)

≤ δ0 − δ − 1{α=c} γ ∆U (α, δ0 ) − ∆U (α, δ)

40



and the upper bound follows. Now consider the lower bound. Combining the fundamental
theorem of calculus and the increase of the map δ 7→ ∆U (α, δ) shows that we have
+

0

( x − ∆U (α, δ)) − x − ∆U (α, δ )
0

∆U (α, δ ) − x

+

+

=

+

− (∆U (α, δ) − x ) =

Z ∆U (α,δ0 )
∆U (α,δ)

Z ∆U (α,δ0 )
∆U (α,δ)

1{z≤ x} dz,
1{ x≤z} dz.

for all x ∈ R. Using these identities together with the definition of R and a change in the order of
integration we then obtain that
r (∆U (α, δ0 ) − ∆U (α, δ)) = r ( R[∆U ](α, δ0 ) − R[∆U ](α, δ))

= δ0 − δ −


+ 1{α=d}

1

∑

Z ∆U (α,δ0 ) 

q=0 ∆U (α,δ)

1{α=c} γ + ρ(1 − θ )Φq ( Ad,q (z))

λ
θ1−q Φq ( Ad,q (z)) + ρθµq ( Ac,q (z))
m




dz

≥ δ0 − δ − a(∆U (α, δ0 ) − ∆U (α, δ))
where we have set
Aα,q (z) = { x ∈ D : (2q − 1)(z − ∆U (α, x )) ≥ 0}
and the last inequality follows from (25). This establishes the required lower bound and the
remaining claims now follow by observing that due to (24) the map δ 7→ ∆U (α, δ) is Lipschitz
continuous on the compact set D .



Equipped with Lemma A.1 we are now ready to establish the existence and uniqueness of the
soltuion to the reservation value equation.
Lemma A.2 Equation (23) admits a unique solution ∆U : {c, d} × D → R.
Proof. By Assertion 2 of Lemma A.1 it suffices to show that equation (23) admits a unique bounded
solution. By definition we have that f is a fixed point of the operator R if and only if it is a fixed
point of the operator
P[ f ] ≡

r
a
f+
R[ f ]
r+a
r+a

41

where a is as in the statement of A.1, and we will show that this operator is a contraction on the
space X of uniformly bounded functions from {c, d} × D into R. Since
0 = ( x − y)+ − max{ x, y} + y = (y − x )+ + min{ x, y} − y
for all ( x, y) ∈ R2 we have that

(r + a) P[ f ](α, δ) − δ

Z
= 1{α=c} ( a − ac ) f (c, δ) + γ
f (c, δ0 )dFc (δ0 )
(26)
D
Z

Z
0
0
0
0
max{ f (d, δ ), f (c, δ)}dΦ0 (δ ) +
min{ f (d, δ ), f (c, δ)}dΦ1 (δ )
+ ρ (1 − θ )
D
D

+ 1{α=d} ( a − ad ) f (d, δ)

Z
Z
0
0
0
0
min{ f (d, δ ), f (c, δ)}dµ1 (δ )
+ ρθ
max{ f (c, δ ), f (d, δ)}dµ0 (δ ) +
D
D

 Z
Z
dΦ1 (δ0 )
dΦ0 (δ0 )
0
0
+ θ0
min{ f (d, δ ), f (d, δ)}
+ λ θ1
max{ f (d, δ ), f (d, δ)}
m
m
D
D
with the constants
ac = γ + mρ(1 − θ ) ≤ a,
ad = ρθ + λ

∑

θ1−q (Φq (δh )/m) ≤ a.

q=0,1

It is now immediate to see to that the operator P maps X into itself, is monotone, and satisfies the
discounting condition
P[ f + e](α, δ) = P[ f ](α, δ) +

ae
,
r+a

e ≥ 0.

Therefore, Blackwell’s sufficient conditions for a contraction hold and the statement now follows
from the contraction mapping theorem.



Proof of Proposition 1. The result follows by combining Lemmas A.1 and A.2.



42

B

Appendix of Section 3.3

This section collects all the proofs for Section 3.3 in the paper.

B.1

Proof of Lemma 1 and its converse

We first establish Lemma 1 and its converse.
Lemma B.1 A distribution (µ, Φ) is stationary if and only if it solves a constrained version of the system
of equations (3), (4), (5),(8), (9), and (10), in which we prohibit two types of trades: between low type
customer non owners and dealers, and between high type customer owners and dealers.
Notice that it is important to prove the converse as well, so as to establish that the original
system of steady state equations is equivalent to the constrained one. To prove this result, suppose
we have found a solution of the unconstrained system given by (3), (4), (5), (8), (9), and (10). If we
show that this solution satisfies
0 = µ `0 Φ 1
0 = µh1 Φ0


∆V ( x 0 ) ≤ ∆W (y` ) ,


∆V ( x 0 ) > ∆W (yh ) ,



(27)
(28)

then it also solves the constrained system in which trades between low type customer non owners,
high type customer owners, and dealers are prohibited. Let us focus on (27), as the argument for
(28) is identical. If ∆V ( x 0 ) ≥ ∆W (y` ) for all x 0 ∈ [ x` , xh ], then Φ1 ({∆V ( x 0 ) ≤ ∆W (y` )}) = 0 and
so the result is obvious. Otherwise, consider any x ∈ [ x` , xh ] such that ∆V ( x ) < ∆W (y` ). Then,
∆V ( x ) < ∆W (yh ) as well. As a result dealers owners with type less than x have no incentives to
buy from customers, and the first term on the right-hand side of (10) is zero. It follows that all the
other terms are also zero. In particular, we have that
ρµ`0 Φ1





x 0 ≤ x ∩ ∆V ( x 0 ) ≤ ∆W (y` ) = 0,

and (27) obtains by evaluating the above equation at x = xh .
Now conversely suppose we have found a solution of the constrained system. If we show that
this solution satisfies (27) and (28), then it must solves the unconstrained system. As before let us
focus on (27), as the argument for (28) is identical. If Φ1 ({∆V ( x 0 ) ≤ ∆W (y` )}) = 0, then the result
follows. Otherwise, suppose there is some x ∈ [ x` , xh ] such that ∆V ( x ) ≤ ∆W (y` ) and Φ1 ( x ) > 0.
Then, the set { x 0 ≤ x } ∩ {∆V ( x 0 ) > ∆W (y` )} is empty. Therefore, on the right-hand side of (10),
we have that ρµ`1 Φ0 ({ x 0 ≤ x } ∩ {∆V ( x 0 ) > ∆W (y` )}) = 0, and so all other terms must be zero as

43

well, in particular
ρµh0 Φ1





x 0 ≤ x ∩ ∆V ( x 0 ) ≤ ∆W (yh ) = 0.

Since ∆V ( x ) ≤ ∆W (y` ), then ∆V ( x ) ≤ ∆W (yh ), so Φ1 ({ x 0 ≤ x } ∩ {∆V ( x 0 ) ≤ ∆W (yh )}) = Φ1 ( x ).
By our maintained assumption that Φ1 ( x ) > 0, we conclude that µh0 = 0. Now, plugging that
µh0 = 0 in the constrained version of (9) implies that µ`0 = 0.

B.2

Proof of Proposition 2

We fix some k = (k0 , k1 ) ∈ K, and we seek to find the solutions (m, µ, Φ) to the following system
of equations:
m0 = Φ0 ( x h ) − k 0

(29)

m1 = Φ1 ( x h ) − k 1

(30)

m0 + k 0 + m1 + k 1 = m

(31)

µh0 + µh1 = πh

(32)

µ `0 + µ `1 = π `

(33)

µh1 + µ`1 + m1 + k1 = s

(34)

γπh µ`0 = γπ` µh0 + ρµh0 m1

(35)

γπ` µh1 = γπh µ`1 + ρµ`1 m0

(36)

ρµ`1 max {Φ0 ( x ) − k0 , 0} = ρµh0 min {Φ1 ( x ), m1 } +

λ
Φ1 ( x ) (m0 + k0 − Φ0 ( x ))
m

Φ0 ( x ) + Φ1 ( x ) = mF ( x ).

(37)
(38)

This is the same system as shown in the text, with the addition of (31). This equation is redundant
(it can be obtained by adding up (29), (30) and using (38) evaluated at x = xh ) but will prove
convenient. This system has ten equations and eight unknowns, which suggest that one more
equation is redundant. Hence, our solution strategy below is to relax the system by dropping the
first two equations, (29) and (30), show that the relaxed system of eight equations (31) through
(38) has a unique solution, and verify that this solution satisfies the two dropped equations.
Notice as well that the system given by (31) through (38) is block diagonal. The first six
equations, (31) through (36), only involve m and µ, the measures of active dealers and customers.
The distributions across dealers, Φ, only appear in the last two equations, (37) and (38). Thus, we
solve the system in two steps: we first solve for (m, µ) using (31) through (36), and then for Φ
using (37) and (38).

44

B.2.1

Solving for (m, µ) given k

In this subsection, we fix an arbitrary k = (k0 , k1 ) ∈ K and use the first six equations, (31) through
(36), to solve for (m, µ). To construct this solution we distinguish two cases.
Assume first that k is such taht k0 + k1 = m. Since (m0 , m1 ) must be nonnegative it follows
from (31) that m0 = m1 = 0 and it is then easy to verify that the solution for µ is
µ `0 = π ` − µ `1 = π ` ( s − k 1 ) ,

(39a)

µh0 = πh − µh1 = πh (1 + m − s − k0 ).

(39b)

Assume next that k0 + k1 < m. Substituting µ`0 = π` − µ`1 , from (33), into (35), and multiplying
both sides of the equation by m0 we obtain that:
γπh π` m0 = γπh µ`1 m0 + γπ` µh0 m0 + ρµh0 m0 m1 .

(40)

On the other hand, subtracting (36) from (37) and using (32) and (33), we obtain that
ρµh0 m1 = ρµ`1 m0

(41)

Substituting (41) into (40) and solving for µh0 , we obtain the formula for µh0 shown in Proposition
2. In doing so, we are using that k0 + k1 < m which, together with (31), implies that either m1 > 0
or m0 > 0, and ensures that the denominator is not zero. If m0 > 0, then the formula for µ`1 in
Proposition 2 follows from the just derived formula for µh0 and from (41). If m0 = 0, then the justderived formula for µh0 implies that µh0 = 0, (35) implies that µ`0 = 0 and so from (33) µ`1 = π` ,
meaning that the formula for µ`1 in Proposition 2 holds as well. Now, substituting these formulas
into (34), and using (31) we obtain the following equation for m1 :
s=

γπh π` (2m1 + k1 + k0 − m)
+ π h + m1 + k 1 ,
γπh m1 + γπ` (m − k0 − k1 − m1 ) + ρm1 (m − k0 − k1 − m1 )

(42)

The derivative of the right-hand side with respect to m1 is
1+

γπ` πh ρm21 + γ(m − k0 − k1 ) + ρ(m − k0 − k1 − m1 )2



(ρm1 (m − k0 − k1 − m1 ) + γ(π` (m − k0 − k1 − m1 ) + πh m1 ))2

> 1,

hence the right-hand side of (42) is strictly increasing in m1 . Moreover at m1 = 0, the right-hand
side is k1 ≤ s by definition of the set K, while at m1 = m − k0 − k1 it is equal to 1 + m − k0 > s
by definition of the set K. Therefore, it follows from the intermediate value theorem that this

45

equation has a unique solution and it is now straightforward to verify that this construction leads
to a solution of (31) through (36).
To complete the proof it remains to establish continuity (which is not completely obvious at
points such that k0 + k1 = m where m0 = m1 = 0). To do so, rewrite (31)-(38) as
0 = f (µ, m0 , m1 , k )
for some function f : [0, 1]4 × [0, m]2 × K → R6 . Fix an arbitrary k ∈ K, consider a sequence
n
n
n ∞
(k n )∞
n=1 ⊂ K converging to k ∈ K and denote by ( µ , m0 , m1 )n=1 such that the associated sequence

of measures of customers and active dealers. Since solutions are uniformly bounded, we can
extract a subsequence (µα , m0α , m1α )∞
m=1 converging to some ( µ, m0 , m1 ). Now, since f is clearly
jointly continuous in we obtain that
0 = lim f (µα , m0α , m1α , kα ) = f (µ, m0 , m1 , k ) .
α→∞

But we have already shown that the system (31)-(38) has a unique solution. This means that all
subsequences have the same limit, equal to the unique solution of the system given k. Therefore,
the original sequence converge to that limit as well, and continuity is established.

B.2.2

Solving for Φ given k

We now turn to the last two equations, (37) and (38), given the tuple (m, µ) solving the first six
equations (31) through (36). As stated in the main body of the text, we substitute (38) into (37),
and we obtain that for each each x ∈ [ x` , xh ] the measure φ = Φ1 ( x ) of dealer owners with utility
type below x solves
0=

λ
φ (m0 + k0 + φ − mF ( x )) + ρµh0 min {φ, m1 } + ρµ`1 min {φ − mF ( x ) + k0 , 0} .
m

(43)

Existence. It is straightforward to check that the solution reported in Proposition 2 indeed
solves equation (43).

Uniqueness. Suppose first that µ`1 = 0. In this case it follows from (36) that µh1 = 0, and from
(32) and (33) that µh0 = πh and µ`0 = π` . Since µh0 m1 = µ`1 m0 , we thus obtain that m1 = 0.
The market clearing equation (34) then implies that k1 = s, and (31) implies that m0 + k0 = m − s.
Using these results and plugging (38) into (37), we obtain that
Φ1 ( x ) (m − s − mF ( x ) + Φ1 ( x )) = 0.

46

for each x ∈ [ x` , xh ]. Using the fact that Φ1 ( x ) is increasing (because it is a cumulative distribution
function), continuous (because it is absolutely continuous with respect to F ( x )), and such that
Φ1 ( xh ) = s we then deduce that the unique solution is Φ1 ( x ) = (s − m(1 − F ( x )))+ .
Assume next that the given masses of dormant dealers are such that µ`1 > 0. In this case we
rewrite equation (43) as
0=

λ
φ (φ − mF ( x ) + m0 + k0 ) + ρµh0 m1 + ρµh0 min {φ − m1 , 0}
m

+ ρµ`1 (φ − mF ( x ) + k0 ) + ρµ`1 min {−φ + mF ( x ) − k0 , 0} .

Using ρµh0 m1 = ρµ`1 m0 and factoring terms, we obtain the equivalent equation:

0=


λ
φ + ρµ`1 (φ − mF ( x ) + m0 + k0 )
m

(44)

+ ρµh0 min {φ − m1 , 0} + ρµ`1 min {−φ + mF ( x ) − k0 , 0} .
Since µ`1 > 0 we have that the right hand side is strictly negative for 0 ≤ φ < (mF ( x ) − m0 − k0 )+
and it follows that any solution must lie above that threshold. Now, the derivative of the right
hand side of (44) with respect to φ is greater than:
λ
λ
φ + ρµ`1 + (φ − mF ( x ) + m0 + k0 ) − ρµ`1 ,
m
m
where we took derivative of the first term and we used the fact that the derivatives of the second
term and third terms are, respectively, greater than zero and −ρµ`1 . Clearly, this lower bound is
strictly positive for all φ > (mF ( x ) − m0 − k0 )+ . Therefore, the right hand side of (44) is strictly
increasing in φ and the existence of a unique solution now follows from an application of the
intermediate value theorem.

B.2.3

Verifying that the dropped equations hold

We need to verify that the two equations we dropped at the beginning of this construction, (29) and
(30), hold. Given (31) and (38) evaluated at xh , this is equivalent to verifying that (30) holds, that
is, m1 + k1 = Φ1 ( xh ). If k0 = m, then m1 + k1 = 0, and it thus follows from (39) and the formula of
Proposition 2 that Φ1 ( xh ) = 0. Otherwise, it follows from (31) that m0 + k0 + k1 ≤ mF ( xh ) = xh ,
and from the formula of Proposition 2 that Φ1 ( x ) = m − k0 − m0 = m1 + k1 .

47

C

Appendix of Section 3.4

This section gathers the proofs of Theorem 1, Proposition 3, and Proposition 4.

C.1

Proof of Theorem 1

Before embarking on the proof we start by establishing the joint continuity of the reservation
values with respect to utility types and the masses of dormant dealers. The reservation value of
an agent of type (α, δ) who faces the distributions induced by a given k ∈ K solves
∆Uk (α, δ) = Rk [∆Uk ](α, δ)

(45)

where the operator Rk is defined as in (23) but with the distributions µq (δ, k ) and Φq (δ, k ) induced
by k instead of the generic ones. From the results of Lemmas A.1 and A.2 we have that this fixed
point equation admits a unique solution for each k ∈ K, that this solution is strictly increasing in
utility type, and that it satisfies the sector condition (24).
Lemma C.1 The map (δ, k ) 7→ ∆Uk (α, δ) is continuous on D × K for each α ∈ {c, d}.
Proof. Let X0 ⊆ X denote the set of functions f : {c, d} × D → R that are non decreasing in
utility type and such that
sup
α∈{c,d}


δ0 − δ
,
f (α, δ0 ) − f (α, δ) ≤
r

δ ≤ δ0 ∈ D 2 .

(46)

Because the unique solution to (45) satisfies (24) we have that ∆Uk ∈ X0 and continuity in δ ∈ D
for each fixed k ∈ K follows immediately. To prove continuity in k we argue as follows. Consider
the operator defined by
Pk [ f ](α, δ) ≡

a
r
Rk [ f ](α, δ) +
f (α, a).
r+a
r+a

with a as in (25) and observe that f = Rk [ f ] if and only if f = Pk [ f ]. The same arguments as in the
proof of Lemma A.2 show that for each k ∈ K the operator Pk satisfies Blackwell’s conditions for a
contraction on X with modulus

a
r+a .

Since X0 + R+ ⊆ X0 the only thing required to conclude that

the same properties also hold on the closed subset X0 is to show that Pk maps X0 into itself. Fix
an arbitrary f ∈ X0 . From (26) we have that the evaluation (r + a) Pk [ f ](α, δ) − δ is increasing in
f (α, δ) and since the latter is increasing in δ we that Pk [ f ](α, δ) inherits this property. On the other

48

hand, using (26) and the assumed increase of f ∈ X0 in conjunction with the fact that

(max, min){ a, b} − (max, min){ a, c} ≤ b − c,

b≥c

we deduce that

(r + a) Pk [ f ](α, δ0 ) − Pk [ f ](α, δ) − (δ0 − δ)



≤ 1{α=c} ( a − γ) f (c, δ0 ) − f (c, δ) + 1{α=d} a f (d, δ0 ) − f (d, δ) ≤ ( a/r ) δ0 − δ
for all δ ≤ δ0 , and it follows Pk [ f ] satisfies (46). Next, we claim that the map k 7→ Pk [ f ] is continuous
from K into X for any given function f ∈ X0 . Indeed, using (26) and
1

0 = mF (δ) −

∑

Φq (δ, k ) = mFc (δ) −

q =0

1

∑ µq (δ, k),

(δ, k) ∈ D × K,

(47)

q =0

we deduce that for any (δ, k, k0 ) ∈ D × K2 we have
Pk0 [ f ](α, δ) − Pk [ f ](α, δ)

(48)


ρ (1 − θ )
| f (d, δ0 ) − f (c, δ)| dΦ1 (δ0 , k) − dΦ1 (δ0 , k0 )
r+a
D
Z

ρθ
+ 1{α=d}
| f (c, δ0 ) − f (d, δ)| dµ1 (δ0 , k) − µ1 (δ0 , k0 )
r+a D
Z

λθ1
max{ f (d, δ0 ), f (d, δ)} dΦ1 (δ0 , k ) − dΦ1 (δ0 , k0 )
+ 1{α=d}
m (r + a ) D
Z

λθ0
− 1{α=d}
min{ f (d, δ0 ), f (d, δ)} dΦ1 (δ0 , k ) − dΦ1 (δ0 , k0 ) .
m (r + a ) D

= 1{α=c}

Z

If f ∈ X0 then (46) and the fact that the composition of Lipschitz functions is itself Lipschitz imply
that for every fixed δ ∈ D there are functions (φi,δ )3i=1 such that
sup |φi,δ (δ0 )| ≤ 1/r

(49)

δ0 ∈D

and
q1 (δ, δ0 ) ≡ | f (d, δ0 ) − f (c, δ)| = q1 (δ, δh ) −
q2 (δ, δ0 ) ≡ | f (c, δ0 ) − f (d, δ)| = q2 (δ, δh ) −

Z δh
δ0
Z δh
δ0

φ1,δ ( x )dx,
φ2,δ ( x )dx,

q3 (δ, δ0 ) ≡ (θ1 max −θ0 min) { f (d, δ0 ), f (d, δ)} = q3 (δ, δh ) −

49

Z δh
δ0

φ3,δ ( x )dx

for all δ0 ∈ D . Substituting these identities into (48) and changing the order of integration shows
that for any (δ, k, k0 ) ∈ D × K2 we have
Pk0 [ f ](α, δ) − Pk [ f ](α, δ)


Z
ρ (1 − θ )
0
0
= 1{α=c}
q1 (δ, δh )∆Φ1 (δh , k, k ) −
φ1,δ ( x )∆Φ1 ( x, k, k )dx
r+a
D


Z
ρθ
0
0
q2 (δ, δh )∆µ1 (δh , k, k ) −
φ2,δ ( x )∆µ1 ( x, k, k )dx
+ 1{α=d}
r+a
D


Z
λ
0
0
+ 1{α=d}
q3 (δ, δh )∆Φ1 (δh , k, k ) −
φ3,δ ( x )∆Φ1 ( x, k, k )dx
m (r + a )
D
where

(∆µ1 , ∆Φ1 )(δ, k, k0 ) ≡ µ1 (δ, k) − µ1 (δ, k0 ), Φ1 (δ, k) − Φ1 (δ, k0 )



denotes the changes in the distributions when moving from k0 to k. It now follows from (49) and
the boundedness of f ∈ X0 that
!
sup |( Pk − Pk0 ) [ f ](α, δ)| ≤ B sup ∆Φ1 (δ, k, k0 ) + max |µ j1 (k ) − µ j1 (k0 )|
j∈{`,h}

δ∈D

(α,δ)

(50)

for some B > 0. Since the functions (µ j1 (k ))hj=` are continuous on K we have the second term
on the right hand side converges to zero when k0 → k. On the other hand, because the function
Φ1 (δ, k ) is continuous on D × K and this set is compact we have that it is uniformly continuous
on that set. Therefore, for every e > 0 there exists β > 0 such that

k(δ, k) − (δ0 , k0 )k < β =⇒ |Φ1 (δ, k) − Φ1 (δ0 , k0 )| < e.
and observing that |k − k0 | < β if and only if k(δ, k) − (δ, k0 )k < β we conclude that for every e > 0
there exists β > 0 such that

|k − k0 | < β =⇒ sup |∆Φ1 (δ, k, k0 )| = sup |Φ1 (δ, k) − Φ1 (δ, k0 )| < e.
δ∈D

δ∈D

This in turn implies that the first term on right hand side of (50) tends to zero whenever k0 → k
and continuity follows. Combining the above results shows that P[k, f ] ≡ Pk [ f ] is continuous in

50

k ∈ K for each given f ∈ X0 and such that
sup |( P[k, f ] − P[k, g]) (α, δ)| ≤
(α,δ)

a
sup |( f − g) (α, δ)| .
r + a (α,δ)

Therefore, it follows from Lemma F.3 that k 7→ ∆Uk is continuous from K into X . This in turn
implies that ∆Uk (α, δ) is equicontinuous in k and the required joint continuity on D × K now



follows from the result of Lemma F.2.
Proof of Theorem 1. To establish the result it suffices to prove that the function
"
Λ(k) =

Λ0 ( k )

#

Λ1 ( k )

"

≡

Φ0 ({ x ∈ Dd : ∆Uk (d, x ) ≤ ∆Uk (c, y` )}, k )

#

Φ1 ({ x ∈ Dd : ∆Uk (d, x ) ≥ ∆Uk (c, yh )}, k )

admits a fixed point in K. This will follow from Brouwer’s fixed point theorem once we show that
Λ(k ) is continuous and maps K into itself. The latter property follows by noting that
Λ0 ( k ) + Λ1 ( k ) ≤

1

∑ Φq (D, k) = m,

q =0

Λ1 (k) ≤ Φ1 (D , k ) ≤ µ1 (D , k ) + Φ1 (D , k ) = s,
and
1 + m − s − Λ0 (k ) ≥ m − Λ0 (k ) ≥ m − Φ0 (D , k) = Φ1 (D , k ) ≥ 0
as a result of (47) and the fact that s ∈ (m, 1). To establish the former property consider the pair of
functions defined by


f j (δ, k ) ≡ ∆Uk (d, δ) − min ∆Uk (d, xh ), max ∆Uk (d, x` ), ∆Uk (c, y j )

,

j ∈ {`, h}

By Lemmas A.1 and C.1 we know that these functions are continuous in (δ, k ) as well as strictly
increasing in δ and that they satisfy (72) with c =

1
r+a

and C =

1
r.

Therefore, it follows from

Lemma F.4 and the increase of reservation values that

{ x ∈ Dd : ∆Uk (d, x ) ≤ ∆Uk (c, y` )} = { x ∈ Dd : f ` ( x, k) ≤ 0} = [ x` , δ` (k)]
{ x ∈ Dd : ∆Uk (d, x ) ≥ ∆Uk (c, yh )} = { x ∈ Dd : f h ( x, k) ≥ 0} = [δh (k), xh ]

51

for some continuous functions δi : K → Dd and this in turn implies that
"
Λ(k) =

Φ0 (δ` (k ), k )

#

k1 + m1 − Φ1 (δh (k ), k )

.

Since the functions m1 , δj (k ), and Φq (δ, k ) are all continuous this identity implies that the function
Λ(k ) is continuous and the proof is complete.

C.2



Proof of Proposition 3

We start by stating a formal definition of a steady state equilibrium without trade.
Definition 1 A no-trade equilibrium is a steady state equilibrium such that µ1 (δ) = µ1 (δh ) Fc (δ) for all
utility types δ ∈ D and
Z
Sd,0 ×Sd,1

Z
Sc,0 ×Sd,1

Z
Sd,0 ×Sc,1

(∆V ( x ) − ∆V (y))+ dΦ0 (y)dΦ1 ( x ) = 0,

(51a)

(∆V ( x ) − ∆W (y))+ dµ0 (y)dΦ1 ( x ) = 0,

(51b)

(∆W (y) − ∆V ( x ))+ dµ1 (y)dΦ0 ( x ) = 0,

(51c)

where the sets Sc,q and Sd,q denote the supports of the measures induced by the equilibrium distributions of
types and asset holdings among customers and dealers.
Our first observation is that in a no trade equilibrium the allocation of the assets among dealers
is efficient given the available supply.
Lemma C.2 In a no trade equilibrium we have that ( x0 , x1 ) ∈ Sd,0 × Sd,1 implies x0 ≤ x1 . In particular,

Sd,0 = [ x` , x ∗ ] and Sd,1 = [ x ∗ , xh ] for some x ∗ ∈ Dd .
Proof. Assume toward a contradiction that the claim does not hold. Then it follows from (51a)
that we have ∆V ( x0 ) − ∆V ( x1 ) ≤ 0 for some x0 > x1 which contradicts the strict increase of the
reservation value function. This in turn implies that Sd,q = [ aq , aq ] for some a0 ≤ a1 and the result
now follows since Sd,0 ∪ Sd,1 = [ x` , xh ].



After these preliminary results we are now ready to embark on the proof of Proposition 3. Rather
than proving the result as stated in the text we will establish its contrapositive, namely that the
validity of either condition (13a) or condition (13b) is necessary and sufficient for the existence of
a no-trade equilibrium.

52

Proof of necessity. Assume that the distributions (µ, Φ) and the reservation values (∆V, ∆W )
form a no trade equilibrium. Then µ1 (δ) = µ1 (δh ) Fc (δ) and we claim that µ1 (δh ) ∈ (0, 1). Indeed,
if µ1 (δh ) = 0 then all assets would be held in the dealer sector which is not compatible with
market clearing since s > m. Similarly, if µ1 (δh ) = 1 then all customers hold the asset which is
again inconsistent with market clearing since s < 1 by assumption.
Given that µ1 (δh ) ∈ (0, 1) we have Sc,q = {y` , yh } and it thus follows from (51b), (51c), and the
strict increase of the reservation value function that
∆V ( x0 ) ≤ ∆W (y` ) < ∆W (yh ) ≤ ∆V ( x1 ),

( x0 , x1 ) ∈ Sd,0 × Sd,1 .

Letting xq converge to the threshold x ∗ of Lemma C.2 and using the continuity of reservation
values shows that the sets Sd,0 and Sd,1 cannot both be nonempty. Assume first that Sd,0 = ∅ so
that all dealers hold the asset. Since µ1 (δh ) > 0 this implies that
0 = Φ0 (δ) = Φ1 (δ) − mF (δ),
0 = µ0 (δ) − (1 + m − s) Fc (δ) = µ1 (δ) − (s − m) Fc (δ).
Therefore, it follows from (51a), (51b), and (51c) that the reservation values satisfy
∆V ( x` ) ≥ ∆W (yh )

(52)

and solve the system given by
r∆W (y) = y + γ

Z
D

r∆V ( x ) = x − λθ0

(∆W (y0 ) − ∆W (y))dFc (y0 ),

Z x
x`

(∆V ( x ) − ∆V ( x 0 ))dF ( x 0 ) − ρθ (s − m)

(53)
Z
D

(∆V ( x ) − ∆W (y))dFc (y)(54)
.

A direct calculation shows that the unique solution to (53) is
∆W (y) = A(y) ≡



r
r+γ



y
+
r



γ
r+γ



Ec [y]
r

where Ec [·] denotes an average with respect to the cross-sectional distribution of customer types.
Substituting this solution into (54) and evaluating at the point x` then gives

(r + ρθ (s − m)) ∆V ( x` ) = x` + ρθ (s − m) Ec [ A(y)]

53

and the necessity of (13a) now follows from (52). Assume next that Sd,1 = ∅ so that all the assets
are in the hands of customers. In this case we necessarily have that
0 = Φ1 (δ) = Φ0 (δ) − mF (δ),
0 = µ0 (δ) − (1 − s) Fc (δ) = µ1 (δ) − sFc (δ).
Therefore, it follows from (51a), (51b), and (51c) that the reservation values satisfy
∆V ( xh ) ≤ ∆W (y` )

(55)

and solve the system given by (53) and
r∆V ( x ) = x + λθ1

Z xh
x

0

0

(∆V ( x ) − ∆V ( x ))dF ( x ) + ρθ (1 − s)

Z
D

(∆W (y) − ∆V ( x ))dFc (y).

Proceeding as in the previous case shows that the unique solution to this system of equations
satisfies both ∆W (y) = A(y) and

(r + ρθ (1 − s)) ∆V ( xh ) = xh + ρθ (1 − s) Ec [ A(y)]


so that the necessity of (13b) now follows from (55).

Proof of sufficiency. Assume first that (13a) is satisfied and consider the candidate equilibrium
distributions given by
µ1 (δ) = Fc (δ) − µ0 (δ) = (s − m) Fc (δ),
Φ1 (δ) = mF (δ) − Φ0 (δ) = mF (δ).
The reservation values induced by these distributions are defined as the unique solution to
r∆W (y) = y

+

Z
D

(56)

γ(∆W (y0 ) − ∆W (y))dFc (y0 ) − ρm(1 − θ )

r∆V ( x ) = x − λθ0

− ρθ (s − m)

Z
D

Z x
x`

Z
D

(∆V ( x ) − ∆W (y))+ dF ( x )

(∆V ( x ) − ∆V ( x 0 ))+ dF ( x )

(∆V ( x ) − ∆W (y))+ dFc (y) + ρθ (1 + m − s)

54

(57)
Z
D

(∆W (y) − ∆V ( x ))+ dFc (y).

and to prove the sufficiency of (13a) we have to show that the unique solutions to these equations
are such that (52) holds. Consider the simplified system given by
rŴ (y) = y + γ

Z
D

rV̂ ( x ) = x − λθ0

(Ŵ (y0 ) − Ŵ (y))dFc (y0 )

Z x
x`

0

+

(V̂ ( x ) − V̂ ( x )) dF ( x ) − ρθ (s − m)

Z
D

(V̂ ( x ) − Ŵ (y))dFc (y).

The same arguments as in the proof of Lemma A.1 show that this system admits a unique solution
and that this solution is strictly increasing in utility type. The solution to the first equation is easily
seen to be Ŵ (y) = A(y). Substituting this solution into the second equation and evaluating the
resulting expression at the point x = x` then shows that
V̂ ( x` ) =

x` + ρθ (s − m) Ec [ A(y)]
.
r + ρθ (s − m)

Using this expression in conjunction with (13a) and the fact that the solution is strictly increasing
in utility type then shows that we have
V̂ ( x ) ≥ V̂ ( x` ) ≥ Ŵ (yh ),

x ∈ D.

This in turn implies that the functions (V̂ ( x ), Ŵ (y)) solve (56)–(57) and (52) now follows from the
above inequality and the uniqueness of the solution to the reservation value equation. The proof



of the sufficiency of (13b) is similar. We omit the details.

C.3

Proof of Proposition 4

Assume towards a contradiction that ∆W (y` ) > ∆V ( x` ) even though the stated conditions hold.
Together with (6) and (7) this implies that
0 > r (∆V ( x` ) − ∆W (y` )) = A − B
with the nonnegative constants
A = x` +

λθ1
m

Z
D

(∆V (δ0 ) − ∆V ( x` ))+ dΦ0 (δ0 ),

+ ρ (1 − θ )

Z

0

D

0

(∆W (y` ) − ∆V (δ )) dΦ1 (δ ) + ρθ
+

55

Z
D

(∆W (δ0 ) − ∆V ( x` ))+ dµ0 (δ0 )

and
B = y` + γπh (∆W (yh ) − ∆W (y` )) +

+ ρθ

Z

0

D

λθ0
m

Z
D

(∆V ( x` ) − ∆V ( x 0 ))+ dΦ1 (δ0 ),

0

(∆V ( x` ) − ∆W (δ )) dµ1 (δ ) + ρ(1 − θ )
+

Z
D

(∆V (δ0 ) − ∆W (y` ))+ dΦ0 (δ0 ).

The assumed inequality and the results of Lemma A.1 then show that we have
A ≥ x` + λθ1

Z
D

(∆V (δ0 ) − ∆V ( x` ))

B ≤ rA(y` ) + mρ(1 − θ )

Z
D

dΦ0 (δ0 )
,
m

(∆V (δ0 ) − ∆V ( x` ))

dΦ0 (δ0 )
,
m

and therefore
0 > r (∆V ( x` ) − ∆W (y` ))
dΦ0 (δ0 )
(∆V (δ0 ) − ∆V ( x` ))
m
D

Z  0
0)
dΦ
(
δ
δ
−
x
0
`
≥ x` − rA(y` ) − (mρ(1 − θ ) − λθ1 )+
r
m
D


+ x − x`
≥ x` − rA(y` ) − (mρ(1 − θ ) − λθ1 )
r

≥ x` − rA(y` ) − (mρ(1 − θ ) − λθ1 )

Z

where the third and fourth inequalities follow, respectively, from (24) and (4). Under the stated
conditions the rightmost term is nonnegative and the required contradiction follows. The proof
of the upper inequality ∆V ( xh ) ≤ ∆W (yh ) is similar and thus omitted. The expressions for the
reservation of dealers follows from the calculations reported in Appendix E.3.1 and the linear
system verified by (∆V ( x` ), ∆W (y` ), ∆W (yh )) is given by (69).

D

Appendix of Section 4

This section gathers the proofs of the results in Section 4. As stated in the text, all the calculations
below assume that the exogenous parameters of the model are consistent with an equilibrium in
which k0 = k1 = 0.

56

D.1

Proof of Lemma 2

The inflow-outflow equation for the distribution of dealer owner types is:
ρµ`1 Φ0 ( x ) = ρµh0 Φ1 ( x ) +

λ
Φ1 ( x ) (m0 − Φ0 ( x )) .
m

Solving for Φ0 ( x ) as a function of Φ1 ( x ) and using that the fact that µh0 m1 = µ`1 m0 in equilibrium,
we obtain:
ρµ (m − Φ1 ( x )) /m
m0 − Φ0 ( x )
= h0 1
.
m
ρµ`1 + λΦ1 ( x )/m

(58)

and it follows that
λ
ρµh0 + λ1 ( x ) = ρµh0 + (m0 − Φ0 ( x ))
 m

λ (m1 − Φ1 ( x )) /m
ρµ`1 + λm1 /m
= ρµh0 1 +
= ρµh0
.
ρµ`1 + λΦ1 ( x )/m
ρµ`1 + λΦ1 ( x )/m
Substituting back in the integral we find that the average inventory duration in the dealer sector
is given by
1
ρµh0


Z xh 
ρµ`1 + λΦ1 ( x )/m dΦ1 ( x )
x`

ρµ`1 + λm1 /m

m1

.

Since the utility types of dealers have a continuous distribution, we can make the change of
variable z = Φ1 ( x )/m1 . This gives
1
ρµh0

Z 1
ρµ
0

+ λm1 /m × z
ρµ`1 + λm1 /m
`1



1
dz =
ρµh0


Z 1
1 + zχ
0

where the equality follows from the fact that χ ≡

1+χ
λm0 /m
ρµh0

=

dz
λm1 /m
ρµ`1

and computing the integral

delivers the desired formula.

D.2

Proof of Lemma 3

To complete the proof we need to show that


d f k ( x 0 ) ≡ P {n ≥ k } ∩ { x (k) ∈ dx 0 } { x (1) = x } =

57

−dλ1 ( x 0 ) Λ( x, x 0 )k−2
ρµh0 + λ1 ( x ) (k − 2)!

for all x` ≤ x ≤ x 0 ≤ xh and k ≥ 2. We have already shown that result holds for k = 2. Now
proceeding by induction, let us assume that it holds for some k > 2. Using this assumption we
compute that
d f k +1 ( x 0 ) =

Z x0
x



P {n ≥ k + 1} ∩ { x (k+1) ∈ dx 0 } {n ≥ k } ∩ { x (k) = z} d f k (z)

Z x0

−dλ1 (z) Λ( x, z)k−2
λ1 ( z )
dΦ0 ( x 0 )
x ρµ h0 + λ1 ( z ) m0 − Φ0 ( z ) ρµ h0 + λ1 ( x ) ( k − 2) !

Z x0 
Λ( x, z)k−1
−dλ1 ( x 0 ) Λ( x, x 0 )k−1
−dλ1 ( x 0 )
∂z
=
,
=
ρµh0 + λ1 ( x ) x
( k − 1) !
ρµh0 + λ1 ( x ) (k − 1)!
=

where the first equality follows by conditioning on { x (k) = z} and using the observation that

( x ( j) )∞
j=1 is a Markov chain; the second equality follows from the induction hypothesis; and the
remaining equalities follow by observing that we have dΦ0 ( x 0 )/(m0 − Φ0 ( x )) = −dλ1 ( x 0 )/λ1 (z),
∂z Λ( x, z) = −dλ1 (z)/ (ρµh0 + λ1 (z)), and Λ( x, x ) = 0.

D.3

Proof of Lemma 4

Combining (19) with the result of Lemma 3 and changing the order of integrations shows that the
required probability is given by
P ({n ≥ k }) =

=

Z xh
Z
dΦ0 ( x ) xh Λ( x, x 0 )k−2
x`

Z xh
x`

=

Z xh
x`

−dλ1 ( x 0 )
m0
(k − 2)! ρµh0 + λ1 ( x )
x
Z xh
dλ1 ( x )
Λ( x, x 0 )k−2 dλ1 ( x 0 )
λm0 /m x
(k − 2)! ρµh0 + λ1 ( x )
Z x0
Z xh
0
dλ1 ( x )
dλ1 ( x )
dλ1 ( x 0 ) Λ( x` , x 0 )k−1
Λ( x, x 0 )k−2
=−
.
λm0 /m x` (k − 2)! ρµh0 + λ1 ( x )
( k − 1) !
x` λm0 /m

Now, making the change of variables z = λ1 ( x 0 ) we find that
P ({n ≥ k }) =

(1 + χ)(Γk (0) − Γk (log(1 + χ)))
Γ k (0)

where Γk (z) is the incomplete Gamma function and the desired result follows from standard
properties of the zero-truncated Poisson distribution.

58

D.4

Proof of Lemma 5

Substituting (58) into the integral shows that the interdealer trading volume is given by
VolDD =



Z

λ

ρµh0 (m1 − Φ1 ( x )) /m
ρµ`1 + λΦ1 ( x )/m


dΦ1 ( x ).

Using the same change of variable as in the proof of Lemma 2 we then obtain that:
VolDD = ρµh0 m1 χ

Z 1
dz(1 − z)
0

1 + zχ

,

and direct integration leads to the formula in the statement.

D.5

Proof of Lemma 6

An alternative formula for VolD ( x ). Since Φ0 ( x ) = mF ( x ) − Φ1 ( x ) we can restate the inflow
outflow equation for the cumulative distribution of dealer owner types as:


λ
λ
2
Φ1 ( x ) + Φ1 ( x ) ρµ`1 + ρµh0 + (m0 − mF ( x )) − ρµ`1 mF ( x ) = 0.
m
m
A direct application of the implicit function theorem then shows that
λ
ρµ`1 + m
Φ1 ( x )
dΦ1 ( x )
,
=
λ
λ
m dF ( x )
Φ1 ( x ) + m
ρ(µ`1 + µh0 ) + m
(m0 − Φ0 ( x ))

and, therefore
λ
ρµh0 + m
(m0 − Φ0 ( x ))
dΦ0 ( x )
dΦ1 ( x )
= 1−
=
.
λ
λ
m dF ( x )
m dF ( x )
ρ(µ`1 + µh0 ) + m Φ1 ( x ) + m
(m0 − Φ0 ( x ))

Substituting these expressions into the definition of VolD ( x ), we obtain
VolD ( x ) =

2η1 ( x )η0 ( x )
η1 ( x ) + η0 ( x )

(59)

where the functions
λ
Φ1 ( x ),
m
λ
η1 ( x ) ≡ ρµh0 + (m0 − Φ0 ( x )) .
m
η0 ( x ) ≡ ρµ`1 +

59

represent the dealer’s total buying and selling intensities.

The derivative of VolD ( x ). Differentiating (59) and using the fact that
∂ηq ( x )
ηq ( x )
λ
= (1 − 2q)
∂(mF ( x ))
m η0 ( x ) + η1 ( x )
we obtain
λ
η1 ( x ) η0 ( x )
dVolD ( x )
= (η1 ( x ) − η0 ( x ))
.
m dF ( x )
m
(η1 ( x ) + η0 ( x ))3
Since η1 ( x ) is strictly decreasing and η0 ( x ) is strictly increasing, it follows that VolD ( x ) has a
unique maximum over [ x` , xh ]. This maximum is at x` if η1 ( x` ) ≤ η0 ( x` ), which is equivalent to
ρµh0 + λm0 /m ≤ ρµ`1 ⇐⇒

m1
≤ 1 + χ,
m0

where the equivalence follows from dividing both sides by ρµh0 and using that µ`1 m0 = µh0 m1 .
Likewise, the maximum of is at xh if η1 ( xh ) ≥ η0 ( xh ), which is equivalent to:
ρµh0 ≥ ρµ`1 +

λm1
m0
⇐⇒
≥ 1 + χ.
m
m1

In between, the maximum is interior and solves η1 ( x ) = η0 ( x ).

D.6

Proof of Lemma 7

Using Lemma 3 and the fact that


dλ0 ( x )
dΦ0 ( x )
P { x (1) ∈ dx } =
=− 1
m0
λm0 /m
we deduce that the joint distribution of the chain length and the types of the first and last dealer
in the chain is


P {n = k } ∩ { x (1) ∈ dx } ∩ { x (n) ∈ dx 0 } =

60

ρµh0
−dλ1 ( x 0 ) Λ( x, x 0 )k−2 −dλ1 ( x )
.
ρµh0 + λ1 ( x 0 ) ρµh0 + λ1 ( x ) (k − 2)! λm0 /m

for all x ≤ x 0 and k ≥ 2. Integrating both sides of this equality with respect to x ∈ [ x` , x 0 ], shows
that the joint distribution of the chain length and the type the last dealer in the chain is


P {n = k} ∩ { x

(n)



Z x0

−dλ1 ( x ) Λ( x, x 0 )k−2
x` ρµ h0 + λ1 ( x ) ( k − 2) !


Z x0
0
Λ( x, x 0 )k−1
ρµh0
−dλ1 ( x )
=
−∂ x
λm0 /m ρµh0 + λ1 ( x 0 ) x`
( k − 1) !
0
0
k
−
1
−dλ1 ( x ) Λ( x` , x )
ρµh0
=
λm0 /m ρµh0 + λ1 ( x 0 ) (k − 1)!


Λ( x` , x 0 )k
ρµh0
=
∂ x0
λm0 /m
k!

−dλ1 ( x 0 )
ρµh0
∈ dx } =
λm0 /m ρµh0 + λ1 ( x 0 )
0

When k = 1 we have that



−dλ1 ( x 0 )
ρµh0
ρµh0
P {n = 1} ∩ { x (1) ∈ dx 0 } =
=
∂ x0 Λ( x` , x 0 ) dx 0 ,
0
λm0 /m ρµh0 + λ1 ( x )
λm0 /m
so that the same formula holds as for k ≥ 2 also holds for k = 1. Now recall from Lemma 4 that
the distribution of the chain length is given by
P ({n = k }) =

ρµh0 Λ( x` , xh )k
.
λm0 /m
k!

Using this expression together with Bayes’ rule then gives


P {x

(k)

0



∈ dx } {n = k} =



P {n = k } ∩ { x (k) ∈ dx 0 }
P ({n = k })



= ∂ x0

Λ( x` , x 0 )
Λ( x` , xh )

k

and the desired result now follows by integrating with respect to x 0 . Next consider the distribution
of the type of the first dealer conditional on the chain length. Starting from the same formula as
before we find that

 Z
P {n = k } ∩ { x (1) ∈ dx } =

xh



P {n = k } ∩ { x (k) ∈ dx 0 } ∩ { x (1) ∈ dx }
x


Z xh
ρµh0
−dλ1 ( x )
Λ( x, x 0 )k−1
=
∂ x0
λm0 /m ρµh0 + λ1 ( x ) x
( k − 1) !

ρµh0
−dλ1 ( x ) Λ( x, xh )k−1
−ρµh0
=
∂x
=
λm0 /m ρµh0 + λ1 ( x ) (k − 1)!
λm0 /m

61



Λ( x, xh )k
k!


.

and one easily verify by direct calculations that the same formula also holds for k = 1. Dividing
by P({n = k }) as before, we obtain:


P {x

(1)



∈ dx } {n = k} = −∂ x



Λ( x, xh )
Λ( x` , xh )

k
,

and the desired result now follows by integrating with respect to x.

E
E.1

Appendix of Section 5
Proof that {s, m, ρ, λ, γ, πh } are uniquely identified

In this section we formally state the system of equations that we use to identify the demographic
parameters {s, m, ρ, λ, γ, πh } and establish that this system admits a unique solution.

E.1.1

The system of equations

First equation. The first equation is for the supply s. As explained in the text, we set the average
trade size to Q = $206, 989, estimate the retail investors’ base to N = 54, 187, 500, and calculate
that the relevant measure of municipal bonds supply is A = $2, 308, 598, 605, 189. This leads to
s=

A
= 0.2058.
N×Q

(60)

Second and third equation. To derive
the second and the third equation, we first obtain an


λm0
empirical estimate of the parameter χ = m / (ρµh0 ). Li and Schürhoff (2014) measure that the
average chain length is 1.34. On the other hand, Lemma 4 implies that the model-implied average
chain length is:


1
1+
χ


log (1 + χ) = 1.34.

It is straightforward to verify that the left-hand side is strictly increasing in χ, that it goes to 1 when
χ → 0, and to infinity when χ goes to infinity. Hence, the equation has a unique solution which
is easily calculated numerically to be χ = 0.8737. Next, we use the average inventory duration,
which Li and Schürhoff (2014) measure to be equal D = 3.3 days. Assuming 250 trading days per

62

year, this gives D = 0.0132 years. The equation is thus:
1
0.0132 =
ρµh0



χ
1−
2(1 + χ )


.

Using our estimate for χ we obtain our second identification equation:
ρµh0 = 58.09.

(61)

Using the definition of χ we obtain our third identification equation:
λm0
= 50.75.
m

(62)

Fourth equation. The fourth equation is obtained by imposing that it takes on average 5 days
for a customer to sell an asset to a dealer:
ρm0 =

1
= 50.
5/250

(63)

Fifth equation. The fifth equation is for turnover, which we estimate to be:
ρµh0 m1
= 0.411.
s

Sixth equation.

(64)

The sixth and last equation imposes that the mass of high-valuation investor

is equal to the asset supply:
πh = s.

E.1.2

(65)

The solution to the system of equation

Evidently, equations (60) and (61) directly pin down values for s and πh . To identify the other
parameters, we combine the identification equations (60) through (65) with the equations for a
steady state distribution, stated in Section 3.3.
Consider first the market-clearing condition: µ`1 + µh1 + m1 = s. Since the distribution of
preference types is stationary, we have that µh1 = πh − µh0 . Since the inflow and outflow of
assets in the dealer sector are equal, we have that µh0 m1 = µ`1 m0 . Using that the measures
of active dealers add up to the total measure of dealers, we have m1 + m0 = m. Substituting
these relationships in the market clearing condition, and using the identification equation (65), we

63

obtain:
µh0

2m0 − m
ρµ
+ m − m0 = 0 ⇔ h0 (2m0 − m) + m − m0 = 0.
m0
ρm0

This implies that:
ρµ

1 + ρmh00
m0
=
= 0.6504,
ρµ
m
1 + 2 ρmh00
where we used identification equation (61) and (63) to calculate the ratio

ρµh0
ρm0

= 1.1619. Combining

m0 /m = 0.6504 with equation (62), we obtain:
λ = 78.03.
Next, we combine equations (60), (61) and (64), to obtain that:
m1 = 0.411 × s

1
= 0.0015.
ρµh0

This estimate of m1 with our estimate of m0 /m, and keeping in mind that m0 + m1 = m, we obtain:
m=

m1
= 0.0042.
1 − m0 /m

Combining m0 = m − m1 = 0.0027 with equation (63), we obtain
ρ = 18, 440.
The last parameter is the rate γ at which customers are subject to preference shock. We obtain the
value of this parameter by using the inflow-outflow equation for µh0 . This gives
γ=

ρµh0 m1 m0
πh π` m0 − µh0 (πh m1 + π` m0 )

which is readily calculated as γ = 0.5267 given that we now have found estimates for all the terms
on the right-hand side.

E.2

Identification of (θ, y` ) in Duffie et al. (2005)

In this section we briefly discuss how markup and distress cost can be separately identified in
the model of Duffie, Gârleanu, and Pedersen (2005). To do so we consider the same preference

64

structure as in our main model but assume for simplicity that dealers have identical utility flow
x = y` . Differently from the main model, we assume that the inter-dealer market is frictionless:
When contacted by a high type customer non-owner a dealer can immediately locate an asset to
purchase in the inter-dealer market and when contacted by a low type customer owner a dealer
can immediately sell the asset in the inter-dealer market.
Finally, as in Duffie, Gârleanu, and Pedersen (2005), we impose the restriction πh > s which
implies that, in a frictionless market, high type customers are marginal.

Reservation values, and prices. We first state standard results about equilibrium. These
results are easily derived, based for example on the calculations of Duffie, Gârleanu, and Pedersen
(2005), or Lagos and Rocheteau (2007). First, the reservation value of high type customers can be
written:
r∆W (yh ) = yh − γπ` Σ,
where
Σ ≡ ∆W (yh ) − ∆W (y` ) =

yh − y`
>0
r + γ + ρm(1 − θ )

is the trade surplus between a high and a low-type customer. Second, given our maintained
assumption that πh > s, the inter-dealer price is
P = ∆W (yh ).
Third, the ask and the bid prices are:
A = θ∆W (yh ) + (1 − θ ) P = θ∆W (yh ),
B = θ∆W (y` ) + (1 − θ ) P = θ∆W (y` ) + (1 − θ )∆W (yh ).

Yield spread and markup. Based on the above we obtain the following expressions for the
yield spread and the markup. First, using that P = ∆W (yh ) and substituting in the formula for
the reservation value of high type customers we find the yield spread s = yh /P − r satisfies:
syh
= γπ` Σ.
r+s

(66)

Since Σ is decreasing in y` and increasing in θ, this equation defines an upward-slopping locus
of pairs (θ, y` ) that are consistent with the same spread level. By an application of the implicit

65

function theorem, the slope of this locus is


−

∂Σ
∂θ

 

∂Σ
/
.
∂y`

Using the above expressions for the bid and the ask price shows that the markup M = A/B − 1
satisfies
Myh
=
1+M



M
rθ + γπ`
1+M



Σ.

(67)

This time, the equation defines an upward slopping locus of pairs (θ, y` ) that consistent with the
same markup level, and the slope of this locus is given by:

−

rΣ
∂Σ
+
M
∂θ
rθ + γπ` 1+ M

! 

∂Σ
/
.
∂y`

Keeping in mind that ∂Σ/∂θ > 0 and ∂Σ/∂y` < 0, one clearly sees that the iso-markup schedule
has a larger slope than the iso-yield schedule. The intuition is that the yield spread depends
on (θ, y` ) only through the surplus: this is because the yield spread capitalizes the loss that an
investor experiences when switching to low. The markup, on the other hand, depends on (θ, y` )
through both the surplus Σ and through the bargaining power θ. For example, the markup can
be very small because of small bargaining power, even if the surplus is large. This means that
bargaining power has a stronger impact on the markup than on the yield spread, leading to the
identification result.
Finally, taking the ratio of (67) and (66) we obtain that
θ=

M γπ`
.
1+M s

where M is the markup, s is the yield spread, and γπ` is approximately equal to turnover. Beside
providing a simple formula for bargaining power as a function of observables, this formula also
shows that, according to the model, the yield spread cannot be too small relative to the markup
because otherwise the bargaining power of dealers would exceed one.

66

E.3

Computations

E.3.1

Reservation values in the main model

In this section we explain how to efficiently calculate the equilibrium reservation values of all
market participants under the assumption that
∆W (y` ) ≤ ∆V ( x` ) < ∆V ( xh ) ≤ ∆W (yh ).

(68)

This assumption is straightforward to verify numerically once reservation values have been calculated, and holds in all of our calibrated examples. Assuming (68) we have that the reservation
value of customers solve:
r∆W (y` ) = y` + γπh (∆W (yh ) − ∆W (y` )) + ρ(1 − θ )
r∆W (yh ) = yh + γπ` (∆W (y` ) − ∆W (yh )) − ρ(1 − θ )

Z xh
x

Z `xh
x`


∆V ( x 0 ) − ∆W (y` ) dΦ0 ( x 0 ),

∆W (yh ) − ∆V ( x 0 ) dΦ1 ( x 0 ).

On the other hand, the reservation value function of dealers solves:
r∆V ( x ) = x + ρµh0 θ (∆W (yh ) − ∆V ( x )) − ρµ`1 θ (∆V ( x ) − ∆W (y` ))

+ λθ1

Z xh
x

∆V ( x 0 ) − ∆V ( x )

Z x
 dΦ0 ( x 0 )
 dΦ1 ( x 0 )
− λθ0
.
∆V ( x ) − ∆V ( x 0 )
m
m
x`

Since the distributions are continuous this equation implies that the reservation value function of
dealers is absolutely continuous with a derivative given by
∆V 0 ( x ) = σ( x ) ≡

r + ρθ (µh0 + µ`1 ) +

λ
m

1
.
(θ1 (m0 − Φ0 ( x )) + θ0 Φ1 ( x ))

The derivative has a natural economic interpretation. Indeed, the quantity σ( x ) dx represents the
“local surplus”, that is, the total gains from trades between a dealer of type x and a dealer of
type x + dx. Computationally, calculating the derivative turns out to be very convenient because
it can be computed before the reservation values, given only the knowledge of the distributions.
Moreover, the fundamental theorem of calculus implies that
∆V ( x ) = ∆V ( x` ) +

Z x
x`

σ( x 0 )dx 0 .

This observation considerably simplifies the computations: Instead of calculating the entire function it is sufficient to calculate ∆V ( x` ) first, and then obtain the reservation values of all other

67

dealers by direct integration. Precisely, substituting the integral equation above for ∆V ( x ) into
the HJB equations shows that the reservation values ∆W (y` ), ∆W (yh ) and ∆V ( x` ) solve the linear
system given by
r∆W (y` ) = y` + γπh (∆W (yh ) − ∆W (y` ))

(69a)

+ ρm0 (1 − θ ) (∆V ( x` ) − ∆W (y` )) + ρ(1 − θ )

Z xh
x`


m0 − Φ0 ( x 0 ) σ( x 0 )dx 0

r∆W (yh ) = yh + γπ` (∆W (y` ) − ∆W (yh ))

(69b)

+ ρm1 (1 − θ ) (∆V ( x` ) − ∆W (yh )) + ρ(1 − θ )

Z xh
x`


m1 − Φ1 ( x 0 ) σ ( x 0 )dx 0

r∆V ( x` ) = x` + ρµh0 θ (∆W (yh ) − ∆V ( x` ))

− ρµ`1 θ (∆V ( x` ) − ∆W (y` )) + λθ1

(69c)

Z xh 
m0 − Φ0 ( x 0 )
x`

m

σ( x 0 )dx 0 ,

where, e.g., the last equation is derived by noting that
Z xh
x`


Z xh  Z x0
 dΦ0 ( x 0 )
dΦ0 ( x 0 )
∆V ( x ) − ∆V ( x` )
=
σ(z)dz
m
m
x`
x`
0

and changing the order of integration.

E.3.2

Reservation values in the extended model

Let us index each high type customer by the utility type x ∈ [ x` , xh ] of the dealers it matches with.
Hence, a high type customer who matches with dealers of type x derives the flow utility yh + ε( x )
whenever he holds the asset. Let us assume that as in the main model the reservation value of
dealers is strictly increasing and such that
∆W (y` ) ≤ ∆V ( x` ) < ∆V ( xh ) ≤ ∆W (yh , x ).
This assumption is straightforward to verify numerically once reservation values have been calculated, and implies that the trading pattern of our model with k0 = k1 = 0 remain optimal. As
a result, the equilibrium distributions solve the exact same equations as before. Only the HJB
equations for the reservation values change. Specifically, the reservation value of a high type
customer who matches with dealers of type x solves
r∆W (yh , x ) = yh + ε( x ) + γπ` (∆W (y` ) − ∆W (yh , x )) − ρm1 (1 − θ ) (∆W (yh , x ) − ∆V ( x )) .

68

This equation differs from its counterpart in the main model in two ways. First, the utility flow
is different, reflecting heterogeneity among high type customers. Second, the last term is different, reflecting the fact that the type-x customers only match with dealers of type x. Next, the
reservation value of low-valuation customer solves:
r∆W (y` ) = y` + ρ(1 − θ )

+ γπh

Z xh
x`

Z xh
x`


∆V ( x 0 ) − ∆W (y` ) dΦ0 ( x 0 )

(∆W (yh , x ) − ∆W (y` )) ε0 ( x )dF (ε( x )) .

This equation differs from its counterpart in the main model in only one way. The second term is
different because, upon switching to the high type, customers draw their extra utility at random
according to the distribution F (e). After making the change of variable e = ε( x ), one obtains
Rx
that the average reservation value of high type customers is equal to x h ∆W (yh , x )dF (ε( x )) ε0 ( x ),
`

which explains the formula for the second term on the right-hand side of the equation. Finally, the
reservation value function of dealers solves:
r∆V ( x ) = y` + ρµh0 θ (∆W (yh , x ) − ∆V ( x )) − ρµ`1 θ (∆V ( x ) − ∆W (y` ))

+ λθ1

Z xh
x

∆V ( x 0 ) − ∆V ( x )

Z x
 dΦ1 ( x 0 )
 dΦ0 ( x 0 )
− λθ0
∆V ( x ) − ∆V ( x 0 )
,
m
m
x`

where we assumed as in the text that the utility flow of a dealer is the same as that of a low type
customer (this can be relaxed, for example by assuming that the utility flow is an increasing and
differentiable function of the dealer’s type, x). Following the same logic as in Section E.3.1 we
have that the derivatives
d
∆V ( x ),
dx
∂
σW ( x ) ≡
∆W (yh , x ),
∂x
σV ( x ) ≡

satisfy the linear system given by
ε0 ( x )
ρm1 (1 − θ )σV ( x )
+
,
r + γπ` + ρm1 (1 − θ ) r + γπ` + ρm1 (1 − θ )
ρµh0 θσW ( x )
σV ( x ) =
.
λ
r + ρµh0 θ + ρµ`1 θ + m
(θ1 (m0 − Φ0 ( x )) + θ0 Φ1 ( x ))

σW ( x ) =

Solving this system provides formulas for σW ( x ) and σV ( x ) that only depend on the equilibrium
distributions, and combining these formulas with the fundamental theorem of calculus finally

69

shows that ∆V ( x` ), ∆W (y` ), and ∆W (yh , x` ) solve the linear system given by
r∆W (yh , x` ) = yh + ε( x` ) + γπ` (∆W (y` ) − ∆W (yh , x` ))

+ ρm1 (1 − θ ) (∆V ( x` ) − ∆W (yh , x` ))
r∆W (y` ) = y` + γπh (∆W (yh , x` ) − ∆W (y` )) + γπh

Z xh
x`

Φ1 ( x )
σW ( x ) 1 −
m1

+ ρm0 (1 − θ ) (∆V ( x` ) − ∆W (y` )) + ρ(1 − θ )



Z xh
x`


dx

σV ( x ) (m0 − Φ0 ( x )) dx

r∆V ( x` ) = y` + ρµh0 θ (∆W (yh , x` ) − ∆V ( x` ))

− ρµ`1 θ (∆V (y` ) − ∆W ( x` )) + λθ1

Z xh
x`


σV ( x )

m0 − Φ0 ( x )
m


dx

where, in the second equation, we used the assortative matching condition (22).

E.4

Distribution of markups

Definitions. Let x(1) < x(2) < . . . < x(k) denote the utility types of successive dealers in an
intermediation chain of length n = k and denote by P( j) denote the price at which the jth dealer
resells the asset. With this notation, the bid and ask prices correspond to j = 0 and j = k:


P(0) = Bid = θ∆W (y` ) + (1 − θ )∆V x (1) ,




P(k) = Ask = θ∆W yh , x (k) + (1 − θ )∆V x (k) ,
while the successive inter-dealer prices correspond to j ∈ {1, 2, . . . , k − 1}:
 


P( j) = θ0 ∆V x ( j) + θ1 ∆V x ( j+1) .
The total markup along the intermediation chain is then defined as:
M=

P ( k ) − P (0)
=
P (0)

k

∑ M ( j)

j =1

where
M ( j) ≡

P ( j ) − P ( j −1)
,
P (0)

is the markup of the jth dealer in the chain.

70

The calculation. To reproduce the model-implied equivalent of Table 7 in Li and Schürhoff
(2014) we need to calculate ratio
h
i
1
E M ( j) { n = k } ,
E [ M| {n = k }]

(70)

of the expected markup of dealer j conditional on chain length to the expected total markup. This
can be a complicated multidimensional integral if we integrate against the joint distribution of all
types in the chain, conditional on n = k. However, the calculation can be simplified because we
have closed form solution for all the relevant marginal distributions. Specifically, since
h

i

E M ( j) { n = k } = E

"

#
"
#
P ( j −1)
P( j)
{n = k} − E
{n = k} .
P (0)
P (0)

and the prices are convex combinations of reservation values, we have that the elementary integral
needed to compute (70) is given by
 
∆V x ( j)


E



θ∆W (y` ) + (1 − θ )∆V x (1)

 {n = k} .

This observation reduces the calculations to that of a several double integrals against the joint
distribution of x (1) and x ( j) ) conditional on n = k that we compute next.

The joint distribution of x (1) and x ( j) conditional on n = k. The result of Lemma 3 implies
that we have
ρµh0
−dλ1 ( x 0 ) Λ( x, x 0 )k−2
0
ρµh0 + λ1 ( x ) ρµh0 + λ1 ( x ) (k − 2)!


ρµh0
Λ( x, x 0 )k−1
=
∂ x0
,
ρµh0 + λ1 ( x 0 )
( k − 1) !



P {n = k } ∩ { x (k) ∈ dx 0 } { x (1) = x } =

for all x ≤ x 0 and integrating with respect to x 0 ∈ [ x, xh ] shows that


P {n = k }| { x (1) = x } =

ρµh0
Λ( x, xh )k−1
.
ρµh0 + λ1 ( x ) (k − 1)!

71

(71)

With this in mind, we fix arbitrary 2 ≤ j ≤ k and calculate that


P {n = k } ∩ { x ( j) ∈ dx j } { x (1) = x1 }


= P {n = k} ∩ { x ( j) ∈ dx j } ∩ {n ≥ j} { x (1) = x1 }


= P { x ( j) ∈ dx j } ∩ {n ≥ j} { x (1) = x1 }


× P {n = k}| { x ( j) ∈ dx j } ∩ {n ≥ j} ∩ { x (1) = x1 }




= P {n = k − j + 1}| { x (1) ∈ dx j } × P { x ( j) = x j } ∩ {n ≥ j} { x (1) = x1 }
!
!
Λ( x j , xh )k− j
−dλ1 ( x j ) Λ( x1 , x j ) j−2
ρµh0
=
ρµh0 + λ1 ( x j ) (k − j)!
ρµh0 + λ1 ( x1 ) ( j − 2)!
where the first equality follows from the fact that j ≤ k; the second equality follows from Bayes’
rule; the third equality follows from the fact that ( x ( j) )∞
j=1 is a Markov chain; and the last equality
follows from (71) and Lemma 3. Dividing both sides of this expression (71) then gives


P { x ( j) ∈ dx j } {n = k } ∩ { x (1) = x1 }

=

−dλ1 ( x j ) Λ( x j , xh )k− j Λ( x1 , x j ) j−2 (k − 1)!
,
ρµh0 + λ1 ( x j ) (k − j)!
( j − 2 ) ! Λ ( x 1 , x h ) k −1

and it now follows from Lemma 7 and Bayes’ rule that the relevant joint distribution for all the
markup calculations is explicitly given by


P { x (1) ∈ dx1 } ∩ { x ( j) ∈ dx j } {n = k }

 

= P { x (1) ∈ dx1 } {n = k} P { x ( j) ∈ dx j } {n = k} ∩ { x (1) = x1 }
!
!
−dλ1 ( x j ) Λ( x j , xh )k− j
k!
−dλ1 ( x1 ) Λ( x1 , x j ) j−2
=
.
ρµh0 + λ1 ( x j ) (k − j)!
Λ( x` , xh )k ρµh0 + λ1 ( x1 ) ( j − 2)!

F

Auxiliary results

This section gathers technical results that were used in the proofs of our main results.
Lemma F.1 Assume that the operator T : X → X satisfies Blackwell’s conditions and let a ∈ R be given.
Then a( G − T [ G ]) ≥ 0 implies that a( G − G ∗ ) ≥ 0 where G ∗ is the unique fixed point of T in X .
Proof. Iterating the given condition shows that a( G − T n [ G ]) ≥ 0 for all n ≥ 1 and the result now
follows from the assumption that T is a contraction.

72



Lemma F.2 Assume that the function f : D × K → R is continuous in δ for each fixed k ∈ K and
equicontinuous in k. Then it is jointly continuous in (δ, k ).
Proof. Fix a point (δ0 , k0 ) ∈ D × K and let e > 0. Since f (δ, k ) is continuous in δ for each fixed k
we there exists a constant α > 0 such that

|δ − δ0 | < α =⇒ | f (δ, k0 ) − f (δ0 , k0 )| < e/2.
On the other hand, because f (δ, k ) is equicontinuous in k we know that there exists a constant
β > 0 such that

|k − k0 | < β =⇒ sup | f (δ, k) − f (δ, k0 )| < e/2
δ∈D

and the desired result now follows by combining the two estimates.



Lemma F.3 Assume that the operator O : K × X0 → X0 is continuous in k ∈ K for each fixed f ∈ X0
and such that
sup |(O[k, f ] − O[k, g]) (α, δ)| ≤ β sup |( f − g) (α, δ)| ,
(α,δ,k)

( f , g) ∈ X02 ,

(α,δ)

for some β < 1. Then for each k ∈ K there exists a unique f k ∈ X0 such that f k = O[k, f k ] and the
mapping k 7→ f k is continuous from K into X .
Proof. Fix a point k ∈ K and let e > 0 be arbitrary. Using the assumed continuity of the operator

O we can pick a constant ϕ > 0 such that

|k − k0 | < ϕ =⇒ sup | O[k, f k ] − O[k0 , f k ] (α, δ)| < (1 − β)e
(α,δ)

where β < 1 is the constant given in the statement. Combining this with the triangle inequality
then shows that

sup |( f k − f k0 )(α, δ)| = sup | O[k, f k ] − O[k0 , f k0 ] (α, δ)|
(α,δ)

(α,δ)



≤ sup | O[k, f k ] − O[k0 , f k ] (α, δ)| + sup | O[k0 , f k ] − O[k0 , f k0 ] (α, δ)|
(α,δ)

(α,δ)

< (1 − β)e + β sup | ( f k − f k0 ) (α, δ)|
(α,δ)

for all |k − k0 | < ϕ and the desired result follows.

73



Lemma F.4 Assume that f : D × K → R is continuous and such that
c≤

f (δ0 , k ) − f (δ, k )
≤ C,
δ0 − δ

(k, δ, δ0 ) ∈ K × D 2 ,

(72)

for some constants 0 < c ≤ C. Then there exists a unique ĝ : K → R such that f ( ĝ(k ), k ) = 0 for all
k ∈ K and this function is continuous.
Proof. Consider the family of functions (σk )k∈K defined by
σk (δ) ≡ δ − f (δ, k )/C.
As is easily seen we have that ĝ(k) ∈ R solves f ( ĝ(k), k ) = 0 if and only if it is a fixed point of σk .
Therefore, the first part will follow if we show that σk (δ) is a contraction for each fixed k ∈ K. To
this end it suffices to observe that we have
f (δ0 , k) − f (δ, k)
σk (δ0 ) − σk (δ)
=
1
−
δ0 − δ
C (δ0 − δ)
and therefore

σk (δ0 ) − σk (δ)
c
f (δ0 , k ) − f (δ, k )
<1
=
≤
1
−
1
−
δ0 − δ
C (δ0 − δ)
C
as a result of (72). Let now C (K ) denote the set of continuous functions on K and consider the
operator defined by
Σ[ G ](k) ≡ G (k ) − f ( G (k ), k )/C.
Since f (δ, k ) is by assumption continuous we have that Σ maps C (K ) into itself. On the other hand,
using (72) in conjunction with the same arguments as in the first part of the proof we deduce that

c
sup |Σ[ G ](k ) − Σ[ H ](k )| ≤ 1 −
sup | G (k ) − H (k )|
C k∈K
k∈K
and it follows that Σ admits a unique fixed point Ĝ ∈ C (K ). Since this fixed point satisfies
f ( Ĝ (k ), k ) = 0 for all k ∈ K it now follows from the uniqueness established in the first part
that the function ĝ(k ) = Ĝ (k ) is continuous.



74

References
Gara Afonso. Liquidity and congestion. Journal of Financial Intermediation, 20(3):324–360, 2011.
Gara Afonso and Ricardo Lagos. Trade dynamics in the market for federal funds. Econometrica,
83:263–313, 2015.
Fernando Alvarez and Gadi Barlevy. Mandatory disclosure and financial contagion. Technical
report, Working Paper, Federal Reserve Bank of Chicago, 2014.
Andrew Ang, Vineer Bhansali, and Yuhang Xing. The muni bond spread: Credit, liquidity, and
tax. 2014.
Andrew Atkeson, Andrea Eisfeldt, and Pierre-Olivier Weill.

The market of otc derivatives.

Technical report, Working paper, UCLA, 2013.
Andrew Atkeson, Andrea Eisfeldt, and Pierre-Olivier Weill. Entry and exit in otc derivatives
markets. Econometrica, 83(6):2231–2292, 2015.
Ana Babus and Peter Kondor. Trading and information diffusion in otc markets. Econometrica,
Forthcoming.
Zachary Bethune, Bruno Sultanum, and Nicholas Trachter.

Private information in over-the-

counter markets. Technical report, Working paper, University of Virginia and Federal Rerserve
Bank of Richmond, 2016.
Bruno Biais, Johan Hombert, and Pierre-olivier Weill. Equilibrium pricing and trading volume
under preference uncertainty. Review of Economic Studies, 81:1401–1437, 2014.
Simon Board and Moritz Meyer-Ter-Vehn. Relational contracts in competitive labour markets.
Review of Financial Studies, 82:490–534, 2015.
Jesse Bricker, Lisa J. Dettling, Alice Henriques, Joanne W. Hsu, Lindsay Jacobs, Kevin B. Moore,
Sarah Pack, John Sabelhaus, Jeffrey Thompson, and Richard A. Windle. Changes in u.s. family
finance from 2013 to 2016: Evidences from the survey of consumer finances. Federal Reserve
Bulletin, 2017.
Briana Chang and Shengxing Zhang.

Endogenous market making and network formation.

Working paper, University of Wisconsin and London School of Economics, 2015.
Jean-Edouard Colliard and Gabrielle Demange. Cash providers: Asset dissemination over intermediation chains. Working Paper, HEC and PSE, 2014.
Jean-Edouard Colliard, Thierry Foucault, and Peter Hoffmann. Inventory management, dealers’
connections, and prices in otc markets. Working paper, HEC Paris and European Central Bank,
2018.
Julienen Cujean and Rémy Praz. Asymmetric information and inventory concerns in over-thecounter markets. Working Paper, University of Maryland, 2013.

75

Marco Di Maggio, Amir Kermani, and Zhaogang Song. The value of trading relationships in
turbulent times. Journal of Financial Economics, 124:266–284, 2017.
Peter Diamond. Journal of Economic Theory, 3:156–168, 1971.
Darrell Duffie, Nicolae Gârleanu, Nicolae, and Lasse H. Pedersen. Over-the-Counter Markets.
Econometrica, 73(6):1815–1847, 2005.
Darrell Duffie, Nicolae Gârleanu, and Lasse H. Pedersen. Valuation in over-the-counter markets.
Review of Financial Studies, 20:1865–1900, 2007.
Maryam Farboodi, Gregor Jarosch, and Robert Shimer.

The emergence of market structure.

Technical report, Working paper Princeton University and University of Chicago, 2016.
Maryam Farboodi, Gregor Jarosch, and Guido Menzio. Intermediation as rent extraction. Technical report, Working paper Princeton University and New York University, 2018.
Peter Feldhütter. The same bond at different prices: Identifying search frictions and selling
pressures. Review of Financial Studies, 25(4):1155–1206, 2012.
Nicolae Gârleanu. Portfolio choice and pricing in illiquid markets. Journal of Economic Theory, 144
(2):532–564, 2009.
Alessandro Gavazza. Leasing and secondary markets: Theory and evidence from commercial
aircraft. Journal of Political Economy, 119(2):325–377, 2011.
Alessandro Gavazza. An empirical equilibrium model of a decentralized asset market. Econometrica, 84:1755–1798, 2016.
Thomas Gehrig. Intermediation in search markets. Journal of Economics & Management Strategy, 2
(1):97–120, 1993.
Vincent Glode and Christian Opp.

Adverse selection and intermediation chains.

American

Economic Review, 106:2699–2721, 2016.
Ronald L. Goettler, Christine A. Parlour, and Uday Rajan. Equilibrium in a dynamic limit order
market. The Journal of Finance, 60(5):2149–2192, 2005.
Ronald L. Goettler, Christine A. Parlour, and Uday Rajan. Informed traders and limit order
markets. Journal of Financial Economics, 93:67 – 87, 2009.
Michael Gofman. A network-based analysis of over-the-counter markets. Working Paper, University of Wisconsin-Madison, 2010.
Richard Green, Burton Hollifield, and Norman Schürhoff. Financial intermediation and the costs
of trading in an opaque market. Review of Financial Studies, 20:275–314, 2006.
Richard Green, Burton Hollifield, and Norman Schürhoff.

Dealer intermediation and price

behavior in the aftermarket for new bond issues. Journal of Financial Economics, (86):643–682,
2007.

76

Zhiguo He and Konstantin Milbradt. Endogenous liquidity and defaultable bonds. Econometrica,
82(4):1443–1508, 2014.
Burton Hollifield, Artem Neklyudov, and Chester Spatt. Bid-ask spreads, trading networks and
the pricing of securitizations: 144a vs. registered securitization. Working paper, CMU and HEC
Lausanne, 2014.
Julien Hugonnier. Speculative behavior in decentralized markets. Working Paper, Swiss Finance
Institute, 2012.
Julien Hugonnier, Benjamin Lester, and Pierre-Olivier Weill. Heterogeneity in decentralized asset
markets. Working paper, EPFL, University of California, and the Federal Reserve Bank of
Philadelphia, 2014.
Ricardo Lagos and Guillaume Rocheteau. Search in asset markets: Market structure, liquidity, and
welfare. The American Economic Review, 97(2):198–202, 2007.
Ricardo Lagos and Guillaume Rocheteau.

Liquidity in asset markets with search frictions.

Econometrica, 77:403–426, 2009.
Ricardo Lagos, Guillaume Rocheteau, and Pierre-Olivier Weill. Crises and liquidity in over-thecounter markets. Journal of Economic Theory, 146(6):2169–2205, 2011.
Benjamin Lester and Pierre-Olivier Weill. Over-the-counter markets with continuous valuations.
Working Paper, UCLA, 2013.
Benjamin Lester, Guillaume Rocheteau, and Pierre-olivier Weill. Competing for order flow in otc
markets. Journal of Money, Credit and Banking, 47(S2):77–126, 2015.
Dan Li and Norman Schürhoff. Dealer networks. Working Paper, HEC Lausanne, 2014.
Shuo Liu. Agents’ meeting technology in over-the-counter markets. Working paper, UCLA, 2018.
Semyon Malamud and Marzena Rostek. Decentralized exchange. American Economic Review, 107:
3320–3362, 2017.
Artem Neklyudov. Bid-ask spreads and the over-the-counter interdealer markets: Core and
peripheral dealers. Working Paper HEC Lausanne, 2012.
Artem Neklyudov and Batchimeg Sambalaibat. Endogenous specialization in dealer networks.
Working paper, University of Lausanne, 2017.
Ezra Oberfield. Business networks, production chains, and productivity: A theory of input-output
architecture. Working Paper, Princeton Universit, 2013.
Emiliano Pagnotta and Thomas Philippon. Competing on speed. Econometrica, 86:1067–1115, 2018.
Working Paper, NYU Stern School of Business.
Rémy Praz. Equilibrium asset pricing with both liquid and illiquid markets. Working Paper, Swiss
Finance Institute at EPFL, 2013.

77

John Rust and George Hall. Middlemen versus market makers: A theory of competitive exchange.
Journal of Political Economy, 111(2):353–403, 2003.
Jacob Sagi. Asset-level risk and return in real estate investments. Working paper, UNC KenanFlagler Business School, 2015.
Ji Shen, Bin Wei, and Hongjun Yan. Financial intermediation chains in an otc market. Technical
report, Working paper DePaul University, 2015.
Daniel Spulber. Market making by price-setting firms. The Review of Economic Studies, 63(4):559–
580, 1996.
Alberto Trejos and Randall Wright. Search-based models of money and finance: An integrated
approach. Journal of Economic Theory, Forthcoming, 2014.
U.S. Securities and Exchange Commission. Report on the municipal securities market. Technical
report, 2012.
Semih Üslü. Pricing and liquidity in decentralized asset markets. Technical report, UCLA, 2015.
Dimitri Vayanos and Tan Wang.

Search and endogenous concentration of liquidity in asset

markets. Journal of Economic Theory, 136(1):66–104, 2007.
Dimitri Vayanos and Pierre-Olivier Weill. A search-based theory of the on-the-run phenomenon.
Journal of Finance, 63:1361–1398, 2008.
Pierre-Olivier Weill. Leaning against the wind. The Review of Economic Studies, 74(4):1329–1354,
2007.
Pierre-Olivier Weill. Liquidity premia in dynamic bargaining markets. Journal of Economic Theory,
140(1):66–96, 2008.
Brian Weller. Intermediation chains. Technical report, Working paper, University of Chicago, 2014.
Shengxing Zhang. Liquidity missallocation in an over-the-counter market. Journal of Economic
Theory, 174:16–56, 2018.

78

